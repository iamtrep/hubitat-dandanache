(()=>{var ys=(R=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(R,{get:(d,m)=>(typeof require<"u"?require:d)[m]}):R)(function(R){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+R+'" is not supported')});var Sn=globalThis,Ro=Sn.ShadowRoot&&(Sn.ShadyCSS===void 0||Sn.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Oo=Symbol(),Ta=new WeakMap,Cn=class{constructor(d,m,C){if(this._$cssResult$=!0,C!==Oo)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=d,this.t=m}get styleSheet(){let d=this.i,m=this.t;if(Ro&&d===void 0){let C=m!==void 0&&m.length===1;C&&(d=Ta.get(m)),d===void 0&&((this.i=d=new CSSStyleSheet).replaceSync(this.cssText),C&&Ta.set(m,d))}return d}toString(){return this.cssText}},xh=R=>new Cn(typeof R=="string"?R:R+"",void 0,Oo),pi=(R,...d)=>{let m=R.length===1?R[0]:d.reduce((C,I,Q)=>C+(W=>{if(W._$cssResult$===!0)return W.cssText;if(typeof W=="number")return W;throw Error("Value passed to 'css' function must be a 'css' function result: "+W+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(I)+R[Q+1],R[0]);return new Cn(m,R,Oo)},vh=(R,d)=>{if(Ro)R.adoptedStyleSheets=d.map(m=>m instanceof CSSStyleSheet?m:m.styleSheet);else for(let m of d){let C=document.createElement("style"),I=Sn.litNonce;I!==void 0&&C.setAttribute("nonce",I),C.textContent=m.cssText,R.appendChild(C)}},Ea=Ro?R=>R:R=>R instanceof CSSStyleSheet?(d=>{let m="";for(let C of d.cssRules)m+=C.cssText;return xh(m)})(R):R,{is:wh,defineProperty:_h,getOwnPropertyDescriptor:kh,getOwnPropertyNames:Mh,getOwnPropertySymbols:Sh,getPrototypeOf:Ch}=Object,In=globalThis,Da=In.trustedTypes,Th=Da?Da.emptyScript:"",Eh=In.reactiveElementPolyfillSupport,Js=(R,d)=>R,Do={toAttribute(R,d){switch(d){case Boolean:R=R?Th:null;break;case Object:case Array:R=R==null?R:JSON.stringify(R)}return R},fromAttribute(R,d){let m=R;switch(d){case Boolean:m=R!==null;break;case Number:m=R===null?null:Number(R);break;case Object:case Array:try{m=JSON.parse(R)}catch{m=null}}return m}},ja=(R,d)=>!wh(R,d),Pa={attribute:!0,type:String,converter:Do,reflect:!1,hasChanged:ja};Symbol.metadata??=Symbol("metadata"),In.litPropertyMetadata??=new WeakMap;var vs=class extends HTMLElement{static addInitializer(d){this.o(),(this.l??=[]).push(d)}static get observedAttributes(){return this.finalize(),this.u&&[...this.u.keys()]}static createProperty(d,m=Pa){if(m.state&&(m.attribute=!1),this.o(),this.elementProperties.set(d,m),!m.noAccessor){let C=Symbol(),I=this.getPropertyDescriptor(d,C,m);I!==void 0&&_h(this.prototype,d,I)}}static getPropertyDescriptor(d,m,C){let{get:I,set:Q}=kh(this.prototype,d)??{get(){return this[m]},set(W){this[m]=W}};return{get(){return I?.call(this)},set(W){let ht=I?.call(this);Q.call(this,W),this.requestUpdate(d,ht,C)},configurable:!0,enumerable:!0}}static getPropertyOptions(d){return this.elementProperties.get(d)??Pa}static o(){if(this.hasOwnProperty(Js("elementProperties")))return;let d=Ch(this);d.finalize(),d.l!==void 0&&(this.l=[...d.l]),this.elementProperties=new Map(d.elementProperties)}static finalize(){if(this.hasOwnProperty(Js("finalized")))return;if(this.finalized=!0,this.o(),this.hasOwnProperty(Js("properties"))){let m=this.properties,C=[...Mh(m),...Sh(m)];for(let I of C)this.createProperty(I,m[I])}let d=this[Symbol.metadata];if(d!==null){let m=litPropertyMetadata.get(d);if(m!==void 0)for(let[C,I]of m)this.elementProperties.set(C,I)}this.u=new Map;for(let[m,C]of this.elementProperties){let I=this.p(m,C);I!==void 0&&this.u.set(I,m)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(d){let m=[];if(Array.isArray(d)){let C=new Set(d.flat(1/0).reverse());for(let I of C)m.unshift(Ea(I))}else d!==void 0&&m.push(Ea(d));return m}static p(d,m){let C=m.attribute;return C===!1?void 0:typeof C=="string"?C:typeof d=="string"?d.toLowerCase():void 0}constructor(){super(),this.v=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.m=null,this._()}_(){this.S=new Promise(d=>this.enableUpdating=d),this._$AL=new Map,this.$(),this.requestUpdate(),this.constructor.l?.forEach(d=>d(this))}addController(d){(this.P??=new Set).add(d),this.renderRoot!==void 0&&this.isConnected&&d.hostConnected?.()}removeController(d){this.P?.delete(d)}$(){let d=new Map,m=this.constructor.elementProperties;for(let C of m.keys())this.hasOwnProperty(C)&&(d.set(C,this[C]),delete this[C]);d.size>0&&(this.v=d)}createRenderRoot(){let d=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return vh(d,this.constructor.elementStyles),d}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this.P?.forEach(d=>d.hostConnected?.())}enableUpdating(d){}disconnectedCallback(){this.P?.forEach(d=>d.hostDisconnected?.())}attributeChangedCallback(d,m,C){this._$AK(d,C)}C(d,m){let C=this.constructor.elementProperties.get(d),I=this.constructor.p(d,C);if(I!==void 0&&C.reflect===!0){let Q=(C.converter?.toAttribute!==void 0?C.converter:Do).toAttribute(m,C.type);this.m=d,Q==null?this.removeAttribute(I):this.setAttribute(I,Q),this.m=null}}_$AK(d,m){let C=this.constructor,I=C.u.get(d);if(I!==void 0&&this.m!==I){let Q=C.getPropertyOptions(I),W=typeof Q.converter=="function"?{fromAttribute:Q.converter}:Q.converter?.fromAttribute!==void 0?Q.converter:Do;this.m=I,this[I]=W.fromAttribute(m,Q.type),this.m=null}}requestUpdate(d,m,C){if(d!==void 0){if(C??=this.constructor.getPropertyOptions(d),!(C.hasChanged??ja)(this[d],m))return;this.T(d,m,C)}this.isUpdatePending===!1&&(this.S=this.A())}T(d,m,C){this._$AL.has(d)||this._$AL.set(d,m),C.reflect===!0&&this.m!==d&&(this.M??=new Set).add(d)}async A(){this.isUpdatePending=!0;try{await this.S}catch(m){Promise.reject(m)}let d=this.scheduleUpdate();return d!=null&&await d,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this.v){for(let[I,Q]of this.v)this[I]=Q;this.v=void 0}let C=this.constructor.elementProperties;if(C.size>0)for(let[I,Q]of C)Q.wrapped!==!0||this._$AL.has(I)||this[I]===void 0||this.T(I,this[I],Q)}let d=!1,m=this._$AL;try{d=this.shouldUpdate(m),d?(this.willUpdate(m),this.P?.forEach(C=>C.hostUpdate?.()),this.update(m)):this.k()}catch(C){throw d=!1,this.k(),C}d&&this._$AE(m)}willUpdate(d){}_$AE(d){this.P?.forEach(m=>m.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(d)),this.updated(d)}k(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.S}shouldUpdate(d){return!0}update(d){this.M&&=this.M.forEach(m=>this.C(m,this[m])),this.k()}updated(d){}firstUpdated(d){}};vs.elementStyles=[],vs.shadowRootOptions={mode:"open"},vs[Js("elementProperties")]=new Map,vs[Js("finalized")]=new Map,Eh?.({ReactiveElement:vs}),(In.reactiveElementVersions??=[]).push("2.0.4");var zo=globalThis,Tn=zo.trustedTypes,Aa=Tn?Tn.createPolicy("lit-html",{createHTML:R=>R}):void 0,Lo="$lit$",hs=`lit$${Math.random().toFixed(9).slice(2)}$`,Ho="?"+hs,Dh=`<${Ho}>`,Ps=document,en=()=>Ps.createComment(""),sn=R=>R===null||typeof R!="object"&&typeof R!="function",Va=Array.isArray,Ya=R=>Va(R)||typeof R?.[Symbol.iterator]=="function",Co=`[ 	
\f\r]`,Zs=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ra=/-->/g,Oa=/>/g,Es=RegExp(`>|${Co}(?:([^\\s"'>=/]+)(${Co}*=${Co}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),za=/'/g,La=/"/g,qa=/^(?:script|style|textarea|title)$/i,Ga=R=>(d,...m)=>({_$litType$:R,strings:d,values:m}),pe=Ga(1),Ph=Ga(2),Fe=Symbol.for("lit-noChange"),ue=Symbol.for("lit-nothing"),Ha=new WeakMap,Ds=Ps.createTreeWalker(Ps,129);function Xa(R,d){if(!Array.isArray(R)||!R.hasOwnProperty("raw"))throw Error("invalid template strings array");return Aa!==void 0?Aa.createHTML(d):d}var Qa=(R,d)=>{let m=R.length-1,C=[],I,Q=d===2?"<svg>":"",W=Zs;for(let ht=0;ht<m;ht++){let q=R[ht],Dt,It,bt=-1,xt=0;for(;xt<q.length&&(W.lastIndex=xt,It=W.exec(q),It!==null);)xt=W.lastIndex,W===Zs?It[1]==="!--"?W=Ra:It[1]!==void 0?W=Oa:It[2]!==void 0?(qa.test(It[2])&&(I=RegExp("</"+It[2],"g")),W=Es):It[3]!==void 0&&(W=Es):W===Es?It[0]===">"?(W=I??Zs,bt=-1):It[1]===void 0?bt=-2:(bt=W.lastIndex-It[2].length,Dt=It[1],W=It[3]===void 0?Es:It[3]==='"'?La:za):W===La||W===za?W=Es:W===Ra||W===Oa?W=Zs:(W=Es,I=void 0);let Ut=W===Es&&R[ht+1].startsWith("/>")?" ":"";Q+=W===Zs?q+Dh:bt>=0?(C.push(Dt),q.slice(0,bt)+Lo+q.slice(bt)+hs+Ut):q+hs+(bt===-2?ht:Ut)}return[Xa(R,Q+(R[m]||"<?>")+(d===2?"</svg>":"")),C]},nn=class R{constructor({strings:d,_$litType$:m},C){let I;this.parts=[];let Q=0,W=0,ht=d.length-1,q=this.parts,[Dt,It]=Qa(d,m);if(this.el=R.createElement(Dt,C),Ds.currentNode=this.el.content,m===2){let bt=this.el.content.firstChild;bt.replaceWith(...bt.childNodes)}for(;(I=Ds.nextNode())!==null&&q.length<ht;){if(I.nodeType===1){if(I.hasAttributes())for(let bt of I.getAttributeNames())if(bt.endsWith(Lo)){let xt=It[W++],Ut=I.getAttribute(bt).split(hs),Jt=/([.?@])?(.*)/.exec(xt);q.push({type:1,index:Q,name:Jt[2],strings:Ut,ctor:Jt[1]==="."?Dn:Jt[1]==="?"?Pn:Jt[1]==="@"?An:Rs}),I.removeAttribute(bt)}else bt.startsWith(hs)&&(q.push({type:6,index:Q}),I.removeAttribute(bt));if(qa.test(I.tagName)){let bt=I.textContent.split(hs),xt=bt.length-1;if(xt>0){I.textContent=Tn?Tn.emptyScript:"";for(let Ut=0;Ut<xt;Ut++)I.append(bt[Ut],en()),Ds.nextNode(),q.push({type:2,index:++Q});I.append(bt[xt],en())}}}else if(I.nodeType===8)if(I.data===Ho)q.push({type:2,index:Q});else{let bt=-1;for(;(bt=I.data.indexOf(hs,bt+1))!==-1;)q.push({type:7,index:Q}),bt+=hs.length-1}Q++}}static createElement(d,m){let C=Ps.createElement("template");return C.innerHTML=d,C}};function As(R,d,m=R,C){if(d===Fe)return d;let I=C!==void 0?m.U?.[C]:m.N,Q=sn(d)?void 0:d._$litDirective$;return I?.constructor!==Q&&(I?._$AO?.(!1),Q===void 0?I=void 0:(I=new Q(R),I._$AT(R,m,C)),C!==void 0?(m.U??=[])[C]=I:m.N=I),I!==void 0&&(d=As(R,I._$AS(R,d.values),I,C)),d}var En=class{constructor(d,m){this._$AV=[],this._$AN=void 0,this._$AD=d,this._$AM=m}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}O(d){let{el:{content:m},parts:C}=this._$AD,I=(d?.creationScope??Ps).importNode(m,!0);Ds.currentNode=I;let Q=Ds.nextNode(),W=0,ht=0,q=C[0];for(;q!==void 0;){if(W===q.index){let Dt;q.type===2?Dt=new Nn(Q,Q.nextSibling,this,d):q.type===1?Dt=new q.ctor(Q,q.name,q.strings,this,d):q.type===6&&(Dt=new Rn(Q,this,d)),this._$AV.push(Dt),q=C[++ht]}W!==q?.index&&(Q=Ds.nextNode(),W++)}return Ds.currentNode=Ps,I}R(d){let m=0;for(let C of this._$AV)C!==void 0&&(C.strings!==void 0?(C._$AI(d,C,m),m+=C.strings.length-2):C._$AI(d[m])),m++}},Nn=class Ka{get _$AU(){return this._$AM?._$AU??this.V}constructor(d,m,C,I){this.type=2,this._$AH=ue,this._$AN=void 0,this._$AA=d,this._$AB=m,this._$AM=C,this.options=I,this.V=I?.isConnected??!0}get parentNode(){let d=this._$AA.parentNode,m=this._$AM;return m!==void 0&&d?.nodeType===11&&(d=m.parentNode),d}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(d,m=this){d=As(this,d,m),sn(d)?d===ue||d==null||d===""?(this._$AH!==ue&&this._$AR(),this._$AH=ue):d!==this._$AH&&d!==Fe&&this.L(d):d._$litType$!==void 0?this.I(d):d.nodeType!==void 0?this.j(d):Ya(d)?this.D(d):this.L(d)}H(d){return this._$AA.parentNode.insertBefore(d,this._$AB)}j(d){this._$AH!==d&&(this._$AR(),this._$AH=this.H(d))}L(d){this._$AH!==ue&&sn(this._$AH)?this._$AA.nextSibling.data=d:this.j(Ps.createTextNode(d)),this._$AH=d}I(d){let{values:m,_$litType$:C}=d,I=typeof C=="number"?this._$AC(d):(C.el===void 0&&(C.el=nn.createElement(Xa(C.h,C.h[0]),this.options)),C);if(this._$AH?._$AD===I)this._$AH.R(m);else{let Q=new En(I,this),W=Q.O(this.options);Q.R(m),this.j(W),this._$AH=Q}}_$AC(d){let m=Ha.get(d.strings);return m===void 0&&Ha.set(d.strings,m=new nn(d)),m}D(d){Va(this._$AH)||(this._$AH=[],this._$AR());let m=this._$AH,C,I=0;for(let Q of d)I===m.length?m.push(C=new Ka(this.H(en()),this.H(en()),this,this.options)):C=m[I],C._$AI(Q),I++;I<m.length&&(this._$AR(C&&C._$AB.nextSibling,I),m.length=I)}_$AR(d=this._$AA.nextSibling,m){for(this._$AP?.(!1,!0,m);d&&d!==this._$AB;){let C=d.nextSibling;d.remove(),d=C}}setConnected(d){this._$AM===void 0&&(this.V=d,this._$AP?.(d))}},Rs=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(d,m,C,I,Q){this.type=1,this._$AH=ue,this._$AN=void 0,this.element=d,this.name=m,this._$AM=I,this.options=Q,C.length>2||C[0]!==""||C[1]!==""?(this._$AH=Array(C.length-1).fill(new String),this.strings=C):this._$AH=ue}_$AI(d,m=this,C,I){let Q=this.strings,W=!1;if(Q===void 0)d=As(this,d,m,0),W=!sn(d)||d!==this._$AH&&d!==Fe,W&&(this._$AH=d);else{let ht=d,q,Dt;for(d=Q[0],q=0;q<Q.length-1;q++)Dt=As(this,ht[C+q],m,q),Dt===Fe&&(Dt=this._$AH[q]),W||=!sn(Dt)||Dt!==this._$AH[q],Dt===ue?d=ue:d!==ue&&(d+=(Dt??"")+Q[q+1]),this._$AH[q]=Dt}W&&!I&&this.B(d)}B(d){d===ue?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,d??"")}},Dn=class extends Rs{constructor(){super(...arguments),this.type=3}B(d){this.element[this.name]=d===ue?void 0:d}},Pn=class extends Rs{constructor(){super(...arguments),this.type=4}B(d){this.element.toggleAttribute(this.name,!!d&&d!==ue)}},An=class extends Rs{constructor(d,m,C,I,Q){super(d,m,C,I,Q),this.type=5}_$AI(d,m=this){if((d=As(this,d,m,0)??ue)===Fe)return;let C=this._$AH,I=d===ue&&C!==ue||d.capture!==C.capture||d.once!==C.once||d.passive!==C.passive,Q=d!==ue&&(C===ue||I);I&&this.element.removeEventListener(this.name,this,C),Q&&this.element.addEventListener(this.name,this,d),this._$AH=d}handleEvent(d){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,d):this._$AH.handleEvent(d)}},Rn=class{constructor(d,m,C){this.element=d,this.type=6,this._$AN=void 0,this._$AM=m,this.options=C}get _$AU(){return this._$AM._$AU}_$AI(d){As(this,d)}},Ah={W:Lo,q:hs,J:Ho,Z:1,F:Qa,G:En,K:Ya,X:As,Y:Nn,tt:Rs,st:Pn,it:An,et:Dn,ot:Rn},Rh=zo.litHtmlPolyfillSupport;Rh?.(nn,Nn),(zo.litHtmlVersions??=[]).push("3.1.4");var Za=(R,d,m)=>{let C=m?.renderBefore??d,I=C._$litPart$;if(I===void 0){let Q=m?.renderBefore??null;C._$litPart$=I=new Nn(d.insertBefore(en(),Q),Q,void 0,m??{})}return I._$AI(R),I};var ze=class extends vs{constructor(){super(...arguments),this.renderOptions={host:this},this.ht=void 0}createRenderRoot(){let d=super.createRenderRoot();return this.renderOptions.renderBefore??=d.firstChild,d}update(d){let m=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(d),this.ht=Za(m,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this.ht?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this.ht?.setConnected(!1)}render(){return Fe}};ze._$litElement$=!0,ze.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:ze});var Oh=globalThis.litElementPolyfillSupport;Oh?.({LitElement:ze});(globalThis.litElementVersions??=[]).push("4.0.6");var{Y:zh}=Ah,Lh=R=>R===null||typeof R!="object"&&typeof R!="function";var Ia=(R,d)=>d===void 0?R?._$litType$!==void 0:R?._$litType$===d,Hh=R=>R?._$litType$?.h!=null;var Ja=R=>R.strings===void 0,Na=()=>document.createComment(""),ws=(R,d,m)=>{let C=R._$AA.parentNode,I=d===void 0?R._$AB:d._$AA;if(m===void 0){let Q=C.insertBefore(Na(),I),W=C.insertBefore(Na(),I);m=new zh(Q,W,R,R.options)}else{let Q=m._$AB.nextSibling,W=m._$AM,ht=W!==R;if(ht){let q;m._$AQ?.(R),m._$AM=R,m._$AP!==void 0&&(q=R._$AU)!==W._$AU&&m._$AP(q)}if(Q!==I||ht){let q=m._$AA;for(;q!==Q;){let Dt=q.nextSibling;C.insertBefore(q,I),q=Dt}}}return m},xs=(R,d,m=R)=>(R._$AI(d,m),R),Ih={},on=(R,d=Ih)=>R._$AH=d,Po=R=>R._$AH,To=R=>{R._$AP?.(!1,!0);let d=R._$AA,m=R._$AB.nextSibling;for(;d!==m;){let C=d.nextSibling;d.remove(),d=C}},tl=R=>{R._$AR()};var Ti=R=>(...d)=>({_$litDirective$:R,values:d}),Bi=class{constructor(d){}get _$AU(){return this._$AM._$AU}_$AT(d,m,C){this.nt=d,this._$AM=m,this.rt=C}_$AS(d,m){return this.update(d,m)}update(d,m){return this.render(...m)}};var tn=(R,d)=>{let m=R._$AN;if(m===void 0)return!1;for(let C of m)C._$AO?.(d,!1),tn(C,d);return!0},On=R=>{let d,m;do{if((d=R._$AM)===void 0)break;m=d._$AN,m.delete(R),R=d}while(m?.size===0)},el=R=>{for(let d;d=R._$AM;R=d){let m=d._$AN;if(m===void 0)d._$AN=m=new Set;else if(m.has(R))break;m.add(R),Fh(d)}};function Nh(R){this._$AN!==void 0?(On(this),this._$AM=R,el(this)):this._$AM=R}function $h(R,d=!1,m=0){let C=this._$AH,I=this._$AN;if(I!==void 0&&I.size!==0)if(d)if(Array.isArray(C))for(let Q=m;Q<C.length;Q++)tn(C[Q],!1),On(C[Q]);else C!=null&&(tn(C,!1),On(C));else tn(this,R)}var Fh=R=>{R.type==2&&(R._$AP??=$h,R._$AQ??=Nh)},rn=class extends Bi{constructor(){super(...arguments),this._$AN=void 0}_$AT(d,m,C){super._$AT(d,m,C),el(this),this.isConnected=d._$AU}_$AO(d,m=!0){d!==this.isConnected&&(this.isConnected=d,d?this.reconnected?.():this.disconnected?.()),m&&(tn(this,d),On(this))}setValue(d){if(Ja(this.nt))this.nt._$AI(d,this);else{let m=[...this.nt._$AH];m[this.rt]=d,this.nt._$AI(m,this,0)}}disconnected(){}reconnected(){}};var zn=class{constructor(d){this.ct=d}disconnect(){this.ct=void 0}reconnect(d){this.ct=d}deref(){return this.ct}},Ln=class{constructor(){this.lt=void 0,this.ut=void 0}get(){return this.lt}pause(){this.lt??=new Promise(d=>this.ut=d)}resume(){this.ut?.(),this.lt=this.ut=void 0}};var Hn=class extends rn{constructor(){super(...arguments),this.dt=new zn(this),this.ft=new Ln}render(d,m){return Fe}update(d,[m,C]){if(this.isConnected||this.disconnected(),m===this.vt)return Fe;this.vt=m;let I=0,{dt:Q,ft:W}=this;return(async(ht,q)=>{for await(let Dt of ht)if(await q(Dt)===!1)return})(m,async ht=>{for(;W.get();)await W.get();let q=Q.deref();if(q!==void 0){if(q.vt!==m)return!1;C!==void 0&&(ht=C(ht,I)),q.commitValue(ht,I),I++}return!0}),Fe}commitValue(d,m){this.setValue(d)}disconnected(){this.dt.disconnect(),this.ft.pause()}reconnected(){this.dt.reconnect(this),this.ft.resume()}},Yh=Ti(Hn),qh=Ti(class extends Hn{constructor(R){if(super(R),R.type!==2)throw Error("asyncAppend can only be used in child expressions")}update(R,d){return this.ht=R,super.update(R,d)}commitValue(R,d){d===0&&tl(this.ht);let m=ws(this.ht);xs(m,R)}}),$a=R=>Hh(R)?R._$litType$.h:R.strings,Gh=Ti(class extends Bi{constructor(R){super(R),this.yt=new WeakMap}render(R){return[R]}update(R,[d]){let m=Ia(this.bt)?$a(this.bt):null,C=Ia(d)?$a(d):null;if(m!==null&&(C===null||m!==C)){let I=Po(R).pop(),Q=this.yt.get(m);if(Q===void 0){let W=document.createDocumentFragment();Q=Za(ue,W),Q.setConnected(!1),this.yt.set(m,Q)}on(Q,[I]),ws(Q,void 0,I)}if(C!==null){if(m===null||m!==C){let I=this.yt.get(C);if(I!==void 0){let Q=Po(I).pop();tl(R),ws(R,void 0,Q),on(R,[Q])}}this.bt=d}else this.bt=void 0;return this.render(d)}});var Xh=Ti(class extends Bi{constructor(R){if(super(R),R.type!==1||R.name!=="class"||R.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(R){return" "+Object.keys(R).filter(d=>R[d]).join(" ")+" "}update(R,[d]){if(this.gt===void 0){this.gt=new Set,R.strings!==void 0&&(this.wt=new Set(R.strings.join(" ").split(/\s/).filter(C=>C!=="")));for(let C in d)d[C]&&!this.wt?.has(C)&&this.gt.add(C);return this.render(d)}let m=R.element.classList;for(let C of this.gt)C in d||(m.remove(C),this.gt.delete(C));for(let C in d){let I=!!d[C];I===this.gt.has(C)||this.wt?.has(C)||(I?(m.add(C),this.gt.add(C)):(m.remove(C),this.gt.delete(C)))}return Fe}}),Wh={},Qh=Ti(class extends Bi{constructor(){super(...arguments),this._t=Wh}render(R,d){return d()}update(R,[d,m]){if(Array.isArray(d)){if(Array.isArray(this._t)&&this._t.length===d.length&&d.every((C,I)=>C===this._t[I]))return Fe}else if(this._t===d)return Fe;return this._t=Array.isArray(d)?Array.from(d):d,this.render(d,m)}});var Kh=Ti(class extends Bi{constructor(){super(...arguments),this.key=ue}render(R,d){return this.key=R,d}update(R,[d,m]){return d!==this.key&&(on(R),this.key=d),m}}),Zh=Ti(class extends Bi{constructor(R){if(super(R),R.type!==3&&R.type!==1&&R.type!==4)throw Error("The `live` directive is not allowed on child or event bindings");if(!Ja(R))throw Error("`live` bindings can only contain a single expression")}render(R){return R}update(R,[d]){if(d===Fe||d===ue)return d;let m=R.element,C=R.name;if(R.type===3){if(d===m[C])return Fe}else if(R.type===4){if(!!d===m.hasAttribute(C))return Fe}else if(R.type===1&&m.getAttribute(C)===d+"")return Fe;return on(R),d}});var Eo=new WeakMap,Jh=Ti(class extends rn{render(R){return ue}update(R,[d]){let m=d!==this.ct;return m&&this.ct!==void 0&&this.St(void 0),(m||this.$t!==this.Tt)&&(this.ct=d,this.xt=R.options?.host,this.St(this.Tt=R.element)),ue}St(R){if(this.isConnected||(R=void 0),typeof this.ct=="function"){let d=this.xt??globalThis,m=Eo.get(d);m===void 0&&(m=new WeakMap,Eo.set(d,m)),m.get(this.ct)!==void 0&&this.ct.call(this.xt,void 0),m.set(this.ct,R),R!==void 0&&this.ct.call(this.xt,R)}else this.ct.value=R}get $t(){return typeof this.ct=="function"?Eo.get(this.xt??globalThis)?.get(this.ct):this.ct?.value}disconnected(){this.$t===this.Tt&&this.St(void 0)}reconnected(){this.St(this.Tt)}}),Fa=(R,d,m)=>{let C=new Map;for(let I=d;I<=m;I++)C.set(R[I],I);return C},tc=Ti(class extends Bi{constructor(R){if(super(R),R.type!==2)throw Error("repeat() can only be used in text expressions")}Et(R,d,m){let C;m===void 0?m=d:d!==void 0&&(C=d);let I=[],Q=[],W=0;for(let ht of R)I[W]=C?C(ht,W):W,Q[W]=m(ht,W),W++;return{values:Q,keys:I}}render(R,d,m){return this.Et(R,d,m).values}update(R,[d,m,C]){let I=Po(R),{values:Q,keys:W}=this.Et(d,m,C);if(!Array.isArray(I))return this.Ct=W,Q;let ht=this.Ct??=[],q=[],Dt,It,bt=0,xt=I.length-1,Ut=0,Jt=Q.length-1;for(;bt<=xt&&Ut<=Jt;)if(I[bt]===null)bt++;else if(I[xt]===null)xt--;else if(ht[bt]===W[Ut])q[Ut]=xs(I[bt],Q[Ut]),bt++,Ut++;else if(ht[xt]===W[Jt])q[Jt]=xs(I[xt],Q[Jt]),xt--,Jt--;else if(ht[bt]===W[Jt])q[Jt]=xs(I[bt],Q[Jt]),ws(R,q[Jt+1],I[bt]),bt++,Jt--;else if(ht[xt]===W[Ut])q[Ut]=xs(I[xt],Q[Ut]),ws(R,I[bt],I[xt]),xt--,Ut++;else if(Dt===void 0&&(Dt=Fa(W,Ut,Jt),It=Fa(ht,bt,xt)),Dt.has(ht[bt]))if(Dt.has(ht[xt])){let oe=It.get(W[Ut]),Pe=oe!==void 0?I[oe]:null;if(Pe===null){let ce=ws(R,I[bt]);xs(ce,Q[Ut]),q[Ut]=ce}else q[Ut]=xs(Pe,Q[Ut]),ws(R,I[bt],Pe),I[oe]=null;Ut++}else To(I[xt]),xt--;else To(I[bt]),bt++;for(;Ut<=Jt;){let oe=ws(R,q[Jt+1]);xs(oe,Q[Ut]),q[Ut++]=oe}for(;bt<=xt;){let oe=I[bt++];oe!==null&&To(oe)}return this.Ct=W,on(R,q),Fe}}),il="important",Bh=" !"+il,ec=Ti(class extends Bi{constructor(R){if(super(R),R.type!==1||R.name!=="style"||R.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(R){return Object.keys(R).reduce((d,m)=>{let C=R[m];return C==null?d:d+`${m=m.includes("-")?m:m.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${C};`},"")}update(R,[d]){let{style:m}=R.element;if(this.Pt===void 0)return this.Pt=new Set(Object.keys(d)),this.render(d);for(let C of this.Pt)d[C]==null&&(this.Pt.delete(C),C.includes("-")?m.removeProperty(C):m[C]=null);for(let C in d){let I=d[C];if(I!=null){this.Pt.add(C);let Q=typeof I=="string"&&I.endsWith(Bh);C.includes("-")||Q?m.setProperty(C,Q?I.slice(0,-11):I,Q?il:""):m[C]=I}}return Fe}}),ic=Ti(class extends Bi{constructor(R){if(super(R),R.type!==2)throw Error("templateContent can only be used in child bindings")}render(R){return this.At===R?Fe:(this.At=R,document.importNode(R.content,!0))}}),Ns=class extends Bi{constructor(d){if(super(d),this.bt=ue,d.type!==2)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(d){if(d===ue||d==null)return this.kt=void 0,this.bt=d;if(d===Fe)return d;if(typeof d!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(d===this.bt)return this.kt;this.bt=d;let m=[d];return m.raw=m,this.kt={_$litType$:this.constructor.resultType,strings:m,values:[]}}};Ns.directiveName="unsafeHTML",Ns.resultType=1;var $n=Ti(Ns);var an=class extends Ns{};an.directiveName="unsafeSVG",an.resultType=2;var sc=Ti(an),Wa=R=>!Lh(R)&&typeof R.then=="function",Ba=1073741823;var Ao=class extends rn{constructor(){super(...arguments),this.Mt=Ba,this.Ut=[],this.dt=new zn(this),this.ft=new Ln}render(...d){return d.find(m=>!Wa(m))??Fe}update(d,m){let C=this.Ut,I=C.length;this.Ut=m;let Q=this.dt,W=this.ft;this.isConnected||this.disconnected();for(let ht=0;ht<m.length&&!(ht>this.Mt);ht++){let q=m[ht];if(!Wa(q))return this.Mt=ht,q;ht<I&&q===C[ht]||(this.Mt=Ba,I=0,Promise.resolve(q).then(async Dt=>{for(;W.get();)await W.get();let It=Q.deref();if(It!==void 0){let bt=It.Ut.indexOf(q);bt>-1&&bt<It.Mt&&(It.Mt=bt,It.setValue(Dt))}}))}return Fe}disconnected(){this.dt.disconnect(),this.ft.pause()}reconnected(){this.dt.reconnect(this),this.ft.resume()}},nc=Ti(Ao);var Uh=Symbol.for(""),jh=R=>{if(R?.r===Uh)return R?._$litStatic$};var Ua=new Map,sl=R=>(d,...m)=>{let C=m.length,I,Q,W=[],ht=[],q,Dt=0,It=!1;for(;Dt<C;){for(q=d[Dt];Dt<C&&(Q=m[Dt],(I=jh(Q))!==void 0);)q+=I+d[++Dt],It=!0;Dt!==C&&ht.push(Q),W.push(q),Dt++}if(Dt===C&&W.push(d[C]),It){let bt=W.join("$$lit$$");(d=Ua.get(bt))===void 0&&(W.raw=W,Ua.set(bt,d=W)),m=ht}return R(d,...m)},oc=sl(pe),rc=sl(Ph);window.litDisableBundleWarning||console.warn("Lit has been loaded from a bundle that combines all core features into a single file. To reduce transfer size and parsing cost, consider using the `lit` npm package directly in your project.");(function(R,d){typeof exports=="object"&&typeof module=="object"?module.exports=d():typeof define=="function"&&define.amd?define([],d):typeof exports=="object"?exports.GridStack=d():R.GridStack=d()})(self,()=>(()=>{"use strict";var R={d:(St,r)=>{for(var u in r)R.o(r,u)&&!R.o(St,u)&&Object.defineProperty(St,u,{enumerable:!0,get:r[u]})},o:(St,r)=>Object.prototype.hasOwnProperty.call(St,r)},d={};R.d(d,{GridStack:()=>Vt});class m{static getElements(r,u=document){if(typeof r=="string"){let y="getElementById"in u?u:void 0;if(y&&!isNaN(+r[0])){let D=y.getElementById(r);return D?[D]:[]}let w=u.querySelectorAll(r);return w.length||r[0]==="."||r[0]==="#"||(w=u.querySelectorAll("."+r),w.length||(w=u.querySelectorAll("#"+r))),Array.from(w)}return[r]}static getElement(r,u=document){if(typeof r=="string"){let y="getElementById"in u?u:void 0;if(!r.length)return null;if(y&&r[0]==="#")return y.getElementById(r.substring(1));if(r[0]==="#"||r[0]==="."||r[0]==="[")return u.querySelector(r);if(y&&!isNaN(+r[0]))return y.getElementById(r);let w=u.querySelector(r);return y&&!w&&(w=y.getElementById(r)),w||(w=u.querySelector("."+r)),w}return r}static shouldSizeToContent(r){return r?.grid&&(!!r.sizeToContent||r.grid.opts.sizeToContent&&r.sizeToContent!==!1)}static isIntercepted(r,u){return!(r.y>=u.y+u.h||r.y+r.h<=u.y||r.x+r.w<=u.x||r.x>=u.x+u.w)}static isTouching(r,u){return m.isIntercepted(r,{x:u.x-.5,y:u.y-.5,w:u.w+1,h:u.h+1})}static areaIntercept(r,u){let y=r.x>u.x?r.x:u.x,w=r.x+r.w<u.x+u.w?r.x+r.w:u.x+u.w;if(w<=y)return 0;let D=r.y>u.y?r.y:u.y,F=r.y+r.h<u.y+u.h?r.y+r.h:u.y+u.h;return F<=D?0:(w-y)*(F-D)}static area(r){return r.w*r.h}static sort(r,u=1,y){return y=y||r.reduce((w,D)=>Math.max(D.x+D.w,w),0)||12,u===-1?r.sort((w,D)=>(D.x??1e3)+(D.y??1e3)*y-((w.x??1e3)+(w.y??1e3)*y)):r.sort((w,D)=>(w.x??1e3)+(w.y??1e3)*y-((D.x??1e3)+(D.y??1e3)*y))}static find(r,u){return u?r.find(y=>y.id===u):void 0}static createStylesheet(r,u,y){let w=document.createElement("style"),D=y?.nonce;return D&&(w.nonce=D),w.setAttribute("type","text/css"),w.setAttribute("gs-style-id",r),w.styleSheet?w.styleSheet.cssText="":w.appendChild(document.createTextNode("")),u?u.insertBefore(w,u.firstChild):(u=document.getElementsByTagName("head")[0]).appendChild(w),w.sheet}static removeStylesheet(r,u){let y=(u||document).querySelector("STYLE[gs-style-id="+r+"]");y&&y.parentNode&&y.remove()}static addCSSRule(r,u,y){typeof r.addRule=="function"?r.addRule(u,y):typeof r.insertRule=="function"&&r.insertRule(`${u}{${y}}`)}static toBool(r){return typeof r=="boolean"?r:typeof r=="string"?!((r=r.toLowerCase())===""||r==="no"||r==="false"||r==="0"):!!r}static toNumber(r){return r===null||r.length===0?void 0:Number(r)}static parseHeight(r){let u,y="px";if(typeof r=="string")if(r==="auto"||r==="")u=0;else{let w=r.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%|cm|mm)?$/);if(!w)throw new Error(`Invalid height val = ${r}`);y=w[2]||"px",u=parseFloat(w[1])}else u=r;return{h:u,unit:y}}static defaults(r,...u){return u.forEach(y=>{for(let w in y){if(!y.hasOwnProperty(w))return;r[w]===null||r[w]===void 0?r[w]=y[w]:typeof y[w]=="object"&&typeof r[w]=="object"&&this.defaults(r[w],y[w])}}),r}static same(r,u){if(typeof r!="object")return r==u;if(typeof r!=typeof u||Object.keys(r).length!==Object.keys(u).length)return!1;for(let y in r)if(r[y]!==u[y])return!1;return!0}static copyPos(r,u,y=!1){return u.x!==void 0&&(r.x=u.x),u.y!==void 0&&(r.y=u.y),u.w!==void 0&&(r.w=u.w),u.h!==void 0&&(r.h=u.h),y&&(u.minW&&(r.minW=u.minW),u.minH&&(r.minH=u.minH),u.maxW&&(r.maxW=u.maxW),u.maxH&&(r.maxH=u.maxH)),r}static samePos(r,u){return r&&u&&r.x===u.x&&r.y===u.y&&(r.w||1)===(u.w||1)&&(r.h||1)===(u.h||1)}static sanitizeMinMax(r){r.minW||delete r.minW,r.minH||delete r.minH,r.maxW||delete r.maxW,r.maxH||delete r.maxH}static removeInternalAndSame(r,u){if(typeof r=="object"&&typeof u=="object")for(let y in r){let w=r[y];if(y[0]==="_"||w===u[y])delete r[y];else if(w&&typeof w=="object"&&u[y]!==void 0){for(let D in w)w[D]!==u[y][D]&&D[0]!=="_"||delete w[D];Object.keys(w).length||delete r[y]}}}static removeInternalForSave(r,u=!0){for(let y in r)y[0]!=="_"&&r[y]!==null&&r[y]!==void 0||delete r[y];delete r.grid,u&&delete r.el,r.autoPosition||delete r.autoPosition,r.noResize||delete r.noResize,r.noMove||delete r.noMove,r.locked||delete r.locked,r.w!==1&&r.w!==r.minW||delete r.w,r.h!==1&&r.h!==r.minH||delete r.h}static throttle(r,u){let y=!1;return(...w)=>{y||(y=!0,setTimeout(()=>{r(...w),y=!1},u))}}static removePositioningStyles(r){let u=r.style;u.position&&u.removeProperty("position"),u.left&&u.removeProperty("left"),u.top&&u.removeProperty("top"),u.width&&u.removeProperty("width"),u.height&&u.removeProperty("height")}static getScrollElement(r){if(!r)return document.scrollingElement||document.documentElement;let u=getComputedStyle(r);return/(auto|scroll)/.test(u.overflow+u.overflowY)?r:this.getScrollElement(r.parentElement)}static updateScrollPosition(r,u,y){let w=r.getBoundingClientRect(),D=window.innerHeight||document.documentElement.clientHeight;if(w.top<0||w.bottom>D){let F=w.bottom-D,V=w.top,ot=this.getScrollElement(r);if(ot!==null){let Y=ot.scrollTop;w.top<0&&y<0?r.offsetHeight>D?ot.scrollTop+=y:ot.scrollTop+=Math.abs(V)>Math.abs(y)?y:V:y>0&&(r.offsetHeight>D?ot.scrollTop+=y:ot.scrollTop+=F>y?y:F),u.top+=ot.scrollTop-Y}}}static updateScrollResize(r,u,y){let w=this.getScrollElement(u),D=w.clientHeight,F=w===this.getScrollElement()?0:w.getBoundingClientRect().top,V=r.clientY-F,ot=V>D-y;V<y?w.scrollBy({behavior:"smooth",top:V-y}):ot&&w.scrollBy({behavior:"smooth",top:y-(D-V)})}static clone(r){return r==null||typeof r!="object"?r:r instanceof Array?[...r]:{...r}}static cloneDeep(r){let u=["parentGrid","el","grid","subGrid","engine"],y=m.clone(r);for(let w in y)y.hasOwnProperty(w)&&typeof y[w]=="object"&&w.substring(0,2)!=="__"&&!u.find(D=>D===w)&&(y[w]=m.cloneDeep(r[w]));return y}static cloneNode(r){let u=r.cloneNode(!0);return u.removeAttribute("id"),u}static appendTo(r,u){let y;y=typeof u=="string"?m.getElement(u):u,y&&y.appendChild(r)}static addElStyles(r,u){if(u instanceof Object)for(let y in u)u.hasOwnProperty(y)&&(Array.isArray(u[y])?u[y].forEach(w=>{r.style[y]=w}):r.style[y]=u[y])}static initEvent(r,u){let y={type:u.type},w={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:u.target?u.target:r.target};return r.dataTransfer&&(y.dataTransfer=r.dataTransfer),["altKey","ctrlKey","metaKey","shiftKey"].forEach(D=>y[D]=r[D]),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(D=>y[D]=r[D]),{...y,...w}}static simulateMouseEvent(r,u,y){let w=document.createEvent("MouseEvents");w.initMouseEvent(u,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,r.target),(y||r.target).dispatchEvent(w)}static getValuesFromTransformedElement(r){let u=document.createElement("div");m.addElStyles(u,{opacity:"0",position:"fixed",top:"0px",left:"0px",width:"1px",height:"1px",zIndex:"-999999"}),r.appendChild(u);let y=u.getBoundingClientRect();return r.removeChild(u),u.remove(),{xScale:1/y.width,yScale:1/y.height,xOffset:y.left,yOffset:y.top}}}class C{constructor(r={}){this.addedNodes=[],this.removedNodes=[],this.column=r.column||12,this.maxRow=r.maxRow,this._float=r.float,this.nodes=r.nodes||[],this.onChange=r.onChange}batchUpdate(r=!0,u=!0){return!!this.batchMode===r||(this.batchMode=r,r?(this._prevFloat=this._float,this._float=!0,this.cleanNodes(),this.saveInitial()):(this._float=this._prevFloat,delete this._prevFloat,u&&this._packNodes(),this._notify())),this}_useEntireRowArea(r,u){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!r._moving||r._skipDown||u.y<=r.y)}_fixCollisions(r,u=r,y,w={}){if(this.sortNodes(-1),!(y=y||this.collide(r,u)))return!1;if(r._moving&&!w.nested&&!this.float&&this.swap(r,y))return!0;let D=u;this._useEntireRowArea(r,u)&&(D={x:0,w:this.column,y:u.y,h:u.h},y=this.collide(r,D,w.skip));let F=!1,V={nested:!0,pack:!1};for(;y=y||this.collide(r,D,w.skip);){let ot;if(y.locked||r._moving&&!r._skipDown&&u.y>r.y&&!this.float&&(!this.collide(y,{...y,y:r.y},r)||!this.collide(y,{...y,y:u.y-y.h},r))?(r._skipDown=r._skipDown||u.y>r.y,ot=this.moveNode(r,{...u,y:y.y+y.h,...V}),y.locked&&ot?m.copyPos(u,r):!y.locked&&ot&&w.pack&&(this._packNodes(),u.y=y.y+y.h,m.copyPos(r,u)),F=F||ot):ot=this.moveNode(y,{...y,y:u.y+u.h,skip:r,...V}),!ot)return F;y=void 0}return F}collide(r,u=r,y){let w=r._id,D=y?._id;return this.nodes.find(F=>F._id!==w&&F._id!==D&&m.isIntercepted(F,u))}collideAll(r,u=r,y){let w=r._id,D=y?._id;return this.nodes.filter(F=>F._id!==w&&F._id!==D&&m.isIntercepted(F,u))}directionCollideCoverage(r,u,y){if(!u.rect||!r._rect)return;let w,D=r._rect,F={...u.rect};F.y>D.y?(F.h+=F.y-D.y,F.y=D.y):F.h+=D.y-F.y,F.x>D.x?(F.w+=F.x-D.x,F.x=D.x):F.w+=D.x-F.x;let V=.5;return y.forEach(ot=>{if(ot.locked||!ot._rect)return;let Y=ot._rect,it=Number.MAX_VALUE,kt=Number.MAX_VALUE;D.y<Y.y?it=(F.y+F.h-Y.y)/Y.h:D.y+D.h>Y.y+Y.h&&(it=(Y.y+Y.h-F.y)/Y.h),D.x<Y.x?kt=(F.x+F.w-Y.x)/Y.w:D.x+D.w>Y.x+Y.w&&(kt=(Y.x+Y.w-F.x)/Y.w);let Et=Math.min(kt,it);Et>V&&(V=Et,w=ot)}),u.collide=w,w}cacheRects(r,u,y,w,D,F){return this.nodes.forEach(V=>V._rect={y:V.y*u+y,x:V.x*r+F,w:V.w*r-F-w,h:V.h*u-y-D}),this}swap(r,u){if(!u||u.locked||!r||r.locked)return!1;function y(){let D=u.x,F=u.y;return u.x=r.x,u.y=r.y,r.h!=u.h?(r.x=D,r.y=u.y+u.h):r.w!=u.w?(r.x=u.x+u.w,r.y=F):(r.x=D,r.y=F),r._dirty=u._dirty=!0,!0}let w;if(r.w===u.w&&r.h===u.h&&(r.x===u.x||r.y===u.y)&&(w=m.isTouching(r,u)))return y();if(w!==!1){if(r.w===u.w&&r.x===u.x&&(w||(w=m.isTouching(r,u)))){if(u.y<r.y){let D=r;r=u,u=D}return y()}if(w!==!1){if(r.h===u.h&&r.y===u.y&&(w||(w=m.isTouching(r,u)))){if(u.x<r.x){let D=r;r=u,u=D}return y()}return!1}}}isAreaEmpty(r,u,y,w){let D={x:r||0,y:u||0,w:y||1,h:w||1};return!this.collide(D)}compact(r="compact",u=!0){if(this.nodes.length===0)return this;u&&this.sortNodes();let y=this.batchMode;y||this.batchUpdate();let w=this._inColumnResize;w||(this._inColumnResize=!0);let D=this.nodes;return this.nodes=[],D.forEach((F,V,ot)=>{let Y;F.locked||(F.autoPosition=!0,r==="list"&&V&&(Y=ot[V-1])),this.addNode(F,!1,Y)}),w||delete this._inColumnResize,y||this.batchUpdate(!1),this}set float(r){this._float!==r&&(this._float=r||!1,r||this._packNodes()._notify())}get float(){return this._float||!1}sortNodes(r=1,u=this.column){return this.nodes=m.sort(this.nodes,r,u),this}_packNodes(){return this.batchMode||(this.sortNodes(),this.float?this.nodes.forEach(r=>{if(r._updating||r._orig===void 0||r.y===r._orig.y)return;let u=r.y;for(;u>r._orig.y;)--u,this.collide(r,{x:r.x,y:u,w:r.w,h:r.h})||(r._dirty=!0,r.y=u)}):this.nodes.forEach((r,u)=>{if(!r.locked)for(;r.y>0;){let y=u===0?0:r.y-1;if(u!==0&&this.collide(r,{x:r.x,y,w:r.w,h:r.h}))break;r._dirty=r.y!==y,r.y=y}})),this}prepareNode(r,u){r._id=r._id??C._idSeq++,r.x!==void 0&&r.y!==void 0&&r.x!==null&&r.y!==null||(r.autoPosition=!0);let y={x:0,y:0,w:1,h:1};return m.defaults(r,y),r.autoPosition||delete r.autoPosition,r.noResize||delete r.noResize,r.noMove||delete r.noMove,m.sanitizeMinMax(r),typeof r.x=="string"&&(r.x=Number(r.x)),typeof r.y=="string"&&(r.y=Number(r.y)),typeof r.w=="string"&&(r.w=Number(r.w)),typeof r.h=="string"&&(r.h=Number(r.h)),isNaN(r.x)&&(r.x=y.x,r.autoPosition=!0),isNaN(r.y)&&(r.y=y.y,r.autoPosition=!0),isNaN(r.w)&&(r.w=y.w),isNaN(r.h)&&(r.h=y.h),this.nodeBoundFix(r,u),r}nodeBoundFix(r,u){let y=r._orig||m.copyPos({},r);if(r.maxW&&(r.w=Math.min(r.w,r.maxW)),r.maxH&&(r.h=Math.min(r.h,r.maxH)),r.minW&&r.minW<=this.column&&(r.w=Math.max(r.w,r.minW)),r.minH&&(r.h=Math.max(r.h,r.minH)),(r.x||0)+(r.w||1)>this.column&&this.column<12&&!this._inColumnResize&&r._id&&this.findCacheLayout(r,12)===-1){let w={...r};w.autoPosition||w.x===void 0?(delete w.x,delete w.y):w.x=Math.min(11,w.x),w.w=Math.min(12,w.w||1),this.cacheOneLayout(w,12)}return r.w>this.column?r.w=this.column:r.w<1&&(r.w=1),this.maxRow&&r.h>this.maxRow?r.h=this.maxRow:r.h<1&&(r.h=1),r.x<0&&(r.x=0),r.y<0&&(r.y=0),r.x+r.w>this.column&&(u?r.w=this.column-r.x:r.x=this.column-r.w),this.maxRow&&r.y+r.h>this.maxRow&&(u?r.h=this.maxRow-r.y:r.y=this.maxRow-r.h),m.samePos(r,y)||(r._dirty=!0),this}getDirtyNodes(r){return r?this.nodes.filter(u=>u._dirty&&!m.samePos(u,u._orig)):this.nodes.filter(u=>u._dirty)}_notify(r){if(this.batchMode||!this.onChange)return this;let u=(r||[]).concat(this.getDirtyNodes());return this.onChange(u),this}cleanNodes(){return this.batchMode||this.nodes.forEach(r=>{delete r._dirty,delete r._lastTried}),this}saveInitial(){return this.nodes.forEach(r=>{r._orig=m.copyPos({},r),delete r._dirty}),this._hasLocked=this.nodes.some(r=>r.locked),this}restoreInitial(){return this.nodes.forEach(r=>{m.samePos(r,r._orig)||(m.copyPos(r,r._orig),r._dirty=!0)}),this._notify(),this}findEmptyPosition(r,u=this.nodes,y=this.column,w){let D=!1;for(let F=w?w.y*y+(w.x+w.w):0;!D;++F){let V=F%y,ot=Math.floor(F/y);if(V+r.w>y)continue;let Y={x:V,y:ot,w:r.w,h:r.h};u.find(it=>m.isIntercepted(Y,it))||(r.x===V&&r.y===ot||(r._dirty=!0),r.x=V,r.y=ot,delete r.autoPosition,D=!0)}return D}addNode(r,u=!1,y){let w;return this.nodes.find(D=>D._id===r._id)||(this._inColumnResize?this.nodeBoundFix(r):this.prepareNode(r),delete r._temporaryRemoved,delete r._removeDOM,r.autoPosition&&this.findEmptyPosition(r,this.nodes,this.column,y)&&(delete r.autoPosition,w=!0),this.nodes.push(r),u&&this.addedNodes.push(r),w||this._fixCollisions(r),this.batchMode||this._packNodes()._notify(),r)}removeNode(r,u=!0,y=!1){return this.nodes.find(w=>w._id===r._id)?(y&&this.removedNodes.push(r),u&&(r._removeDOM=!0),this.nodes=this.nodes.filter(w=>w._id!==r._id),r._isAboutToRemove||this._packNodes(),this._notify([r]),this):this}removeAll(r=!0){return delete this._layouts,this.nodes.length?(r&&this.nodes.forEach(u=>u._removeDOM=!0),this.removedNodes=this.nodes,this.nodes=[],this._notify(this.removedNodes)):this}moveNodeCheck(r,u){if(!this.changedPosConstrain(r,u))return!1;if(u.pack=!0,!this.maxRow)return this.moveNode(r,u);let y,w=new C({column:this.column,float:this.float,nodes:this.nodes.map(F=>F._id===r._id?(y={...F},y):{...F})});if(!y)return!1;let D=w.moveNode(y,u)&&w.getRow()<=Math.max(this.getRow(),this.maxRow);if(!D&&!u.resizing&&u.collide){let F=u.collide.el.gridstackNode;if(this.swap(r,F))return this._notify(),!0}return!!D&&(w.nodes.filter(F=>F._dirty).forEach(F=>{let V=this.nodes.find(ot=>ot._id===F._id);V&&(m.copyPos(V,F),V._dirty=!0)}),this._notify(),!0)}willItFit(r){if(delete r._willFitPos,!this.maxRow)return!0;let u=new C({column:this.column,float:this.float,nodes:this.nodes.map(w=>({...w}))}),y={...r};return this.cleanupNode(y),delete y.el,delete y._id,delete y.content,delete y.grid,u.addNode(y),u.getRow()<=this.maxRow&&(r._willFitPos=m.copyPos({},y),!0)}changedPosConstrain(r,u){return u.w=u.w||r.w,u.h=u.h||r.h,r.x!==u.x||r.y!==u.y||(r.maxW&&(u.w=Math.min(u.w,r.maxW)),r.maxH&&(u.h=Math.min(u.h,r.maxH)),r.minW&&(u.w=Math.max(u.w,r.minW)),r.minH&&(u.h=Math.max(u.h,r.minH)),r.w!==u.w||r.h!==u.h)}moveNode(r,u){if(!r||!u)return!1;let y;u.pack!==void 0||this.batchMode||(y=u.pack=!0),typeof u.x!="number"&&(u.x=r.x),typeof u.y!="number"&&(u.y=r.y),typeof u.w!="number"&&(u.w=r.w),typeof u.h!="number"&&(u.h=r.h);let w=r.w!==u.w||r.h!==u.h,D=m.copyPos({},r,!0);if(m.copyPos(D,u),this.nodeBoundFix(D,w),m.copyPos(u,D),!u.forceCollide&&m.samePos(r,u))return!1;let F=m.copyPos({},r),V=this.collideAll(r,D,u.skip),ot=!0;if(V.length){let Y=r._moving&&!u.nested,it=Y?this.directionCollideCoverage(r,u,V):V[0];if(Y&&it&&r.grid?.opts?.subGridDynamic&&!r.grid._isTemp){let kt=m.areaIntercept(u.rect,it._rect),Et=m.area(u.rect),ee=m.area(it._rect);kt/(Et<ee?Et:ee)>.8&&(it.grid.makeSubGrid(it.el,void 0,r),it=void 0)}it?ot=!this._fixCollisions(r,D,it,u):(ot=!1,y&&delete u.pack)}return ot&&(r._dirty=!0,m.copyPos(r,D)),u.pack&&this._packNodes()._notify(),!m.samePos(r,F)}getRow(){return this.nodes.reduce((r,u)=>Math.max(r,u.y+u.h),0)}beginUpdate(r){return r._updating||(r._updating=!0,delete r._skipDown,this.batchMode||this.saveInitial()),this}endUpdate(){let r=this.nodes.find(u=>u._updating);return r&&(delete r._updating,delete r._skipDown),this}save(r=!0,u){let y=this._layouts?.length,w=y&&this.column!==y-1?this._layouts[y-1]:null,D=[];return this.sortNodes(),this.nodes.forEach(F=>{let V=w?.find(Y=>Y._id===F._id),ot={...F,...V||{}};m.removeInternalForSave(ot,!r),u&&u(F,ot),D.push(ot)}),D}layoutsNodesChange(r){return!this._layouts||this._inColumnResize||this._layouts.forEach((u,y)=>{if(!u||y===this.column)return this;if(y<this.column)this._layouts[y]=void 0;else{let w=y/this.column;r.forEach(D=>{if(!D._orig)return;let F=u.find(V=>V._id===D._id);F&&(F.y>=0&&D.y!==D._orig.y&&(F.y+=D.y-D._orig.y),D.x!==D._orig.x&&(F.x=Math.round(D.x*w)),D.w!==D._orig.w&&(F.w=Math.round(D.w*w)))})}}),this}columnChanged(r,u,y="moveScale"){if(!this.nodes.length||!u||r===u)return this;if(y==="none")return this;let w=y==="compact"||y==="list";w&&this.sortNodes(1,r),u<r&&this.cacheLayout(this.nodes,r),this.batchUpdate();let D=[],F=w?this.nodes:m.sort(this.nodes,-1,r);if(u>r&&this._layouts){let V=this._layouts[u]||[],ot=this._layouts.length-1;!V.length&&r!==ot&&this._layouts[ot]?.length&&(r=ot,this._layouts[ot].forEach(Y=>{let it=F.find(kt=>kt._id===Y._id);it&&(w||Y.autoPosition||(it.x=Y.x??it.x,it.y=Y.y??it.y),it.w=Y.w??it.w,Y.x!=null&&Y.y!==void 0||(it.autoPosition=!0))})),V.forEach(Y=>{let it=F.findIndex(kt=>kt._id===Y._id);if(it!==-1){let kt=F[it];if(w)return void(kt.w=Y.w);(Y.autoPosition||isNaN(Y.x)||isNaN(Y.y))&&this.findEmptyPosition(Y,D),Y.autoPosition||(kt.x=Y.x??kt.x,kt.y=Y.y??kt.y,kt.w=Y.w??kt.w,D.push(kt)),F.splice(it,1)}})}if(w)this.compact(y,!1);else{if(F.length)if(typeof y=="function")y(u,r,D,F);else{let V=w?1:u/r,ot=y==="move"||y==="moveScale",Y=y==="scale"||y==="moveScale";F.forEach(it=>{it.x=u===1?0:ot?Math.round(it.x*V):Math.min(it.x,u-1),it.w=u===1||r===1?1:Y?Math.round(it.w*V)||1:Math.min(it.w,u),D.push(it)}),F=[]}D=m.sort(D,-1,u),this._inColumnResize=!0,this.nodes=[],D.forEach(V=>{this.addNode(V,!1),delete V._orig})}return this.nodes.forEach(V=>delete V._orig),this.batchUpdate(!1,!w),delete this._inColumnResize,this}cacheLayout(r,u,y=!1){let w=[];return r.forEach((D,F)=>{if(D._id===void 0){let V=D.id?this.nodes.find(ot=>ot.id===D.id):void 0;D._id=V?._id??C._idSeq++}w[F]={x:D.x,y:D.y,w:D.w,_id:D._id}}),this._layouts=y?[]:this._layouts||[],this._layouts[u]=w,this}cacheOneLayout(r,u){r._id=r._id??C._idSeq++;let y={x:r.x,y:r.y,w:r.w,_id:r._id};(r.autoPosition||r.x===void 0)&&(delete y.x,delete y.y,r.autoPosition&&(y.autoPosition=!0)),this._layouts=this._layouts||[],this._layouts[u]=this._layouts[u]||[];let w=this.findCacheLayout(r,u);return w===-1?this._layouts[u].push(y):this._layouts[u][w]=y,this}findCacheLayout(r,u){return this._layouts?.[u]?.findIndex(y=>y._id===r._id)??-1}removeNodeFromLayoutCache(r){if(this._layouts)for(let u=0;u<this._layouts.length;u++){let y=this.findCacheLayout(r,u);y!==-1&&this._layouts[u].splice(y,1)}}cleanupNode(r){for(let u in r)u[0]==="_"&&u!=="_id"&&delete r[u];return this}}C._idSeq=0;let I={alwaysShowResizeHandle:"mobile",animate:!0,auto:!0,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:!0},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:"grid-stack-item",decline:"grid-stack-non-removable"},resizable:{handles:"se"},rtl:"auto"},Q={handle:".grid-stack-item-content",appendTo:"body"};class W{}let ht=typeof window<"u"&&typeof document<"u"&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);class q{}function Dt(St,r){if(St.touches.length>1)return;St.cancelable&&St.preventDefault();let u=St.changedTouches[0],y=document.createEvent("MouseEvents");y.initMouseEvent(r,!0,!0,window,1,u.screenX,u.screenY,u.clientX,u.clientY,!1,!1,!1,!1,0,null),St.target.dispatchEvent(y)}function It(St,r){St.cancelable&&St.preventDefault();let u=document.createEvent("MouseEvents");u.initMouseEvent(r,!0,!0,window,1,St.screenX,St.screenY,St.clientX,St.clientY,!1,!1,!1,!1,0,null),St.target.dispatchEvent(u)}function bt(St){q.touchHandled||(q.touchHandled=!0,Dt(St,"mousedown"))}function xt(St){q.touchHandled&&Dt(St,"mousemove")}function Ut(St){if(!q.touchHandled)return;q.pointerLeaveTimeout&&(window.clearTimeout(q.pointerLeaveTimeout),delete q.pointerLeaveTimeout);let r=!!W.dragElement;Dt(St,"mouseup"),r||Dt(St,"click"),q.touchHandled=!1}function Jt(St){St.pointerType!=="mouse"&&St.target.releasePointerCapture(St.pointerId)}function oe(St){W.dragElement&&St.pointerType!=="mouse"&&It(St,"mouseenter")}function Pe(St){W.dragElement&&St.pointerType!=="mouse"&&(q.pointerLeaveTimeout=window.setTimeout(()=>{delete q.pointerLeaveTimeout,It(St,"mouseleave")},10))}class ce{constructor(r,u,y){this.moving=!1,this.host=r,this.dir=u,this.option=y,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._init()}_init(){let r=document.createElement("div");return r.classList.add("ui-resizable-handle"),r.classList.add(`${ce.prefix}${this.dir}`),r.style.zIndex="100",r.style.userSelect="none",this.el=r,this.host.appendChild(this.el),this.el.addEventListener("mousedown",this._mouseDown),ht&&(this.el.addEventListener("touchstart",bt),this.el.addEventListener("pointerdown",Jt)),this}destroy(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),ht&&(this.el.removeEventListener("touchstart",bt),this.el.removeEventListener("pointerdown",Jt)),this.host.removeChild(this.el),delete this.el,delete this.host,this}_mouseDown(r){this.mouseDownEvent=r,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),ht&&(this.el.addEventListener("touchmove",xt),this.el.addEventListener("touchend",Ut)),r.stopPropagation(),r.preventDefault()}_mouseMove(r){let u=this.mouseDownEvent;this.moving?this._triggerEvent("move",r):Math.abs(r.x-u.x)+Math.abs(r.y-u.y)>2&&(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent),this._triggerEvent("move",r)),r.stopPropagation()}_mouseUp(r){this.moving&&this._triggerEvent("stop",r),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),ht&&(this.el.removeEventListener("touchmove",xt),this.el.removeEventListener("touchend",Ut)),delete this.moving,delete this.mouseDownEvent,r.stopPropagation(),r.preventDefault()}_triggerEvent(r,u){return this.option[r]&&this.option[r](u),this}}ce.prefix="ui-resizable-";class _e{constructor(){this._eventRegister={}}get disabled(){return this._disabled}on(r,u){this._eventRegister[r]=u}off(r){delete this._eventRegister[r]}enable(){this._disabled=!1}disable(){this._disabled=!0}destroy(){delete this._eventRegister}triggerEvent(r,u){if(!this.disabled&&this._eventRegister&&this._eventRegister[r])return this._eventRegister[r](u)}}class Re extends _e{constructor(r,u={}){super(),this.rectScale={x:1,y:1},this._ui=()=>{let y=this.el.parentElement.getBoundingClientRect(),w={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},D=this.temporalRect||w;return{position:{left:(D.left-y.left)*this.rectScale.x,top:(D.top-y.top)*this.rectScale.y},size:{width:D.width*this.rectScale.x,height:D.height*this.rectScale.y}}},this.el=r,this.option=u,this._mouseOver=this._mouseOver.bind(this),this._mouseOut=this._mouseOut.bind(this),this.enable(),this._setupAutoHide(this.option.autoHide),this._setupHandlers()}on(r,u){super.on(r,u)}off(r){super.off(r)}enable(){super.enable(),this.el.classList.remove("ui-resizable-disabled"),this._setupAutoHide(this.option.autoHide)}disable(){super.disable(),this.el.classList.add("ui-resizable-disabled"),this._setupAutoHide(!1)}destroy(){this._removeHandlers(),this._setupAutoHide(!1),delete this.el,super.destroy()}updateOption(r){let u=r.handles&&r.handles!==this.option.handles,y=r.autoHide&&r.autoHide!==this.option.autoHide;return Object.keys(r).forEach(w=>this.option[w]=r[w]),u&&(this._removeHandlers(),this._setupHandlers()),y&&this._setupAutoHide(this.option.autoHide),this}_setupAutoHide(r){return r?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._mouseOver),this.el.addEventListener("mouseout",this._mouseOut)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._mouseOver),this.el.removeEventListener("mouseout",this._mouseOut),W.overResizeElement===this&&delete W.overResizeElement),this}_mouseOver(r){W.overResizeElement||W.dragElement||(W.overResizeElement=this,this.el.classList.remove("ui-resizable-autohide"))}_mouseOut(r){W.overResizeElement===this&&(delete W.overResizeElement,this.el.classList.add("ui-resizable-autohide"))}_setupHandlers(){return this.handlers=this.option.handles.split(",").map(r=>r.trim()).map(r=>new ce(this.el,r,{start:u=>{this._resizeStart(u)},stop:u=>{this._resizeStop(u)},move:u=>{this._resizing(u,r)}})),this}_resizeStart(r){this.sizeToContent=m.shouldSizeToContent(this.el.gridstackNode),this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=m.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=r,this._setupHelper(),this._applyChange();let u=m.initEvent(r,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(u,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",u),this}_resizing(r,u){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(r,u),this._applyChange();let y=m.initEvent(r,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(y,this._ui()),this.triggerEvent("resize",y),this}_resizeStop(r){let u=m.initEvent(r,{type:"resizestop",target:this.el});return this.option.stop&&this.option.stop(u),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",u),this._cleanHelper(),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this}_setupHelper(){this.elOriginStyleVal=Re._originStyleProp.map(y=>this.el.style[y]),this.parentOriginStylePosition=this.el.parentElement.style.position;let r=this.el.parentElement,u=m.getValuesFromTransformedElement(r);return this.rectScale={x:u.xScale,y:u.yScale},getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this}_cleanHelper(){return Re._originStyleProp.forEach((r,u)=>{this.el.style[r]=this.elOriginStyleVal[u]||null}),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this}_getChange(r,u){let y=this.startEvent,w={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},D=r.clientX-y.clientX,F=this.sizeToContent?0:r.clientY-y.clientY;u.indexOf("e")>-1?w.width+=D:u.indexOf("w")>-1&&(w.width-=D,w.left+=D),u.indexOf("s")>-1?w.height+=F:u.indexOf("n")>-1&&(w.height-=F,w.top+=F);let V=this._constrainSize(w.width,w.height);return Math.round(w.width)!==Math.round(V.width)&&(u.indexOf("w")>-1&&(w.left+=w.width-V.width),w.width=V.width),Math.round(w.height)!==Math.round(V.height)&&(u.indexOf("n")>-1&&(w.top+=w.height-V.height),w.height=V.height),w}_constrainSize(r,u){let y=this.option.maxWidth||Number.MAX_SAFE_INTEGER,w=this.option.minWidth/this.rectScale.x||r,D=this.option.maxHeight||Number.MAX_SAFE_INTEGER,F=this.option.minHeight/this.rectScale.y||u;return{width:Math.min(y,Math.max(w,r)),height:Math.min(D,Math.max(F,u))}}_applyChange(){let r={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){let u=this.el.parentElement,{left:y,top:w}=u.getBoundingClientRect();r={left:y,top:w,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach(u=>{let y=this.temporalRect[u],w=u==="width"||u==="left"?this.rectScale.x:u==="height"||u==="top"?this.rectScale.y:1;this.el.style[u]=(y-r[u])*w+"px"}),this):this}_removeHandlers(){return this.handlers.forEach(r=>r.destroy()),delete this.handlers,this}}Re._originStyleProp=["width","height","position","left","top","opacity","zIndex"];class Te extends _e{constructor(r,u={}){super(),this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0},this.el=r,this.option=u;let y=u.handle.substring(1);this.dragEl=r.classList.contains(y)?r:r.querySelector(u.handle)||r,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this.enable()}on(r,u){super.on(r,u)}off(r){super.off(r)}enable(){this.disabled!==!1&&(super.enable(),this.dragEl.addEventListener("mousedown",this._mouseDown),ht&&(this.dragEl.addEventListener("touchstart",bt),this.dragEl.addEventListener("pointerdown",Jt)),this.el.classList.remove("ui-draggable-disabled"))}disable(r=!1){this.disabled!==!0&&(super.disable(),this.dragEl.removeEventListener("mousedown",this._mouseDown),ht&&(this.dragEl.removeEventListener("touchstart",bt),this.dragEl.removeEventListener("pointerdown",Jt)),r||this.el.classList.add("ui-draggable-disabled"))}destroy(){this.dragTimeout&&window.clearTimeout(this.dragTimeout),delete this.dragTimeout,this.mouseDownEvent&&this._mouseUp(this.mouseDownEvent),this.disable(!0),delete this.el,delete this.helper,delete this.option,super.destroy()}updateOption(r){return Object.keys(r).forEach(u=>this.option[u]=r[u]),this}_mouseDown(r){if(!W.mouseHandled)return r.button!==0||r.target.closest('input,textarea,button,select,option,[contenteditable="true"],.ui-resizable-handle')||this.option.cancel&&r.target.closest(this.option.cancel)||(this.mouseDownEvent=r,delete this.dragging,delete W.dragElement,delete W.dropElement,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),ht&&(this.dragEl.addEventListener("touchmove",xt),this.dragEl.addEventListener("touchend",Ut)),r.preventDefault(),document.activeElement&&document.activeElement.blur(),W.mouseHandled=!0),!0}_callDrag(r){if(!this.dragging)return;let u=m.initEvent(r,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(u,this.ui()),this.triggerEvent("drag",u)}_mouseMove(r){let u=this.mouseDownEvent;if(this.dragging)if(this._dragFollow(r),W.pauseDrag){let y=Number.isInteger(W.pauseDrag)?W.pauseDrag:100;this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>this._callDrag(r),y)}else this._callDrag(r);else if(Math.abs(r.x-u.x)+Math.abs(r.y-u.y)>3){this.dragging=!0,W.dragElement=this;let y=this.el.gridstackNode?.grid;y?W.dropElement=y.el.ddElement.ddDroppable:delete W.dropElement,this.helper=this._createHelper(r),this._setupHelperContainmentStyle(),this.dragTransform=m.getValuesFromTransformedElement(this.helperContainment),this.dragOffset=this._getDragOffset(r,this.el,this.helperContainment);let w=m.initEvent(r,{target:this.el,type:"dragstart"});this._setupHelperStyle(r),this.option.start&&this.option.start(w,this.ui()),this.triggerEvent("dragstart",w)}return!0}_mouseUp(r){if(document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),ht&&(this.dragEl.removeEventListener("touchmove",xt,!0),this.dragEl.removeEventListener("touchend",Ut,!0)),this.dragging){delete this.dragging,W.dropElement?.el===this.el.parentElement&&delete W.dropElement,this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper===this.el?this._removeHelperStyle():this.helper.remove();let u=m.initEvent(r,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(u),this.triggerEvent("dragstop",u),W.dropElement&&W.dropElement.drop(r)}delete this.helper,delete this.mouseDownEvent,delete W.dragElement,delete W.dropElement,delete W.mouseHandled,r.preventDefault()}_createHelper(r){let u=this.el;return typeof this.option.helper=="function"?u=this.option.helper(r):this.option.helper==="clone"&&(u=m.cloneNode(this.el)),document.body.contains(u)||m.appendTo(u,this.option.appendTo==="parent"?this.el.parentElement:this.option.appendTo),u===this.el&&(this.dragElementOriginStyle=Te.originStyleProp.map(y=>this.el.style[y])),u}_setupHelperStyle(r){this.helper.classList.add("ui-draggable-dragging");let u=this.helper.style;return u.pointerEvents="none",u.width=this.dragOffset.width+"px",u.height=this.dragOffset.height+"px",u.willChange="left, top",u.position="fixed",this._dragFollow(r),u.transition="none",setTimeout(()=>{this.helper&&(u.transition=null)},0),this}_removeHelperStyle(){if(this.helper.classList.remove("ui-draggable-dragging"),!this.helper?.gridstackNode?._isAboutToRemove&&this.dragElementOriginStyle){let u=this.helper,y=this.dragElementOriginStyle.transition||null;u.style.transition=this.dragElementOriginStyle.transition="none",Te.originStyleProp.forEach(w=>u.style[w]=this.dragElementOriginStyle[w]||null),setTimeout(()=>u.style.transition=y,50)}return delete this.dragElementOriginStyle,this}_dragFollow(r){let u=this.helper.style,y=this.dragOffset;u.left=(r.clientX+y.offsetLeft-0)*this.dragTransform.xScale+"px",u.top=(r.clientY+y.offsetTop-0)*this.dragTransform.yScale+"px"}_setupHelperContainmentStyle(){return this.helperContainment=this.helper.parentElement,this.helper.style.position!=="fixed"&&(this.parentOriginStylePosition=this.helperContainment.style.position,getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this}_getDragOffset(r,u,y){let w=0,D=0;y&&(w=this.dragTransform.xOffset,D=this.dragTransform.yOffset);let F=u.getBoundingClientRect();return{left:F.left,top:F.top,offsetLeft:-r.clientX+F.left-w,offsetTop:-r.clientY+F.top-D,width:F.width*this.dragTransform.xScale,height:F.height*this.dragTransform.yScale}}ui(){let r=this.el.parentElement.getBoundingClientRect(),u=this.helper.getBoundingClientRect();return{position:{top:(u.top-r.top)*this.dragTransform.yScale,left:(u.left-r.left)*this.dragTransform.xScale}}}}Te.originStyleProp=["transition","pointerEvents","position","left","top","minWidth","willChange"];class Ge extends _e{constructor(r,u={}){super(),this.el=r,this.option=u,this._mouseEnter=this._mouseEnter.bind(this),this._mouseLeave=this._mouseLeave.bind(this),this.enable(),this._setupAccept()}on(r,u){super.on(r,u)}off(r){super.off(r)}enable(){this.disabled!==!1&&(super.enable(),this.el.classList.add("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("mouseenter",this._mouseEnter),this.el.addEventListener("mouseleave",this._mouseLeave),ht&&(this.el.addEventListener("pointerenter",oe),this.el.addEventListener("pointerleave",Pe)))}disable(r=!1){this.disabled!==!0&&(super.disable(),this.el.classList.remove("ui-droppable"),r||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("mouseenter",this._mouseEnter),this.el.removeEventListener("mouseleave",this._mouseLeave),ht&&(this.el.removeEventListener("pointerenter",oe),this.el.removeEventListener("pointerleave",Pe)))}destroy(){this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),super.destroy()}updateOption(r){return Object.keys(r).forEach(u=>this.option[u]=r[u]),this._setupAccept(),this}_mouseEnter(r){if(!W.dragElement||!this._canDrop(W.dragElement.el))return;r.preventDefault(),r.stopPropagation(),W.dropElement&&W.dropElement!==this&&W.dropElement._mouseLeave(r,!0),W.dropElement=this;let u=m.initEvent(r,{target:this.el,type:"dropover"});this.option.over&&this.option.over(u,this._ui(W.dragElement)),this.triggerEvent("dropover",u),this.el.classList.add("ui-droppable-over")}_mouseLeave(r,u=!1){if(!W.dragElement||W.dropElement!==this)return;r.preventDefault(),r.stopPropagation();let y=m.initEvent(r,{target:this.el,type:"dropout"});if(this.option.out&&this.option.out(y,this._ui(W.dragElement)),this.triggerEvent("dropout",y),W.dropElement===this&&(delete W.dropElement,!u)){let w,D=this.el.parentElement;for(;!w&&D;)w=D.ddElement?.ddDroppable,D=D.parentElement;w&&w._mouseEnter(r)}}drop(r){r.preventDefault();let u=m.initEvent(r,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(u,this._ui(W.dragElement)),this.triggerEvent("drop",u)}_canDrop(r){return r&&(!this.accept||this.accept(r))}_setupAccept(){return this.option.accept?(typeof this.option.accept=="string"?this.accept=r=>r.classList.contains(this.option.accept)||r.matches(this.option.accept):this.accept=this.option.accept,this):this}_ui(r){return{draggable:r.el,...r.ui()}}}class Ee{static init(r){return r.ddElement||(r.ddElement=new Ee(r)),r.ddElement}constructor(r){this.el=r}on(r,u){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(r)>-1?this.ddDraggable.on(r,u):this.ddDroppable&&["drop","dropover","dropout"].indexOf(r)>-1?this.ddDroppable.on(r,u):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(r)>-1&&this.ddResizable.on(r,u),this}off(r){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(r)>-1?this.ddDraggable.off(r):this.ddDroppable&&["drop","dropover","dropout"].indexOf(r)>-1?this.ddDroppable.off(r):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(r)>-1&&this.ddResizable.off(r),this}setupDraggable(r){return this.ddDraggable?this.ddDraggable.updateOption(r):this.ddDraggable=new Te(this.el,r),this}cleanDraggable(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this}setupResizable(r){return this.ddResizable?this.ddResizable.updateOption(r):this.ddResizable=new Re(this.el,r),this}cleanResizable(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this}setupDroppable(r){return this.ddDroppable?this.ddDroppable.updateOption(r):this.ddDroppable=new Ge(this.el,r),this}cleanDroppable(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this}}let te=new class{resizable(St,r,u,y){return this._getDDElements(St).forEach(w=>{if(r==="disable"||r==="enable")w.ddResizable&&w.ddResizable[r]();else if(r==="destroy")w.ddResizable&&w.cleanResizable();else if(r==="option")w.setupResizable({[u]:y});else{let D=w.el.gridstackNode.grid,F=w.el.getAttribute("gs-resize-handles")||D.opts.resizable.handles||"e,s,se";F==="all"&&(F="n,e,s,w,se,sw,ne,nw");let V=!D.opts.alwaysShowResizeHandle;w.setupResizable({...D.opts.resizable,handles:F,autoHide:V,start:r.start,stop:r.stop,resize:r.resize})}}),this}draggable(St,r,u,y){return this._getDDElements(St).forEach(w=>{if(r==="disable"||r==="enable")w.ddDraggable&&w.ddDraggable[r]();else if(r==="destroy")w.ddDraggable&&w.cleanDraggable();else if(r==="option")w.setupDraggable({[u]:y});else{let D=w.el.gridstackNode.grid;w.setupDraggable({...D.opts.draggable,start:r.start,stop:r.stop,drag:r.drag})}}),this}dragIn(St,r){return this._getDDElements(St).forEach(u=>u.setupDraggable(r)),this}droppable(St,r,u,y){return typeof r.accept!="function"||r._accept||(r._accept=r.accept,r.accept=w=>r._accept(w)),this._getDDElements(St).forEach(w=>{r==="disable"||r==="enable"?w.ddDroppable&&w.ddDroppable[r]():r==="destroy"?w.ddDroppable&&w.cleanDroppable():r==="option"?w.setupDroppable({[u]:y}):w.setupDroppable(r)}),this}isDroppable(St){return!(!(St&&St.ddElement&&St.ddElement.ddDroppable)||St.ddElement.ddDroppable.disabled)}isDraggable(St){return!(!(St&&St.ddElement&&St.ddElement.ddDraggable)||St.ddElement.ddDraggable.disabled)}isResizable(St){return!(!(St&&St.ddElement&&St.ddElement.ddResizable)||St.ddElement.ddResizable.disabled)}on(St,r,u){return this._getDDElements(St).forEach(y=>y.on(r,w=>{u(w,W.dragElement?W.dragElement.el:w.target,W.dragElement?W.dragElement.helper:null)})),this}off(St,r){return this._getDDElements(St).forEach(u=>u.off(r)),this}_getDDElements(St,r=!0){let u=m.getElements(St);if(!u.length)return[];let y=u.map(w=>w.ddElement||(r?Ee.init(w):null));return r||y.filter(w=>w),y}};class Vt{static init(r={},u=".grid-stack"){if(typeof document>"u")return null;let y=Vt.getGridElement(u);return y?(y.gridstack||(y.gridstack=new Vt(y,m.cloneDeep(r))),y.gridstack):(console.error(typeof u=="string"?'GridStack.initAll() no grid was found with selector "'+u+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`:"GridStack.init() no grid element was passed."),null)}static initAll(r={},u=".grid-stack"){let y=[];return typeof document>"u"||(Vt.getGridElements(u).forEach(w=>{w.gridstack||(w.gridstack=new Vt(w,m.cloneDeep(r))),y.push(w.gridstack)}),y.length===0&&console.error('GridStack.initAll() no grid was found with selector "'+u+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`)),y}static addGrid(r,u={}){if(!r)return null;let y=r;if(y.gridstack){let w=y.gridstack;return u&&(w.opts={...w.opts,...u}),u.children!==void 0&&w.load(u.children),w}if(!r.classList.contains("grid-stack")||Vt.addRemoveCB)if(Vt.addRemoveCB)y=Vt.addRemoveCB(r,u,!0,!0);else{let w=document.implementation.createHTMLDocument("");w.body.innerHTML=`<div class="grid-stack ${u.class||""}"></div>`,y=w.body.children[0],r.appendChild(y)}return Vt.init(u,y)}static registerEngine(r){Vt.engineClass=r}get placeholder(){if(!this._placeholder){let r=document.createElement("div");r.className="placeholder-content",this.opts.placeholderText&&(r.innerHTML=this.opts.placeholderText),this._placeholder=document.createElement("div"),this._placeholder.classList.add(this.opts.placeholderClass,I.itemClass,this.opts.itemClass),this.placeholder.appendChild(r)}return this._placeholder}constructor(r,u={}){this._gsEventHandler={},this._extraDragRow=0,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0},r.gridstack=this,this.el=r,u=u||{},r.classList.contains("grid-stack")||this.el.classList.add("grid-stack"),u.row&&(u.minRow=u.maxRow=u.row,delete u.row);let y=m.toNumber(r.getAttribute("gs-row"));u.column==="auto"&&delete u.column,u.alwaysShowResizeHandle!==void 0&&(u._alwaysShowResizeHandle=u.alwaysShowResizeHandle);let w=u.columnOpts?.breakpoints,D=u;if(D.oneColumnModeDomSort&&(delete D.oneColumnModeDomSort,console.log("warning: Gridstack oneColumnModeDomSort no longer supported. Use GridStackOptions.columnOpts instead.")),D.oneColumnSize||D.disableOneColumnMode===!1){let kt=D.oneColumnSize||768;delete D.oneColumnSize,delete D.disableOneColumnMode,u.columnOpts=u.columnOpts||{},w=u.columnOpts.breakpoints=u.columnOpts.breakpoints||[];let Et=w.find(ee=>ee.c===1);Et?Et.w=kt:(Et={c:1,w:kt},w.push(Et,{c:12,w:kt+1}))}let F=u.columnOpts;F&&(F.columnWidth||F.breakpoints?.length?F.columnMax=F.columnMax||12:(delete u.columnOpts,w=void 0)),w?.length>1&&w.sort((kt,Et)=>(Et.w||0)-(kt.w||0));let V={...m.cloneDeep(I),column:m.toNumber(r.getAttribute("gs-column"))||I.column,minRow:y||m.toNumber(r.getAttribute("gs-min-row"))||I.minRow,maxRow:y||m.toNumber(r.getAttribute("gs-max-row"))||I.maxRow,staticGrid:m.toBool(r.getAttribute("gs-static"))||I.staticGrid,draggable:{handle:(u.handleClass?"."+u.handleClass:u.handle?u.handle:"")||I.draggable.handle},removableOptions:{accept:u.itemClass||I.removableOptions.accept,decline:I.removableOptions.decline}};r.getAttribute("gs-animate")&&(V.animate=m.toBool(r.getAttribute("gs-animate"))),this.opts=m.defaults(u,V),u=null,this._initMargin(),this.checkDynamicColumn(),this.el.classList.add("gs-"+this.opts.column),this.opts.rtl==="auto"&&(this.opts.rtl=r.style.direction==="rtl"),this.opts.rtl&&this.el.classList.add("grid-stack-rtl");let ot=this.el.parentElement?.parentElement,Y=ot?.classList.contains(I.itemClass)?ot.gridstackNode:void 0;Y&&(Y.subGrid=this,this.parentGridItem=Y,this.el.classList.add("grid-stack-nested"),Y.el.classList.add("grid-stack-sub-grid")),this._isAutoCellHeight=this.opts.cellHeight==="auto",this._isAutoCellHeight||this.opts.cellHeight==="initial"?this.cellHeight(void 0,!1):(typeof this.opts.cellHeight=="number"&&this.opts.cellHeightUnit&&this.opts.cellHeightUnit!==I.cellHeightUnit&&(this.opts.cellHeight=this.opts.cellHeight+this.opts.cellHeightUnit,delete this.opts.cellHeightUnit),this.cellHeight(this.opts.cellHeight,!1)),this.opts.alwaysShowResizeHandle==="mobile"&&(this.opts.alwaysShowResizeHandle=ht),this._styleSheetClass="gs-id-"+C._idSeq++,this.el.classList.add(this._styleSheetClass),this._setStaticClass();let it=this.opts.engineClass||Vt.engineClass||C;if(this.engine=new it({column:this.getColumn(),float:this.opts.float,maxRow:this.opts.maxRow,onChange:kt=>{let Et=0;this.engine.nodes.forEach(ee=>{Et=Math.max(Et,ee.y+ee.h)}),kt.forEach(ee=>{let Le=ee.el;Le&&(ee._removeDOM?(Le&&Le.remove(),delete ee._removeDOM):this._writePosAttr(Le,ee))}),this._updateStyles(!1,Et)}}),this._updateStyles(!1,0),this.opts.auto&&(this.batchUpdate(),this.getGridItems().forEach(kt=>this._prepareElement(kt)),this.batchUpdate(!1)),this.opts.children){let kt=this.opts.children;delete this.opts.children,kt.length&&this.load(kt)}this.setAnimation(this.opts.animate),this.opts.subGridDynamic&&!W.pauseDrag&&(W.pauseDrag=!0),this.opts.draggable?.pause!==void 0&&(W.pauseDrag=this.opts.draggable.pause),this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateResizeEvent()}addWidget(r,u){let y,w;if(typeof r=="string"){let V=document.implementation.createHTMLDocument("");V.body.innerHTML=r,y=V.body.children[0]}else if(arguments.length===0||arguments.length===1&&((D=r).el!==void 0||D.x!==void 0||D.y!==void 0||D.w!==void 0||D.h!==void 0||D.content!==void 0))if(w=u=r,w?.el)y=w.el;else if(Vt.addRemoveCB)y=Vt.addRemoveCB(this.el,u,!0,!1);else{let V=u?.content||"",ot=document.implementation.createHTMLDocument("");ot.body.innerHTML=`<div class="grid-stack-item ${this.opts.itemClass||""}"><div class="grid-stack-item-content">${V}</div></div>`,y=ot.body.children[0]}else y=r;var D;if(!y)return;if(w=y.gridstackNode,w&&y.parentElement===this.el&&this.engine.nodes.find(V=>V._id===w._id))return y;let F=this._readAttr(y);return u=m.cloneDeep(u)||{},m.defaults(u,F),w=this.engine.prepareNode(u),this._writeAttr(y,u),this._insertNotAppend?this.el.prepend(y):this.el.appendChild(y),this.makeWidget(y,u),y}makeSubGrid(r,u,y,w=!0){let D,F=r.gridstackNode;if(F||(F=this.makeWidget(r).gridstackNode),F.subGrid?.el)return F.subGrid;let V,ot=this;for(;ot&&!D;)D=ot.opts?.subGridOpts,ot=ot.parentGridItem?.grid;u=m.cloneDeep({...D||{},children:void 0,...u||F.subGridOpts||{}}),F.subGridOpts=u,u.column==="auto"&&(V=!0,u.column=Math.max(F.w||1,y?.w||1),delete u.columnOpts);let Y,it,kt=F.el.querySelector(".grid-stack-item-content");if(w){if(this._removeDD(F.el),it={...F,x:0,y:0},m.removeInternalForSave(it),delete it.subGridOpts,F.content&&(it.content=F.content,delete F.content),Vt.addRemoveCB)Y=Vt.addRemoveCB(this.el,it,!0,!1);else{let ee=document.implementation.createHTMLDocument("");ee.body.innerHTML='<div class="grid-stack-item"></div>',Y=ee.body.children[0],Y.appendChild(kt),ee.body.innerHTML='<div class="grid-stack-item-content"></div>',kt=ee.body.children[0],F.el.appendChild(kt)}this._prepareDragDropByNode(F)}if(y){let ee=V?u.column:F.w,Le=F.h+y.h,ti=F.el.style;ti.transition="none",this.update(F.el,{w:ee,h:Le}),setTimeout(()=>ti.transition=null)}let Et=F.subGrid=Vt.addGrid(kt,u);return y?._moving&&(Et._isTemp=!0),V&&(Et._autoColumn=!0),w&&Et.addWidget(Y,it),y&&(y._moving?window.setTimeout(()=>m.simulateMouseEvent(y._event,"mouseenter",Et.el),0):Et.addWidget(F.el,F)),Et}removeAsSubGrid(r){let u=this.parentGridItem?.grid;u&&(u.batchUpdate(),u.removeWidget(this.parentGridItem.el,!0,!0),this.engine.nodes.forEach(y=>{y.x+=this.parentGridItem.x,y.y+=this.parentGridItem.y,u.addWidget(y.el,y)}),u.batchUpdate(!1),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,r&&window.setTimeout(()=>m.simulateMouseEvent(r._event,"mouseenter",u.el),0))}save(r=!0,u=!1,y=Vt.saveCB){let w=this.engine.save(r,y);if(w.forEach(D=>{if(r&&D.el&&!D.subGrid&&!y){let F=D.el.querySelector(".grid-stack-item-content");D.content=F?F.innerHTML:void 0,D.content||delete D.content}else if(r||y||delete D.content,D.subGrid?.el){let F=D.subGrid.save(r,u,y);D.subGridOpts=u?F:{children:F},delete D.subGrid}delete D.el}),u){let D=m.cloneDeep(this.opts);D.marginBottom===D.marginTop&&D.marginRight===D.marginLeft&&D.marginTop===D.marginRight&&(D.margin=D.marginTop,delete D.marginTop,delete D.marginRight,delete D.marginBottom,delete D.marginLeft),D.rtl===(this.el.style.direction==="rtl")&&(D.rtl="auto"),this._isAutoCellHeight&&(D.cellHeight="auto"),this._autoColumn&&(D.column="auto");let F=D._alwaysShowResizeHandle;return delete D._alwaysShowResizeHandle,F!==void 0?D.alwaysShowResizeHandle=F:delete D.alwaysShowResizeHandle,m.removeInternalAndSame(D,I),D.children=w,D}return w}load(r,u=Vt.addRemoveCB||!0){r=m.cloneDeep(r);let y=this.getColumn(),w=r.some(Y=>Y.x!==void 0||Y.y!==void 0);w&&(r=m.sort(r,-1,y)),this._insertNotAppend=w,r.some(Y=>(Y.x||0)+(Y.w||1)>y)&&(this._ignoreLayoutsNodeChange=!0,this.engine.cacheLayout(r,12,!0));let D=Vt.addRemoveCB;typeof u=="function"&&(Vt.addRemoveCB=u);let F=[];this.batchUpdate();let V=!this.engine.nodes.length;V&&this.setAnimation(!1),u&&[...this.engine.nodes].forEach(Y=>{Y.id&&(m.find(r,Y.id)||(Vt.addRemoveCB&&Vt.addRemoveCB(this.el,Y,!1,!1),F.push(Y),this.removeWidget(Y.el,!0,!1)))});let ot=[];return this.engine.nodes=this.engine.nodes.filter(Y=>!m.find(r,Y.id)||(ot.push(Y),!1)),r.forEach(Y=>{let it=m.find(ot,Y.id);if(it){if(m.shouldSizeToContent(it)&&(Y.h=it.h),this.engine.nodeBoundFix(Y),(Y.autoPosition||Y.x===void 0||Y.y===void 0)&&(Y.w=Y.w||it.w,Y.h=Y.h||it.h,this.engine.findEmptyPosition(Y)),this.engine.nodes.push(it),m.samePos(it,Y)&&this.moveNode(it,{...Y,forceCollide:!0}),this.update(it.el,Y),Y.subGridOpts?.children){let kt=it.el.querySelector(".grid-stack");kt&&kt.gridstack&&(kt.gridstack.load(Y.subGridOpts.children),this._insertNotAppend=!0)}}else u&&this.addWidget(Y)}),this.engine.removedNodes=F,this.batchUpdate(!1),delete this._ignoreLayoutsNodeChange,delete this._insertNotAppend,D?Vt.addRemoveCB=D:delete Vt.addRemoveCB,V&&this.opts.animate&&setTimeout(()=>this.setAnimation(this.opts.animate)),this}batchUpdate(r=!0){return this.engine.batchUpdate(r),r||(this._updateContainerHeight(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()),this}getCellHeight(r=!1){if(this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!r||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px"))return this.opts.cellHeight;if(this.opts.cellHeightUnit==="rem")return this.opts.cellHeight*parseFloat(getComputedStyle(document.documentElement).fontSize);if(this.opts.cellHeightUnit==="em")return this.opts.cellHeight*parseFloat(getComputedStyle(this.el).fontSize);if(this.opts.cellHeightUnit==="cm")return this.opts.cellHeight*(96/2.54);if(this.opts.cellHeightUnit==="mm")return this.opts.cellHeight*(96/2.54)/10;let u=this.el.querySelector("."+this.opts.itemClass);if(u){let w=m.toNumber(u.getAttribute("gs-h"))||1;return Math.round(u.offsetHeight/w)}let y=parseInt(this.el.getAttribute("gs-current-row"));return y?Math.round(this.el.getBoundingClientRect().height/y):this.opts.cellHeight}cellHeight(r,u=!0){if(u&&r!==void 0&&this._isAutoCellHeight!==(r==="auto")&&(this._isAutoCellHeight=r==="auto",this._updateResizeEvent()),r!=="initial"&&r!=="auto"||(r=void 0),r===void 0){let w=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;r=this.cellWidth()+w}let y=m.parseHeight(r);return this.opts.cellHeightUnit===y.unit&&this.opts.cellHeight===y.h||(this.opts.cellHeightUnit=y.unit,this.opts.cellHeight=y.h,this.resizeToContentCheck(),u&&this._updateStyles(!0)),this}cellWidth(){return this._widthOrContainer()/this.getColumn()}_widthOrContainer(r=!1){return r&&this.opts.columnOpts?.breakpointForWindow?window.innerWidth:this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}checkDynamicColumn(){let r=this.opts.columnOpts;if(!r||!r.columnWidth&&!r.breakpoints?.length)return!1;let u=this.getColumn(),y=u,w=this._widthOrContainer(!0);if(r.columnWidth)y=Math.min(Math.round(w/r.columnWidth)||1,r.columnMax);else{y=r.columnMax;let D=0;for(;D<r.breakpoints.length&&w<=r.breakpoints[D].w;)y=r.breakpoints[D++].c||u}if(y!==u){let D=r.breakpoints?.find(F=>F.c===y);return this.column(y,D?.layout||r.layout),!0}return!1}compact(r="compact",u=!0){return this.engine.compact(r,u),this._triggerChangeEvent(),this}column(r,u="moveScale"){if(!r||r<1||this.opts.column===r)return this;let y=this.getColumn();return this.opts.column=r,this.engine?(this.engine.column=r,this.el.classList.remove("gs-"+y),this.el.classList.add("gs-"+r),this.engine.columnChanged(y,r,u),this._isAutoCellHeight&&this.cellHeight(),this.resizeToContentCheck(!0),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this):this}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(r=>r.matches("."+this.opts.itemClass)&&!r.matches("."+this.opts.placeholderClass))}destroy(r=!0){if(this.el)return this.offAll(),this._updateResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),r?this.el.parentNode.removeChild(this.el):(this.removeAll(r),this.el.classList.remove(this._styleSheetClass),this.el.removeAttribute("gs-current-row")),this._removeStylesheet(),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,delete this.opts,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this}float(r){return this.opts.float!==r&&(this.opts.float=this.engine.float=r,this._triggerChangeEvent()),this}getFloat(){return this.engine.float}getCellFromPixel(r,u=!1){let y,w=this.el.getBoundingClientRect();y=u?{top:w.top+document.documentElement.scrollTop,left:w.left}:{top:this.el.offsetTop,left:this.el.offsetLeft};let D=r.left-y.left,F=r.top-y.top,V=w.width/this.getColumn(),ot=w.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(D/V),y:Math.floor(F/ot)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow)}isAreaEmpty(r,u,y,w){return this.engine.isAreaEmpty(r,u,y,w)}makeWidget(r,u){let y=Vt.getElement(r);this._prepareElement(y,!0,u);let w=y.gridstackNode;return this._updateContainerHeight(),w.subGridOpts&&this.makeSubGrid(y,w.subGridOpts,void 0,!1),this.opts.column===1&&(this._ignoreLayoutsNodeChange=!0),this._triggerAddEvent(),this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,y}on(r,u){if(r.indexOf(" ")!==-1)return r.split(" ").forEach(y=>this.on(y,u)),this;if(r==="change"||r==="added"||r==="removed"||r==="enable"||r==="disable"){let y=r==="enable"||r==="disable";this._gsEventHandler[r]=y?w=>u(w):w=>u(w,w.detail),this.el.addEventListener(r,this._gsEventHandler[r])}else r==="drag"||r==="dragstart"||r==="dragstop"||r==="resizestart"||r==="resize"||r==="resizestop"||r==="dropped"||r==="resizecontent"?this._gsEventHandler[r]=u:console.error("GridStack.on("+r+") event not supported");return this}off(r){return r.indexOf(" ")!==-1?(r.split(" ").forEach(u=>this.off(u)),this):(r!=="change"&&r!=="added"&&r!=="removed"&&r!=="enable"&&r!=="disable"||this._gsEventHandler[r]&&this.el.removeEventListener(r,this._gsEventHandler[r]),delete this._gsEventHandler[r],this)}offAll(){return Object.keys(this._gsEventHandler).forEach(r=>this.off(r)),this}removeWidget(r,u=!0,y=!0){return Vt.getElements(r).forEach(w=>{if(w.parentElement&&w.parentElement!==this.el)return;let D=w.gridstackNode;D||(D=this.engine.nodes.find(F=>w===F.el)),D&&(Vt.addRemoveCB&&Vt.addRemoveCB(this.el,D,!1,!1),delete w.gridstackNode,this._removeDD(w),this.engine.removeNode(D,u,y),u&&w.parentElement&&w.remove())}),y&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this}removeAll(r=!0){return this.engine.nodes.forEach(u=>{delete u.el.gridstackNode,this._removeDD(u.el)}),this.engine.removeAll(r),this._triggerRemoveEvent(),this}setAnimation(r){return r?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this}hasAnimationCSS(){return this.el.classList.contains("grid-stack-animate")}setStatic(r,u=!0,y=!0){return!!this.opts.staticGrid===r||(r?this.opts.staticGrid=!0:delete this.opts.staticGrid,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach(w=>{this._prepareDragDropByNode(w),w.subGrid&&y&&w.subGrid.setStatic(r,u,y)}),u&&this._setStaticClass()),this}update(r,u){if(arguments.length>2){console.warn("gridstack.ts: `update(el, x, y, w, h)` is deprecated. Use `update(el, {x, w, content, ...})`. It will be removed soon");let y=arguments,w=1;return u={x:y[w++],y:y[w++],w:y[w++],h:y[w++]},this.update(r,u)}return Vt.getElements(r).forEach(y=>{let w=y?.gridstackNode;if(!w)return;let D=m.cloneDeep(u);this.engine.nodeBoundFix(D),delete D.autoPosition,delete D.id;let F,V=["x","y","w","h"];if(V.some(it=>D[it]!==void 0&&D[it]!==w[it])&&(F={},V.forEach(it=>{F[it]=D[it]!==void 0?D[it]:w[it],delete D[it]})),!F&&(D.minW||D.minH||D.maxW||D.maxH)&&(F={}),D.content!==void 0){let it=y.querySelector(".grid-stack-item-content");it&&it.innerHTML!==D.content&&(it.innerHTML=D.content,w.subGrid?.el&&(it.appendChild(w.subGrid.el),w.subGrid.opts.styleInHead||w.subGrid._updateStyles(!0))),delete D.content}let ot=!1,Y=!1;for(let it in D)it[0]!=="_"&&w[it]!==D[it]&&(w[it]=D[it],ot=!0,Y=Y||!this.opts.staticGrid&&(it==="noResize"||it==="noMove"||it==="locked"));if(m.sanitizeMinMax(w),F){let it=F.w!==void 0&&F.w!==w.w;this.moveNode(w,F),this.resizeToContentCheck(it,w)}(F||ot)&&this._writeAttr(y,w),Y&&this._prepareDragDropByNode(w)}),this}moveNode(r,u){this.engine.cleanNodes().beginUpdate(r).moveNode(r,u),this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate()}resizeToContent(r){if(!r||(r.classList.remove("size-to-content-max"),!r.clientHeight))return;let u=r.gridstackNode;if(!u)return;let y=u.grid;if(!y||r.parentElement!==y.el)return;let w=y.getCellHeight(!0);if(!w)return;let D,F=u.h?u.h*w:r.clientHeight;if(u.resizeToContentParent&&(D=r.querySelector(u.resizeToContentParent)),D||(D=r.querySelector(Vt.resizeToContentParent)),!D)return;let V=r.clientHeight-D.clientHeight,ot=u.h?u.h*w-V:D.clientHeight,Y;if(u.subGrid)Y=u.subGrid.getRow()*u.subGrid.getCellHeight(!0);else{let Et=D.firstElementChild;if(!Et)return void console.error(`Error: GridStack.resizeToContent() widget id:${u.id} '${Vt.resizeToContentParent}'.firstElementChild is null, make sure to have a div like container. Skipping sizing.`);Y=Et.getBoundingClientRect().height||ot}if(ot===Y)return;F+=Y-ot;let it=Math.ceil(F/w),kt=Number.isInteger(u.sizeToContent)?u.sizeToContent:0;kt&&it>kt&&(it=kt,r.classList.add("size-to-content-max")),u.minH&&it<u.minH?it=u.minH:u.maxH&&it>u.maxH&&(it=u.maxH),it!==u.h&&(y._ignoreLayoutsNodeChange=!0,y.moveNode(u,{h:it}),delete y._ignoreLayoutsNodeChange)}resizeToContentCBCheck(r){Vt.resizeToContentCB?Vt.resizeToContentCB(r):this.resizeToContent(r)}margin(r){if(!(typeof r=="string"&&r.split(" ").length>1)){let u=m.parseHeight(r);if(this.opts.marginUnit===u.unit&&this.opts.margin===u.h)return}return this.opts.margin=r,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this._updateStyles(!0),this}getMargin(){return this.opts.margin}willItFit(r){if(arguments.length>1){console.warn("gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon");let u=arguments,y=0,w={x:u[y++],y:u[y++],w:u[y++],h:u[y++],autoPosition:u[y++]};return this.willItFit(w)}return this.engine.willItFit(r)}_triggerChangeEvent(){if(this.engine.batchMode)return this;let r=this.engine.getDirtyNodes(!0);return r&&r.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(r),this._triggerEvent("change",r)),this.engine.saveInitial(),this}_triggerAddEvent(){return this.engine.batchMode||this.engine.addedNodes?.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(r=>{delete r._dirty}),this._triggerEvent("added",this.engine.addedNodes),this.engine.addedNodes=[]),this}_triggerRemoveEvent(){return this.engine.batchMode||this.engine.removedNodes?.length&&(this._triggerEvent("removed",this.engine.removedNodes),this.engine.removedNodes=[]),this}_triggerEvent(r,u){let y=u?new CustomEvent(r,{bubbles:!1,detail:u}):new Event(r);return this.el.dispatchEvent(y),this}_removeStylesheet(){if(this._styles){let r=this.opts.styleInHead?void 0:this.el.parentNode;m.removeStylesheet(this._styleSheetClass,r),delete this._styles}return this}_updateStyles(r=!1,u){if(r&&this._removeStylesheet(),u===void 0&&(u=this.getRow()),this._updateContainerHeight(),this.opts.cellHeight===0)return this;let y=this.opts.cellHeight,w=this.opts.cellHeightUnit,D=`.${this._styleSheetClass} > .${this.opts.itemClass}`;if(!this._styles){let F=this.opts.styleInHead?void 0:this.el.parentNode;if(this._styles=m.createStylesheet(this._styleSheetClass,F,{nonce:this.opts.nonce}),!this._styles)return this;this._styles._max=0,m.addCSSRule(this._styles,D,`height: ${y}${w}`);let V=this.opts.marginTop+this.opts.marginUnit,ot=this.opts.marginBottom+this.opts.marginUnit,Y=this.opts.marginRight+this.opts.marginUnit,it=this.opts.marginLeft+this.opts.marginUnit,kt=`${D} > .grid-stack-item-content`,Et=`.${this._styleSheetClass} > .grid-stack-placeholder > .placeholder-content`;m.addCSSRule(this._styles,kt,`top: ${V}; right: ${Y}; bottom: ${ot}; left: ${it};`),m.addCSSRule(this._styles,Et,`top: ${V}; right: ${Y}; bottom: ${ot}; left: ${it};`),m.addCSSRule(this._styles,`${D} > .ui-resizable-n`,`top: ${V};`),m.addCSSRule(this._styles,`${D} > .ui-resizable-s`,`bottom: ${ot}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-ne`,`right: ${Y}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-e`,`right: ${Y}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-se`,`right: ${Y}; bottom: ${ot}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-nw`,`left: ${it}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-w`,`left: ${it}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-sw`,`left: ${it}; bottom: ${ot}`)}if((u=u||this._styles._max)>this._styles._max){let F=V=>y*V+w;for(let V=this._styles._max+1;V<=u;V++)m.addCSSRule(this._styles,`${D}[gs-y="${V}"]`,`top: ${F(V)}`),m.addCSSRule(this._styles,`${D}[gs-h="${V+1}"]`,`height: ${F(V+1)}`);this._styles._max=u}return this}_updateContainerHeight(){if(!this.engine||this.engine.batchMode)return this;let r=this.parentGridItem,u=this.getRow()+this._extraDragRow,y=this.opts.cellHeight,w=this.opts.cellHeightUnit;if(!y)return this;if(!r){let D=m.parseHeight(getComputedStyle(this.el).minHeight);if(D.h>0&&D.unit===w){let F=Math.floor(D.h/y);u<F&&(u=F)}}return this.el.setAttribute("gs-current-row",String(u)),this.el.style.removeProperty("min-height"),this.el.style.removeProperty("height"),u&&(this.el.style[r?"minHeight":"height"]=u*y+w),r&&!r.grid.engine.batchMode&&m.shouldSizeToContent(r)&&r.grid.resizeToContentCBCheck(r.el),this}_prepareElement(r,u=!1,y){y=y||this._readAttr(r),r.gridstackNode=y,y.el=r,y.grid=this,y=this.engine.addNode(y,u),this._writeAttr(r,y),r.classList.add(I.itemClass,this.opts.itemClass);let w=m.shouldSizeToContent(y);return w?r.classList.add("size-to-content"):r.classList.remove("size-to-content"),w&&this.resizeToContentCheck(!1,y),this._prepareDragDropByNode(y),this}_writePosAttr(r,u){return u.x!==void 0&&u.x!==null&&r.setAttribute("gs-x",String(u.x)),u.y!==void 0&&u.y!==null&&r.setAttribute("gs-y",String(u.y)),u.w>1?r.setAttribute("gs-w",String(u.w)):r.removeAttribute("gs-w"),u.h>1?r.setAttribute("gs-h",String(u.h)):r.removeAttribute("gs-h"),this}_writeAttr(r,u){if(!u)return this;this._writePosAttr(r,u);let y={autoPosition:"gs-auto-position",noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id"};for(let w in y)u[w]?r.setAttribute(y[w],String(u[w])):r.removeAttribute(y[w]);return this}_readAttr(r,u=!0){let y={};y.x=m.toNumber(r.getAttribute("gs-x")),y.y=m.toNumber(r.getAttribute("gs-y")),y.w=m.toNumber(r.getAttribute("gs-w")),y.h=m.toNumber(r.getAttribute("gs-h")),y.autoPosition=m.toBool(r.getAttribute("gs-auto-position")),y.noResize=m.toBool(r.getAttribute("gs-no-resize")),y.noMove=m.toBool(r.getAttribute("gs-no-move")),y.locked=m.toBool(r.getAttribute("gs-locked")),y.id=r.getAttribute("gs-id"),y.maxW=m.toNumber(r.getAttribute("gs-max-w")),y.minW=m.toNumber(r.getAttribute("gs-min-w")),y.maxH=m.toNumber(r.getAttribute("gs-max-h")),y.minH=m.toNumber(r.getAttribute("gs-min-h")),u&&(y.w===1&&r.removeAttribute("gs-w"),y.h===1&&r.removeAttribute("gs-h"),y.maxW&&r.removeAttribute("gs-max-w"),y.minW&&r.removeAttribute("gs-min-w"),y.maxH&&r.removeAttribute("gs-max-h"),y.minH&&r.removeAttribute("gs-min-h"));for(let w in y){if(!y.hasOwnProperty(w))return;y[w]||y[w]===0||delete y[w]}return y}_setStaticClass(){let r=["grid-stack-static"];return this.opts.staticGrid?(this.el.classList.add(...r),this.el.setAttribute("gs-static","true")):(this.el.classList.remove(...r),this.el.removeAttribute("gs-static")),this}onResize(){if(!this.el?.clientWidth||this.prevWidth===this.el.clientWidth)return;this.prevWidth=this.el.clientWidth,this.batchUpdate();let r=!1;return this._autoColumn&&this.parentGridItem?this.opts.column!==this.parentGridItem.w&&(this.column(this.parentGridItem.w,"none"),r=!0):r=this.checkDynamicColumn(),this._isAutoCellHeight&&this.cellHeight(),this.engine.nodes.forEach(u=>{u.subGrid&&u.subGrid.onResize()}),this._skipInitialResize||this.resizeToContentCheck(r),delete this._skipInitialResize,this.batchUpdate(!1),this}resizeToContentCheck(r=!1,u=void 0){if(this.engine){if(r&&this.hasAnimationCSS())return setTimeout(()=>this.resizeToContentCheck(!1,u),310);if(u)m.shouldSizeToContent(u)&&this.resizeToContentCBCheck(u.el);else if(this.engine.nodes.some(y=>m.shouldSizeToContent(y))){let y=[...this.engine.nodes];this.batchUpdate(),y.forEach(w=>{m.shouldSizeToContent(w)&&this.resizeToContentCBCheck(w.el)}),this.batchUpdate(!1)}this._gsEventHandler.resizecontent&&this._gsEventHandler.resizecontent(null,u?[u]:this.engine.nodes)}}_updateResizeEvent(r=!1){let u=!this.parentGridItem&&(this._isAutoCellHeight||this.opts.sizeToContent||this.opts.columnOpts||this.engine.nodes.find(y=>y.sizeToContent));return r||!u||this.resizeObserver?!r&&u||!this.resizeObserver||(this.resizeObserver.disconnect(),delete this.resizeObserver,delete this._sizeThrottle):(this._sizeThrottle=m.throttle(()=>this.onResize(),this.opts.cellHeightThrottle),this.resizeObserver=new ResizeObserver(()=>this._sizeThrottle()),this.resizeObserver.observe(this.el),this._skipInitialResize=!0),this}static getElement(r=".grid-stack-item"){return m.getElement(r)}static getElements(r=".grid-stack-item"){return m.getElements(r)}static getGridElement(r){return Vt.getElement(r)}static getGridElements(r){return m.getElements(r)}_initMargin(){let r,u=0,y=[];return typeof this.opts.margin=="string"&&(y=this.opts.margin.split(" ")),y.length===2?(this.opts.marginTop=this.opts.marginBottom=y[0],this.opts.marginLeft=this.opts.marginRight=y[1]):y.length===4?(this.opts.marginTop=y[0],this.opts.marginRight=y[1],this.opts.marginBottom=y[2],this.opts.marginLeft=y[3]):(r=m.parseHeight(this.opts.margin),this.opts.marginUnit=r.unit,u=this.opts.margin=r.h),this.opts.marginTop===void 0?this.opts.marginTop=u:(r=m.parseHeight(this.opts.marginTop),this.opts.marginTop=r.h,delete this.opts.margin),this.opts.marginBottom===void 0?this.opts.marginBottom=u:(r=m.parseHeight(this.opts.marginBottom),this.opts.marginBottom=r.h,delete this.opts.margin),this.opts.marginRight===void 0?this.opts.marginRight=u:(r=m.parseHeight(this.opts.marginRight),this.opts.marginRight=r.h,delete this.opts.margin),this.opts.marginLeft===void 0?this.opts.marginLeft=u:(r=m.parseHeight(this.opts.marginLeft),this.opts.marginLeft=r.h,delete this.opts.margin),this.opts.marginUnit=r.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop),this}static getDD(){return te}static setupDragIn(r,u,y=document){u?.pause!==void 0&&(W.pauseDrag=u.pause),u={...Q,...u||{}};let w=typeof r=="string"?m.getElements(r,y):r;w.length&&w?.forEach(D=>{te.isDraggable(D)||te.dragIn(D,u)})}movable(r,u){return this.opts.staticGrid||Vt.getElements(r).forEach(y=>{let w=y.gridstackNode;w&&(u?delete w.noMove:w.noMove=!0,this._prepareDragDropByNode(w))}),this}resizable(r,u){return this.opts.staticGrid||Vt.getElements(r).forEach(y=>{let w=y.gridstackNode;w&&(u?delete w.noResize:w.noResize=!0,this._prepareDragDropByNode(w))}),this}disable(r=!0){if(!this.opts.staticGrid)return this.enableMove(!1,r),this.enableResize(!1,r),this._triggerEvent("disable"),this}enable(r=!0){if(!this.opts.staticGrid)return this.enableMove(!0,r),this.enableResize(!0,r),this._triggerEvent("enable"),this}enableMove(r,u=!0){return this.opts.staticGrid||(r?delete this.opts.disableDrag:this.opts.disableDrag=!0,this.engine.nodes.forEach(y=>{this._prepareDragDropByNode(y),y.subGrid&&u&&y.subGrid.enableMove(r,u)})),this}enableResize(r,u=!0){return this.opts.staticGrid||(r?delete this.opts.disableResize:this.opts.disableResize=!0,this.engine.nodes.forEach(y=>{this._prepareDragDropByNode(y),y.subGrid&&u&&y.subGrid.enableResize(r,u)})),this}_removeDD(r){return te.draggable(r,"destroy").resizable(r,"destroy"),r.gridstackNode&&delete r.gridstackNode._initDD,delete r.ddElement,this}_setupAcceptWidget(){if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return te.droppable(this.el,"destroy"),this;let r,u,y=(w,D,F)=>{let V=D.gridstackNode;if(!V)return;if(F=F||D,!V.grid?.el){F.style.transform=`scale(${1/this.dragTransform.xScale},${1/this.dragTransform.yScale})`;let Et=F.getBoundingClientRect();F.style.left=Et.x+(this.dragTransform.xScale-1)*(w.clientX-Et.x)/this.dragTransform.xScale+"px",F.style.top=Et.y+(this.dragTransform.yScale-1)*(w.clientY-Et.y)/this.dragTransform.yScale+"px",F.style.transformOrigin="0px 0px"}let ot=this.el.getBoundingClientRect(),{top:Y,left:it}=F.getBoundingClientRect();it-=ot.left,Y-=ot.top;let kt={position:{top:Y*this.dragTransform.xScale,left:it*this.dragTransform.yScale}};if(V._temporaryRemoved){if(V.x=Math.max(0,Math.round(it/u)),V.y=Math.max(0,Math.round(Y/r)),delete V.autoPosition,this.engine.nodeBoundFix(V),!this.engine.willItFit(V)){if(V.autoPosition=!0,!this.engine.willItFit(V))return void te.off(D,"drag");V._willFitPos&&(m.copyPos(V,V._willFitPos),delete V._willFitPos)}this._onStartMoving(F,w,kt,V,u,r)}else this._dragOrResize(F,w,kt,V,u,r)};return te.droppable(this.el,{accept:w=>{let D=w.gridstackNode;if(D?.grid===this)return!0;if(!this.opts.acceptWidgets)return!1;let F=!0;if(typeof this.opts.acceptWidgets=="function")F=this.opts.acceptWidgets(w);else{let V=this.opts.acceptWidgets===!0?".grid-stack-item":this.opts.acceptWidgets;F=w.matches(V)}if(F&&D&&this.opts.maxRow){let V={w:D.w,h:D.h,minW:D.minW,minH:D.minH};F=this.engine.willItFit(V)}return F}}).on(this.el,"dropover",(w,D,F)=>{let V=D.gridstackNode;if(V?.grid===this&&!V._temporaryRemoved)return!1;V?.grid&&V.grid!==this&&!V._temporaryRemoved&&V.grid._leave(D,F),u=this.cellWidth(),r=this.getCellHeight(!0),V||(V=this._readAttr(D,!1)),V.grid||(V._isExternal=!0,D.gridstackNode=V),F=F||D;let ot=V.w||Math.round(F.offsetWidth/u)||1,Y=V.h||Math.round(F.offsetHeight/r)||1;return V.grid&&V.grid!==this?(D._gridstackNodeOrig||(D._gridstackNodeOrig=V),D.gridstackNode=V={...V,w:ot,h:Y,grid:this},delete V.x,delete V.y,this.engine.cleanupNode(V).nodeBoundFix(V),V._initDD=V._isExternal=V._temporaryRemoved=!0):(V.w=ot,V.h=Y,V._temporaryRemoved=!0),this._itemRemoving(V.el,!1),te.on(D,"drag",y),y(w,D,F),!1}).on(this.el,"dropout",(w,D,F)=>{let V=D.gridstackNode;return!!V&&(V.grid&&V.grid!==this||(this._leave(D,F),this._isTemp&&this.removeAsSubGrid(V)),!1)}).on(this.el,"drop",(w,D,F)=>{let V=D.gridstackNode;if(V?.grid===this&&!V._isExternal)return!1;let ot=!!this.placeholder.parentElement;this.placeholder.remove();let Y=ot&&this.opts.animate;Y&&this.setAnimation(!1);let it=D._gridstackNodeOrig;if(delete D._gridstackNodeOrig,ot&&it?.grid&&it.grid!==this){let Et=it.grid;Et.engine.removeNodeFromLayoutCache(it),Et.engine.removedNodes.push(it),Et._triggerRemoveEvent()._triggerChangeEvent(),Et.parentGridItem&&!Et.engine.nodes.length&&Et.opts.subGridDynamic&&Et.removeAsSubGrid()}if(!V||(ot&&(this.engine.cleanupNode(V),V.grid=this),delete V.grid._isTemp,te.off(D,"drag"),F!==D?(F.remove(),D.gridstackNode=it,ot&&(D=D.cloneNode(!0))):(D.remove(),this._removeDD(D)),!ot))return!1;D.gridstackNode=V,V.el=D;let kt=V.subGrid?.el?.gridstack;return m.copyPos(V,this._readAttr(this.placeholder)),m.removePositioningStyles(D),this.el.appendChild(D),this._prepareElement(D,!0,V),kt&&(kt.parentGridItem=V,kt.opts.styleInHead||kt._updateStyles(!0)),this._updateContainerHeight(),this.engine.addedNodes.push(V),this._triggerAddEvent(),this._triggerChangeEvent(),this.engine.endUpdate(),this._gsEventHandler.dropped&&this._gsEventHandler.dropped({...w,type:"dropped"},it&&it.grid?it:void 0,V),Y&&setTimeout(()=>this.setAnimation(this.opts.animate)),!1}),this}_itemRemoving(r,u){let y=r?r.gridstackNode:void 0;y&&y.grid&&!r.classList.contains(this.opts.removableOptions.decline)&&(u?y._isAboutToRemove=!0:delete y._isAboutToRemove,u?r.classList.add("grid-stack-item-removing"):r.classList.remove("grid-stack-item-removing"))}_setupRemoveDrop(){if(!this.opts.staticGrid&&typeof this.opts.removable=="string"){let r=document.querySelector(this.opts.removable);if(!r)return this;te.isDroppable(r)||te.droppable(r,this.opts.removableOptions).on(r,"dropover",(u,y)=>this._itemRemoving(y,!0)).on(r,"dropout",(u,y)=>this._itemRemoving(y,!1))}return this}_prepareDragDropByNode(r){let u=r.el,y=r.noMove||this.opts.disableDrag,w=r.noResize||this.opts.disableResize;if(this.opts.staticGrid||y&&w)return r._initDD&&(this._removeDD(u),delete r._initDD),u.classList.add("ui-draggable-disabled","ui-resizable-disabled"),this;if(!r._initDD){let D,F,V=(it,kt)=>{this._gsEventHandler[it.type]&&this._gsEventHandler[it.type](it,it.target),D=this.cellWidth(),F=this.getCellHeight(!0),this._onStartMoving(u,it,kt,r,D,F)},ot=(it,kt)=>{this._dragOrResize(u,it,kt,r,D,F)},Y=it=>{this.placeholder.remove(),delete r._moving,delete r._event,delete r._lastTried;let kt=r.w!==r._orig.w,Et=it.target;if(Et.gridstackNode&&Et.gridstackNode.grid===this){if(r.el=Et,r._isAboutToRemove){let ee=u.gridstackNode.grid;ee._gsEventHandler[it.type]&&ee._gsEventHandler[it.type](it,Et),ee.engine.nodes.push(r),ee.removeWidget(u,!0,!0)}else m.removePositioningStyles(Et),r._temporaryRemoved?(m.copyPos(r,r._orig),this._writePosAttr(Et,r),this.engine.addNode(r)):this._writePosAttr(Et,r),this._gsEventHandler[it.type]&&this._gsEventHandler[it.type](it,Et);this._extraDragRow=0,this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate(),it.type==="resizestop"&&(Number.isInteger(r.sizeToContent)&&(r.sizeToContent=r.h),this.resizeToContentCheck(kt,r))}};te.draggable(u,{start:V,stop:Y,drag:ot}).resizable(u,{start:V,stop:Y,resize:ot}),r._initDD=!0}return te.draggable(u,y?"disable":"enable").resizable(u,w?"disable":"enable"),this}_onStartMoving(r,u,y,w,D,F){if(this.engine.cleanNodes().beginUpdate(w),this._writePosAttr(this.placeholder,w),this.el.appendChild(this.placeholder),w.grid?.el)this.dragTransform=m.getValuesFromTransformedElement(r);else if(this.placeholder&&this.placeholder.closest(".grid-stack")){let V=this.placeholder.closest(".grid-stack");this.dragTransform=m.getValuesFromTransformedElement(V)}else this.dragTransform={xScale:1,xOffset:0,yScale:1,yOffset:0};w.el=this.placeholder,w._lastUiPosition=y.position,w._prevYPix=y.position.top,w._moving=u.type==="dragstart",delete w._lastTried,u.type==="dropover"&&w._temporaryRemoved&&(this.engine.addNode(w),w._moving=!0),this.engine.cacheRects(D,F,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),u.type==="resizestart"&&(te.resizable(r,"option","minWidth",D*(w.minW||1)).resizable(r,"option","minHeight",F*(w.minH||1)),w.maxW&&te.resizable(r,"option","maxWidth",D*w.maxW),w.maxH&&te.resizable(r,"option","maxHeight",F*w.maxH))}_dragOrResize(r,u,y,w,D,F){let V,ot={...w._orig},Y=this.opts.marginLeft,it=this.opts.marginRight,kt=this.opts.marginTop,Et=this.opts.marginBottom,ee=Math.round(.1*F),Le=Math.round(.1*D);if(Y=Math.min(Y,Le),it=Math.min(it,Le),kt=Math.min(kt,ee),Et=Math.min(Et,ee),u.type==="drag"){if(w._temporaryRemoved)return;let Ae=y.position.top-w._prevYPix;w._prevYPix=y.position.top,this.opts.draggable.scroll!==!1&&m.updateScrollPosition(r,y.position,Ae);let We=y.position.left+(y.position.left>w._lastUiPosition.left?-it:Y),Ke=y.position.top+(y.position.top>w._lastUiPosition.top?-Et:kt);ot.x=Math.round(We/D),ot.y=Math.round(Ke/F);let Ie=this._extraDragRow;if(this.engine.collide(w,ot)){let Ze=this.getRow(),Ne=Math.max(0,ot.y+w.h-Ze);this.opts.maxRow&&Ze+Ne>this.opts.maxRow&&(Ne=Math.max(0,this.opts.maxRow-Ze)),this._extraDragRow=Ne}else this._extraDragRow=0;if(this._extraDragRow!==Ie&&this._updateContainerHeight(),w.x===ot.x&&w.y===ot.y)return}else if(u.type==="resize"){if(ot.x<0||(m.updateScrollResize(u,r,F),ot.w=Math.round((y.size.width-Y)/D),ot.h=Math.round((y.size.height-kt)/F),w.w===ot.w&&w.h===ot.h)||w._lastTried&&w._lastTried.w===ot.w&&w._lastTried.h===ot.h)return;let Ae=y.position.left+Y,We=y.position.top+kt;ot.x=Math.round(Ae/D),ot.y=Math.round(We/F),V=!0}w._event=u,w._lastTried=ot;let ti={x:y.position.left+Y,y:y.position.top+kt,w:(y.size?y.size.width:w.w*D)-Y-it,h:(y.size?y.size.height:w.h*F)-kt-Et};if(this.engine.moveNodeCheck(w,{...ot,cellWidth:D,cellHeight:F,rect:ti,resizing:V})){w._lastUiPosition=y.position,this.engine.cacheRects(D,F,kt,it,Et,Y),delete w._skipDown,V&&w.subGrid&&w.subGrid.onResize(),this._extraDragRow=0,this._updateContainerHeight();let Ae=u.target;this._writePosAttr(Ae,w),this._gsEventHandler[u.type]&&this._gsEventHandler[u.type](u,Ae)}}_leave(r,u){let y=r.gridstackNode;y&&((u=u||r).style.transform="scale(1)",te.off(r,"drag"),y._temporaryRemoved||(y._temporaryRemoved=!0,this.engine.removeNode(y),y.el=y._isExternal&&u?u:r,this.opts.removable===!0&&this._itemRemoving(r,!0),r._gridstackNodeOrig?(r.gridstackNode=r._gridstackNodeOrig,delete r._gridstackNodeOrig):y._isExternal&&(delete y.el,delete r.gridstackNode,this.engine.restoreInitial())))}commit(){return this.batchUpdate(!1).prototype,this}}return Vt.resizeToContentParent=".grid-stack-item-content",Vt.Utils=m,Vt.Engine=C,Vt.GDRev="10.1.0",d.GridStack})());(function(R,d,m,C){"use strict";function I(S,O,B){return setTimeout(Dt(S,B),O)}function Q(S,O,B){return Array.isArray(S)?(W(S,B[O],B),!0):!1}function W(S,O,B){var h;if(S)if(S.forEach)S.forEach(O,B);else if(S.length!==C)for(h=0;h<S.length;)O.call(B,S[h],h,S),h++;else for(h in S)S.hasOwnProperty(h)&&O.call(B,S[h],h,S)}function ht(S,O,B){var h="DEPRECATED METHOD: "+O+`
`+B+` AT 
`;return function(){var p=new Error("get-stack-trace"),f=p&&p.stack?p.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",_=R.console&&(R.console.warn||R.console.log);return _&&_.call(R.console,h,f),S.apply(this,arguments)}}function q(S,O,B){var h,p=O.prototype;h=S.prototype=Object.create(p),h.constructor=S,h._super=p,B&&fe(h,B)}function Dt(S,O){return function(){return S.apply(O,arguments)}}function It(S,O){return typeof S==os?S.apply(O&&O[0]||C,O):S}function bt(S,O){return S===C?O:S}function xt(S,O,B){W(Pe(O),function(h){S.addEventListener(h,B,!1)})}function Ut(S,O,B){W(Pe(O),function(h){S.removeEventListener(h,B,!1)})}function Jt(S,O){for(;S;){if(S==O)return!0;S=S.parentNode}return!1}function oe(S,O){return S.indexOf(O)>-1}function Pe(S){return S.trim().split(/\s+/g)}function ce(S,O,B){if(S.indexOf&&!B)return S.indexOf(O);for(var h=0;h<S.length;){if(B&&S[h][B]==O||!B&&S[h]===O)return h;h++}return-1}function _e(S){return Array.prototype.slice.call(S,0)}function Re(S,O,B){for(var h=[],p=[],f=0;f<S.length;){var _=O?S[f][O]:S[f];ce(p,_)<0&&h.push(S[f]),p[f]=_,f++}return B&&(h=O?h.sort(function(L,K){return L[O]>K[O]}):h.sort()),h}function Te(S,O){for(var B,h,p=O[0].toUpperCase()+O.slice(1),f=0;f<xe.length;){if(B=xe[f],h=B?B+p:O,h in S)return h;f++}return C}function Ge(){return ii++}function Ee(S){var O=S.ownerDocument||S;return O.defaultView||O.parentWindow||R}function te(S,O){var B=this;this.manager=S,this.callback=O,this.element=S.element,this.target=S.options.inputTarget,this.domHandler=function(h){It(S.options.enable,[S])&&B.handler(h)},this.init()}function Vt(S){var O,B=S.options.inputClass;return new(O=B||(di?ee:Zi?Ae:ci?Ke:Et))(S,St)}function St(S,O,B){var h=B.pointers.length,p=B.changedPointers.length,f=O&He&&h-p===0,_=O&(be|Ye)&&h-p===0;B.isFirst=!!f,B.isFinal=!!_,f&&(S.session={}),B.eventType=O,r(S,B),S.emit("hammer.input",B),S.recognize(B),S.session.prevInput=B}function r(S,O){var B=S.session,h=O.pointers,p=h.length;B.firstInput||(B.firstInput=w(O)),p>1&&!B.firstMultiple?B.firstMultiple=w(O):p===1&&(B.firstMultiple=!1);var f=B.firstInput,_=B.firstMultiple,L=_?_.center:f.center,K=O.center=D(h);O.timeStamp=Ki(),O.deltaTime=O.timeStamp-f.timeStamp,O.angle=Y(L,K),O.distance=ot(L,K),u(B,O),O.offsetDirection=V(O.deltaX,O.deltaY);var gt=F(O.deltaTime,O.deltaX,O.deltaY);O.overallVelocityX=gt.x,O.overallVelocityY=gt.y,O.overallVelocity=hi(gt.x)>hi(gt.y)?gt.x:gt.y,O.scale=_?kt(_.pointers,h):1,O.rotation=_?it(_.pointers,h):0,O.maxPointers=B.prevInput?O.pointers.length>B.prevInput.maxPointers?O.pointers.length:B.prevInput.maxPointers:O.pointers.length,y(B,O);var wt=S.element;Jt(O.srcEvent.target,wt)&&(wt=O.srcEvent.target),O.target=wt}function u(S,O){var B=O.center,h=S.offsetDelta||{},p=S.prevDelta||{},f=S.prevInput||{};O.eventType!==He&&f.eventType!==be||(p=S.prevDelta={x:f.deltaX||0,y:f.deltaY||0},h=S.offsetDelta={x:B.x,y:B.y}),O.deltaX=p.x+(B.x-h.x),O.deltaY=p.y+(B.y-h.y)}function y(S,O){var B,h,p,f,_=S.lastInterval||O,L=O.timeStamp-_.timeStamp;if(O.eventType!=Ye&&(L>Pi||_.velocity===C)){var K=O.deltaX-_.deltaX,gt=O.deltaY-_.deltaY,wt=F(L,K,gt);h=wt.x,p=wt.y,B=hi(wt.x)>hi(wt.y)?wt.x:wt.y,f=V(K,gt),S.lastInterval=O}else B=_.velocity,h=_.velocityX,p=_.velocityY,f=_.direction;O.velocity=B,O.velocityX=h,O.velocityY=p,O.direction=f}function w(S){for(var O=[],B=0;B<S.pointers.length;)O[B]={clientX:li(S.pointers[B].clientX),clientY:li(S.pointers[B].clientY)},B++;return{timeStamp:Ki(),pointers:O,center:D(O),deltaX:S.deltaX,deltaY:S.deltaY}}function D(S){var O=S.length;if(O===1)return{x:li(S[0].clientX),y:li(S[0].clientY)};for(var B=0,h=0,p=0;O>p;)B+=S[p].clientX,h+=S[p].clientY,p++;return{x:li(B/O),y:li(h/O)}}function F(S,O,B){return{x:O/S||0,y:B/S||0}}function V(S,O){return S===O?ts:hi(S)>=hi(O)?0>S?ki:mi:0>O?bi:Ii}function ot(S,O,B){B||(B=Ri);var h=O[B[0]]-S[B[0]],p=O[B[1]]-S[B[1]];return Math.sqrt(h*h+p*p)}function Y(S,O,B){B||(B=Ri);var h=O[B[0]]-S[B[0]],p=O[B[1]]-S[B[1]];return 180*Math.atan2(p,h)/Math.PI}function it(S,O){return Y(O[1],O[0],Oi)+Y(S[1],S[0],Oi)}function kt(S,O){return ot(O[0],O[1],Oi)/ot(S[0],S[1],Oi)}function Et(){this.evEl=de,this.evWin=Ue,this.pressed=!1,te.apply(this,arguments)}function ee(){this.evEl=es,this.evWin=E,te.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Le(){this.evTarget=z,this.evWin=H,this.started=!1,te.apply(this,arguments)}function ti(S,O){var B=_e(S.touches),h=_e(S.changedTouches);return O&(be|Ye)&&(B=Re(B.concat(h),"identifier",!0)),[B,h]}function Ae(){this.evTarget=U,this.targetIds={},te.apply(this,arguments)}function We(S,O){var B=_e(S.touches),h=this.targetIds;if(O&(He|Ai)&&B.length===1)return h[B[0].identifier]=!0,[B,B];var p,f,_=_e(S.changedTouches),L=[],K=this.target;if(f=B.filter(function(gt){return Jt(gt.target,K)}),O===He)for(p=0;p<f.length;)h[f[p].identifier]=!0,p++;for(p=0;p<_.length;)h[_[p].identifier]&&L.push(_[p]),O&(be|Ye)&&delete h[_[p].identifier],p++;return L.length?[Re(f.concat(L),"identifier",!0),L]:void 0}function Ke(){te.apply(this,arguments);var S=Dt(this.handler,this);this.touch=new Ae(this.manager,S),this.mouse=new Et(this.manager,S),this.primaryTouch=null,this.lastTouches=[]}function Ie(S,O){S&He?(this.primaryTouch=O.changedPointers[0].identifier,Ze.call(this,O)):S&(be|Ye)&&Ze.call(this,O)}function Ze(S){var O=S.changedPointers[0];if(O.identifier===this.primaryTouch){var B={x:O.clientX,y:O.clientY};this.lastTouches.push(B);var h=this.lastTouches,p=function(){var f=h.indexOf(B);f>-1&&h.splice(f,1)};setTimeout(p,G)}}function Ne(S){for(var O=S.srcEvent.clientX,B=S.srcEvent.clientY,h=0;h<this.lastTouches.length;h++){var p=this.lastTouches[h],f=Math.abs(O-p.x),_=Math.abs(B-p.y);if(rt>=f&&rt>=_)return!0}return!1}function ei(S,O){this.manager=S,this.set(O)}function wi(S){if(oe(S,zt))return zt;var O=oe(S,Lt),B=oe(S,_t);return O&&B?zt:O||B?O?Lt:_t:oe(S,vt)?vt:at}function Di(){if(!st)return!1;var S={},O=R.CSS&&R.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(B){S[B]=O?R.CSS.supports("touch-action",B):!0}),S}function ve(S){this.options=fe({},this.defaults,S||{}),this.id=Ge(),this.manager=null,this.options.enable=bt(this.options.enable,!0),this.state=Pt,this.simultaneous={},this.requireFail=[]}function N(S){return S&re?"cancel":S&se?"end":S&Qt?"move":S&Yt?"start":""}function J(S){return S==Ii?"down":S==bi?"up":S==ki?"left":S==mi?"right":""}function et(S,O){var B=O.manager;return B?B.get(S):S}function nt(){ve.apply(this,arguments)}function ut(){nt.apply(this,arguments),this.pX=null,this.pY=null}function dt(){nt.apply(this,arguments)}function yt(){ve.apply(this,arguments),this._timer=null,this._input=null}function At(){nt.apply(this,arguments)}function Tt(){nt.apply(this,arguments)}function Bt(){ve.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ot(S,O){return O=O||{},O.recognizers=bt(O.recognizers,Ot.defaults.preset),new le(S,O)}function le(S,O){this.options=fe({},Ot.defaults,O||{}),this.options.inputTarget=this.options.inputTarget||S,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=S,this.input=Vt(this),this.touchAction=new ei(this,this.options.touchAction),ne(this,!0),W(this.options.recognizers,function(B){var h=this.add(new B[0](B[1]));B[2]&&h.recognizeWith(B[2]),B[3]&&h.requireFailure(B[3])},this)}function ne(S,O){var B=S.element;if(B.style){var h;W(S.options.cssProps,function(p,f){h=Te(B.style,f),O?(S.oldCssProps[h]=B.style[h],B.style[h]=p):B.style[h]=S.oldCssProps[h]||""}),O||(S.oldCssProps={})}}function Se(S,O){var B=d.createEvent("Event");B.initEvent(S,!0,!0),B.gesture=O,O.target.dispatchEvent(B)}var fe,xe=["","webkit","Moz","MS","ms","o"],Ce=d.createElement("div"),os="function",li=Math.round,hi=Math.abs,Ki=Date.now;fe=typeof Object.assign!="function"?function(S){if(S===C||S===null)throw new TypeError("Cannot convert undefined or null to object");for(var O=Object(S),B=1;B<arguments.length;B++){var h=arguments[B];if(h!==C&&h!==null)for(var p in h)h.hasOwnProperty(p)&&(O[p]=h[p])}return O}:Object.assign;var Be=ht(function(S,O,B){for(var h=Object.keys(O),p=0;p<h.length;)(!B||B&&S[h[p]]===C)&&(S[h[p]]=O[h[p]]),p++;return S},"extend","Use `assign`."),Hi=ht(function(S,O){return Be(S,O,!0)},"merge","Use `assign`."),ii=1,_i=/mobile|tablet|ip(ad|hone|od)|android/i,ci="ontouchstart"in R,di=Te(R,"PointerEvent")!==C,Zi=ci&&_i.test(navigator.userAgent),$e="touch",Ui="pen",Ji="mouse",ji="kinect",Pi=25,He=1,Ai=2,be=4,Ye=8,ts=1,ki=2,mi=4,bi=8,Ii=16,ui=ki|mi,yi=bi|Ii,Vi=ui|yi,Ri=["x","y"],Oi=["clientX","clientY"];te.prototype={handler:function(){},init:function(){this.evEl&&xt(this.element,this.evEl,this.domHandler),this.evTarget&&xt(this.target,this.evTarget,this.domHandler),this.evWin&&xt(Ee(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ut(this.element,this.evEl,this.domHandler),this.evTarget&&Ut(this.target,this.evTarget,this.domHandler),this.evWin&&Ut(Ee(this.element),this.evWin,this.domHandler)}};var ds={mousedown:He,mousemove:Ai,mouseup:be},de="mousedown",Ue="mousemove mouseup";q(Et,te,{handler:function(S){var O=ds[S.type];O&He&&S.button===0&&(this.pressed=!0),O&Ai&&S.which!==1&&(O=be),this.pressed&&(O&be&&(this.pressed=!1),this.callback(this.manager,O,{pointers:[S],changedPointers:[S],pointerType:Ji,srcEvent:S}))}});var Ni={pointerdown:He,pointermove:Ai,pointerup:be,pointercancel:Ye,pointerout:Ye},we={2:$e,3:Ui,4:Ji,5:ji},es="pointerdown",E="pointermove pointerup pointercancel";R.MSPointerEvent&&!R.PointerEvent&&(es="MSPointerDown",E="MSPointerMove MSPointerUp MSPointerCancel"),q(ee,te,{handler:function(S){var O=this.store,B=!1,h=S.type.toLowerCase().replace("ms",""),p=Ni[h],f=we[S.pointerType]||S.pointerType,_=f==$e,L=ce(O,S.pointerId,"pointerId");p&He&&(S.button===0||_)?0>L&&(O.push(S),L=O.length-1):p&(be|Ye)&&(B=!0),0>L||(O[L]=S,this.callback(this.manager,p,{pointers:O,changedPointers:[S],pointerType:f,srcEvent:S}),B&&O.splice(L,1))}});var M={touchstart:He,touchmove:Ai,touchend:be,touchcancel:Ye},z="touchstart",H="touchstart touchmove touchend touchcancel";q(Le,te,{handler:function(S){var O=M[S.type];if(O===He&&(this.started=!0),this.started){var B=ti.call(this,S,O);O&(be|Ye)&&B[0].length-B[1].length===0&&(this.started=!1),this.callback(this.manager,O,{pointers:B[0],changedPointers:B[1],pointerType:$e,srcEvent:S})}}});var j={touchstart:He,touchmove:Ai,touchend:be,touchcancel:Ye},U="touchstart touchmove touchend touchcancel";q(Ae,te,{handler:function(S){var O=j[S.type],B=We.call(this,S,O);B&&this.callback(this.manager,O,{pointers:B[0],changedPointers:B[1],pointerType:$e,srcEvent:S})}});var G=2500,rt=25;q(Ke,te,{handler:function(S,O,B){var h=B.pointerType==$e,p=B.pointerType==Ji;if(!(p&&B.sourceCapabilities&&B.sourceCapabilities.firesTouchEvents)){if(h)Ie.call(this,O,B);else if(p&&Ne.call(this,B))return;this.callback(S,O,B)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ct=Te(Ce.style,"touchAction"),st=ct!==C,pt="compute",at="auto",vt="manipulation",zt="none",Lt="pan-x",_t="pan-y",mt=Di();ei.prototype={set:function(S){S==pt&&(S=this.compute()),st&&this.manager.element.style&&mt[S]&&(this.manager.element.style[ct]=S),this.actions=S.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var S=[];return W(this.manager.recognizers,function(O){It(O.options.enable,[O])&&(S=S.concat(O.getTouchAction()))}),wi(S.join(" "))},preventDefaults:function(S){var O=S.srcEvent,B=S.offsetDirection;if(this.manager.session.prevented)return void O.preventDefault();var h=this.actions,p=oe(h,zt)&&!mt[zt],f=oe(h,_t)&&!mt[_t],_=oe(h,Lt)&&!mt[Lt];if(p){var L=S.pointers.length===1,K=S.distance<2,gt=S.deltaTime<250;if(L&&K&&gt)return}return _&&f?void 0:p||f&&B&ui||_&&B&yi?this.preventSrc(O):void 0},preventSrc:function(S){this.manager.session.prevented=!0,S.preventDefault()}};var Pt=1,Yt=2,Qt=4,se=8,he=se,re=16,Kt=32;ve.prototype={defaults:{},set:function(S){return fe(this.options,S),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(S){if(Q(S,"recognizeWith",this))return this;var O=this.simultaneous;return S=et(S,this),O[S.id]||(O[S.id]=S,S.recognizeWith(this)),this},dropRecognizeWith:function(S){return Q(S,"dropRecognizeWith",this)?this:(S=et(S,this),delete this.simultaneous[S.id],this)},requireFailure:function(S){if(Q(S,"requireFailure",this))return this;var O=this.requireFail;return S=et(S,this),ce(O,S)===-1&&(O.push(S),S.requireFailure(this)),this},dropRequireFailure:function(S){if(Q(S,"dropRequireFailure",this))return this;S=et(S,this);var O=ce(this.requireFail,S);return O>-1&&this.requireFail.splice(O,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(S){return!!this.simultaneous[S.id]},emit:function(S){function O(p){B.manager.emit(p,S)}var B=this,h=this.state;se>h&&O(B.options.event+N(h)),O(B.options.event),S.additionalEvent&&O(S.additionalEvent),h>=se&&O(B.options.event+N(h))},tryEmit:function(S){return this.canEmit()?this.emit(S):void(this.state=Kt)},canEmit:function(){for(var S=0;S<this.requireFail.length;){if(!(this.requireFail[S].state&(Kt|Pt)))return!1;S++}return!0},recognize:function(S){var O=fe({},S);return It(this.options.enable,[this,O])?(this.state&(he|re|Kt)&&(this.state=Pt),this.state=this.process(O),void(this.state&(Yt|Qt|se|re)&&this.tryEmit(O))):(this.reset(),void(this.state=Kt))},process:function(S){},getTouchAction:function(){},reset:function(){}},q(nt,ve,{defaults:{pointers:1},attrTest:function(S){var O=this.options.pointers;return O===0||S.pointers.length===O},process:function(S){var O=this.state,B=S.eventType,h=O&(Yt|Qt),p=this.attrTest(S);return h&&(B&Ye||!p)?O|re:h||p?B&be?O|se:O&Yt?O|Qt:Yt:Kt}}),q(ut,nt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Vi},getTouchAction:function(){var S=this.options.direction,O=[];return S&ui&&O.push(_t),S&yi&&O.push(Lt),O},directionTest:function(S){var O=this.options,B=!0,h=S.distance,p=S.direction,f=S.deltaX,_=S.deltaY;return p&O.direction||(O.direction&ui?(p=f===0?ts:0>f?ki:mi,B=f!=this.pX,h=Math.abs(S.deltaX)):(p=_===0?ts:0>_?bi:Ii,B=_!=this.pY,h=Math.abs(S.deltaY))),S.direction=p,B&&h>O.threshold&&p&O.direction},attrTest:function(S){return nt.prototype.attrTest.call(this,S)&&(this.state&Yt||!(this.state&Yt)&&this.directionTest(S))},emit:function(S){this.pX=S.deltaX,this.pY=S.deltaY;var O=J(S.direction);O&&(S.additionalEvent=this.options.event+O),this._super.emit.call(this,S)}}),q(dt,nt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[zt]},attrTest:function(S){return this._super.attrTest.call(this,S)&&(Math.abs(S.scale-1)>this.options.threshold||this.state&Yt)},emit:function(S){if(S.scale!==1){var O=S.scale<1?"in":"out";S.additionalEvent=this.options.event+O}this._super.emit.call(this,S)}}),q(yt,ve,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[at]},process:function(S){var O=this.options,B=S.pointers.length===O.pointers,h=S.distance<O.threshold,p=S.deltaTime>O.time;if(this._input=S,!h||!B||S.eventType&(be|Ye)&&!p)this.reset();else if(S.eventType&He)this.reset(),this._timer=I(function(){this.state=he,this.tryEmit()},O.time,this);else if(S.eventType&be)return he;return Kt},reset:function(){clearTimeout(this._timer)},emit:function(S){this.state===he&&(S&&S.eventType&be?this.manager.emit(this.options.event+"up",S):(this._input.timeStamp=Ki(),this.manager.emit(this.options.event,this._input)))}}),q(At,nt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[zt]},attrTest:function(S){return this._super.attrTest.call(this,S)&&(Math.abs(S.rotation)>this.options.threshold||this.state&Yt)}}),q(Tt,nt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ui|yi,pointers:1},getTouchAction:function(){return ut.prototype.getTouchAction.call(this)},attrTest:function(S){var O,B=this.options.direction;return B&(ui|yi)?O=S.overallVelocity:B&ui?O=S.overallVelocityX:B&yi&&(O=S.overallVelocityY),this._super.attrTest.call(this,S)&&B&S.offsetDirection&&S.distance>this.options.threshold&&S.maxPointers==this.options.pointers&&hi(O)>this.options.velocity&&S.eventType&be},emit:function(S){var O=J(S.offsetDirection);O&&this.manager.emit(this.options.event+O,S),this.manager.emit(this.options.event,S)}}),q(Bt,ve,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vt]},process:function(S){var O=this.options,B=S.pointers.length===O.pointers,h=S.distance<O.threshold,p=S.deltaTime<O.time;if(this.reset(),S.eventType&He&&this.count===0)return this.failTimeout();if(h&&p&&B){if(S.eventType!=be)return this.failTimeout();var f=this.pTime?S.timeStamp-this.pTime<O.interval:!0,_=!this.pCenter||ot(this.pCenter,S.center)<O.posThreshold;this.pTime=S.timeStamp,this.pCenter=S.center,_&&f?this.count+=1:this.count=1,this._input=S;var L=this.count%O.taps;if(L===0)return this.hasRequireFailures()?(this._timer=I(function(){this.state=he,this.tryEmit()},O.interval,this),Yt):he}return Kt},failTimeout:function(){return this._timer=I(function(){this.state=Kt},this.options.interval,this),Kt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==he&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ot.VERSION="2.0.7",Ot.defaults={domEvents:!1,touchAction:pt,enable:!0,inputTarget:null,inputClass:null,preset:[[At,{enable:!1}],[dt,{enable:!1},["rotate"]],[Tt,{direction:ui}],[ut,{direction:ui},["swipe"]],[Bt],[Bt,{event:"doubletap",taps:2},["tap"]],[yt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ke=1,me=2;le.prototype={set:function(S){return fe(this.options,S),S.touchAction&&this.touchAction.update(),S.inputTarget&&(this.input.destroy(),this.input.target=S.inputTarget,this.input.init()),this},stop:function(S){this.session.stopped=S?me:ke},recognize:function(S){var O=this.session;if(!O.stopped){this.touchAction.preventDefaults(S);var B,h=this.recognizers,p=O.curRecognizer;(!p||p&&p.state&he)&&(p=O.curRecognizer=null);for(var f=0;f<h.length;)B=h[f],O.stopped===me||p&&B!=p&&!B.canRecognizeWith(p)?B.reset():B.recognize(S),!p&&B.state&(Yt|Qt|se)&&(p=O.curRecognizer=B),f++}},get:function(S){if(S instanceof ve)return S;for(var O=this.recognizers,B=0;B<O.length;B++)if(O[B].options.event==S)return O[B];return null},add:function(S){if(Q(S,"add",this))return this;var O=this.get(S.options.event);return O&&this.remove(O),this.recognizers.push(S),S.manager=this,this.touchAction.update(),S},remove:function(S){if(Q(S,"remove",this))return this;if(S=this.get(S)){var O=this.recognizers,B=ce(O,S);B!==-1&&(O.splice(B,1),this.touchAction.update())}return this},on:function(S,O){if(S!==C&&O!==C){var B=this.handlers;return W(Pe(S),function(h){B[h]=B[h]||[],B[h].push(O)}),this}},off:function(S,O){if(S!==C){var B=this.handlers;return W(Pe(S),function(h){O?B[h]&&B[h].splice(ce(B[h],O),1):delete B[h]}),this}},emit:function(S,O){this.options.domEvents&&Se(S,O);var B=this.handlers[S]&&this.handlers[S].slice();if(B&&B.length){O.type=S,O.preventDefault=function(){O.srcEvent.preventDefault()};for(var h=0;h<B.length;)B[h](O),h++}},destroy:function(){this.element&&ne(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},fe(Ot,{INPUT_START:He,INPUT_MOVE:Ai,INPUT_END:be,INPUT_CANCEL:Ye,STATE_POSSIBLE:Pt,STATE_BEGAN:Yt,STATE_CHANGED:Qt,STATE_ENDED:se,STATE_RECOGNIZED:he,STATE_CANCELLED:re,STATE_FAILED:Kt,DIRECTION_NONE:ts,DIRECTION_LEFT:ki,DIRECTION_RIGHT:mi,DIRECTION_UP:bi,DIRECTION_DOWN:Ii,DIRECTION_HORIZONTAL:ui,DIRECTION_VERTICAL:yi,DIRECTION_ALL:Vi,Manager:le,Input:te,TouchAction:ei,TouchInput:Ae,MouseInput:Et,PointerEventInput:ee,TouchMouseInput:Ke,SingleTouchInput:Le,Recognizer:ve,AttrRecognizer:nt,Tap:Bt,Pan:ut,Swipe:Tt,Pinch:dt,Rotate:At,Press:yt,on:xt,off:Ut,each:W,merge:Hi,extend:Be,assign:fe,inherit:q,bindFn:Dt,prefixed:Te});var De=typeof R<"u"?R:typeof self<"u"?self:{};De.Hammer=Ot,typeof define=="function"&&define.amd?define(function(){return Ot}):typeof module<"u"&&module.exports?module.exports=Ot:R[m]=Ot})(window,document,"Hammer");(function(R,d){typeof exports=="object"&&typeof module<"u"?module.exports=d():typeof define=="function"&&define.amd?define(d):(R=typeof globalThis<"u"?globalThis:R||self).Chart=d()})(void 0,function(){"use strict";var R=Object.freeze({__proto__:null,get Colors(){return nh},get Decimation(){return oh},get Filler(){return uh},get Legend(){return gh},get SubTitle(){return fh},get Title(){return ph},get Tooltip(){return yh}});function d(){}let m=(()=>{let i=0;return()=>i++})();function C(i){return i==null}function I(i){if(Array.isArray&&Array.isArray(i))return!0;let t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Q(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function W(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function ht(i,t){return W(i)?i:t}function q(i,t){return i===void 0?t:i}let Dt=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,It=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function bt(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function xt(i,t,e,s){let n,o,a;if(I(i))if(o=i.length,s)for(n=o-1;n>=0;n--)t.call(e,i[n],n);else for(n=0;n<o;n++)t.call(e,i[n],n);else if(Q(i))for(a=Object.keys(i),o=a.length,n=0;n<o;n++)t.call(e,i[a[n]],a[n])}function Ut(i,t){let e,s,n,o;if(!i||!t||i.length!==t.length)return!1;for(e=0,s=i.length;e<s;++e)if(n=i[e],o=t[e],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function Jt(i){if(I(i))return i.map(Jt);if(Q(i)){let t=Object.create(null),e=Object.keys(i),s=e.length,n=0;for(;n<s;++n)t[e[n]]=Jt(i[e[n]]);return t}return i}function oe(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Pe(i,t,e,s){if(!oe(i))return;let n=t[i],o=e[i];Q(n)&&Q(o)?ce(n,o,s):t[i]=Jt(o)}function ce(i,t,e){let s=I(t)?t:[t],n=s.length;if(!Q(i))return i;let o=(e=e||{}).merger||Pe,a;for(let l=0;l<n;++l){if(a=s[l],!Q(a))continue;let c=Object.keys(a);for(let g=0,x=c.length;g<x;++g)o(c[g],i,a,e)}return i}function _e(i,t){return ce(i,t,{merger:Re})}function Re(i,t,e){if(!oe(i))return;let s=t[i],n=e[i];Q(s)&&Q(n)?_e(s,n):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Jt(n))}let Te={"":i=>i,x:i=>i.x,y:i=>i.y};function Ge(i){let t=i.split("."),e=[],s="";for(let n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function Ee(i,t){return(Te[t]||(Te[t]=function(s){let n=Ge(s);return o=>{for(let a of n){if(a==="")break;o=o&&o[a]}return o}}(t)))(i)}function te(i){return i.charAt(0).toUpperCase()+i.slice(1)}let Vt=i=>i!==void 0,St=i=>typeof i=="function",r=(i,t)=>{if(i.size!==t.size)return!1;for(let e of i)if(!t.has(e))return!1;return!0};function u(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}let y=Math.PI,w=2*y,D=w+y,F=Number.POSITIVE_INFINITY,V=y/180,ot=y/2,Y=y/4,it=2*y/3,kt=Math.log10,Et=Math.sign;function ee(i,t,e){return Math.abs(i-t)<e}function Le(i){let t=Math.round(i);i=ee(i,t,i/1e3)?t:i;let e=Math.pow(10,Math.floor(kt(i))),s=i/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function ti(i){let t=[],e=Math.sqrt(i),s;for(s=1;s<e;s++)i%s==0&&(t.push(s),t.push(i/s));return e===(0|e)&&t.push(e),t.sort((n,o)=>n-o).pop(),t}function Ae(i){return!isNaN(parseFloat(i))&&isFinite(i)}function We(i,t){let e=Math.round(i);return e-t<=i&&e+t>=i}function Ke(i,t,e){let s,n,o;for(s=0,n=i.length;s<n;s++)o=i[s][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ie(i){return i*(y/180)}function Ze(i){return i*(180/y)}function Ne(i){if(!W(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function ei(i,t){let e=t.x-i.x,s=t.y-i.y,n=Math.sqrt(e*e+s*s),o=Math.atan2(s,e);return o<-.5*y&&(o+=w),{angle:o,distance:n}}function wi(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Di(i,t){return(i-t+D)%w-y}function ve(i){return(i%w+w)%w}function N(i,t,e,s){let n=ve(i),o=ve(t),a=ve(e),l=ve(o-n),c=ve(a-n),g=ve(n-o),x=ve(n-a);return n===o||n===a||s&&o===a||l>c&&g<x}function J(i,t,e){return Math.max(t,Math.min(e,i))}function et(i){return J(i,-32768,32767)}function nt(i,t,e,s=1e-6){return i>=Math.min(t,e)-s&&i<=Math.max(t,e)+s}function ut(i,t,e){e=e||(a=>i[a]<t);let s,n=i.length-1,o=0;for(;n-o>1;)s=o+n>>1,e(s)?o=s:n=s;return{lo:o,hi:n}}let dt=(i,t,e,s)=>ut(i,e,s?n=>{let o=i[n][t];return o<e||o===e&&i[n+1][t]===e}:n=>i[n][t]<e),yt=(i,t,e)=>ut(i,e,s=>i[s][t]>=e);function At(i,t,e){let s=0,n=i.length;for(;s<n&&i[s]<t;)s++;for(;n>s&&i[n-1]>e;)n--;return s>0||n<i.length?i.slice(s,n):i}let Tt=["push","pop","shift","splice","unshift"];function Bt(i,t){i._chartjs?i._chartjs.listeners.push(t):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Tt.forEach(e=>{let s="_onData"+te(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...o){let a=n.apply(this,o);return i._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...o)}),a}})}))}function Ot(i,t){let e=i._chartjs;if(!e)return;let s=e.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),s.length>0||(Tt.forEach(o=>{delete i[o]}),delete i._chartjs)}function le(i){let t=new Set(i);return t.size===i.length?i:Array.from(t)}let ne=typeof window>"u"?function(i){return i()}:window.requestAnimationFrame;function Se(i,t){let e=[],s=!1;return function(...n){e=n,s||(s=!0,ne.call(window,()=>{s=!1,i.apply(t,e)}))}}function fe(i,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(i,t,s)):i.apply(this,s),t}}let xe=i=>i==="start"?"left":i==="end"?"right":"center",Ce=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,os=(i,t,e,s)=>i===(s?"left":"right")?e:i==="center"?(t+e)/2:t;function li(i,t,e){let s=t.length,n=0,o=s;if(i._sorted){let{iScale:a,_parsed:l}=i,c=a.axis,{min:g,max:x,minDefined:b,maxDefined:v}=a.getUserBounds();b&&(n=J(Math.min(dt(l,c,g).lo,e?s:dt(t,c,a.getPixelForValue(g)).lo),0,s-1)),o=v?J(Math.max(dt(l,a.axis,x,!0).hi+1,e?0:dt(t,c,a.getPixelForValue(x),!0).hi+1),n,s)-n:s-n}return{start:n,count:o}}function hi(i){let{xScale:t,yScale:e,_scaleRanges:s}=i,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return i._scaleRanges=n,!0;let o=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,n),o}class Ki{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,n){let o=e.listeners[n],a=e.duration;o.forEach(l=>l({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(s-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=ne.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;let o=s.items,a,l=o.length-1,c=!1;for(;l>=0;--l)a=o[l],a._active?(a._total>s.duration&&(s.duration=a._total),a.tick(t),c=!0):(o[l]=o[o.length-1],o.pop());c&&(n.draw(),this._notify(n,s,t,"progress")),o.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let s=e.items,n=s.length-1;for(;n>=0;--n)s[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Be=new Ki;function Hi(i){return i+.5|0}let ii=(i,t,e)=>Math.max(Math.min(i,e),t);function _i(i){return ii(Hi(2.55*i),0,255)}function ci(i){return ii(Hi(255*i),0,255)}function di(i){return ii(Hi(i/2.55)/100,0,1)}function Zi(i){return ii(Hi(100*i),0,100)}let $e={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ui=[..."0123456789ABCDEF"],Ji=i=>Ui[15&i],ji=i=>Ui[(240&i)>>4]+Ui[15&i],Pi=i=>(240&i)>>4==(15&i);function He(i){var t=(e=>Pi(e.r)&&Pi(e.g)&&Pi(e.b)&&Pi(e.a))(i)?Ji:ji;return i?"#"+t(i.r)+t(i.g)+t(i.b)+((e,s)=>e<255?s(e):"")(i.a,t):void 0}let Ai=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function be(i,t,e){let s=t*Math.min(e,1-e),n=(o,a=(o+i/30)%12)=>e-s*Math.max(Math.min(a-3,9-a,1),-1);return[n(0),n(8),n(4)]}function Ye(i,t,e){let s=(n,o=(n+i/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function ts(i,t,e){let s=be(i,1,.5),n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)s[n]*=1-t-e,s[n]+=t;return s}function ki(i){let t=i.r/255,e=i.g/255,s=i.b/255,n=Math.max(t,e,s),o=Math.min(t,e,s),a=(n+o)/2,l,c,g;return n!==o&&(g=n-o,c=a>.5?g/(2-n-o):g/(n+o),l=function(x,b,v,k,P){return x===P?(b-v)/k+(b<v?6:0):b===P?(v-x)/k+2:(x-b)/k+4}(t,e,s,g,n),l=60*l+.5),[0|l,c||0,a]}function mi(i,t,e,s){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,s)).map(ci)}function bi(i,t,e){return mi(be,i,t,e)}function Ii(i){return(i%360+360)%360}function ui(i){let t=Ai.exec(i),e,s=255;if(!t)return;t[5]!==e&&(s=t[6]?_i(+t[5]):ci(+t[5]));let n=Ii(+t[2]),o=+t[3]/100,a=+t[4]/100;return e=t[1]==="hwb"?function(l,c,g){return mi(ts,l,c,g)}(n,o,a):t[1]==="hsv"?function(l,c,g){return mi(Ye,l,c,g)}(n,o,a):bi(n,o,a),{r:e[0],g:e[1],b:e[2],a:s}}let yi={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Vi={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},Ri;function Oi(i){Ri||(Ri=function(){let e={},s=Object.keys(Vi),n=Object.keys(yi),o,a,l,c,g;for(o=0;o<s.length;o++){for(c=g=s[o],a=0;a<n.length;a++)l=n[a],g=g.replace(l,yi[l]);l=parseInt(Vi[c],16),e[g]=[l>>16&255,l>>8&255,255&l]}return e}(),Ri.transparent=[0,0,0,0]);let t=Ri[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}let ds=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,de=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,Ue=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Ni(i,t,e){if(i){let s=ki(i);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=bi(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function we(i,t){return i&&Object.assign(t||{},i)}function es(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=ci(i[3]))):(t=we(i,{r:0,g:0,b:0,a:1})).a=ci(t.a),t}function E(i){return i.charAt(0)==="r"?function(t){let e=ds.exec(t),s,n,o,a=255;if(e){if(e[7]!==s){let l=+e[7];a=e[8]?_i(l):ii(255*l,0,255)}return s=+e[1],n=+e[3],o=+e[5],s=255&(e[2]?_i(s):ii(s,0,255)),n=255&(e[4]?_i(n):ii(n,0,255)),o=255&(e[6]?_i(o):ii(o,0,255)),{r:s,g:n,b:o,a}}}(i):ui(i)}class M{constructor(t){if(t instanceof M)return t;let e=typeof t,s;var n,o,a;e==="object"?s=es(t):e==="string"&&(a=(n=t).length,n[0]==="#"&&(a===4||a===5?o={r:255&17*$e[n[1]],g:255&17*$e[n[2]],b:255&17*$e[n[3]],a:a===5?17*$e[n[4]]:255}:a!==7&&a!==9||(o={r:$e[n[1]]<<4|$e[n[2]],g:$e[n[3]]<<4|$e[n[4]],b:$e[n[5]]<<4|$e[n[6]],a:a===9?$e[n[7]]<<4|$e[n[8]]:255})),s=o||Oi(t)||E(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=we(this._rgb);return t&&(t.a=di(t.a)),t}set rgb(t){this._rgb=es(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${di(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?He(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;let e=ki(t),s=e[0],n=Zi(e[1]),o=Zi(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${o}%, ${di(t.a)})`:`hsl(${s}, ${n}%, ${o}%)`}(this._rgb):void 0}mix(t,e){if(t){let s=this.rgb,n=t.rgb,o,a=e===o?.5:e,l=2*a-1,c=s.a-n.a,g=((l*c==-1?l:(l+c)/(1+l*c))+1)/2;o=1-g,s.r=255&g*s.r+o*n.r+.5,s.g=255&g*s.g+o*n.g+.5,s.b=255&g*s.b+o*n.b+.5,s.a=a*s.a+(1-a)*n.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=function(s,n,o){let a=Ue(di(s.r)),l=Ue(di(s.g)),c=Ue(di(s.b));return{r:ci(de(a+o*(Ue(di(n.r))-a))),g:ci(de(l+o*(Ue(di(n.g))-l))),b:ci(de(c+o*(Ue(di(n.b))-c))),a:s.a+o*(n.a-s.a)}}(this._rgb,t._rgb,e)),this}clone(){return new M(this.rgb)}alpha(t){return this._rgb.a=ci(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){let t=this._rgb,e=Hi(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ni(this._rgb,2,t),this}darken(t){return Ni(this._rgb,2,-t),this}saturate(t){return Ni(this._rgb,1,t),this}desaturate(t){return Ni(this._rgb,1,-t),this}rotate(t){return function(e,s){var n=ki(e);n[0]=Ii(n[0]+s),n=bi(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,t),this}}function z(i){if(i&&typeof i=="object"){let t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function H(i){return z(i)?i:new M(i)}function j(i){return z(i)?i:new M(i).saturate(.5).darken(.1).hexString()}let U=["x","y","borderWidth","radius","tension"],G=["color","borderColor","backgroundColor"],rt=new Map;function ct(i,t,e){return function(s,n){n=n||{};let o=s+JSON.stringify(n),a=rt.get(o);return a||(a=new Intl.NumberFormat(s,n),rt.set(o,a)),a}(t,e).format(i)}let st={values:i=>I(i)?i:""+i,numeric(i,t,e){if(i===0)return"0";let s=this.chart.options.locale,n,o=i;if(e.length>1){let g=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(g<1e-4||g>1e15)&&(n="scientific"),o=function(x,b){let v=b.length>3?b[2].value-b[1].value:b[1].value-b[0].value;return Math.abs(v)>=1&&x!==Math.floor(x)&&(v=x-Math.floor(x)),v}(i,e)}let a=kt(Math.abs(o)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),ct(i,s,c)},logarithmic(i,t,e){if(i===0)return"0";let s=e[t].significand||i/Math.pow(10,Math.floor(kt(i)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?st.numeric.call(this,i,t,e):""}};var pt={formatters:st};let at=Object.create(null),vt=Object.create(null);function zt(i,t){if(!t)return i;let e=t.split(".");for(let s=0,n=e.length;s<n;++s){let o=e[s];i=i[o]||(i[o]=Object.create(null))}return i}function Lt(i,t,e){return typeof t=="string"?ce(zt(i,t),e):ce(zt(i,""),t)}class _t{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>j(n.backgroundColor),this.hoverBorderColor=(s,n)=>j(n.borderColor),this.hoverColor=(s,n)=>j(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Lt(this,t,e)}get(t){return zt(this,t)}describe(t,e){return Lt(vt,t,e)}override(t,e){return Lt(at,t,e)}route(t,e,s,n){let o=zt(this,t),a=zt(this,s),l="_"+e;Object.defineProperties(o,{[l]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){let c=this[l],g=a[n];return Q(c)?Object.assign({},g,c):q(c,g)},set(c){this[l]=c}}})}apply(t){t.forEach(e=>e(this))}}var mt=new _t({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:G},numbers:{type:"number",properties:U}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:pt.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}]);function Pt(){return typeof window<"u"&&typeof document<"u"}function Yt(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Qt(i,t,e){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=i,s}let se=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function he(i,t){return se(i).getPropertyValue(t)}let re=["top","right","bottom","left"];function Kt(i,t,e){let s={};e=e?"-"+e:"";for(let n=0;n<4;n++){let o=re[n];s[o]=parseFloat(i[t+"-"+o+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}let ke=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function me(i,t){if("native"in i)return i;let{canvas:e,currentDevicePixelRatio:s}=t,n=se(e),o=n.boxSizing==="border-box",a=Kt(n,"padding"),l=Kt(n,"border","width"),{x:c,y:g,box:x}=function(T,A){let $=T.touches,tt=$&&$.length?$[0]:T,{offsetX:Z,offsetY:X}=tt,lt,ft,Ct=!1;if(ke(Z,X,T.target))lt=Z,ft=X;else{let Rt=A.getBoundingClientRect();lt=tt.clientX-Rt.left,ft=tt.clientY-Rt.top,Ct=!0}return{x:lt,y:ft,box:Ct}}(i,e),b=a.left+(x&&l.left),v=a.top+(x&&l.top),{width:k,height:P}=t;return o&&(k-=a.width+l.width,P-=a.height+l.height),{x:Math.round((c-b)/k*e.width/s),y:Math.round((g-v)/P*e.height/s)}}let De=i=>Math.round(10*i)/10;function S(i,t,e,s){let n=se(i),o=Kt(n,"margin"),a=Qt(n.maxWidth,i,"clientWidth")||F,l=Qt(n.maxHeight,i,"clientHeight")||F,c=function(b,v,k){let P,T;if(v===void 0||k===void 0){let A=Yt(b);if(A){let $=A.getBoundingClientRect(),tt=se(A),Z=Kt(tt,"border","width"),X=Kt(tt,"padding");v=$.width-X.width-Z.width,k=$.height-X.height-Z.height,P=Qt(tt.maxWidth,A,"clientWidth"),T=Qt(tt.maxHeight,A,"clientHeight")}else v=b.clientWidth,k=b.clientHeight}return{width:v,height:k,maxWidth:P||F,maxHeight:T||F}}(i,t,e),{width:g,height:x}=c;if(n.boxSizing==="content-box"){let b=Kt(n,"border","width"),v=Kt(n,"padding");g-=v.width+b.width,x-=v.height+b.height}return g=Math.max(0,g-o.width),x=Math.max(0,s?g/s:x-o.height),g=De(Math.min(g,a,c.maxWidth)),x=De(Math.min(x,l,c.maxHeight)),g&&!x&&(x=De(g/2)),(t!==void 0||e!==void 0)&&s&&c.height&&x>c.height&&(x=c.height,g=De(Math.floor(x*s))),{width:g,height:x}}function O(i,t,e){let s=t||1,n=Math.floor(i.height*s),o=Math.floor(i.width*s);i.height=Math.floor(i.height),i.width=Math.floor(i.width);let a=i.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${i.height}px`,a.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==s||a.height!==n||a.width!==o)&&(i.currentDevicePixelRatio=s,a.height=n,a.width=o,i.ctx.setTransform(s,0,0,s,0,0),!0)}let B=function(){let i=!1;try{let t={get passive(){return i=!0,!1}};Pt()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function h(i,t){let e=he(i,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function p(i){return!i||C(i.size)||C(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function f(i,t,e,s,n){let o=t[n];return o||(o=t[n]=i.measureText(n).width,e.push(n)),o>s&&(s=o),s}function _(i,t,e,s){let n=(s=s||{}).data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},o=s.garbageCollect=[],s.font=t),i.save(),i.font=t;let a=0,l=e.length,c,g,x,b,v;for(c=0;c<l;c++)if(b=e[c],b==null||I(b)){if(I(b))for(g=0,x=b.length;g<x;g++)v=b[g],v==null||I(v)||(a=f(i,n,o,a,v))}else a=f(i,n,o,a,b);i.restore();let k=o.length/2;if(k>e.length){for(c=0;c<k;c++)delete n[o[c]];o.splice(0,k)}return a}function L(i,t,e){let s=i.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*s)/s+n}function K(i,t){(t=t||i.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore()}function gt(i,t,e,s){wt(i,t,e,s,null)}function wt(i,t,e,s,n){let o,a,l,c,g,x,b,v,k=t.pointStyle,P=t.rotation,T=t.radius,A=(P||0)*V;if(k&&typeof k=="object"&&(o=k.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]"))return i.save(),i.translate(e,s),i.rotate(A),i.drawImage(k,-k.width/2,-k.height/2,k.width,k.height),void i.restore();if(!(isNaN(T)||T<=0)){switch(i.beginPath(),k){default:n?i.ellipse(e,s,n/2,T,0,0,w):i.arc(e,s,T,0,w),i.closePath();break;case"triangle":x=n?n/2:T,i.moveTo(e+Math.sin(A)*x,s-Math.cos(A)*T),A+=it,i.lineTo(e+Math.sin(A)*x,s-Math.cos(A)*T),A+=it,i.lineTo(e+Math.sin(A)*x,s-Math.cos(A)*T),i.closePath();break;case"rectRounded":g=.516*T,c=T-g,a=Math.cos(A+Y)*c,b=Math.cos(A+Y)*(n?n/2-g:c),l=Math.sin(A+Y)*c,v=Math.sin(A+Y)*(n?n/2-g:c),i.arc(e-b,s-l,g,A-y,A-ot),i.arc(e+v,s-a,g,A-ot,A),i.arc(e+b,s+l,g,A,A+ot),i.arc(e-v,s+a,g,A+ot,A+y),i.closePath();break;case"rect":if(!P){c=Math.SQRT1_2*T,x=n?n/2:c,i.rect(e-x,s-c,2*x,2*c);break}A+=Y;case"rectRot":b=Math.cos(A)*(n?n/2:T),a=Math.cos(A)*T,l=Math.sin(A)*T,v=Math.sin(A)*(n?n/2:T),i.moveTo(e-b,s-l),i.lineTo(e+v,s-a),i.lineTo(e+b,s+l),i.lineTo(e-v,s+a),i.closePath();break;case"crossRot":A+=Y;case"cross":b=Math.cos(A)*(n?n/2:T),a=Math.cos(A)*T,l=Math.sin(A)*T,v=Math.sin(A)*(n?n/2:T),i.moveTo(e-b,s-l),i.lineTo(e+b,s+l),i.moveTo(e+v,s-a),i.lineTo(e-v,s+a);break;case"star":b=Math.cos(A)*(n?n/2:T),a=Math.cos(A)*T,l=Math.sin(A)*T,v=Math.sin(A)*(n?n/2:T),i.moveTo(e-b,s-l),i.lineTo(e+b,s+l),i.moveTo(e+v,s-a),i.lineTo(e-v,s+a),A+=Y,b=Math.cos(A)*(n?n/2:T),a=Math.cos(A)*T,l=Math.sin(A)*T,v=Math.sin(A)*(n?n/2:T),i.moveTo(e-b,s-l),i.lineTo(e+b,s+l),i.moveTo(e+v,s-a),i.lineTo(e-v,s+a);break;case"line":a=n?n/2:Math.cos(A)*T,l=Math.sin(A)*T,i.moveTo(e-a,s-l),i.lineTo(e+a,s+l);break;case"dash":i.moveTo(e,s),i.lineTo(e+Math.cos(A)*(n?n/2:T),s+Math.sin(A)*T);break;case!1:i.closePath()}i.fill(),t.borderWidth>0&&i.stroke()}}function Mt(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function qt(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function Xt(i){i.restore()}function Zt(i,t,e,s,n){if(!t)return i.lineTo(e.x,e.y);if(n==="middle"){let o=(t.x+e.x)/2;i.lineTo(o,t.y),i.lineTo(o,e.y)}else n==="after"!=!!s?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function ge(i,t,e,s){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function ae(i,t,e,s,n){if(n.strikethrough||n.underline){let o=i.measureText(s),a=t-o.actualBoundingBoxLeft,l=t+o.actualBoundingBoxRight,c=e-o.actualBoundingBoxAscent,g=e+o.actualBoundingBoxDescent,x=n.strikethrough?(c+g)/2:g;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=n.decorationWidth||2,i.moveTo(a,x),i.lineTo(l,x),i.stroke()}}function si(i,t){let e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function Xe(i,t,e,s,n,o={}){let a=I(t)?t:[t],l=o.strokeWidth>0&&o.strokeColor!=="",c,g;for(i.save(),i.font=n.string,function(x,b){b.translation&&x.translate(b.translation[0],b.translation[1]),C(b.rotation)||x.rotate(b.rotation),b.color&&(x.fillStyle=b.color),b.textAlign&&(x.textAlign=b.textAlign),b.textBaseline&&(x.textBaseline=b.textBaseline)}(i,o),c=0;c<a.length;++c)g=a[c],o.backdrop&&si(i,o.backdrop),l&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),C(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(g,e,s,o.maxWidth)),i.fillText(g,e,s,o.maxWidth),ae(i,e,s,g,o),s+=Number(n.lineHeight);i.restore()}function xi(i,t){let{x:e,y:s,w:n,h:o,radius:a}=t;i.arc(e+a.topLeft,s+a.topLeft,a.topLeft,1.5*y,y,!0),i.lineTo(e,s+o-a.bottomLeft),i.arc(e+a.bottomLeft,s+o-a.bottomLeft,a.bottomLeft,y,ot,!0),i.lineTo(e+n-a.bottomRight,s+o),i.arc(e+n-a.bottomRight,s+o-a.bottomRight,a.bottomRight,ot,0,!0),i.lineTo(e+n,s+a.topRight),i.arc(e+n-a.topRight,s+a.topRight,a.topRight,0,-ot,!0),i.lineTo(e+a.topLeft,s)}function Qe(i,t=[""],e,s,n=()=>i[0]){let o=e||i;s===void 0&&(s=$s("_fallback",i));let a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:s,_getTarget:n,override:l=>Qe([l,...i],t,o,s)};return new Proxy(a,{deleteProperty:(l,c)=>(delete l[c],delete l._keys,delete i[0][c],!0),get:(l,c)=>je(l,c,()=>function(g,x,b,v){let k;for(let P of x)if(k=$s(gi(P,g),b),k!==void 0)return vi(g,k)?_s(b,v,g,k):k}(c,t,i,l)),getOwnPropertyDescriptor:(l,c)=>Reflect.getOwnPropertyDescriptor(l._scopes[0],c),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(l,c)=>Os(l).includes(c),ownKeys:l=>Os(l),set(l,c,g){let x=l._storage||(l._storage=n());return l[c]=x[c]=g,delete l._keys,!0}})}function ni(i,t,e,s){let n={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:Oe(i,s),setContext:o=>ni(i,o,e,s),override:o=>ni(i.override(o),t,e,s)};return new Proxy(n,{deleteProperty:(o,a)=>(delete o[a],delete i[a],!0),get:(o,a,l)=>je(o,a,()=>function(c,g,x){let{_proxy:b,_context:v,_subProxy:k,_descriptors:P}=c,T=b[g];return St(T)&&P.isScriptable(g)&&(T=function(A,$,tt,Z){let{_proxy:X,_context:lt,_subProxy:ft,_stack:Ct}=tt;if(Ct.has(A))throw new Error("Recursion detected: "+Array.from(Ct).join("->")+"->"+A);Ct.add(A);let Rt=$(lt,ft||Z);return Ct.delete(A),vi(A,Rt)&&(Rt=_s(X._scopes,X,A,Rt)),Rt}(g,T,c,x)),I(T)&&T.length&&(T=function(A,$,tt,Z){let{_proxy:X,_context:lt,_subProxy:ft,_descriptors:Ct}=tt;if(lt.index!==void 0&&Z(A))return $[lt.index%$.length];if(Q($[0])){let Rt=$,$t=X._scopes.filter(Ht=>Ht!==Rt);$=[];for(let Ht of Rt){let Gt=_s($t,X,A,Ht);$.push(ni(Gt,lt,ft&&ft[A],Ct))}}return $}(g,T,c,P.isIndexable)),vi(g,T)&&(T=ni(T,v,k&&k[g],P)),T}(o,a,l)),getOwnPropertyDescriptor:(o,a)=>o._descriptors.allKeys?Reflect.has(i,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,a),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(o,a)=>Reflect.has(i,a),ownKeys:()=>Reflect.ownKeys(i),set:(o,a,l)=>(i[a]=l,delete o[a],!0)})}function Oe(i,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=i;return{allKeys:n,scriptable:e,indexable:s,isScriptable:St(e)?e:()=>e,isIndexable:St(s)?s:()=>s}}let gi=(i,t)=>i?i+te(t):t,vi=(i,t)=>Q(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function je(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];let s=e();return i[t]=s,s}function $i(i,t,e){return St(i)?i(t,e):i}let is=(i,t)=>i===!0?t:typeof i=="string"?Ee(t,i):void 0;function ln(i,t,e,s,n){for(let o of t){let a=is(e,o);if(a){i.add(a);let l=$i(a._fallback,e,n);if(l!==void 0&&l!==e&&l!==s)return l}else if(a===!1&&s!==void 0&&e!==s)return null}return!1}function _s(i,t,e,s){let n=t._rootScopes,o=$i(t._fallback,e,s),a=[...i,...n],l=new Set;l.add(s);let c=ks(l,a,e,o||e,s);return c!==null&&(o===void 0||o===e||(c=ks(l,a,o,c,s),c!==null))&&Qe(Array.from(l),[""],n,o,()=>function(g,x,b){let v=g._getTarget();x in v||(v[x]={});let k=v[x];return I(k)&&Q(b)?b:k||{}}(t,e,s))}function ks(i,t,e,s,n){for(;e;)e=ln(i,t,e,s,n);return e}function $s(i,t){for(let e of t){if(!e)continue;let s=e[i];if(s!==void 0)return s}}function Os(i){let t=i._keys;return t||(t=i._keys=function(e){let s=new Set;for(let n of e)for(let o of Object.keys(n).filter(a=>!a.startsWith("_")))s.add(o);return Array.from(s)}(i._scopes)),t}function zs(i,t,e,s){let{iScale:n}=i,{key:o="r"}=this._parsing,a=new Array(s),l,c,g,x;for(l=0,c=s;l<c;++l)g=l+e,x=t[g],a[l]={r:n.parse(Ee(x,o),g)};return a}let Fs=Number.EPSILON||1e-14,Fi=(i,t)=>t<i.length&&!i[t].skip&&i[t],Ws=i=>i==="x"?"y":"x";function us(i,t,e,s){let n=i.skip?t:i,o=t,a=e.skip?t:e,l=wi(o,n),c=wi(a,o),g=l/(l+c),x=c/(l+c);g=isNaN(g)?0:g,x=isNaN(x)?0:x;let b=s*g,v=s*x;return{previous:{x:o.x-b*(a.x-n.x),y:o.y-b*(a.y-n.y)},next:{x:o.x+v*(a.x-n.x),y:o.y+v*(a.y-n.y)}}}function Ms(i,t="x"){let e=Ws(t),s=i.length,n=Array(s).fill(0),o=Array(s),a,l,c,g=Fi(i,0);for(a=0;a<s;++a)if(l=c,c=g,g=Fi(i,a+1),c){if(g){let x=g[t]-c[t];n[a]=x!==0?(g[e]-c[e])/x:0}o[a]=l?g?Et(n[a-1])!==Et(n[a])?0:(n[a-1]+n[a])/2:n[a-1]:n[a]}(function(x,b,v){let k=x.length,P,T,A,$,tt,Z=Fi(x,0);for(let X=0;X<k-1;++X)tt=Z,Z=Fi(x,X+1),tt&&Z&&(ee(b[X],0,Fs)?v[X]=v[X+1]=0:(P=v[X]/b[X],T=v[X+1]/b[X],$=Math.pow(P,2)+Math.pow(T,2),$<=9||(A=3/Math.sqrt($),v[X]=P*A*b[X],v[X+1]=T*A*b[X])))})(i,n,o),function(x,b,v="x"){let k=Ws(v),P=x.length,T,A,$,tt=Fi(x,0);for(let Z=0;Z<P;++Z){if(A=$,$=tt,tt=Fi(x,Z+1),!$)continue;let X=$[v],lt=$[k];A&&(T=(X-A[v])/3,$[`cp1${v}`]=X-T,$[`cp1${k}`]=lt-T*b[Z]),tt&&(T=(tt[v]-X)/3,$[`cp2${v}`]=X+T,$[`cp2${k}`]=lt+T*b[Z])}}(i,o,t)}function Je(i,t,e){return Math.max(Math.min(i,e),t)}function Mi(i,t,e,s,n){let o,a,l,c;if(t.spanGaps&&(i=i.filter(g=>!g.skip)),t.cubicInterpolationMode==="monotone")Ms(i,n);else{let g=s?i[i.length-1]:i[0];for(o=0,a=i.length;o<a;++o)l=i[o],c=us(g,l,i[Math.min(o+1,a-(s?0:1))%a],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,g=l}t.capBezierPoints&&function(g,x){let b,v,k,P,T,A=Mt(g[0],x);for(b=0,v=g.length;b<v;++b)T=P,P=A,A=b<v-1&&Mt(g[b+1],x),P&&(k=g[b],T&&(k.cp1x=Je(k.cp1x,x.left,x.right),k.cp1y=Je(k.cp1y,x.top,x.bottom)),A&&(k.cp2x=Je(k.cp2x,x.left,x.right),k.cp2y=Je(k.cp2y,x.top,x.bottom)))}(i,e)}let gs=i=>i===0||i===1,Io=(i,t,e)=>-Math.pow(2,10*(i-=1))*Math.sin((i-t)*w/e),No=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*w/e)+1,Ls={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*ot),easeOutSine:i=>Math.sin(i*ot),easeInOutSine:i=>-.5*(Math.cos(y*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>gs(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>gs(i)?i:Io(i,.075,.3),easeOutElastic:i=>gs(i)?i:No(i,.075,.3),easeInOutElastic(i){return gs(i)?i:i<.5?.5*Io(2*i,.1125,.45):.5+.5*No(2*i-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?i*i*((1+(t*=1.525))*i-t)*.5:.5*((i-=2)*i*((1+(t*=1.525))*i+t)+2)},easeInBounce:i=>1-Ls.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?.5*Ls.easeInBounce(2*i):.5*Ls.easeOutBounce(2*i-1)+.5};function ps(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function $o(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:s==="middle"?e<.5?i.y:t.y:s==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function Fo(i,t,e,s){let n={x:i.cp2x,y:i.cp2y},o={x:t.cp1x,y:t.cp1y},a=ps(i,n,e),l=ps(n,o,e),c=ps(o,t,e),g=ps(a,l,e),x=ps(l,c,e);return ps(g,x,e)}let nl=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ol=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Wo(i,t){let e=(""+i).match(nl);if(!e||e[1]==="normal")return 1.2*t;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100}return t*i}let rl=i=>+i||0;function hn(i,t){let e={},s=Q(t),n=s?Object.keys(t):t,o=Q(i)?s?a=>q(i[a],i[t[a]]):a=>i[a]:()=>i;for(let a of n)e[a]=rl(o(a));return e}function Kn(i){return hn(i,{top:"y",right:"x",bottom:"y",left:"x"})}function fs(i){return hn(i,["topLeft","topRight","bottomLeft","bottomRight"])}function oi(i){let t=Kn(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function qe(i,t){i=i||{},t=t||mt.font;let e=q(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=q(i.style,t.style);s&&!(""+s).match(ol)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);let n={family:q(i.family,t.family),lineHeight:Wo(q(i.lineHeight,t.lineHeight),e),size:e,style:s,weight:q(i.weight,t.weight),string:""};return n.string=p(n),n}function Hs(i,t,e,s){let n,o,a,l=!0;for(n=0,o=i.length;n<o;++n)if(a=i[n],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),l=!1),e!==void 0&&I(a)&&(a=a[e%a.length],l=!1),a!==void 0))return s&&!l&&(s.cacheable=!1),a}function Bo(i,t,e){let{min:s,max:n}=i,o=It(t,(n-s)/2),a=(l,c)=>e&&l===0?0:l+c;return{min:a(s,-Math.abs(o)),max:a(n,o)}}function rs(i,t){return Object.assign(Object.create(i),t)}function Ss(i,t,e){return i?function(s,n){return{x:o=>s+s+n-o,setWidth(o){n=o},textAlign:o=>o==="center"?o:o==="right"?"left":"right",xPlus:(o,a)=>o-a,leftForLtr:(o,a)=>o-a}}(t,e):{x:s=>s,setWidth(s){},textAlign:s=>s,xPlus:(s,n)=>s+n,leftForLtr:(s,n)=>s}}function Zn(i,t){let e,s;t!=="ltr"&&t!=="rtl"||(e=i.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=s)}function Jn(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function Uo(i){return i==="angle"?{between:N,compare:Di,normalize:ve}:{between:nt,compare:(t,e)=>t-e,normalize:t=>t}}function jo({start:i,end:t,count:e,loop:s,style:n}){return{start:i%e,end:t%e,loop:s&&(t-i+1)%e==0,style:n}}function to(i,t,e){if(!e)return[i];let{property:s,start:n,end:o}=e,a=t.length,{compare:l,between:c,normalize:g}=Uo(s),{start:x,end:b,loop:v,style:k}=function(ft,Ct,Rt){let{property:$t,start:Ht,end:Gt}=Rt,{between:jt,normalize:Nt}=Uo($t),Wt=Ct.length,Ft,ie,{start:Me,end:ye,loop:ai}=ft;if(ai){for(Me+=Wt,ye+=Wt,Ft=0,ie=Wt;Ft<ie&&jt(Nt(Ct[Me%Wt][$t]),Ht,Gt);++Ft)Me--,ye--;Me%=Wt,ye%=Wt}return ye<Me&&(ye+=Wt),{start:Me,end:ye,loop:ai,style:ft.style}}(i,t,e),P=[],T,A,$,tt=!1,Z=null,X=()=>tt||c(n,$,T)&&l(n,$)!==0,lt=()=>!tt||l(o,T)===0||c(o,$,T);for(let ft=x,Ct=x;ft<=b;++ft)A=t[ft%a],A.skip||(T=g(A[s]),T!==$&&(tt=c(T,n,o),Z===null&&X()&&(Z=l(T,n)===0?ft:Ct),Z!==null&&lt()&&(P.push(jo({start:Z,end:ft,loop:v,count:a,style:k})),Z=null),Ct=ft,$=T));return Z!==null&&P.push(jo({start:Z,end:b,loop:v,count:a,style:k})),P}function eo(i,t){let e=[],s=i.segments;for(let n=0;n<s.length;n++){let o=to(s[n],i.points,t);o.length&&e.push(...o)}return e}function Vo(i,t){let e=i.points,s=i.options.spanGaps,n=e.length;if(!n)return[];let o=!!i._loop,{start:a,end:l}=function(c,g,x,b){let v=0,k=g-1;if(x&&!b)for(;v<g&&!c[v].skip;)v++;for(;v<g&&c[v].skip;)v++;for(v%=g,x&&(k+=v);k>v&&c[k%g].skip;)k--;return k%=g,{start:v,end:k}}(e,n,o,s);return s===!0?Yo(i,[{start:a,end:l,loop:o}],e,t):Yo(i,function(c,g,x,b){let v=c.length,k=[],P,T=g,A=c[g];for(P=g+1;P<=x;++P){let $=c[P%v];$.skip||$.stop?A.skip||(b=!1,k.push({start:g%v,end:(P-1)%v,loop:b}),g=T=$.stop?P:null):(T=P,A.skip&&(g=P)),A=$}return T!==null&&k.push({start:g%v,end:T%v,loop:b}),k}(e,a,l<a?l+n:l,!!i._fullLoop&&a===0&&l===n-1),e,t)}function Yo(i,t,e,s){return s&&s.setContext&&e?function(n,o,a,l){let c=n._chart.getContext(),g=qo(n.options),{_datasetIndex:x,options:{spanGaps:b}}=n,v=a.length,k=[],P=g,T=o[0].start,A=T;function $(tt,Z,X,lt){let ft=b?-1:1;if(tt!==Z){for(tt+=v;a[tt%v].skip;)tt-=ft;for(;a[Z%v].skip;)Z+=ft;tt%v!=Z%v&&(k.push({start:tt%v,end:Z%v,loop:X,style:lt}),P=lt,T=Z%v)}}for(let tt of o){T=b?T:tt.start;let Z,X=a[T%v];for(A=T+1;A<=tt.end;A++){let lt=a[A%v];Z=qo(l.setContext(rs(c,{type:"segment",p0:X,p1:lt,p0DataIndex:(A-1)%v,p1DataIndex:A%v,datasetIndex:x}))),al(Z,P)&&$(T,A-1,tt.loop,P),X=lt,P=Z}T<A-1&&$(T,A-1,tt.loop,P)}return k}(i,t,e,s):t}function qo(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function al(i,t){if(!t)return!1;let e=[],s=function(n,o){return z(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(i,s)!==JSON.stringify(t,s)}var ll=Object.freeze({__proto__:null,HALF_PI:ot,INFINITY:F,PI:y,PITAU:D,QUARTER_PI:Y,RAD_PER_DEG:V,TAU:w,TWO_THIRDS_PI:it,_addGrace:Bo,_alignPixel:L,_alignStartEnd:Ce,_angleBetween:N,_angleDiff:Di,_arrayUnique:le,_attachContext:ni,_bezierCurveTo:ge,_bezierInterpolation:Fo,_boundSegment:to,_boundSegments:eo,_capitalize:te,_computeSegments:Vo,_createResolver:Qe,_decimalPlaces:Ne,_deprecated:function(i,t,e,s){t!==void 0&&console.warn(i+': "'+e+'" is deprecated. Please use "'+s+'" instead')},_descriptors:Oe,_elementsEqual:Ut,_factorize:ti,_filterBetween:At,_getParentNode:Yt,_getStartAndCountOfVisiblePoints:li,_int16Range:et,_isBetween:nt,_isClickEvent:u,_isDomSupported:Pt,_isPointInArea:Mt,_limitValue:J,_longestText:_,_lookup:ut,_lookupByKey:dt,_measureText:f,_merger:Pe,_mergerIf:Re,_normalizeAngle:ve,_parseObjectDataRadialScale:zs,_pointInLine:ps,_readValueToProps:hn,_rlookupByKey:yt,_scaleRangesChanged:hi,_setMinAndMaxByKey:Ke,_splitKey:Ge,_steppedInterpolation:$o,_steppedLineTo:Zt,_textX:os,_toLeftRightCenter:xe,_updateBezierControlPoints:Mi,addRoundedRectPath:xi,almostEquals:ee,almostWhole:We,callback:bt,clearCanvas:K,clipArea:qt,clone:Jt,color:H,createContext:rs,debounce:fe,defined:Vt,distanceBetweenPoints:wi,drawPoint:gt,drawPointLegend:wt,each:xt,easingEffects:Ls,finiteOrDefault:ht,fontString:function(i,t,e){return t+" "+i+"px "+e},formatNumber:ct,getAngleFromPoint:ei,getHoverColor:j,getMaximumSize:S,getRelativePosition:me,getRtlAdapter:Ss,getStyle:he,isArray:I,isFinite:W,isFunction:St,isNullOrUndef:C,isNumber:Ae,isObject:Q,isPatternOrGradient:z,listenArrayEvents:Bt,log10:kt,merge:ce,mergeIf:_e,niceNum:Le,noop:d,overrideTextDirection:Zn,readUsedSize:h,renderText:Xe,requestAnimFrame:ne,resolve:Hs,resolveObjectKey:Ee,restoreTextDirection:Jn,retinaScale:O,setsEqual:r,sign:Et,splineCurve:us,splineCurveMonotone:Ms,supportsEventListenerOptions:B,throttled:Se,toDegrees:Ze,toDimension:It,toFont:qe,toFontString:p,toLineHeight:Wo,toPadding:oi,toPercentage:Dt,toRadians:Ie,toTRBL:Kn,toTRBLCorners:fs,uid:m,unclipArea:Xt,unlistenArrayEvents:Ot,valueOrDefault:q});function hl(i,t,e,s){let{controller:n,data:o,_sorted:a}=i,l=n._cachedMeta.iScale;if(l&&t===l.axis&&t!=="r"&&a&&o.length){let c=l._reversePixels?yt:dt;if(!s)return c(o,t,e);if(n._sharedOptions){let g=o[0],x=typeof g.getRange=="function"&&g.getRange(t);if(x){let b=c(o,t,e-x),v=c(o,t,e+x);return{lo:b.lo,hi:v.hi}}}}return{lo:0,hi:o.length-1}}function Bs(i,t,e,s,n){let o=i.getSortedVisibleDatasetMetas(),a=e[t];for(let l=0,c=o.length;l<c;++l){let{index:g,data:x}=o[l],{lo:b,hi:v}=hl(o[l],t,a,n);for(let k=b;k<=v;++k){let P=x[k];P.skip||s(P,g,k)}}}function io(i,t,e,s,n){let o=[];return!n&&!i.isPointInArea(t)||Bs(i,e,t,function(a,l,c){(n||Mt(a,i.chartArea,0))&&a.inRange(t.x,t.y,s)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function cl(i,t,e,s,n,o){let a=[],l=function(g){let x=g.indexOf("x")!==-1,b=g.indexOf("y")!==-1;return function(v,k){let P=x?Math.abs(v.x-k.x):0,T=b?Math.abs(v.y-k.y):0;return Math.sqrt(Math.pow(P,2)+Math.pow(T,2))}}(e),c=Number.POSITIVE_INFINITY;return Bs(i,e,t,function(g,x,b){let v=g.inRange(t.x,t.y,n);if(s&&!v)return;let k=g.getCenterPoint(n);if(!(o||i.isPointInArea(k))&&!v)return;let P=l(t,k);P<c?(a=[{element:g,datasetIndex:x,index:b}],c=P):P===c&&a.push({element:g,datasetIndex:x,index:b})}),a}function so(i,t,e,s,n,o){return o||i.isPointInArea(t)?e!=="r"||s?cl(i,t,e,s,n,o):function(a,l,c,g){let x=[];return Bs(a,c,l,function(b,v,k){let{startAngle:P,endAngle:T}=b.getProps(["startAngle","endAngle"],g),{angle:A}=ei(b,{x:l.x,y:l.y});N(A,P,T)&&x.push({element:b,datasetIndex:v,index:k})}),x}(i,t,e,n):[]}function Go(i,t,e,s,n){let o=[],a=e==="x"?"inXRange":"inYRange",l=!1;return Bs(i,e,t,(c,g,x)=>{c[a](t[e],n)&&(o.push({element:c,datasetIndex:g,index:x}),l=l||c.inRange(t.x,t.y,n))}),s&&!l?[]:o}var Xo={evaluateInteractionItems:Bs,modes:{index(i,t,e,s){let n=me(t,i),o=e.axis||"x",a=e.includeInvisible||!1,l=e.intersect?io(i,n,o,s,a):so(i,n,o,!1,s,a),c=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(g=>{let x=l[0].index,b=g.data[x];b&&!b.skip&&c.push({element:b,datasetIndex:g.index,index:x})}),c):[]},dataset(i,t,e,s){let n=me(t,i),o=e.axis||"xy",a=e.includeInvisible||!1,l=e.intersect?io(i,n,o,s,a):so(i,n,o,!1,s,a);if(l.length>0){let c=l[0].datasetIndex,g=i.getDatasetMeta(c).data;l=[];for(let x=0;x<g.length;++x)l.push({element:g[x],datasetIndex:c,index:x})}return l},point:(i,t,e,s)=>io(i,me(t,i),e.axis||"xy",s,e.includeInvisible||!1),nearest(i,t,e,s){let n=me(t,i),o=e.axis||"xy",a=e.includeInvisible||!1;return so(i,n,o,e.intersect,s,a)},x:(i,t,e,s)=>Go(i,me(t,i),"x",e.intersect,s),y:(i,t,e,s)=>Go(i,me(t,i),"y",e.intersect,s)}};let Qo=["left","top","right","bottom"];function Us(i,t){return i.filter(e=>e.pos===t)}function Ko(i,t){return i.filter(e=>Qo.indexOf(e.pos)===-1&&e.box.axis===t)}function js(i,t){return i.sort((e,s)=>{let n=t?s:e,o=t?e:s;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function dl(i,t){let e=function(c){let g={};for(let x of c){let{stack:b,pos:v,stackWeight:k}=x;if(!b||!Qo.includes(v))continue;let P=g[b]||(g[b]={count:0,placed:0,weight:0,size:0});P.count++,P.weight+=k}return g}(i),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t,o,a,l;for(o=0,a=i.length;o<a;++o){l=i[o];let{fullSize:c}=l.box,g=e[l.stack],x=g&&l.stackWeight/g.weight;l.horizontal?(l.width=x?x*s:c&&t.availableWidth,l.height=n):(l.width=s,l.height=x?x*n:c&&t.availableHeight)}return e}function Zo(i,t,e,s){return Math.max(i[e],t[e])+Math.max(i[s],t[s])}function Jo(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function ul(i,t,e,s){let{pos:n,box:o}=e,a=i.maxPadding;if(!Q(n)){e.size&&(i[n]-=e.size);let b=s[e.stack]||{size:0,count:1};b.size=Math.max(b.size,e.horizontal?o.height:o.width),e.size=b.size/b.count,i[n]+=e.size}o.getPadding&&Jo(a,o.getPadding());let l=Math.max(0,t.outerWidth-Zo(a,i,"left","right")),c=Math.max(0,t.outerHeight-Zo(a,i,"top","bottom")),g=l!==i.w,x=c!==i.h;return i.w=l,i.h=c,e.horizontal?{same:g,other:x}:{same:x,other:g}}function gl(i,t){let e=t.maxPadding;function s(n){let o={left:0,top:0,right:0,bottom:0};return n.forEach(a=>{o[a]=Math.max(t[a],e[a])}),o}return s(i?["left","right"]:["top","bottom"])}function Vs(i,t,e,s){let n=[],o,a,l,c,g,x;for(o=0,a=i.length,g=0;o<a;++o){l=i[o],c=l.box,c.update(l.width||t.w,l.height||t.h,gl(l.horizontal,t));let{same:b,other:v}=ul(t,e,l,s);g|=b&&n.length,x=x||v,c.fullSize||n.push(l)}return g&&Vs(n,t,e,s)||x}function cn(i,t,e,s,n){i.top=e,i.left=t,i.right=t+s,i.bottom=e+n,i.width=s,i.height=n}function tr(i,t,e,s){let n=e.padding,{x:o,y:a}=t;for(let l of i){let c=l.box,g=s[l.stack]||{count:1,placed:0,weight:1},x=l.stackWeight/g.weight||1;if(l.horizontal){let b=t.w*x,v=g.size||c.height;Vt(g.start)&&(a=g.start),c.fullSize?cn(c,n.left,a,e.outerWidth-n.right-n.left,v):cn(c,t.left+g.placed,a,b,v),g.start=a,g.placed+=b,a=c.bottom}else{let b=t.h*x,v=g.size||c.width;Vt(g.start)&&(o=g.start),c.fullSize?cn(c,o,n.top,v,e.outerHeight-n.bottom-n.top):cn(c,o,t.top+g.placed,v,b),g.start=o,g.placed+=b,o=c.right}}t.x=o,t.y=a}var ri={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){let e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,s){if(!i)return;let n=oi(i.options.layout.padding),o=Math.max(t-n.width,0),a=Math.max(e-n.height,0),l=function(T){let A=function(Rt){let $t=[],Ht,Gt,jt,Nt,Wt,Ft;for(Ht=0,Gt=(Rt||[]).length;Ht<Gt;++Ht)jt=Rt[Ht],{position:Nt,options:{stack:Wt,stackWeight:Ft=1}}=jt,$t.push({index:Ht,box:jt,pos:Nt,horizontal:jt.isHorizontal(),weight:jt.weight,stack:Wt&&Nt+Wt,stackWeight:Ft});return $t}(T),$=js(A.filter(Rt=>Rt.box.fullSize),!0),tt=js(Us(A,"left"),!0),Z=js(Us(A,"right")),X=js(Us(A,"top"),!0),lt=js(Us(A,"bottom")),ft=Ko(A,"x"),Ct=Ko(A,"y");return{fullSize:$,leftAndTop:tt.concat(X),rightAndBottom:Z.concat(Ct).concat(lt).concat(ft),chartArea:Us(A,"chartArea"),vertical:tt.concat(Z).concat(Ct),horizontal:X.concat(lt).concat(ft)}}(i.boxes),c=l.vertical,g=l.horizontal;xt(i.boxes,T=>{typeof T.beforeLayout=="function"&&T.beforeLayout()});let x=c.reduce((T,A)=>A.box.options&&A.box.options.display===!1?T:T+1,0)||1,b=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/x,hBoxMaxHeight:a/2}),v=Object.assign({},n);Jo(v,oi(s));let k=Object.assign({maxPadding:v,w:o,h:a,x:n.left,y:n.top},n),P=dl(c.concat(g),b);Vs(l.fullSize,k,b,P),Vs(c,k,b,P),Vs(g,k,b,P)&&Vs(c,k,b,P),function(T){let A=T.maxPadding;function $(tt){let Z=Math.max(A[tt]-T[tt],0);return T[tt]+=Z,Z}T.y+=$("top"),T.x+=$("left"),$("right"),$("bottom")}(k),tr(l.leftAndTop,k,b,P),k.x+=k.w,k.y+=k.h,tr(l.rightAndBottom,k,b,P),i.chartArea={left:k.left,top:k.top,right:k.left+k.w,bottom:k.top+k.h,height:k.h,width:k.w},xt(l.chartArea,T=>{let A=T.box;Object.assign(A,i.chartArea),A.update(k.w,k.h,{left:0,top:0,right:0,bottom:0})})}};class no{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,n){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):s)}}isAttached(t){return!0}updateConfig(t){}}class er extends no{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}let dn="$chartjs",pl={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ir=i=>i===null||i==="",sr=!!B&&{passive:!0};function fl(i,t,e){i.canvas.removeEventListener(t,e,sr)}function un(i,t){for(let e of i)if(e===t||e.contains(t))return!0}function ml(i,t,e){let s=i.canvas,n=new MutationObserver(o=>{let a=!1;for(let l of o)a=a||un(l.addedNodes,s),a=a&&!un(l.removedNodes,s);a&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function bl(i,t,e){let s=i.canvas,n=new MutationObserver(o=>{let a=!1;for(let l of o)a=a||un(l.removedNodes,s),a=a&&!un(l.addedNodes,s);a&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}let Ys=new Map,nr=0;function or(){let i=window.devicePixelRatio;i!==nr&&(nr=i,Ys.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function yl(i,t,e){let s=i.canvas,n=s&&Yt(s);if(!n)return;let o=Se((l,c)=>{let g=n.clientWidth;e(l,c),g<n.clientWidth&&e()},window),a=new ResizeObserver(l=>{let c=l[0],g=c.contentRect.width,x=c.contentRect.height;g===0&&x===0||o(g,x)});return a.observe(n),function(l,c){Ys.size||window.addEventListener("resize",or),Ys.set(l,c)}(i,o),a}function oo(i,t,e){e&&e.disconnect(),t==="resize"&&function(s){Ys.delete(s),Ys.size||window.removeEventListener("resize",or)}(i)}function xl(i,t,e){let s=i.canvas,n=Se(o=>{i.ctx!==null&&e(function(a,l){let c=pl[a.type]||a.type,{x:g,y:x}=me(a,l);return{type:c,chart:l,native:a,x:g!==void 0?g:null,y:x!==void 0?x:null}}(o,i))},i);return function(o,a,l){o.addEventListener(a,l,sr)}(s,t,n),n}class rr extends no{acquireContext(t,e){let s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(function(n,o){let a=n.style,l=n.getAttribute("height"),c=n.getAttribute("width");if(n[dn]={initial:{height:l,width:c,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",ir(c)){let g=h(n,"width");g!==void 0&&(n.width=g)}if(ir(l))if(n.style.height==="")n.height=n.width/(o||2);else{let g=h(n,"height");g!==void 0&&(n.height=g)}}(t,e),s):null}releaseContext(t){let e=t.canvas;if(!e[dn])return!1;let s=e[dn].initial;["height","width"].forEach(o=>{let a=s[o];C(a)?e.removeAttribute(o):e.setAttribute(o,a)});let n=s.style||{};return Object.keys(n).forEach(o=>{e.style[o]=n[o]}),e.width=e.width,delete e[dn],!0}addEventListener(t,e,s){this.removeEventListener(t,e);let n=t.$proxies||(t.$proxies={}),o={attach:ml,detach:bl,resize:yl}[e]||xl;n[e]=o(t,e,s)}removeEventListener(t,e){let s=t.$proxies||(t.$proxies={}),n=s[e];n&&(({attach:oo,detach:oo,resize:oo}[e]||fl)(t,e,n),s[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,n){return S(t,e,s,n)}isAttached(t){let e=Yt(t);return!(!e||!e.isConnected)}}function ar(i){return!Pt()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?er:rr}var lr=Object.freeze({__proto__:null,BasePlatform:no,BasicPlatform:er,DomPlatform:rr,_detectPlatform:ar});let hr="transparent",vl={boolean:(i,t,e)=>e>.5?t:i,color(i,t,e){let s=H(i||hr),n=s.valid&&H(t||hr);return n&&n.valid?n.mix(s,e).hexString():t},number:(i,t,e)=>i+(t-i)*e};class cr{constructor(t,e,s,n){let o=e[s];n=Hs([t.to,n,o,t.from]);let a=Hs([t.from,o,n]);this._active=!0,this._fn=t.fn||vl[t.type||typeof a],this._easing=Ls[t.easing]||Ls.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=a,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);let n=this._target[this._prop],o=s-this._start,a=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Hs([t.to,e,n,t.from]),this._from=Hs([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,s=this._duration,n=this._prop,o=this._from,a=this._loop,l=this._to,c;if(this._active=o!==l&&(a||e<s),!this._active)return this._target[n]=l,void this._notify(!0);e<0?this._target[n]=o:(c=e/s%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(o,l,c))}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){let e=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][e]()}}class ro{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Q(t))return;let e=Object.keys(mt.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{let o=t[n];if(!Q(o))return;let a={};for(let l of e)a[l]=o[l];(I(o.properties)&&o.properties||[n]).forEach(l=>{l!==n&&s.has(l)||s.set(l,a)})})}_animateOptions(t,e){let s=e.options,n=function(a,l){if(!l)return;let c=a.options;return c?(c.$shared&&(a.options=c=Object.assign({},c,{$shared:!1,$animations:{}})),c):void(a.options=l)}(t,s);if(!n)return[];let o=this._createAnimations(n,s);return s.$shared&&function(a,l){let c=[],g=Object.keys(l);for(let x=0;x<g.length;x++){let b=a[g[x]];b&&b.active()&&c.push(b.wait())}return Promise.all(c)}(t.options.$animations,s).then(()=>{t.options=s},()=>{}),o}_createAnimations(t,e){let s=this._properties,n=[],o=t.$animations||(t.$animations={}),a=Object.keys(e),l=Date.now(),c;for(c=a.length-1;c>=0;--c){let g=a[c];if(g.charAt(0)==="$")continue;if(g==="options"){n.push(...this._animateOptions(t,e));continue}let x=e[g],b=o[g],v=s.get(g);if(b){if(v&&b.active()){b.update(v,x,l);continue}b.cancel()}v&&v.duration?(o[g]=b=new cr(v,t,g,x),n.push(b)):t[g]=x}return n}update(t,e){if(this._properties.size===0)return void Object.assign(t,e);let s=this._createAnimations(t,e);return s.length?(Be.add(this._chart,s),!0):void 0}}function dr(i,t){let e=i&&i.options||{},s=e.reverse,n=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:s?o:n,end:s?n:o}}function ur(i,t){let e=[],s=i._getSortedDatasetMetas(t),n,o;for(n=0,o=s.length;n<o;++n)e.push(s[n].index);return e}function gr(i,t,e,s={}){let n=i.keys,o=s.mode==="single",a,l,c,g;if(t!==null){for(a=0,l=n.length;a<l;++a){if(c=+n[a],c===e){if(s.all)continue;break}g=i.values[c],W(g)&&(o||t===0||Et(t)===Et(g))&&(t+=g)}return t}}function pr(i,t){let e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function wl(i,t,e){let s=i[t]||(i[t]={});return s[e]||(s[e]={})}function fr(i,t,e,s){for(let n of t.getMatchingVisibleMetas(s).reverse()){let o=i[n.index];if(e&&o>0||!e&&o<0)return n.index}return null}function mr(i,t){let{chart:e,_cachedMeta:s}=i,n=e._stacks||(e._stacks={}),{iScale:o,vScale:a,index:l}=s,c=o.axis,g=a.axis,x=function(k,P,T){return`${k.id}.${P.id}.${T.stack||T.type}`}(o,a,s),b=t.length,v;for(let k=0;k<b;++k){let P=t[k],{[c]:T,[g]:A}=P;v=(P._stacks||(P._stacks={}))[g]=wl(n,x,T),v[l]=A,v._top=fr(v,a,!0,s.type),v._bottom=fr(v,a,!1,s.type),(v._visualValues||(v._visualValues={}))[l]=A}}function ao(i,t){let e=i.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function qs(i,t){let e=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){t=t||i._parsed;for(let n of t){let o=n._stacks;if(!o||o[s]===void 0||o[s][e]===void 0)return;delete o[s][e],o[s]._visualValues!==void 0&&o[s]._visualValues[e]!==void 0&&delete o[s]._visualValues[e]}}}let lo=i=>i==="reset"||i==="none",br=(i,t)=>t?i:Object.assign({},i);class as{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=pr(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&qs(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,e=this._cachedMeta,s=this.getDataset(),n=(b,v,k,P)=>b==="x"?v:b==="r"?P:k,o=e.xAxisID=q(s.xAxisID,ao(t,"x")),a=e.yAxisID=q(s.yAxisID,ao(t,"y")),l=e.rAxisID=q(s.rAxisID,ao(t,"r")),c=e.indexAxis,g=e.iAxisID=n(c,o,a,l),x=e.vAxisID=n(c,a,o,l);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(l),e.iScale=this.getScaleForId(g),e.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Ot(this._data,this),t._stacked&&qs(t)}_dataCheck(){let t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(Q(e))this._data=function(n){let o=Object.keys(n),a=new Array(o.length),l,c,g;for(l=0,c=o.length;l<c;++l)g=o[l],a[l]={x:g,y:n[g]};return a}(e);else if(s!==e){if(s){Ot(s,this);let n=this._cachedMeta;qs(n),n._parsed=[]}e&&Object.isExtensible(e)&&Bt(e,this),this._syncList=[],this._data=e}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let e=this._cachedMeta,s=this.getDataset(),n=!1;this._dataCheck();let o=e._stacked;e._stacked=pr(e.vScale,e),e.stack!==s.stack&&(n=!0,qs(e),e.stack=s.stack),this._resyncElements(t),(n||o!==e._stacked)&&mr(this,e._parsed)}configure(){let t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){let{_cachedMeta:s,_data:n}=this,{iScale:o,_stacked:a}=s,l=o.axis,c,g,x,b=t===0&&e===n.length||s._sorted,v=t>0&&s._parsed[t-1];if(this._parsing===!1)s._parsed=n,s._sorted=!0,x=n;else{x=I(n[t])?this.parseArrayData(s,n,t,e):Q(n[t])?this.parseObjectData(s,n,t,e):this.parsePrimitiveData(s,n,t,e);let k=()=>g[l]===null||v&&g[l]<v[l];for(c=0;c<e;++c)s._parsed[c+t]=g=x[c],b&&(k()&&(b=!1),v=g);s._sorted=b}a&&mr(this,x)}parsePrimitiveData(t,e,s,n){let{iScale:o,vScale:a}=t,l=o.axis,c=a.axis,g=o.getLabels(),x=o===a,b=new Array(n),v,k,P;for(v=0,k=n;v<k;++v)P=v+s,b[v]={[l]:x||o.parse(g[P],P),[c]:a.parse(e[P],P)};return b}parseArrayData(t,e,s,n){let{xScale:o,yScale:a}=t,l=new Array(n),c,g,x,b;for(c=0,g=n;c<g;++c)x=c+s,b=e[x],l[c]={x:o.parse(b[0],x),y:a.parse(b[1],x)};return l}parseObjectData(t,e,s,n){let{xScale:o,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,g=new Array(n),x,b,v,k;for(x=0,b=n;x<b;++x)v=x+s,k=e[v],g[x]={x:o.parse(Ee(k,l),v),y:a.parse(Ee(k,c),v)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){let n=this.chart,o=this._cachedMeta,a=e[t.axis];return gr({keys:ur(n,!0),values:e._stacks[t.axis]._visualValues},a,o.index,{mode:s})}updateRangeFromParsed(t,e,s,n){let o=s[e.axis],a=o===null?NaN:o,l=n&&s._stacks[e.axis];n&&l&&(n.values=l,a=gr(n,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){let s=this._cachedMeta,n=s._parsed,o=s._sorted&&t===s.iScale,a=n.length,l=this._getOtherScale(t),c=((T,A,$)=>T&&!A.hidden&&A._stacked&&{keys:ur($,!0),values:null})(e,s,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:b}=function(T){let{min:A,max:$,minDefined:tt,maxDefined:Z}=T.getUserBounds();return{min:tt?A:Number.NEGATIVE_INFINITY,max:Z?$:Number.POSITIVE_INFINITY}}(l),v,k;function P(){k=n[v];let T=k[l.axis];return!W(k[t.axis])||x>T||b<T}for(v=0;v<a&&(P()||(this.updateRangeFromParsed(g,t,k,c),!o));++v);if(o){for(v=a-1;v>=0;--v)if(!P()){this.updateRangeFromParsed(g,t,k,c);break}}return g}getAllParsedValues(t){let e=this._cachedMeta._parsed,s=[],n,o,a;for(n=0,o=e.length;n<o;++n)a=e[n][t.axis],W(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){let e=this._cachedMeta,s=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){let e=this._cachedMeta;this.update(t||"default"),e._clip=function(s){let n,o,a,l;return Q(s)?(n=s.top,o=s.right,a=s.bottom,l=s.left):n=o=a=l=s,{top:n,right:o,bottom:a,left:l,disabled:s===!1}}(q(this.options.clip,function(s,n,o){if(o===!1)return!1;let a=dr(s,o),l=dr(n,o);return{top:l.end,right:a.end,bottom:l.start,left:a.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,e=this.chart,s=this._cachedMeta,n=s.data||[],o=e.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||n.length-l,g=this.options.drawActiveElementsOnTop,x;for(s.dataset&&s.dataset.draw(t,o,l,c),x=l;x<l+c;++x){let b=n[x];b.hidden||(b.active&&g?a.push(b):b.draw(t,o))}for(x=0;x<a.length;++x)a[x].draw(t,o)}getStyle(t,e){let s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){let n=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=function(l,c,g){return rs(l,{active:!1,dataIndex:c,parsed:void 0,raw:void 0,element:g,index:c,mode:"default",type:"data"})}(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=n.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function(a,l){return rs(a,{active:!1,dataset:void 0,datasetIndex:l,index:l,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=s,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){let n=e==="active",o=this._cachedDataOpts,a=t+"-"+e,l=o[a],c=this.enableOptionSharing&&Vt(s);if(l)return br(l,c);let g=this.chart.config,x=g.datasetElementScopeKeys(this._type,t),b=n?[`${t}Hover`,"hover",t,""]:[t,""],v=g.getOptionScopes(this.getDataset(),x),k=Object.keys(mt.elements[t]),P=g.resolveNamedOptions(v,k,()=>this.getContext(s,n,e),b);return P.$shared&&(P.$shared=c,o[a]=Object.freeze(br(P,c))),P}_resolveAnimations(t,e,s){let n=this.chart,o=this._cachedDataOpts,a=`animation-${e}`,l=o[a];if(l)return l;let c;if(n.options.animation!==!1){let x=this.chart.config,b=x.datasetAnimationScopeKeys(this._type,e),v=x.getOptionScopes(this.getDataset(),b);c=x.createResolver(v,this.getContext(t,s,e))}let g=new ro(n,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||lo(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){let s=this.resolveDataElementOptions(t,e),n=this._sharedOptions,o=this.getSharedOptions(s),a=this.includeOptions(e,o)||o!==n;return this.updateSharedOptions(o,e,s),{sharedOptions:o,includeOptions:a}}updateElement(t,e,s,n){lo(n)?Object.assign(t,s):this._resolveAnimations(e,n).update(t,s)}updateSharedOptions(t,e,s){t&&!lo(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,n){t.active=n;let o=this.getStyle(e,n);this._resolveAnimations(e,s,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let e=this._data,s=this._cachedMeta.data;for(let[l,c,g]of this._syncList)this[l](c,g);this._syncList=[];let n=s.length,o=e.length,a=Math.min(o,n);a&&this.parse(0,a),o>n?this._insertElements(n,o-n,t):o<n&&this._removeElements(o,n-o)}_insertElements(t,e,s=!0){let n=this._cachedMeta,o=n.data,a=t+e,l,c=g=>{for(g.length+=e,l=g.length-1;l>=a;l--)g[l]=g[l-e]};for(c(o),l=t;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(t,e),s&&this.updateElements(o,t,e,"reset")}updateElements(t,e,s,n){}_removeElements(t,e){let s=this._cachedMeta;if(this._parsing){let n=s._parsed.splice(t,e);s._stacked&&qs(s,n)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[e,s,n]=t;this[e](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);let s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class ss{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return Ae(this.x)&&Ae(this.y)}getProps(t,e){let s=this.$animations;if(!e||!s)return this;let n={};return t.forEach(o=>{n[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),n}}function _l(i,t){let e=i.options.ticks,s=function(b){let v=b.options.offset,k=b._tickSize(),P=b._length/k+(v?0:1),T=b._maxLength/k;return Math.floor(Math.min(P,T))}(i),n=Math.min(e.maxTicksLimit||s,s),o=e.major.enabled?function(b){let v=[],k,P;for(k=0,P=b.length;k<P;k++)b[k].major&&v.push(k);return v}(t):[],a=o.length,l=o[0],c=o[a-1],g=[];if(a>n)return function(b,v,k,P){let T,A=0,$=k[0];for(P=Math.ceil(P),T=0;T<b.length;T++)T===$&&(v.push(b[T]),A++,$=k[A*P])}(t,g,o,a/n),g;let x=function(b,v,k){let P=function($){let tt=$.length,Z,X;if(tt<2)return!1;for(X=$[0],Z=1;Z<tt;++Z)if($[Z]-$[Z-1]!==X)return!1;return X}(b),T=v.length/k;if(!P)return Math.max(T,1);let A=ti(P);for(let $=0,tt=A.length-1;$<tt;$++){let Z=A[$];if(Z>T)return Z}return Math.max(T,1)}(o,t,n);if(a>0){let b,v,k=a>1?Math.round((c-l)/(a-1)):null;for(gn(t,g,x,C(k)?0:l-k,l),b=0,v=a-1;b<v;b++)gn(t,g,x,o[b],o[b+1]);return gn(t,g,x,c,C(k)?t.length:c+k),g}return gn(t,g,x),g}function gn(i,t,e,s,n){let o=q(s,0),a=Math.min(q(n,i.length),i.length),l,c,g,x=0;for(e=Math.ceil(e),n&&(l=n-s,e=l/Math.floor(l/e)),g=o;g<0;)x++,g=Math.round(o+x*e);for(c=Math.max(o,0);c<a;c++)c===g&&(t.push(i[c]),x++,g=Math.round(o+x*e))}let yr=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,xr=(i,t)=>Math.min(t||i,i);function vr(i,t){let e=[],s=i.length/t,n=i.length,o=0;for(;o<n;o+=s)e.push(i[Math.floor(o)]);return e}function kl(i,t,e){let s=i.ticks.length,n=Math.min(t,s-1),o=i._startPixel,a=i._endPixel,l=1e-6,c,g=i.getPixelForTick(n);if(!(e&&(c=s===1?Math.max(g-o,a-g):t===0?(i.getPixelForTick(1)-g)/2:(g-i.getPixelForTick(n-1))/2,g+=n<t?c:-c,g<o-l||g>a+l)))return g}function Gs(i){return i.drawTicks?i.tickLength:0}function wr(i,t){if(!i.display)return 0;let e=qe(i.font,t),s=oi(i.padding);return(I(i.text)?i.text.length:1)*e.lineHeight+s.height}function Ml(i,t,e){let s=xe(i);return(e&&t!=="right"||!e&&t==="right")&&(s=(n=>n==="left"?"right":n==="right"?"left":n)(s)),s}class ms extends ss{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:n}=this;return t=ht(t,Number.POSITIVE_INFINITY),e=ht(e,Number.NEGATIVE_INFINITY),s=ht(s,Number.POSITIVE_INFINITY),n=ht(n,Number.NEGATIVE_INFINITY),{min:ht(t,s),max:ht(e,n),minDefined:W(t),maxDefined:W(e)}}getMinMax(t){let e,{min:s,max:n,minDefined:o,maxDefined:a}=this.getUserBounds();if(o&&a)return{min:s,max:n};let l=this.getMatchingVisibleMetas();for(let c=0,g=l.length;c<g;++c)e=l[c].controller.getMinMax(this,t),o||(s=Math.min(s,e.min)),a||(n=Math.max(n,e.max));return s=a&&s>n?n:s,n=o&&s>n?s:n,{min:ht(s,ht(n,s)),max:ht(n,ht(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){bt(this.options.beforeUpdate,[this])}update(t,e,s){let{beginAtZero:n,grace:o,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Bo(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=l<this.ticks.length;this._convertTicksToLabels(c?vr(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=_l(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,s=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,s=!s),this._startPixel=t,this._endPixel=e,this._reversePixels=s,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){bt(this.options.afterUpdate,[this])}beforeSetDimensions(){bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){bt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),bt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s],o.label=bt(e.callback,[o.value,s,t],this)}afterTickToLabelConversion(){bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,s=xr(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,o=e.maxRotation,a,l,c,g=n;if(!this._isVisible()||!e.display||n>=o||s<=1||!this.isHorizontal())return void(this.labelRotation=n);let x=this._getLabelSizes(),b=x.widest.width,v=x.highest.height,k=J(this.chart.width-b,0,this.maxWidth);a=t.offset?this.maxWidth/s:k/(s-1),b+6>a&&(a=k/(s-(t.offset?.5:1)),l=this.maxHeight-Gs(t.grid)-e.padding-wr(t.title,this.chart.options.font),c=Math.sqrt(b*b+v*v),g=Ze(Math.min(Math.asin(J((x.highest.height+6)/a,-1,1)),Math.asin(J(l/c,-1,1))-Math.asin(J(v/c,-1,1)))),g=Math.max(n,Math.min(o,g))),this.labelRotation=g}afterCalculateLabelRotation(){bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){bt(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:s,title:n,grid:o}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){let c=wr(n,e.options.font);if(l?(t.width=this.maxWidth,t.height=Gs(o)+c):(t.height=this.maxHeight,t.width=Gs(o)+c),s.display&&this.ticks.length){let{first:g,last:x,widest:b,highest:v}=this._getLabelSizes(),k=2*s.padding,P=Ie(this.labelRotation),T=Math.cos(P),A=Math.sin(P);if(l){let $=s.mirror?0:A*b.width+T*v.height;t.height=Math.min(this.maxHeight,t.height+$+k)}else{let $=s.mirror?0:T*b.width+A*v.height;t.width=Math.min(this.maxWidth,t.width+$+k)}this._calculatePadding(g,x,A,T)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,n){let{ticks:{align:o,padding:a},position:l}=this.options,c=this.labelRotation!==0,g=l!=="top"&&this.axis==="x";if(this.isHorizontal()){let x=this.getPixelForTick(0)-this.left,b=this.right-this.getPixelForTick(this.ticks.length-1),v=0,k=0;c?g?(v=n*t.width,k=s*e.height):(v=s*t.height,k=n*e.width):o==="start"?k=e.width:o==="end"?v=t.width:o!=="inner"&&(v=t.width/2,k=e.width/2),this.paddingLeft=Math.max((v-x+a)*this.width/(this.width-x),0),this.paddingRight=Math.max((k-b+a)*this.width/(this.width-b),0)}else{let x=e.height/2,b=t.height/2;o==="start"?(x=0,b=t.height):o==="end"&&(x=e.height,b=0),this.paddingTop=x+a,this.paddingBottom=b+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){bt(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,s;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,s=t.length;e<s;e++)C(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,s=this.ticks;e<s.length&&(s=vr(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){let{ctx:n,_longestTextCache:o}=this,a=[],l=[],c=Math.floor(e/xr(e,s)),g,x,b,v,k,P,T,A,$,tt,Z,X=0,lt=0;for(g=0;g<e;g+=c){if(v=t[g].label,k=this._resolveTickFontOptions(g),n.font=P=k.string,T=o[P]=o[P]||{data:{},gc:[]},A=k.lineHeight,$=tt=0,C(v)||I(v)){if(I(v))for(x=0,b=v.length;x<b;++x)Z=v[x],C(Z)||I(Z)||($=f(n,T.data,T.gc,$,Z),tt+=A)}else $=f(n,T.data,T.gc,$,v),tt=A;a.push($),l.push(tt),X=Math.max($,X),lt=Math.max(tt,lt)}(function($t,Ht){xt($t,Gt=>{let jt=Gt.gc,Nt=jt.length/2,Wt;if(Nt>Ht){for(Wt=0;Wt<Nt;++Wt)delete Gt.data[jt[Wt]];jt.splice(0,Nt)}})})(o,e);let ft=a.indexOf(X),Ct=l.indexOf(lt),Rt=$t=>({width:a[$t]||0,height:l[$t]||0});return{first:Rt(0),last:Rt(e-1),widest:Rt(ft),highest:Rt(Ct),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return et(this._alignToPixels?L(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let s=e[t];return s.$context||(s.$context=function(n,o,a){return rs(n,{tick:a,index:o,type:"tick"})}(this.getContext(),t,s))}return this.$context||(this.$context=rs(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){let t=this.options.ticks,e=Ie(this.labelRotation),s=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),a=t.autoSkipPadding||0,l=o?o.widest.width+a:0,c=o?o.highest.height+a:0;return this.isHorizontal()?c*s>l*n?l/s:c/n:c*n<l*s?c/s:l/n}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,s=this.chart,n=this.options,{grid:o,position:a,border:l}=n,c=o.offset,g=this.isHorizontal(),x=this.ticks.length+(c?1:0),b=Gs(o),v=[],k=l.setContext(this.getContext()),P=k.display?k.width:0,T=P/2,A=function(Ft){return L(s,Ft,P)},$,tt,Z,X,lt,ft,Ct,Rt,$t,Ht,Gt,jt;if(a==="top")$=A(this.bottom),ft=this.bottom-b,Rt=$-T,Ht=A(t.top)+T,jt=t.bottom;else if(a==="bottom")$=A(this.top),Ht=t.top,jt=A(t.bottom)-T,ft=$+T,Rt=this.top+b;else if(a==="left")$=A(this.right),lt=this.right-b,Ct=$-T,$t=A(t.left)+T,Gt=t.right;else if(a==="right")$=A(this.left),$t=t.left,Gt=A(t.right)-T,lt=$+T,Ct=this.left+b;else if(e==="x"){if(a==="center")$=A((t.top+t.bottom)/2+.5);else if(Q(a)){let Ft=Object.keys(a)[0],ie=a[Ft];$=A(this.chart.scales[Ft].getPixelForValue(ie))}Ht=t.top,jt=t.bottom,ft=$+T,Rt=ft+b}else if(e==="y"){if(a==="center")$=A((t.left+t.right)/2);else if(Q(a)){let Ft=Object.keys(a)[0],ie=a[Ft];$=A(this.chart.scales[Ft].getPixelForValue(ie))}lt=$-T,Ct=lt-b,$t=t.left,Gt=t.right}let Nt=q(n.ticks.maxTicksLimit,x),Wt=Math.max(1,Math.ceil(x/Nt));for(tt=0;tt<x;tt+=Wt){let Ft=this.getContext(tt),ie=o.setContext(Ft),Me=l.setContext(Ft),ye=ie.lineWidth,ai=ie.color,zi=Me.dash||[],Li=Me.dashOffset,Wi=ie.tickWidth,qi=ie.tickColor,Gi=ie.tickBorderDash||[],Xi=ie.tickBorderDashOffset;Z=kl(this,tt,c),Z!==void 0&&(X=L(s,Z,ye),g?lt=Ct=$t=Gt=X:ft=Rt=Ht=jt=X,v.push({tx1:lt,ty1:ft,tx2:Ct,ty2:Rt,x1:$t,y1:Ht,x2:Gt,y2:jt,width:ye,color:ai,borderDash:zi,borderDashOffset:Li,tickWidth:Wi,tickColor:qi,tickBorderDash:Gi,tickBorderDashOffset:Xi}))}return this._ticksLength=x,this._borderValue=$,v}_computeLabelItems(t){let e=this.axis,s=this.options,{position:n,ticks:o}=s,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:g,padding:x,mirror:b}=o,v=Gs(s.grid),k=v+x,P=b?-x:k,T=-Ie(this.labelRotation),A=[],$,tt,Z,X,lt,ft,Ct,Rt,$t,Ht,Gt,jt,Nt="middle";if(n==="top")ft=this.bottom-P,Ct=this._getXAxisLabelAlignment();else if(n==="bottom")ft=this.top+P,Ct=this._getXAxisLabelAlignment();else if(n==="left"){let Ft=this._getYAxisLabelAlignment(v);Ct=Ft.textAlign,lt=Ft.x}else if(n==="right"){let Ft=this._getYAxisLabelAlignment(v);Ct=Ft.textAlign,lt=Ft.x}else if(e==="x"){if(n==="center")ft=(t.top+t.bottom)/2+k;else if(Q(n)){let Ft=Object.keys(n)[0],ie=n[Ft];ft=this.chart.scales[Ft].getPixelForValue(ie)+k}Ct=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")lt=(t.left+t.right)/2-k;else if(Q(n)){let Ft=Object.keys(n)[0],ie=n[Ft];lt=this.chart.scales[Ft].getPixelForValue(ie)}Ct=this._getYAxisLabelAlignment(v).textAlign}e==="y"&&(c==="start"?Nt="top":c==="end"&&(Nt="bottom"));let Wt=this._getLabelSizes();for($=0,tt=l.length;$<tt;++$){Z=l[$],X=Z.label;let Ft=o.setContext(this.getContext($));Rt=this.getPixelForTick($)+o.labelOffset,$t=this._resolveTickFontOptions($),Ht=$t.lineHeight,Gt=I(X)?X.length:1;let ie=Gt/2,Me=Ft.color,ye=Ft.textStrokeColor,ai=Ft.textStrokeWidth,zi,Li=Ct;if(a?(lt=Rt,Ct==="inner"&&(Li=$===tt-1?this.options.reverse?"left":"right":$===0?this.options.reverse?"right":"left":"center"),jt=n==="top"?g==="near"||T!==0?-Gt*Ht+Ht/2:g==="center"?-Wt.highest.height/2-ie*Ht+Ht:-Wt.highest.height+Ht/2:g==="near"||T!==0?Ht/2:g==="center"?Wt.highest.height/2-ie*Ht:Wt.highest.height-Gt*Ht,b&&(jt*=-1),T===0||Ft.showLabelBackdrop||(lt+=Ht/2*Math.sin(T))):(ft=Rt,jt=(1-Gt)*Ht/2),Ft.showLabelBackdrop){let Wi=oi(Ft.backdropPadding),qi=Wt.heights[$],Gi=Wt.widths[$],Xi=jt-Wi.top,Qi=0-Wi.left;switch(Nt){case"middle":Xi-=qi/2;break;case"bottom":Xi-=qi}switch(Ct){case"center":Qi-=Gi/2;break;case"right":Qi-=Gi;break;case"inner":$===tt-1?Qi-=Gi:$>0&&(Qi-=Gi/2)}zi={left:Qi,top:Xi,width:Gi+Wi.width,height:qi+Wi.height,color:Ft.backdropColor}}A.push({label:X,font:$t,textOffset:jt,options:{rotation:T,color:Me,strokeColor:ye,strokeWidth:ai,textAlign:Li,textBaseline:Nt,translation:[lt,ft],backdrop:zi}})}return A}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-Ie(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:s,mirror:n,padding:o}}=this.options,a=t+o,l=this._getLabelSizes().widest.width,c,g;return e==="left"?n?(g=this.right+o,s==="near"?c="left":s==="center"?(c="center",g+=l/2):(c="right",g+=l)):(g=this.right-a,s==="near"?c="right":s==="center"?(c="center",g-=l/2):(c="left",g=this.left)):e==="right"?n?(g=this.left+o,s==="near"?c="right":s==="center"?(c="center",g-=l/2):(c="left",g-=l)):(g=this.left+a,s==="near"?c="left":s==="center"?(c="center",g+=l/2):(c="right",g=this.right)):c="right",{textAlign:c,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;return e==="left"||e==="right"?{top:0,left:this.left,bottom:t.height,right:this.right}:e==="top"||e==="bottom"?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:s,top:n,width:o,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,n,o,a),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let s=this.ticks.findIndex(n=>n.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){let e=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),o,a,l=(c,g,x)=>{x.width&&x.color&&(s.save(),s.lineWidth=x.width,s.strokeStyle=x.color,s.setLineDash(x.borderDash||[]),s.lineDashOffset=x.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(g.x,g.y),s.stroke(),s.restore())};if(e.display)for(o=0,a=n.length;o<a;++o){let c=n[o];e.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:s,grid:n}}=this,o=s.setContext(this.getContext()),a=s.display?o.width:0;if(!a)return;let l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue,g,x,b,v;this.isHorizontal()?(g=L(t,this.left,a)-a/2,x=L(t,this.right,l)+l/2,b=v=c):(b=L(t,this.top,a)-a/2,v=L(t,this.bottom,l)+l/2,g=x=c),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(g,b),e.lineTo(x,v),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let e=this.ctx,s=this._computeLabelArea();s&&qt(e,s);let n=this.getLabelItems(t);for(let o of n){let a=o.options,l=o.font;Xe(e,o.label,0,o.textOffset,l,a)}s&&Xt(e)}drawTitle(){let{ctx:t,options:{position:e,title:s,reverse:n}}=this;if(!s.display)return;let o=qe(s.font),a=oi(s.padding),l=s.align,c=o.lineHeight/2;e==="bottom"||e==="center"||Q(e)?(c+=a.bottom,I(s.text)&&(c+=o.lineHeight*(s.text.length-1))):c+=a.top;let{titleX:g,titleY:x,maxWidth:b,rotation:v}=function(k,P,T,A){let{top:$,left:tt,bottom:Z,right:X,chart:lt}=k,{chartArea:ft,scales:Ct}=lt,Rt,$t,Ht,Gt=0,jt=Z-$,Nt=X-tt;if(k.isHorizontal()){if($t=Ce(A,tt,X),Q(T)){let Wt=Object.keys(T)[0],Ft=T[Wt];Ht=Ct[Wt].getPixelForValue(Ft)+jt-P}else Ht=T==="center"?(ft.bottom+ft.top)/2+jt-P:yr(k,T,P);Rt=X-tt}else{if(Q(T)){let Wt=Object.keys(T)[0],Ft=T[Wt];$t=Ct[Wt].getPixelForValue(Ft)-Nt+P}else $t=T==="center"?(ft.left+ft.right)/2-Nt+P:yr(k,T,P);Ht=Ce(A,Z,$),Gt=T==="left"?-ot:ot}return{titleX:$t,titleY:Ht,maxWidth:Rt,rotation:Gt}}(this,c,e,l);Xe(t,s.text,0,0,o,{color:s.color,maxWidth:b,rotation:v,textAlign:Ml(l,e,n),textBaseline:"middle",translation:[g,x]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,s=q(t.grid&&t.grid.z,-1),n=q(t.border&&t.border.z,0);return this._isVisible()&&this.draw===ms.prototype.draw?[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]:[{z:e,draw:o=>{this.draw(o)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[],o,a;for(o=0,a=e.length;o<a;++o){let l=e[o];l[s]!==this.id||t&&l.type!==t||n.push(l)}return n}_resolveTickFontOptions(t){return qe(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class pn{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),s;(function(l){return"id"in l&&"defaults"in l})(e)&&(s=this.register(e));let n=this.items,o=t.id,a=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,function(l,c,g){let x=ce(Object.create(null),[g?mt.get(g):{},mt.get(c),l.defaults]);mt.set(c,x),l.defaultRoutes&&function(b,v){Object.keys(v).forEach(k=>{let P=k.split("."),T=P.pop(),A=[b].concat(P).join("."),$=v[k].split("."),tt=$.pop(),Z=$.join(".");mt.route(A,T,Z,tt)})}(c,l.defaultRoutes),l.descriptors&&mt.describe(c,l.descriptors)}(t,a,s),this.override&&mt.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){let e=this.items,s=t.id,n=this.scope;s in e&&delete e[s],n&&s in mt[n]&&(delete mt[n][s],this.override&&delete at[s])}}class Sl{constructor(){this.controllers=new pn(as,"datasets",!0),this.elements=new pn(ss,"elements"),this.plugins=new pn(Object,"plugins"),this.scales=new pn(ms,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(n=>{let o=s||this._getRegistryForType(n);s||o.isForType(n)||o===this.plugins&&n.id?this._exec(t,o,n):xt(n,a=>{let l=s||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,e,s){let n=te(t);bt(s["before"+n],[],s),e[t](s),bt(s["after"+n],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){let n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var Yi=new Sl;class Cl{constructor(){this._init=[]}notify(t,e,s,n){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let o=n?this._descriptors(t).filter(n):this._descriptors(t),a=this._notify(o,t,e,s);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,s,n){n=n||{};for(let o of t){let a=o.plugin;if(bt(a[s],[e,n,o.options],a)===!1&&n.cancelable)return!1}return!0}invalidate(){C(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let s=t&&t.config,n=q(s.options&&s.options.plugins,{}),o=function(a){let l={},c=[],g=Object.keys(Yi.plugins.items);for(let b=0;b<g.length;b++)c.push(Yi.getPlugin(g[b]));let x=a.plugins||[];for(let b=0;b<x.length;b++){let v=x[b];c.indexOf(v)===-1&&(c.push(v),l[v.id]=!0)}return{plugins:c,localIds:l}}(s);return n!==!1||e?function(a,{plugins:l,localIds:c},g,x){let b=[],v=a.getContext();for(let k of l){let P=k.id,T=Tl(g[P],x);T!==null&&b.push({plugin:k,options:El(a.config,{plugin:k,local:c[P]},T,v)})}return b}(t,o,n,e):[]}_notifyStateChanges(t){let e=this._oldCache||[],s=this._cache,n=(o,a)=>o.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(n(e,s),t,"stop"),this._notify(n(s,e),t,"start")}}function Tl(i,t){return t||i!==!1?i===!0?{}:i:null}function El(i,{plugin:t,local:e},s,n){let o=i.pluginScopeKeys(t),a=i.getOptionScopes(s,o);return e&&t.defaults&&a.push(t.defaults),i.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ho(i,t){let e=mt.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function _r(i){if(i==="x"||i==="y"||i==="r")return i}function co(i,...t){if(_r(i))return i;for(let s of t){let n=s.axis||((e=s.position)==="top"||e==="bottom"?"x":e==="left"||e==="right"?"y":void 0)||i.length>1&&_r(i[0].toLowerCase());if(n)return n}var e;throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function kr(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Dl(i,t){let e=at[i.type]||{scales:{}},s=t.scales||{},n=ho(i.type,t),o=Object.create(null);return Object.keys(s).forEach(a=>{let l=s[a];if(!Q(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let c=co(a,l,function(b,v){if(v.data&&v.data.datasets){let k=v.data.datasets.filter(P=>P.xAxisID===b||P.yAxisID===b);if(k.length)return kr(b,"x",k[0])||kr(b,"y",k[0])}return{}}(a,i),mt.scales[l.type]),g=function(b,v){return b===v?"_index_":"_value_"}(c,n),x=e.scales||{};o[a]=_e(Object.create(null),[{axis:c},l,x[c],x[g]])}),i.data.datasets.forEach(a=>{let l=a.type||i.type,c=a.indexAxis||ho(l,t),g=(at[l]||{}).scales||{};Object.keys(g).forEach(x=>{let b=function(k,P){let T=k;return k==="_index_"?T=P:k==="_value_"&&(T=P==="x"?"y":"x"),T}(x,c),v=a[b+"AxisID"]||b;o[v]=o[v]||Object.create(null),_e(o[v],[{axis:b},s[v],g[x]])})}),Object.keys(o).forEach(a=>{let l=o[a];_e(l,[mt.scales[l.type],mt.scale])}),o}function Mr(i){let t=i.options||(i.options={});t.plugins=q(t.plugins,{}),t.scales=Dl(i,t)}function Sr(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}let Cr=new Map,Tr=new Set;function fn(i,t){let e=Cr.get(i);return e||(e=t(),Cr.set(i,e),Tr.add(e)),e}let Xs=(i,t,e)=>{let s=Ee(t,e);s!==void 0&&i.add(s)};class Pl{constructor(t){this._config=function(e){return(e=e||{}).data=Sr(e.data),Mr(e),e}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Sr(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),Mr(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return fn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return fn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return fn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id;return fn(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let s=this._scopeCache,n=s.get(t);return n&&!e||(n=new Map,s.set(t,n)),n}getOptionScopes(t,e,s){let{options:n,type:o}=this,a=this._cachedScopes(t,s),l=a.get(e);if(l)return l;let c=new Set;e.forEach(x=>{t&&(c.add(t),x.forEach(b=>Xs(c,t,b))),x.forEach(b=>Xs(c,n,b)),x.forEach(b=>Xs(c,at[o]||{},b)),x.forEach(b=>Xs(c,mt,b)),x.forEach(b=>Xs(c,vt,b))});let g=Array.from(c);return g.length===0&&g.push(Object.create(null)),Tr.has(e)&&a.set(e,g),g}chartOptionScopes(){let{options:t,type:e}=this;return[t,at[e]||{},mt.datasets[e]||{},{type:e},mt,vt]}resolveNamedOptions(t,e,s,n=[""]){let o={$shared:!0},{resolver:a,subPrefixes:l}=Er(this._resolverCache,t,n),c=a;(function(g,x){let{isScriptable:b,isIndexable:v}=Oe(g);for(let k of x){let P=b(k),T=v(k),A=(T||P)&&g[k];if(P&&(St(A)||Al(A))||T&&I(A))return!0}return!1})(a,e)&&(o.$shared=!1,c=ni(a,s=St(s)?s():s,this.createResolver(t,s,l)));for(let g of e)o[g]=c[g];return o}createResolver(t,e,s=[""],n){let{resolver:o}=Er(this._resolverCache,t,s);return Q(e)?ni(o,e,void 0,n):o}}function Er(i,t,e){let s=i.get(t);s||(s=new Map,i.set(t,s));let n=e.join(),o=s.get(n);return o||(o={resolver:Qe(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,o)),o}let Al=i=>Q(i)&&Object.getOwnPropertyNames(i).some(t=>St(i[t])),Rl=["top","bottom","left","right","chartArea"];function Dr(i,t){return i==="top"||i==="bottom"||Rl.indexOf(i)===-1&&t==="x"}function Pr(i,t){return function(e,s){return e[i]===s[i]?e[t]-s[t]:e[i]-s[i]}}function Ar(i){let t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),bt(e&&e.onComplete,[i],t)}function Ol(i){let t=i.chart,e=t.options.animation;bt(e&&e.onProgress,[i],t)}function Rr(i){return Pt()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}let mn={},Or=i=>{let t=Rr(i);return Object.values(mn).filter(e=>e.canvas===t).pop()};function zl(i,t,e){let s=Object.keys(i);for(let n of s){let o=+n;if(o>=t){let a=i[n];delete i[n],(e>0||o>t)&&(i[o+e]=a)}}}function bn(i,t,e){return i.options.clip?i[e]:t[e]}class Ve{static defaults=mt;static instances=mn;static overrides=at;static registry=Yi;static version="4.4.1";static getChart=Or;static register(...t){Yi.add(...t),zr()}static unregister(...t){Yi.remove(...t),zr()}constructor(t,e){let s=this.config=new Pl(e),n=Rr(t),o=Or(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||ar(n)),this.platform.updateConfig(s);let l=this.platform.acquireContext(n,a.aspectRatio),c=l&&l.canvas,g=c&&c.height,x=c&&c.width;this.id=m(),this.ctx=l,this.canvas=c,this.width=x,this.height=g,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Cl,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=fe(b=>this.update(b),a.resizeDelay||0),this._dataChanges=[],mn[this.id]=this,l&&c?(Be.listen(this,"complete",Ar),Be.listen(this,"progress",Ol),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:n,_aspectRatio:o}=this;return C(t)?e&&o?o:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Yi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():O(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return K(this.canvas,this.ctx),this}stop(){return Be.stop(this),this}resize(t,e){Be.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let s=this.options,n=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(n,t,e,o),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,O(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),bt(s.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){xt(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){let t=this.options,e=t.scales,s=this.scales,n=Object.keys(s).reduce((a,l)=>(a[l]=!1,a),{}),o=[];e&&(o=o.concat(Object.keys(e).map(a=>{let l=e[a],c=co(a,l),g=c==="r",x=c==="x";return{options:l,dposition:g?"chartArea":x?"bottom":"left",dtype:g?"radialLinear":x?"category":"linear"}}))),xt(o,a=>{let l=a.options,c=l.id,g=co(c,l),x=q(l.type,a.dtype);l.position!==void 0&&Dr(l.position,g)===Dr(a.dposition)||(l.position=a.dposition),n[c]=!0;let b=null;c in s&&s[c].type===x?b=s[c]:(b=new(Yi.getScale(x))({id:c,type:x,ctx:this.ctx,chart:this}),s[b.id]=b),b.init(l,t)}),xt(n,(a,l)=>{a||delete s[l]}),xt(s,a=>{ri.configure(this,a,a.options),ri.addBox(this,a)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((n,o)=>n.index-o.index),s>e){for(let n=e;n<s;++n)this._destroyDatasetMeta(n);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(Pr("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,n)=>{e.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){let t=[],e=this.data.datasets,s,n;for(this._removeUnreferencedMetasets(),s=0,n=e.length;s<n;s++){let o=e[s],a=this.getDatasetMeta(s),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=l,a.indexAxis=o.indexAxis||ho(l,this.options),a.order=o.order||0,a.index=s,a.label=""+o.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{let c=Yi.getController(l),{datasetElementType:g,dataElementType:x}=mt.datasets[l];Object.assign(c,{dataElementType:Yi.getElement(x),datasetElementType:g&&Yi.getElement(g)}),a.controller=new c(this,s),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){xt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let g=0,x=this.data.datasets.length;g<x;g++){let{controller:b}=this.getDatasetMeta(g),v=!n&&o.indexOf(b)===-1;b.buildOrUpdateElements(v),a=Math.max(+b.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),n||xt(o,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Pr("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){xt(this.scales,t=>{ri.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);r(e,s)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(let{method:s,start:n,count:o}of e)zl(t,n,s==="_removeElements"?-o:o)}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,s=o=>new Set(t.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),n=s(0);for(let o=1;o<e;o++)if(!r(n,s(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ri.update(this,this.width,this.height,t);let e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],xt(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,St(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let s=this.getDatasetMeta(t),n={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Be.has(this)?this.attached&&!Be.running(this)&&Be.start(this):(this.draw(),Ar({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:s,height:n}=this._resizeBeforeDraw;this._resize(s,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e=this._sortedMetasets,s=[],n,o;for(n=0,o=e.length;n<o;++n){let a=e[n];t&&!a.visible||s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,s=t._clip,n=!s.disabled,o=function(l,c){let{xScale:g,yScale:x}=l;return g&&x?{left:bn(g,c,"left"),right:bn(g,c,"right"),top:bn(x,c,"top"),bottom:bn(x,c,"bottom")}:c}(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(n&&qt(e,{left:s.left===!1?0:o.left-s.left,right:s.right===!1?this.width:o.right+s.right,top:s.top===!1?0:o.top-s.top,bottom:s.bottom===!1?this.height:o.bottom+s.bottom}),t.controller.draw(),n&&Xt(e),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Mt(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,n){let o=Xo.modes[e];return typeof o=="function"?o(this,t,s,n):[]}getDatasetMeta(t){let e=this.data.datasets[t],s=this._metasets,n=s.filter(o=>o&&o._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=rs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){let n=s?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,n);Vt(e)?(o.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),a.update(o,{visible:s}),this.update(l=>l.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Be.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),K(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete mn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,s=(o,a)=>{e.addEventListener(this,o,a),t[o]=a},n=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};xt(this.options.events,o=>s(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,e=this.platform,s=(c,g)=>{e.addEventListener(this,c,g),t[c]=g},n=(c,g)=>{t[c]&&(e.removeEventListener(this,c,g),delete t[c])},o=(c,g)=>{this.canvas&&this.resize(c,g)},a,l=()=>{n("attach",l),this.attached=!0,this.resize(),s("resize",o),s("detach",a)};a=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),s("attach",l)},e.isAttached(this.canvas)?l():a()}unbindEvents(){xt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},xt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){let n=s?"set":"remove",o,a,l,c;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];let g=a&&this.getDatasetMeta(a.datasetIndex).controller;g&&g[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],s=t.map(({datasetIndex:n,index:o})=>{let a=this.getDatasetMeta(n);if(!a)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:a.data[o],index:o}});!Ut(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){let n=this.options.hover,o=(c,g)=>c.filter(x=>!g.some(b=>x.datasetIndex===b.datasetIndex&&x.index===b.index)),a=o(e,t),l=s?t:o(t,e);a.length&&this.updateHoverStyle(a,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(t,e){let s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;let o=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(o||s.changed)&&this.render(),this}_handleEvent(t,e,s){let{_active:n=[],options:o}=this,a=e,l=this._getActiveElements(t,n,s,a),c=u(t),g=function(b,v,k,P){return k&&b.type!=="mouseout"?P?v:b:null}(t,this._lastEvent,s,c);s&&(this._lastEvent=null,bt(o.onHover,[t,l,this],this),c&&bt(o.onClick,[t,l,this],this));let x=!Ut(l,n);return(x||e)&&(this._active=l,this._updateHoverStyles(l,n,e)),this._lastEvent=g,x}_getActiveElements(t,e,s,n){if(t.type==="mouseout")return[];if(!s)return e;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,n)}}function zr(){return xt(Ve.instances,i=>i._plugins.invalidate())}function Cs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uo{static override(t){Object.assign(uo.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Cs()}parse(){return Cs()}format(){return Cs()}add(){return Cs()}diff(){return Cs()}startOf(){return Cs()}endOf(){return Cs()}}var Lr={_date:uo};function Ll(i){let t=i.iScale,e=function(g,x){if(!g._cache.$bar){let b=g.getMatchingVisibleMetas(x),v=[];for(let k=0,P=b.length;k<P;k++)v=v.concat(b[k].controller.getAllParsedValues(g));g._cache.$bar=le(v.sort((k,P)=>k-P))}return g._cache.$bar}(t,i.type),s,n,o,a,l=t._length,c=()=>{o!==32767&&o!==-32768&&(Vt(a)&&(l=Math.min(l,Math.abs(o-a)||l)),a=o)};for(s=0,n=e.length;s<n;++s)o=t.getPixelForValue(e[s]),c();for(a=void 0,s=0,n=t.ticks.length;s<n;++s)o=t.getPixelForTick(s),c();return l}function Hr(i,t,e,s){return I(i)?function(n,o,a,l){let c=a.parse(n[0],l),g=a.parse(n[1],l),x=Math.min(c,g),b=Math.max(c,g),v=x,k=b;Math.abs(x)>Math.abs(b)&&(v=b,k=x),o[a.axis]=k,o._custom={barStart:v,barEnd:k,start:c,end:g,min:x,max:b}}(i,t,e,s):t[e.axis]=e.parse(i,s),t}function Ir(i,t,e,s){let n=i.iScale,o=i.vScale,a=n.getLabels(),l=n===o,c=[],g,x,b,v;for(g=e,x=e+s;g<x;++g)v=t[g],b={},b[n.axis]=l||n.parse(a[g],g),c.push(Hr(v,b,o,g));return c}function go(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function Hl(i,t,e,s){let n=t.borderSkipped,o={};if(!n)return void(i.borderSkipped=o);if(n===!0)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});let{start:a,end:l,reverse:c,top:g,bottom:x}=function(b){let v,k,P,T,A;return b.horizontal?(v=b.base>b.x,k="left",P="right"):(v=b.base<b.y,k="bottom",P="top"),v?(T="end",A="start"):(T="start",A="end"),{start:k,end:P,reverse:v,top:T,bottom:A}}(i);n==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===s?n=g:(e._bottom||0)===s?n=x:(o[Nr(x,a,l,c)]=!0,n=g)),o[Nr(n,a,l,c)]=!0,i.borderSkipped=o}function Nr(i,t,e,s){var n,o,a;return s?(a=e,i=$r(i=(n=i)===(o=t)?a:n===a?o:n,e,t)):i=$r(i,t,e),i}function $r(i,t,e){return i==="start"?t:i==="end"?e:i}function Il(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class po extends as{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:s,color:n}}=t.legend.options;return e.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){let s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let o,a,l=c=>+s[c];if(Q(s[t])){let{key:c="value"}=this._parsing;l=g=>+Ee(s[g],c)}for(o=t,a=t+e;o<a;++o)n._parsed[o]=l(o)}}_getRotation(){return Ie(this.options.rotation-90)}_getCircumference(){return Ie(this.options.circumference)}_getRotationExtents(){let t=w,e=-w;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){let n=this.chart.getDatasetMeta(s).controller,o=n._getRotation(),a=n._getCircumference();t=Math.min(t,o),e=Math.max(e,o+a)}return{rotation:t,circumference:e-t}}update(t){let e=this.chart,{chartArea:s}=e,n=this._cachedMeta,o=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(Dt(this.options.cutout,l),1),g=this._getRingWeight(this.index),{circumference:x,rotation:b}=this._getRotationExtents(),{ratioX:v,ratioY:k,offsetX:P,offsetY:T}=function(lt,ft,Ct){let Rt=1,$t=1,Ht=0,Gt=0;if(ft<w){let jt=lt,Nt=jt+ft,Wt=Math.cos(jt),Ft=Math.sin(jt),ie=Math.cos(Nt),Me=Math.sin(Nt),ye=(Gi,Xi,Qi)=>N(Gi,jt,Nt,!0)?1:Math.max(Xi,Xi*Ct,Qi,Qi*Ct),ai=(Gi,Xi,Qi)=>N(Gi,jt,Nt,!0)?-1:Math.min(Xi,Xi*Ct,Qi,Qi*Ct),zi=ye(0,Wt,ie),Li=ye(ot,Ft,Me),Wi=ai(y,Wt,ie),qi=ai(y+ot,Ft,Me);Rt=(zi-Wi)/2,$t=(Li-qi)/2,Ht=-(zi+Wi)/2,Gt=-(Li+qi)/2}return{ratioX:Rt,ratioY:$t,offsetX:Ht,offsetY:Gt}}(b,x,c),A=(s.width-a)/v,$=(s.height-a)/k,tt=Math.max(Math.min(A,$)/2,0),Z=It(this.options.radius,tt),X=(Z-Math.max(Z*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=P*Z,this.offsetY=T*Z,n.total=this.calculateTotal(),this.outerRadius=Z-X*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-X*g,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){let s=this.options,n=this._cachedMeta,o=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*o/w)}updateElements(t,e,s,n){let o=n==="reset",a=this.chart,l=a.chartArea,c=a.options.animation,g=(l.left+l.right)/2,x=(l.top+l.bottom)/2,b=o&&c.animateScale,v=b?0:this.innerRadius,k=b?0:this.outerRadius,{sharedOptions:P,includeOptions:T}=this._getSharedOptions(e,n),A,$=this._getRotation();for(A=0;A<e;++A)$+=this._circumference(A,o);for(A=e;A<e+s;++A){let tt=this._circumference(A,o),Z=t[A],X={x:g+this.offsetX,y:x+this.offsetY,startAngle:$,endAngle:$+tt,circumference:tt,outerRadius:k,innerRadius:v};T&&(X.options=P||this.resolveDataElementOptions(A,Z.active?"active":n)),$+=tt,this.updateElement(Z,A,X,n)}}calculateTotal(){let t=this._cachedMeta,e=t.data,s,n=0;for(s=0;s<e.length;s++){let o=t._parsed[s];o===null||isNaN(o)||!this.chart.getDataVisibility(s)||e[s].hidden||(n+=Math.abs(o))}return n}calculateCircumference(t){let e=this._cachedMeta.total;return e>0&&!isNaN(t)?w*(Math.abs(t)/e):0}getLabelAndValue(t){let e=this._cachedMeta,s=this.chart,n=s.data.labels||[],o=ct(e._parsed[t],s.options.locale);return{label:n[t]||"",value:o}}getMaxBorderWidth(t){let e=0,s=this.chart,n,o,a,l,c;if(!t){for(n=0,o=s.data.datasets.length;n<o;++n)if(s.isDatasetVisible(n)){a=s.getDatasetMeta(n),t=a.data,l=a.controller;break}}if(!t)return 0;for(n=0,o=t.length;n<o;++n)c=l.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(e=Math.max(e,c.borderWidth||0,c.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,n=t.length;s<n;++s){let o=this.resolveDataElementOptions(s);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(q(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Fr extends as{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:s,color:n}}=t.legend.options;return e.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let e=this._cachedMeta,s=this.chart,n=s.data.labels||[],o=ct(e._parsed[t].r,s.options.locale);return{label:n[t]||"",value:o}}parseObjectData(t,e,s,n){return zs.bind(this)(t,e,s,n)}update(t){let e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){let t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,n)=>{let o=this.getParsed(n).r;!isNaN(o)&&this.chart.getDataVisibility(n)&&(o<e.min&&(e.min=o),o>e.max&&(e.max=o))}),e}_updateRadius(){let t=this.chart,e=t.chartArea,s=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(n/2,0),a=(o-Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,s,n){let o=n==="reset",a=this.chart,l=a.options.animation,c=this._cachedMeta.rScale,g=c.xCenter,x=c.yCenter,b=c.getIndexAngle(0)-.5*y,v,k=b,P=360/this.countVisibleElements();for(v=0;v<e;++v)k+=this._computeAngle(v,n,P);for(v=e;v<e+s;v++){let T=t[v],A=k,$=k+this._computeAngle(v,n,P),tt=a.getDataVisibility(v)?c.getDistanceFromCenterForValue(this.getParsed(v).r):0;k=$,o&&(l.animateScale&&(tt=0),l.animateRotate&&(A=$=b));let Z={x:g,y:x,innerRadius:0,outerRadius:tt,startAngle:A,endAngle:$,options:this.resolveDataElementOptions(v,T.active?"active":n)};this.updateElement(T,v,Z,n)}}countVisibleElements(){let t=this._cachedMeta,e=0;return t.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?Ie(this.resolveDataElementOptions(t,e).angle||s):0}}var Wr=Object.freeze({__proto__:null,BarController:class extends as{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(i,t,e,s){return Ir(i,t,e,s)}parseArrayData(i,t,e,s){return Ir(i,t,e,s)}parseObjectData(i,t,e,s){let{iScale:n,vScale:o}=i,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=n.axis==="x"?a:l,g=o.axis==="x"?a:l,x=[],b,v,k,P;for(b=e,v=e+s;b<v;++b)P=t[b],k={},k[n.axis]=n.parse(Ee(P,c),b),x.push(Hr(Ee(P,g),k,o,b));return x}updateRangeFromParsed(i,t,e,s){super.updateRangeFromParsed(i,t,e,s);let n=e._custom;n&&t===this._cachedMeta.vScale&&(i.min=Math.min(i.min,n.min),i.max=Math.max(i.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(i){let t=this._cachedMeta,{iScale:e,vScale:s}=t,n=this.getParsed(i),o=n._custom,a=go(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+e.getLabelForValue(n[e.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(i){let t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,i)}updateElements(i,t,e,s){let n=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),g=this._getRuler(),{sharedOptions:x,includeOptions:b}=this._getSharedOptions(t,s);for(let v=t;v<t+e;v++){let k=this.getParsed(v),P=n||C(k[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(v),T=this._calculateBarIndexPixels(v,g),A=(k._stacks||{})[a.axis],$={horizontal:c,base:P.base,enableBorderRadius:!A||go(k._custom)||o===A._top||o===A._bottom,x:c?P.head:T.center,y:c?T.center:P.head,height:c?T.size:Math.abs(P.size),width:c?Math.abs(P.size):T.size};b&&($.options=x||this.resolveDataElementOptions(v,i[v].active?"active":s));let tt=$.options||i[v].options;Hl($,tt,A,o),Il($,tt,g.ratio),this.updateElement(i[v],v,$,s)}}_getStacks(i,t){let{iScale:e}=this._cachedMeta,s=e.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),n=e.options.stacked,o=[],a=l=>{let c=l.controller.getParsed(t),g=c&&c[l.vScale.axis];if(C(g)||isNaN(g))return!0};for(let l of s)if((t===void 0||!a(l))&&((n===!1||o.indexOf(l.stack)===-1||n===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===i))break;return o.length||o.push(void 0),o}_getStackCount(i){return this._getStacks(void 0,i).length}_getStackIndex(i,t,e){let s=this._getStacks(i,e),n=t!==void 0?s.indexOf(t):-1;return n===-1?s.length-1:n}_getRuler(){let i=this.options,t=this._cachedMeta,e=t.iScale,s=[],n,o;for(n=0,o=t.data.length;n<o;++n)s.push(e.getPixelForValue(this.getParsed(n)[e.axis],n));let a=i.barThickness;return{min:a||Ll(t),pixels:s,start:e._startPixel,end:e._endPixel,stackCount:this._getStackCount(),scale:e,grouped:i.grouped,ratio:a?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(i){let{_cachedMeta:{vScale:t,_stacked:e,index:s},options:{base:n,minBarLength:o}}=this,a=n||0,l=this.getParsed(i),c=l._custom,g=go(c),x,b,v=l[t.axis],k=0,P=e?this.applyStack(t,l,e):v;P!==v&&(k=P-v,P=v),g&&(v=c.barStart,P=c.barEnd-c.barStart,v!==0&&Et(v)!==Et(c.barEnd)&&(k=0),k+=v);let T=C(n)||g?k:n,A=t.getPixelForValue(T);if(x=this.chart.getDataVisibility(i)?t.getPixelForValue(k+P):A,b=x-A,Math.abs(b)<o){b=function(lt,ft,Ct){return lt!==0?Et(lt):(ft.isHorizontal()?1:-1)*(ft.min>=Ct?1:-1)}(b,t,a)*o,v===a&&(A-=b/2);let $=t.getPixelForDecimal(0),tt=t.getPixelForDecimal(1),Z=Math.min($,tt),X=Math.max($,tt);A=Math.max(Math.min(A,X),Z),x=A+b,e&&!g&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(x)-t.getValueForPixel(A))}if(A===t.getPixelForValue(a)){let $=Et(b)*t.getLineWidthForValue(a)/2;A+=$,b-=$}return{size:b,base:A,head:x,center:x+b/2}}_calculateBarIndexPixels(i,t){let e=t.scale,s=this.options,n=s.skipNull,o=q(s.maxBarThickness,1/0),a,l;if(t.grouped){let c=n?this._getStackCount(i):t.stackCount,g=s.barThickness==="flex"?function(b,v,k,P){let T=v.pixels,A=T[b],$=b>0?T[b-1]:null,tt=b<T.length-1?T[b+1]:null,Z=k.categoryPercentage;$===null&&($=A-(tt===null?v.end-v.start:tt-A)),tt===null&&(tt=A+A-$);let X=A-(A-Math.min($,tt))/2*Z;return{chunk:Math.abs(tt-$)/2*Z/P,ratio:k.barPercentage,start:X}}(i,t,s,c):function(b,v,k,P){let T=k.barThickness,A,$;return C(T)?(A=v.min*k.categoryPercentage,$=k.barPercentage):(A=T*P,$=1),{chunk:A/P,ratio:$,start:v.pixels[b]-A/2}}(i,t,s,c),x=this._getStackIndex(this.index,this._cachedMeta.stack,n?i:void 0);a=g.start+g.chunk*x+g.chunk/2,l=Math.min(o,g.chunk*g.ratio)}else a=e.getPixelForValue(this.getParsed(i)[e.axis],i),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){let i=this._cachedMeta,t=i.vScale,e=i.data,s=e.length,n=0;for(;n<s;++n)this.getParsed(n)[t.axis]!==null&&e[n].draw(this._ctx)}},BubbleController:class extends as{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(i,t,e,s){let n=super.parsePrimitiveData(i,t,e,s);for(let o=0;o<n.length;o++)n[o]._custom=this.resolveDataElementOptions(o+e).radius;return n}parseArrayData(i,t,e,s){let n=super.parseArrayData(i,t,e,s);for(let o=0;o<n.length;o++){let a=t[e+o];n[o]._custom=q(a[2],this.resolveDataElementOptions(o+e).radius)}return n}parseObjectData(i,t,e,s){let n=super.parseObjectData(i,t,e,s);for(let o=0;o<n.length;o++){let a=t[e+o];n[o]._custom=q(a&&a.r&&+a.r,this.resolveDataElementOptions(o+e).radius)}return n}getMaxOverflow(){let i=this._cachedMeta.data,t=0;for(let e=i.length-1;e>=0;--e)t=Math.max(t,i[e].size(this.resolveDataElementOptions(e))/2);return t>0&&t}getLabelAndValue(i){let t=this._cachedMeta,e=this.chart.data.labels||[],{xScale:s,yScale:n}=t,o=this.getParsed(i),a=s.getLabelForValue(o.x),l=n.getLabelForValue(o.y),c=o._custom;return{label:e[i]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(i){let t=this._cachedMeta.data;this.updateElements(t,0,t.length,i)}updateElements(i,t,e,s){let n=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,s),g=o.axis,x=a.axis;for(let b=t;b<t+e;b++){let v=i[b],k=!n&&this.getParsed(b),P={},T=P[g]=n?o.getPixelForDecimal(.5):o.getPixelForValue(k[g]),A=P[x]=n?a.getBasePixel():a.getPixelForValue(k[x]);P.skip=isNaN(T)||isNaN(A),c&&(P.options=l||this.resolveDataElementOptions(b,v.active?"active":s),n&&(P.options.radius=0)),this.updateElement(v,b,P,s)}}resolveDataElementOptions(i,t){let e=this.getParsed(i),s=super.resolveDataElementOptions(i,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let n=s.radius;return t!=="active"&&(s.radius=0),s.radius+=q(e&&e._custom,n),s}},DoughnutController:po,LineController:class extends as{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(i){let t=this._cachedMeta,{dataset:e,data:s=[],_dataset:n}=t,o=this.chart._animationsDisabled,{start:a,count:l}=li(t,s,o);this._drawStart=a,this._drawCount=l,hi(t)&&(a=0,l=s.length),e._chart=this.chart,e._datasetIndex=this.index,e._decimated=!!n._decimated,e.points=s;let c=this.resolveDatasetElementOptions(i);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(e,void 0,{animated:!o,options:c},i),this.updateElements(s,a,l,i)}updateElements(i,t,e,s){let n=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:g,includeOptions:x}=this._getSharedOptions(t,s),b=o.axis,v=a.axis,{spanGaps:k,segment:P}=this.options,T=Ae(k)?k:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||n||s==="none",$=t+e,tt=i.length,Z=t>0&&this.getParsed(t-1);for(let X=0;X<tt;++X){let lt=i[X],ft=A?lt:{};if(X<t||X>=$){ft.skip=!0;continue}let Ct=this.getParsed(X),Rt=C(Ct[v]),$t=ft[b]=o.getPixelForValue(Ct[b],X),Ht=ft[v]=n||Rt?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,Ct,l):Ct[v],X);ft.skip=isNaN($t)||isNaN(Ht)||Rt,ft.stop=X>0&&Math.abs(Ct[b]-Z[b])>T,P&&(ft.parsed=Ct,ft.raw=c.data[X]),x&&(ft.options=g||this.resolveDataElementOptions(X,lt.active?"active":s)),A||this.updateElement(lt,X,ft,s),Z=Ct}}getMaxOverflow(){let i=this._cachedMeta,t=i.dataset,e=t.options&&t.options.borderWidth||0,s=i.data||[];if(!s.length)return e;let n=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(e,n,o)/2}draw(){let i=this._cachedMeta;i.dataset.updateControlPoints(this.chart.chartArea,i.iScale.axis),super.draw()}},PieController:class extends po{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:Fr,RadarController:class extends as{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(i){let t=this._cachedMeta.vScale,e=this.getParsed(i);return{label:t.getLabels()[i],value:""+t.getLabelForValue(e[t.axis])}}parseObjectData(i,t,e,s){return zs.bind(this)(i,t,e,s)}update(i){let t=this._cachedMeta,e=t.dataset,s=t.data||[],n=t.iScale.getLabels();if(e.points=s,i!=="resize"){let o=this.resolveDatasetElementOptions(i);this.options.showLine||(o.borderWidth=0);let a={_loop:!0,_fullLoop:n.length===s.length,options:o};this.updateElement(e,void 0,a,i)}this.updateElements(s,0,s.length,i)}updateElements(i,t,e,s){let n=this._cachedMeta.rScale,o=s==="reset";for(let a=t;a<t+e;a++){let l=i[a],c=this.resolveDataElementOptions(a,l.active?"active":s),g=n.getPointPositionForValue(a,this.getParsed(a).r),x=o?n.xCenter:g.x,b=o?n.yCenter:g.y,v={x,y:b,angle:g.angle,skip:isNaN(x)||isNaN(b),options:c};this.updateElement(l,a,v,s)}}},ScatterController:class extends as{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(i){let t=this._cachedMeta,e=this.chart.data.labels||[],{xScale:s,yScale:n}=t,o=this.getParsed(i),a=s.getLabelForValue(o.x),l=n.getLabelForValue(o.y);return{label:e[i]||"",value:"("+a+", "+l+")"}}update(i){let t=this._cachedMeta,{data:e=[]}=t,s=this.chart._animationsDisabled,{start:n,count:o}=li(t,e,s);if(this._drawStart=n,this._drawCount=o,hi(t)&&(n=0,o=e.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=e;let c=this.resolveDatasetElementOptions(i);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},i)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(e,n,o,i)}addElements(){let{showLine:i}=this.options;!this.datasetElementType&&i&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(i,t,e,s){let n=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,g=this.resolveDataElementOptions(t,s),x=this.getSharedOptions(g),b=this.includeOptions(s,x),v=o.axis,k=a.axis,{spanGaps:P,segment:T}=this.options,A=Ae(P)?P:Number.POSITIVE_INFINITY,$=this.chart._animationsDisabled||n||s==="none",tt=t>0&&this.getParsed(t-1);for(let Z=t;Z<t+e;++Z){let X=i[Z],lt=this.getParsed(Z),ft=$?X:{},Ct=C(lt[k]),Rt=ft[v]=o.getPixelForValue(lt[v],Z),$t=ft[k]=n||Ct?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,lt,l):lt[k],Z);ft.skip=isNaN(Rt)||isNaN($t)||Ct,ft.stop=Z>0&&Math.abs(lt[v]-tt[v])>A,T&&(ft.parsed=lt,ft.raw=c.data[Z]),b&&(ft.options=x||this.resolveDataElementOptions(Z,X.active?"active":s)),$||this.updateElement(X,Z,ft,s),tt=lt}this.updateSharedOptions(x,s,g)}getMaxOverflow(){let i=this._cachedMeta,t=i.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}let e=i.dataset,s=e.options&&e.options.borderWidth||0;if(!t.length)return s;let n=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,n,o)/2}}});function Nl(i,t,e,s){let n=hn(i.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),o=(e-t)/2,a=Math.min(o,s*t/2),l=c=>{let g=(e-Math.min(o,c))*s/2;return J(c,0,Math.min(o,g))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:J(n.innerStart,0,a),innerEnd:J(n.innerEnd,0,a)}}function Is(i,t,e,s){return{x:e+i*Math.cos(t),y:s+i*Math.sin(t)}}function yn(i,t,e,s,n,o){let{x:a,y:l,startAngle:c,pixelMargin:g,innerRadius:x}=t,b=Math.max(t.outerRadius+s+e-g,0),v=x>0?x+s+e+g:0,k=0,P=n-c;if(s){let Wt=((x>0?x-s:0)+(b>0?b-s:0))/2;k=(P-(Wt!==0?P*Wt/(Wt+s):P))/2}let T=(P-Math.max(.001,P*b-e/y)/b)/2,A=c+T+k,$=n-T-k,{outerStart:tt,outerEnd:Z,innerStart:X,innerEnd:lt}=Nl(t,v,b,$-A),ft=b-tt,Ct=b-Z,Rt=A+tt/ft,$t=$-Z/Ct,Ht=v+X,Gt=v+lt,jt=A+X/Ht,Nt=$-lt/Gt;if(i.beginPath(),o){let Wt=(Rt+$t)/2;if(i.arc(a,l,b,Rt,Wt),i.arc(a,l,b,Wt,$t),Z>0){let ye=Is(Ct,$t,a,l);i.arc(ye.x,ye.y,Z,$t,$+ot)}let Ft=Is(Gt,$,a,l);if(i.lineTo(Ft.x,Ft.y),lt>0){let ye=Is(Gt,Nt,a,l);i.arc(ye.x,ye.y,lt,$+ot,Nt+Math.PI)}let ie=($-lt/v+(A+X/v))/2;if(i.arc(a,l,v,$-lt/v,ie,!0),i.arc(a,l,v,ie,A+X/v,!0),X>0){let ye=Is(Ht,jt,a,l);i.arc(ye.x,ye.y,X,jt+Math.PI,A-ot)}let Me=Is(ft,A,a,l);if(i.lineTo(Me.x,Me.y),tt>0){let ye=Is(ft,Rt,a,l);i.arc(ye.x,ye.y,tt,A-ot,Rt)}}else{i.moveTo(a,l);let Wt=Math.cos(Rt)*b+a,Ft=Math.sin(Rt)*b+l;i.lineTo(Wt,Ft);let ie=Math.cos($t)*b+a,Me=Math.sin($t)*b+l;i.lineTo(ie,Me)}i.closePath()}function $l(i,t,e,s,n){let{fullCircles:o,startAngle:a,circumference:l,options:c}=t,{borderWidth:g,borderJoinStyle:x,borderDash:b,borderDashOffset:v}=c,k=c.borderAlign==="inner";if(!g)return;i.setLineDash(b||[]),i.lineDashOffset=v,k?(i.lineWidth=2*g,i.lineJoin=x||"round"):(i.lineWidth=g,i.lineJoin=x||"bevel");let P=t.endAngle;if(o){yn(i,t,e,s,P,n);for(let T=0;T<o;++T)i.stroke();isNaN(l)||(P=a+(l%w||w))}k&&function(T,A,$){let{startAngle:tt,pixelMargin:Z,x:X,y:lt,outerRadius:ft,innerRadius:Ct}=A,Rt=Z/ft;T.beginPath(),T.arc(X,lt,ft,tt-Rt,$+Rt),Ct>Z?(Rt=Z/Ct,T.arc(X,lt,Ct,$+Rt,tt-Rt,!0)):T.arc(X,lt,Z,$+ot,tt-ot),T.closePath(),T.clip()}(i,t,P),o||(yn(i,t,e,s,P,n),i.stroke())}function Br(i,t,e=t){i.lineCap=q(e.borderCapStyle,t.borderCapStyle),i.setLineDash(q(e.borderDash,t.borderDash)),i.lineDashOffset=q(e.borderDashOffset,t.borderDashOffset),i.lineJoin=q(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=q(e.borderWidth,t.borderWidth),i.strokeStyle=q(e.borderColor,t.borderColor)}function Fl(i,t,e){i.lineTo(e.x,e.y)}function Ur(i,t,e={}){let s=i.length,{start:n=0,end:o=s-1}=e,{start:a,end:l}=t,c=Math.max(n,a),g=Math.min(o,l),x=n<a&&o<a||n>l&&o>l;return{count:s,start:c,loop:t.loop,ilen:g<c&&!x?s+g-c:g-c}}function Wl(i,t,e,s){let{points:n,options:o}=t,{count:a,start:l,loop:c,ilen:g}=Ur(n,e,s),x=function(A){return A.stepped?Zt:A.tension||A.cubicInterpolationMode==="monotone"?ge:Fl}(o),b,v,k,{move:P=!0,reverse:T}=s||{};for(b=0;b<=g;++b)v=n[(l+(T?g-b:b))%a],v.skip||(P?(i.moveTo(v.x,v.y),P=!1):x(i,k,v,T,o.stepped),k=v);return c&&(v=n[(l+(T?g:0))%a],x(i,k,v,T,o.stepped)),!!c}function Bl(i,t,e,s){let n=t.points,{count:o,start:a,ilen:l}=Ur(n,e,s),{move:c=!0,reverse:g}=s||{},x,b,v,k,P,T,A=0,$=0,tt=X=>(a+(g?l-X:X))%o,Z=()=>{k!==P&&(i.lineTo(A,P),i.lineTo(A,k),i.lineTo(A,T))};for(c&&(b=n[tt(0)],i.moveTo(b.x,b.y)),x=0;x<=l;++x){if(b=n[tt(x)],b.skip)continue;let X=b.x,lt=b.y,ft=0|X;ft===v?(lt<k?k=lt:lt>P&&(P=lt),A=($*A+X)/++$):(Z(),i.lineTo(X,lt),v=ft,$=0,k=P=lt),T=lt}Z()}function fo(i){let t=i.options,e=t.borderDash&&t.borderDash.length;return i._decimated||i._loop||t.tension||t.cubicInterpolationMode==="monotone"||t.stepped||e?Wl:Bl}let Ul=typeof Path2D=="function";function jl(i,t,e,s){Ul&&!t.options.segment?function(n,o,a,l){let c=o._path;c||(c=o._path=new Path2D,o.path(c,a,l)&&c.closePath()),Br(n,o.options),n.stroke(c)}(i,t,e,s):function(n,o,a,l){let{segments:c,options:g}=o,x=fo(o);for(let b of c)Br(n,g,b.style),n.beginPath(),x(n,o,b,{start:a,end:a+l-1})&&n.closePath(),n.stroke()}(i,t,e,s)}class xn extends ss{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){let s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){let n=s.spanGaps?this._loop:this._fullLoop;Mi(this._points,s,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Vo(this,this.options.segment))}first(){let t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){let t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){let s=this.options,n=t[e],o=this.points,a=eo(this,{property:e,start:n,end:n});if(!a.length)return;let l=[],c=function(b){return b.stepped?$o:b.tension||b.cubicInterpolationMode==="monotone"?Fo:ps}(s),g,x;for(g=0,x=a.length;g<x;++g){let{start:b,end:v}=a[g],k=o[b],P=o[v];if(k===P){l.push(k);continue}let T=c(k,P,Math.abs((n-k[e])/(P[e]-k[e])),s.stepped);T[e]=t[e],l.push(T)}return l.length===1?l[0]:l}pathSegment(t,e,s){return fo(this)(t,this,e,s)}path(t,e,s){let n=this.segments,o=fo(this),a=this._loop;e=e||0,s=s||this.points.length-e;for(let l of n)a&=o(t,this,l,{start:e,end:e+s-1});return!!a}draw(t,e,s,n){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),jl(t,this,s,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function jr(i,t,e,s){let n=i.options,{[e]:o}=i.getProps([e],s);return Math.abs(t-o)<n.radius+n.hitRadius}function Vr(i,t){let{x:e,y:s,base:n,width:o,height:a}=i.getProps(["x","y","base","width","height"],t),l,c,g,x,b;return i.horizontal?(b=a/2,l=Math.min(e,n),c=Math.max(e,n),g=s-b,x=s+b):(b=o/2,l=e-b,c=e+b,g=Math.min(s,n),x=Math.max(s,n)),{left:l,top:g,right:c,bottom:x}}function bs(i,t,e,s){return i?0:J(t,e,s)}function Vl(i){let t=Vr(i),e=t.right-t.left,s=t.bottom-t.top,n=function(a,l,c){let g=a.options.borderWidth,x=a.borderSkipped,b=Kn(g);return{t:bs(x.top,b.top,0,c),r:bs(x.right,b.right,0,l),b:bs(x.bottom,b.bottom,0,c),l:bs(x.left,b.left,0,l)}}(i,e/2,s/2),o=function(a,l,c){let{enableBorderRadius:g}=a.getProps(["enableBorderRadius"]),x=a.options.borderRadius,b=fs(x),v=Math.min(l,c),k=a.borderSkipped,P=g||Q(x);return{topLeft:bs(!P||k.top||k.left,b.topLeft,0,v),topRight:bs(!P||k.top||k.right,b.topRight,0,v),bottomLeft:bs(!P||k.bottom||k.left,b.bottomLeft,0,v),bottomRight:bs(!P||k.bottom||k.right,b.bottomRight,0,v)}}(i,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:o},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function mo(i,t,e,s){let n=t===null,o=e===null,a=i&&!(n&&o)&&Vr(i,s);return a&&(n||nt(t,a.left,a.right))&&(o||nt(e,a.top,a.bottom))}function Yl(i,t){i.rect(t.x,t.y,t.w,t.h)}function bo(i,t,e={}){let s=i.x!==e.x?-t:0,n=i.y!==e.y?-t:0,o=(i.x+i.w!==e.x+e.w?t:0)-s,a=(i.y+i.h!==e.y+e.h?t:0)-n;return{x:i.x+s,y:i.y+n,w:i.w+o,h:i.h+a,radius:i.radius}}var yo=Object.freeze({__proto__:null,ArcElement:class extends ss{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(i){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,t,e){let s=this.getProps(["x","y"],e),{angle:n,distance:o}=ei(s,{x:i,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:g,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],e),b=(this.options.spacing+this.options.borderWidth)/2,v=q(x,l-a)>=w||N(n,a,l),k=nt(o,c+b,g+b);return v&&k}getCenterPoint(i){let{x:t,y:e,startAngle:s,endAngle:n,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:l,spacing:c}=this.options,g=(s+n)/2,x=(o+a+c+l)/2;return{x:t+Math.cos(g)*x,y:e+Math.sin(g)*x}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){let{options:t,circumference:e}=this,s=(t.offset||0)/4,n=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=e>w?Math.floor(e/w):0,e===0||this.innerRadius<0||this.outerRadius<0)return;i.save();let a=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(a)*s,Math.sin(a)*s);let l=s*(1-Math.sin(Math.min(y,e||0)));i.fillStyle=t.backgroundColor,i.strokeStyle=t.borderColor,function(c,g,x,b,v){let{fullCircles:k,startAngle:P,circumference:T}=g,A=g.endAngle;if(k){yn(c,g,x,b,A,v);for(let $=0;$<k;++$)c.fill();isNaN(T)||(A=P+(T%w||w))}yn(c,g,x,b,A,v),c.fill()}(i,this,l,n,o),$l(i,this,l,n,o),i.restore()}},BarElement:class extends ss{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){let{inflateAmount:t,options:{borderColor:e,backgroundColor:s}}=this,{inner:n,outer:o}=Vl(this),a=(l=o.radius).topLeft||l.topRight||l.bottomLeft||l.bottomRight?xi:Yl;var l;i.save(),o.w===n.w&&o.h===n.h||(i.beginPath(),a(i,bo(o,t,n)),i.clip(),a(i,bo(n,-t,o)),i.fillStyle=e,i.fill("evenodd")),i.beginPath(),a(i,bo(n,t)),i.fillStyle=s,i.fill(),i.restore()}inRange(i,t,e){return mo(this,i,t,e)}inXRange(i,t){return mo(this,i,null,t)}inYRange(i,t){return mo(this,null,i,t)}getCenterPoint(i){let{x:t,y:e,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],i);return{x:n?(t+s)/2:t,y:n?e:(e+s)/2}}getRange(i){return i==="x"?this.width/2:this.height/2}},LineElement:xn,PointElement:class extends ss{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,t,e){let s=this.options,{x:n,y:o}=this.getProps(["x","y"],e);return Math.pow(i-n,2)+Math.pow(t-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(i,t){return jr(this,i,"x",t)}inYRange(i,t){return jr(this,i,"y",t)}getCenterPoint(i){let{x:t,y:e}=this.getProps(["x","y"],i);return{x:t,y:e}}size(i){let t=(i=i||this.options||{}).radius||0;return t=Math.max(t,t&&i.hoverRadius||0),2*(t+(t&&i.borderWidth||0))}draw(i,t){let e=this.options;this.skip||e.radius<.1||!Mt(this,t,this.size(e)/2)||(i.strokeStyle=e.borderColor,i.lineWidth=e.borderWidth,i.fillStyle=e.backgroundColor,gt(i,e,this.x,this.y))}getRange(){let i=this.options||{};return i.radius+i.hitRadius}}});function ql(i,t,e,s){let n=i.indexOf(t);return n===-1?((o,a,l,c)=>(typeof a=="string"?(l=o.push(a)-1,c.unshift({index:l,label:a})):isNaN(a)&&(l=null),l))(i,t,e,s):n!==i.lastIndexOf(t)?e:n}function Yr(i){let t=this.getLabels();return i>=0&&i<t.length?t[i]:i}function qr(i,t,{horizontal:e,minRotation:s}){let n=Ie(s),o=(e?Math.sin(n):Math.cos(n))||.001,a=.75*t*(""+i).length;return Math.min(t/o,a)}class vn extends ms{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return C(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds(),{min:n,max:o}=this,a=c=>n=e?n:c,l=c=>o=s?o:c;if(t){let c=Et(n),g=Et(o);c<0&&g<0?l(0):c>0&&g>0&&a(0)}if(n===o){let c=o===0?1:Math.abs(.05*o);l(o+c),t||a(n-c)}this.min=n,this.max=o}getTickLimit(){let t=this.options.ticks,e,{maxTicksLimit:s,stepSize:n}=t;return n?(e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),s=s||11),s&&(e=Math.min(s,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,s=this.getTickLimit();s=Math.max(2,s);let n=function(o,a){let l=[],{bounds:c,step:g,min:x,max:b,precision:v,count:k,maxTicks:P,maxDigits:T,includeBounds:A}=o,$=g||1,tt=P-1,{min:Z,max:X}=a,lt=!C(x),ft=!C(b),Ct=!C(k),Rt=(X-Z)/(T+1),$t,Ht,Gt,jt,Nt=Le((X-Z)/tt/$)*$;if(Nt<1e-14&&!lt&&!ft)return[{value:Z},{value:X}];jt=Math.ceil(X/Nt)-Math.floor(Z/Nt),jt>tt&&(Nt=Le(jt*Nt/tt/$)*$),C(v)||($t=Math.pow(10,v),Nt=Math.ceil(Nt*$t)/$t),c==="ticks"?(Ht=Math.floor(Z/Nt)*Nt,Gt=Math.ceil(X/Nt)*Nt):(Ht=Z,Gt=X),lt&&ft&&g&&We((b-x)/g,Nt/1e3)?(jt=Math.round(Math.min((b-x)/Nt,P)),Nt=(b-x)/jt,Ht=x,Gt=b):Ct?(Ht=lt?x:Ht,Gt=ft?b:Gt,jt=k-1,Nt=(Gt-Ht)/jt):(jt=(Gt-Ht)/Nt,jt=ee(jt,Math.round(jt),Nt/1e3)?Math.round(jt):Math.ceil(jt));let Wt=Math.max(Ne(Nt),Ne(Ht));$t=Math.pow(10,C(v)?Wt:v),Ht=Math.round(Ht*$t)/$t,Gt=Math.round(Gt*$t)/$t;let Ft=0;for(lt&&(A&&Ht!==x?(l.push({value:x}),Ht<x&&Ft++,ee(Math.round((Ht+Ft*Nt)*$t)/$t,x,qr(x,Rt,o))&&Ft++):Ht<x&&Ft++);Ft<jt;++Ft){let ie=Math.round((Ht+Ft*Nt)*$t)/$t;if(ft&&ie>b)break;l.push({value:ie})}return ft&&A&&Gt!==b?l.length&&ee(l[l.length-1].value,b,qr(b,Rt,o))?l[l.length-1].value=b:l.push({value:b}):ft&&Gt!==b||l.push({value:Gt}),l}({maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},this._range||this);return t.bounds==="ticks"&&Ke(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){let t=this.ticks,e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){let n=(s-e)/Math.max(t.length-1,1)/2;e-=n,s+=n}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return ct(t,this.chart.options.locale,this.options.ticks.format)}}class Gl extends vn{static id="linear";static defaults={ticks:{callback:pt.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=W(t)?t:0,this.max=W(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,s=Ie(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}let Qs=i=>Math.floor(kt(i)),Ts=(i,t)=>Math.pow(10,Qs(i)+t);function Gr(i){return i/Math.pow(10,Qs(i))===1}function Xr(i,t,e){let s=Math.pow(10,e),n=Math.floor(i/s);return Math.ceil(t/s)-n}function Xl(i,{min:t,max:e}){t=ht(i.min,t);let s=[],n=Qs(t),o=function(P,T){let A=Qs(T-P);for(;Xr(P,T,A)>10;)A++;for(;Xr(P,T,A)<10;)A--;return Math.min(A,Qs(P))}(t,e),a=o<0?Math.pow(10,Math.abs(o)):1,l=Math.pow(10,o),c=n>o?Math.pow(10,n):0,g=Math.round((t-c)*a)/a,x=Math.floor((t-c)/l/10)*l*10,b=Math.floor((g-x)/Math.pow(10,o)),v=ht(i.min,Math.round((c+x+b*Math.pow(10,o))*a)/a);for(;v<e;)s.push({value:v,major:Gr(v),significand:b}),b>=10?b=b<15?15:20:b++,b>=20&&(o++,b=2,a=o>=0?1:a),v=Math.round((c+x+b*Math.pow(10,o))*a)/a;let k=ht(i.max,v);return s.push({value:k,major:Gr(k),significand:b}),s}class Ql extends ms{static id="logarithmic";static defaults={ticks:{callback:pt.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let s=vn.prototype.parse.apply(this,[t,e]);if(s!==0)return W(s)&&s>0?s:null;this._zero=!0}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=W(t)?Math.max(0,t):null,this.max=W(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!W(this._userMin)&&(this.min=t===Ts(this.min,0)?Ts(this.min,-1):Ts(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),s=this.min,n=this.max,o=l=>s=t?s:l,a=l=>n=e?n:l;s===n&&(s<=0?(o(1),a(10)):(o(Ts(s,-1)),a(Ts(n,1)))),s<=0&&o(Ts(n,-1)),n<=0&&a(Ts(s,1)),this.min=s,this.max=n}buildTicks(){let t=this.options,e=Xl({min:this._userMin,max:this._userMax},this);return t.bounds==="ticks"&&Ke(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return t===void 0?"0":ct(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=kt(t),this._valueRange=kt(this.max)-kt(t)}getPixelForValue(t){return t!==void 0&&t!==0||(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(kt(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function xo(i){let t=i.ticks;if(t.display&&i.display){let e=oi(t.backdropPadding);return q(t.font&&t.font.size,mt.font.size)+e.height}return 0}function Qr(i,t,e,s,n){return i===s||i===n?{start:t-e/2,end:t+e/2}:i<s||i>n?{start:t-e,end:t}:{start:t,end:t+e}}function Kl(i){let t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),s=[],n=[],o=i._pointLabels.length,a=i.options.pointLabels,l=a.centerPointLabels?y/o:0;for(let b=0;b<o;b++){let v=a.setContext(i.getPointLabelContext(b));n[b]=v.padding;let k=i.getPointPosition(b,i.drawingArea+n[b],l),P=qe(v.font),T=(c=i.ctx,g=P,x=I(x=i._pointLabels[b])?x:[x],{w:_(c,g.string,x),h:x.length*g.lineHeight});s[b]=T;let A=ve(i.getIndexAngle(b)+l),$=Math.round(Ze(A));Zl(e,t,A,Qr($,k.x,T.w,0,180),Qr($,k.y,T.h,90,270))}var c,g,x;i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=function(b,v,k){let P=[],T=b._pointLabels.length,A=b.options,{centerPointLabels:$,display:tt}=A.pointLabels,Z={extra:xo(A)/2,additionalAngle:$?y/T:0},X;for(let lt=0;lt<T;lt++){Z.padding=k[lt],Z.size=v[lt];let ft=Jl(b,lt,Z);P.push(ft),tt==="auto"&&(ft.visible=th(ft,X),ft.visible&&(X=ft))}return P}(i,s,n)}function Zl(i,t,e,s,n){let o=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e)),l=0,c=0;s.start<t.l?(l=(t.l-s.start)/o,i.l=Math.min(i.l,t.l-l)):s.end>t.r&&(l=(s.end-t.r)/o,i.r=Math.max(i.r,t.r+l)),n.start<t.t?(c=(t.t-n.start)/a,i.t=Math.min(i.t,t.t-c)):n.end>t.b&&(c=(n.end-t.b)/a,i.b=Math.max(i.b,t.b+c))}function Jl(i,t,e){let s=i.drawingArea,{extra:n,additionalAngle:o,padding:a,size:l}=e,c=i.getPointPosition(t,s+n+a,o),g=Math.round(Ze(ve(c.angle+ot))),x=function(k,P,T){return T===90||T===270?k-=P/2:(T>270||T<90)&&(k-=P),k}(c.y,l.h,g),b=function(k){return k===0||k===180?"center":k<180?"left":"right"}(g),v=function(k,P,T){return T==="right"?k-=P:T==="center"&&(k-=P/2),k}(c.x,l.w,b);return{visible:!0,x:c.x,y:x,textAlign:b,left:v,top:x,right:v+l.w,bottom:x+l.h}}function th(i,t){if(!t)return!0;let{left:e,top:s,right:n,bottom:o}=i;return!(Mt({x:e,y:s},t)||Mt({x:e,y:o},t)||Mt({x:n,y:s},t)||Mt({x:n,y:o},t))}function eh(i,t,e){let{left:s,top:n,right:o,bottom:a}=e,{backdropColor:l}=t;if(!C(l)){let c=fs(t.borderRadius),g=oi(t.backdropPadding);i.fillStyle=l;let x=s-g.left,b=n-g.top,v=o-s+g.width,k=a-n+g.height;Object.values(c).some(P=>P!==0)?(i.beginPath(),xi(i,{x,y:b,w:v,h:k,radius:c}),i.fill()):i.fillRect(x,b,v,k)}}function Kr(i,t,e,s){let{ctx:n}=i;if(e)n.arc(i.xCenter,i.yCenter,t,0,w);else{let o=i.getPointPosition(0,t);n.moveTo(o.x,o.y);for(let a=1;a<s;a++)o=i.getPointPosition(a,t),n.lineTo(o.x,o.y)}}class ih extends vn{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:pt.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=oi(xo(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=W(t)&&!isNaN(t)?t:0,this.max=W(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/xo(this.options))}generateTickLabels(t){vn.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{let n=bt(this.options.pointLabels.callback,[e,s],this);return n||n===0?n:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){let t=this.options;t.display&&t.pointLabels.display?Kl(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,n))}getIndexAngle(t){return ve(t*(w/(this._pointLabels.length||1))+Ie(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(C(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(C(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let s=e[t];return function(n,o,a){return rs(n,{label:a,index:o,type:"pointLabel"})}(this.getContext(),t,s)}}getPointPosition(t,e,s=0){let n=this.getIndexAngle(t)-ot+s;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:s,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:s,right:n,bottom:o}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let s=this.ctx;s.save(),s.beginPath(),Kr(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:s,grid:n,border:o}=e,a=this._pointLabels.length,l,c,g;if(e.pointLabels.display&&function(x,b){let{ctx:v,options:{pointLabels:k}}=x;for(let P=b-1;P>=0;P--){let T=x._pointLabelItems[P];if(!T.visible)continue;let A=k.setContext(x.getPointLabelContext(P));eh(v,A,T);let $=qe(A.font),{x:tt,y:Z,textAlign:X}=T;Xe(v,x._pointLabels[P],tt,Z+$.lineHeight/2,$,{color:A.color,textAlign:X,textBaseline:"middle"})}}(this,a),n.display&&this.ticks.forEach((x,b)=>{if(b!==0){c=this.getDistanceFromCenterForValue(x.value);let v=this.getContext(b),k=n.setContext(v),P=o.setContext(v);(function(T,A,$,tt,Z){let X=T.ctx,lt=A.circular,{color:ft,lineWidth:Ct}=A;!lt&&!tt||!ft||!Ct||$<0||(X.save(),X.strokeStyle=ft,X.lineWidth=Ct,X.setLineDash(Z.dash),X.lineDashOffset=Z.dashOffset,X.beginPath(),Kr(T,$,lt,tt),X.closePath(),X.stroke(),X.restore())})(this,k,c,a,P)}}),s.display){for(t.save(),l=a-1;l>=0;l--){let x=s.setContext(this.getPointLabelContext(l)),{color:b,lineWidth:v}=x;v&&b&&(t.lineWidth=v,t.strokeStyle=b,t.setLineDash(x.borderDash),t.lineDashOffset=x.borderDashOffset,c=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),g=this.getPointPosition(l,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(g.x,g.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;let n=this.getIndexAngle(0),o,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&!e.reverse)return;let g=s.setContext(this.getContext(c)),x=qe(g.font);if(o=this.getDistanceFromCenterForValue(this.ticks[c].value),g.showLabelBackdrop){t.font=x.string,a=t.measureText(l.label).width,t.fillStyle=g.backdropColor;let b=oi(g.backdropPadding);t.fillRect(-a/2-b.left,-o-x.size/2-b.top,a+b.width,x.size+b.height)}Xe(t,l.label,0,-o,x,{color:g.color,strokeColor:g.textStrokeColor,strokeWidth:g.textStrokeWidth})}),t.restore()}drawTitle(){}}let wn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Si=Object.keys(wn);function Zr(i,t){return i-t}function Jr(i,t){if(C(t))return null;let e=i._adapter,{parser:s,round:n,isoWeekday:o}=i._parseOpts,a=t;return typeof s=="function"&&(a=s(a)),W(a)||(a=typeof s=="string"?e.parse(a,s):e.parse(a)),a===null?null:(n&&(a=n!=="week"||!Ae(o)&&o!==!0?e.startOf(a,n):e.startOf(a,"isoWeek",o)),+a)}function ta(i,t,e,s){let n=Si.length;for(let o=Si.indexOf(i);o<n-1;++o){let a=wn[Si[o]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(l*a.size))<=s)return Si[o]}return Si[n-1]}function ea(i,t,e){if(e){if(e.length){let{lo:s,hi:n}=ut(e,t);i[e[s]>=t?e[s]:e[n]]=!0}}else i[t]=!0}function ia(i,t,e){let s=[],n={},o=t.length,a,l;for(a=0;a<o;++a)l=t[a],n[l]=a,s.push({value:l,major:!1});return o!==0&&e?function(c,g,x,b){let v=c._adapter,k=+v.startOf(g[0].value,b),P=g[g.length-1].value,T,A;for(T=k;T<=P;T=+v.add(T,1,b))A=x[T],A>=0&&(g[A].major=!0);return g}(i,s,n,e):s}class vo extends ms{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){let s=t.time||(t.time={}),n=this._adapter=new Lr._date(t.adapters.date);n.init(e),_e(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Jr(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,e=this._adapter,s=t.time.unit||"day",{min:n,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(g){a||isNaN(g.min)||(n=Math.min(n,g.min)),l||isNaN(g.max)||(o=Math.max(o,g.max))}a&&l||(c(this._getLabelBounds()),t.bounds==="ticks"&&t.ticks.source==="labels"||c(this.getMinMax(!1))),n=W(n)&&!isNaN(n)?n:+e.startOf(Date.now(),s),o=W(o)&&!isNaN(o)?o:+e.endOf(Date.now(),s)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){let t=this.options,e=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);let o=this.min,a=At(n,o,this.max);return this._unit=e.unit||(s.autoSkip?ta(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):function(l,c,g,x,b){for(let v=Si.length-1;v>=Si.indexOf(g);v--){let k=Si[v];if(wn[k].common&&l._adapter.diff(b,x,k)>=c-1)return k}return Si[g?Si.indexOf(g):0]}(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&this._unit!=="year"?function(l){for(let c=Si.indexOf(l)+1,g=Si.length;c<g;++c)if(wn[Si[c]].common)return Si[c]}(this._unit):void 0,this.initOffsets(n),t.reverse&&a.reverse(),ia(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,s,n=0,o=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),n=t.length===1?1-e:(this.getDecimalForValue(t[1])-e)/2,s=this.getDecimalForValue(t[t.length-1]),o=t.length===1?s:(s-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;n=J(n,0,a),o=J(o,0,a),this._offsets={start:n,end:o,factor:1/(n+1+o)}}_generate(){let t=this._adapter,e=this.min,s=this.max,n=this.options,o=n.time,a=o.unit||ta(o.minUnit,e,s,this._getLabelCapacity(e)),l=q(n.ticks.stepSize,1),c=a==="week"&&o.isoWeekday,g=Ae(c)||c===!0,x={},b,v,k=e;if(g&&(k=+t.startOf(k,"isoWeek",c)),k=+t.startOf(k,g?"day":a),t.diff(s,e,a)>1e5*l)throw new Error(e+" and "+s+" are too far apart with stepSize of "+l+" "+a);let P=n.ticks.source==="data"&&this.getDataTimestamps();for(b=k,v=0;b<s;b=+t.add(b,l,a),v++)ea(x,b,P);return b!==s&&n.bounds!=="ticks"&&v!==1||ea(x,b,P),Object.keys(x).sort(Zr).map(T=>+T)}getLabelForValue(t){let e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){let s=this.options.time.displayFormats,n=this._unit,o=e||s[n];return this._adapter.format(t,o)}_tickFormatFunction(t,e,s,n){let o=this.options,a=o.ticks.callback;if(a)return bt(a,[t,e,s],this);let l=o.time.displayFormats,c=this._unit,g=this._majorUnit,x=c&&l[c],b=g&&l[g],v=s[e],k=g&&b&&v&&v.major;return this._adapter.format(t,n||(k?b:x))}generateTickLabels(t){let e,s,n;for(e=0,s=t.length;e<s;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){let e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){let e=this.options.ticks,s=this.ctx.measureText(t).width,n=Ie(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(n),a=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:s*o+l*a,h:s*a+l*o}}_getLabelCapacity(t){let e=this.options.time,s=e.displayFormats,n=s[e.unit]||s.millisecond,o=this._tickFormatFunction(t,0,ia(this,[t],this._majorUnit),n),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t,e,s=this._cache.data||[];if(s.length)return s;let n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,e=n.length;t<e;++t)s=s.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){let t=this._cache.labels||[],e,s;if(t.length)return t;let n=this.getLabels();for(e=0,s=n.length;e<s;++e)t.push(Jr(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return le(t.sort(Zr))}}function _n(i,t,e){let s,n,o,a,l=0,c=i.length-1;e?(t>=i[l].pos&&t<=i[c].pos&&({lo:l,hi:c}=dt(i,"pos",t)),{pos:s,time:o}=i[l],{pos:n,time:a}=i[c]):(t>=i[l].time&&t<=i[c].time&&({lo:l,hi:c}=dt(i,"time",t)),{time:s,pos:o}=i[l],{time:n,pos:a}=i[c]);let g=n-s;return g?o+(a-o)*(t-s)/g:o}var sa=Object.freeze({__proto__:null,CategoryScale:class extends ms{static id="category";static defaults={ticks:{callback:Yr}};constructor(i){super(i),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(i){let t=this._addedLabels;if(t.length){let e=this.getLabels();for(let{index:s,label:n}of t)e[s]===n&&e.splice(s,1);this._addedLabels=[]}super.init(i)}parse(i,t){if(C(i))return null;let e=this.getLabels();return((s,n)=>s===null?null:J(Math.round(s),0,n))(t=isFinite(t)&&e[t]===i?t:ql(e,i,q(t,i),this._addedLabels),e.length-1)}determineDataLimits(){let{minDefined:i,maxDefined:t}=this.getUserBounds(),{min:e,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(i||(e=0),t||(s=this.getLabels().length-1)),this.min=e,this.max=s}buildTicks(){let i=this.min,t=this.max,e=this.options.offset,s=[],n=this.getLabels();n=i===0&&t===n.length-1?n:n.slice(i,t+1),this._valueRange=Math.max(n.length-(e?0:1),1),this._startValue=this.min-(e?.5:0);for(let o=i;o<=t;o++)s.push({value:o});return s}getLabelForValue(i){return Yr.call(this,i)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(i){return typeof i!="number"&&(i=this.parse(i)),i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getPixelForTick(i){let t=this.ticks;return i<0||i>t.length-1?null:this.getPixelForValue(t[i].value)}getValueForPixel(i){return Math.round(this._startValue+this.getDecimalForPixel(i)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:Gl,LogarithmicScale:Ql,RadialLinearScale:ih,TimeScale:vo,TimeSeriesScale:class extends vo{static id="timeseries";static defaults=vo.defaults;constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let i=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(i);this._minPos=_n(t,this.min),this._tableRange=_n(t,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){let{min:t,max:e}=this,s=[],n=[],o,a,l,c,g;for(o=0,a=i.length;o<a;++o)c=i[o],c>=t&&c<=e&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:e,pos:1}];for(o=0,a=s.length;o<a;++o)g=s[o+1],l=s[o-1],c=s[o],Math.round((g+l)/2)!==c&&n.push({time:c,pos:o/(a-1)});return n}_generate(){let i=this.min,t=this.max,e=super.getDataTimestamps();return e.includes(i)&&e.length||e.splice(0,0,i),e.includes(t)&&e.length!==1||e.push(t),e.sort((s,n)=>s-n)}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;let t=this.getDataTimestamps(),e=this.getLabelTimestamps();return i=t.length&&e.length?this.normalize(t.concat(e)):t.length?t:e,i=this._cache.all=i,i}getDecimalForValue(i){return(_n(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){let t=this._offsets,e=this.getDecimalForPixel(i)/t.factor-t.end;return _n(this._table,e*this._tableRange+this._minPos,!0)}}});let wo=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],na=wo.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function oa(i){return wo[i%wo.length]}function ra(i){return na[i%na.length]}function sh(i){let t=0;return(e,s)=>{let n=i.getDatasetMeta(s).controller;n instanceof po?t=function(o,a){return o.backgroundColor=o.data.map(()=>oa(a++)),a}(e,t):n instanceof Fr?t=function(o,a){return o.backgroundColor=o.data.map(()=>ra(a++)),a}(e,t):n&&(t=function(o,a){return o.borderColor=oa(a),o.backgroundColor=ra(a),++a}(e,t))}}function aa(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}var nh={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;let{data:{datasets:s},options:n}=i.config,{elements:o}=n;if(!e.forceOverride&&(aa(s)||(a=n)&&(a.borderColor||a.backgroundColor)||o&&aa(o)))return;var a;let l=sh(i);s.forEach(l)}};function la(i){if(i._decimated){let t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function ha(i){i.data.datasets.forEach(t=>{la(t)})}var oh={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled)return void ha(i);let s=i.width;i.data.datasets.forEach((n,o)=>{let{_data:a,indexAxis:l}=n,c=i.getDatasetMeta(o),g=a||n.data;if(Hs([l,i.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let x=i.scales[c.xAxisID];if(x.type!=="linear"&&x.type!=="time"||i.options.parsing)return;let{start:b,count:v}=function(P,T){let A=T.length,$,tt=0,{iScale:Z}=P,{min:X,max:lt,minDefined:ft,maxDefined:Ct}=Z.getUserBounds();return ft&&(tt=J(dt(T,Z.axis,X).lo,0,A-1)),$=Ct?J(dt(T,Z.axis,lt).hi+1,tt,A)-tt:A-tt,{start:tt,count:$}}(c,g);if(v<=(e.threshold||4*s))return void la(n);let k;switch(C(a)&&(n._data=g,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(P){this._data=P}})),e.algorithm){case"lttb":k=function(P,T,A,$,tt){let Z=tt.samples||$;if(Z>=A)return P.slice(T,T+A);let X=[],lt=(A-2)/(Z-2),ft=0,Ct=T+A-1,Rt,$t,Ht,Gt,jt,Nt=T;for(X[ft++]=P[Nt],Rt=0;Rt<Z-2;Rt++){let Wt,Ft=0,ie=0,Me=Math.floor((Rt+1)*lt)+1+T,ye=Math.min(Math.floor((Rt+2)*lt)+1,A)+T,ai=ye-Me;for(Wt=Me;Wt<ye;Wt++)Ft+=P[Wt].x,ie+=P[Wt].y;Ft/=ai,ie/=ai;let zi=Math.floor(Rt*lt)+1+T,Li=Math.min(Math.floor((Rt+1)*lt)+1,A)+T,{x:Wi,y:qi}=P[Nt];for(Ht=Gt=-1,Wt=zi;Wt<Li;Wt++)Gt=.5*Math.abs((Wi-Ft)*(P[Wt].y-qi)-(Wi-P[Wt].x)*(ie-qi)),Gt>Ht&&(Ht=Gt,$t=P[Wt],jt=Wt);X[ft++]=$t,Nt=jt}return X[ft++]=P[Ct],X}(g,b,v,s,e);break;case"min-max":k=function(P,T,A,$){let tt,Z,X,lt,ft,Ct,Rt,$t,Ht,Gt,jt=0,Nt=0,Wt=[],Ft=T+A-1,ie=P[T].x,Me=P[Ft].x-ie;for(tt=T;tt<T+A;++tt){Z=P[tt],X=(Z.x-ie)/Me*$,lt=Z.y;let ye=0|X;if(ye===ft)lt<Ht?(Ht=lt,Ct=tt):lt>Gt&&(Gt=lt,Rt=tt),jt=(Nt*jt+Z.x)/++Nt;else{let ai=tt-1;if(!C(Ct)&&!C(Rt)){let zi=Math.min(Ct,Rt),Li=Math.max(Ct,Rt);zi!==$t&&zi!==ai&&Wt.push({...P[zi],x:jt}),Li!==$t&&Li!==ai&&Wt.push({...P[Li],x:jt})}tt>0&&ai!==$t&&Wt.push(P[ai]),Wt.push(Z),ft=ye,Nt=0,Ht=Gt=lt,Ct=Rt=$t=tt}}return Wt}(g,b,v,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}n._decimated=k})},destroy(i){ha(i)}};function _o(i,t,e,s){if(s)return;let n=t[i],o=e[i];return i==="angle"&&(n=ve(n),o=ve(o)),{property:i,start:n,end:o}}function ko(i,t,e){for(;t>i;t--){let s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function ca(i,t,e,s){return i&&t?s(i[e],t[e]):i?i[e]:t?t[e]:0}function da(i,t){let e=[],s=!1;return I(i)?(s=!0,e=i):e=function(n,o){let{x:a=null,y:l=null}=n||{},c=o.points,g=[];return o.segments.forEach(({start:x,end:b})=>{b=ko(x,b,c);let v=c[x],k=c[b];l!==null?(g.push({x:v.x,y:l}),g.push({x:k.x,y:l})):a!==null&&(g.push({x:a,y:v.y}),g.push({x:a,y:k.y}))}),g}(i,t),e.length?new xn({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function ua(i){return i&&i.fill!==!1}function rh(i,t,e){let s=i[t].fill,n=[t],o;if(!e)return s;for(;s!==!1&&n.indexOf(s)===-1;){if(!W(s))return s;if(o=i[s],!o)return!1;if(o.visible)return s;n.push(s),s=o.fill}return!1}function ah(i,t,e){let s=function(o){let a=o.options,l=a.fill,c=q(l&&l.target,l);return c===void 0&&(c=!!a.backgroundColor),c===!1||c===null?!1:c===!0?"origin":c}(i);if(Q(s))return!isNaN(s.value)&&s;let n=parseFloat(s);return W(n)&&Math.floor(n)===n?function(o,a,l,c){return o!=="-"&&o!=="+"||(l=a+l),l===a||l<0||l>=c?!1:l}(s[0],t,n,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function lh(i,t,e){let s=[];for(let n=0;n<e.length;n++){let o=e[n],{first:a,last:l,point:c}=hh(o,t,"x");if(!(!c||a&&l)){if(a)s.unshift(c);else if(i.push(c),!l)break}}i.push(...s)}function hh(i,t,e){let s=i.interpolate(t,e);if(!s)return{};let n=s[e],o=i.segments,a=i.points,l=!1,c=!1;for(let g=0;g<o.length;g++){let x=o[g],b=a[x.start][e],v=a[x.end][e];if(nt(n,b,v)){l=n===b,c=n===v;break}}return{first:l,last:c,point:s}}class ga{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){let{x:n,y:o,radius:a}=this;return e=e||{start:0,end:w},t.arc(n,o,a,e.end,e.start,!0),!s.bounds}interpolate(t){let{x:e,y:s,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:s+Math.sin(o)*n,angle:o}}}function ch(i){let{chart:t,fill:e,line:s}=i;if(W(e))return function(o,a){let l=o.getDatasetMeta(a);return l&&o.isDatasetVisible(a)?l.dataset:null}(t,e);if(e==="stack")return function(o){let{scale:a,index:l,line:c}=o,g=[],x=c.segments,b=c.points,v=function(k,P){let T=[],A=k.getMatchingVisibleMetas("line");for(let $=0;$<A.length;$++){let tt=A[$];if(tt.index===P)break;tt.hidden||T.unshift(tt.dataset)}return T}(a,l);v.push(da({x:null,y:a.bottom},c));for(let k=0;k<x.length;k++){let P=x[k];for(let T=P.start;T<=P.end;T++)lh(g,b[T],v)}return new xn({points:g,options:{}})}(i);if(e==="shape")return!0;let n=function(o){return(o.scale||{}).getPointPositionForValue?function(l){let{scale:c,fill:g}=l,x=c.options,b=c.getLabels().length,v=x.reverse?c.max:c.min,k=function(T,A,$){let tt;return tt=T==="start"?$:T==="end"?A.options.reverse?A.min:A.max:Q(T)?T.value:A.getBaseValue(),tt}(g,c,v),P=[];if(x.grid.circular){let T=c.getPointPositionForValue(0,v);return new ga({x:T.x,y:T.y,radius:c.getDistanceFromCenterForValue(k)})}for(let T=0;T<b;++T)P.push(c.getPointPositionForValue(T,k));return P}(o):function(l){let{scale:c={},fill:g}=l,x=function(b,v){let k=null;return b==="start"?k=v.bottom:b==="end"?k=v.top:Q(b)?k=v.getPixelForValue(b.value):v.getBasePixel&&(k=v.getBasePixel()),k}(g,c);if(W(x)){let b=c.isHorizontal();return{x:b?x:null,y:b?null:x}}return null}(o)}(i);return n instanceof ga?n:da(n,s)}function Mo(i,t,e){let s=ch(t),{line:n,scale:o,axis:a}=t,l=n.options,c=l.fill,g=l.backgroundColor,{above:x=g,below:b=g}=c||{};s&&n.points.length&&(qt(i,e),function(v,k){let{line:P,target:T,above:A,below:$,area:tt,scale:Z}=k,X=P._loop?"angle":k.axis;v.save(),X==="x"&&$!==A&&(pa(v,T,tt.top),fa(v,{line:P,target:T,color:A,scale:Z,property:X}),v.restore(),v.save(),pa(v,T,tt.bottom)),fa(v,{line:P,target:T,color:$,scale:Z,property:X}),v.restore()}(i,{line:n,target:s,above:x,below:b,area:e,scale:o,axis:a}),Xt(i))}function pa(i,t,e){let{segments:s,points:n}=t,o=!0,a=!1;i.beginPath();for(let l of s){let{start:c,end:g}=l,x=n[c],b=n[ko(c,g,n)];o?(i.moveTo(x.x,x.y),o=!1):(i.lineTo(x.x,e),i.lineTo(x.x,x.y)),a=!!t.pathSegment(i,l,{move:a}),a?i.closePath():i.lineTo(b.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function fa(i,t){let{line:e,target:s,property:n,color:o,scale:a}=t,l=function(c,g,x){let b=c.segments,v=c.points,k=g.points,P=[];for(let T of b){let{start:A,end:$}=T;$=ko(A,$,v);let tt=_o(x,v[A],v[$],T.loop);if(!g.segments){P.push({source:T,target:tt,start:v[A],end:v[$]});continue}let Z=eo(g,tt);for(let X of Z){let lt=_o(x,k[X.start],k[X.end],X.loop),ft=to(T,v,lt);for(let Ct of ft)P.push({source:Ct,target:X,start:{[x]:ca(tt,lt,"start",Math.max)},end:{[x]:ca(tt,lt,"end",Math.min)}})}}return P}(e,s,n);for(let{source:c,target:g,start:x,end:b}of l){let{style:{backgroundColor:v=o}={}}=c,k=s!==!0;i.save(),i.fillStyle=v,dh(i,a,k&&_o(n,x,b)),i.beginPath();let P=!!e.pathSegment(i,c),T;if(k){P?i.closePath():ma(i,s,b,n);let A=!!s.pathSegment(i,g,{move:P,reverse:!0});T=P&&A,T||ma(i,s,x,n)}i.closePath(),i.fill(T?"evenodd":"nonzero"),i.restore()}}function dh(i,t,e){let{top:s,bottom:n}=t.chart.chartArea,{property:o,start:a,end:l}=e||{};o==="x"&&(i.beginPath(),i.rect(a,s,l-a,n-s),i.clip())}function ma(i,t,e,s){let n=t.interpolate(e,s);n&&i.lineTo(n.x,n.y)}var uh={id:"filler",afterDatasetsUpdate(i,t,e){let s=(i.data.datasets||[]).length,n=[],o,a,l,c;for(a=0;a<s;++a)o=i.getDatasetMeta(a),l=o.dataset,c=null,l&&l.options&&l instanceof xn&&(c={visible:i.isDatasetVisible(a),index:a,fill:ah(l,a,s),chart:i,axis:o.controller.options.indexAxis,scale:o.vScale,line:l}),o.$filler=c,n.push(c);for(a=0;a<s;++a)c=n[a],c&&c.fill!==!1&&(c.fill=rh(n,a,e.propagate))},beforeDraw(i,t,e){let s=e.drawTime==="beforeDraw",n=i.getSortedVisibleDatasetMetas(),o=i.chartArea;for(let a=n.length-1;a>=0;--a){let l=n[a].$filler;l&&(l.line.updateControlPoints(o,l.axis),s&&l.fill&&Mo(i.ctx,l,o))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let s=i.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){let o=s[n].$filler;ua(o)&&Mo(i.ctx,o,i.chartArea)}},beforeDatasetDraw(i,t,e){let s=t.meta.$filler;ua(s)&&e.drawTime==="beforeDatasetDraw"&&Mo(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};let ba=(i,t)=>{let{boxHeight:e=t,boxWidth:s=t}=i;return i.usePointStyle&&(e=Math.min(e,t),s=i.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}};class ya extends ss{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=bt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);let s=t.labels,n=qe(s.font),o=n.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=ba(s,o),g,x;e.font=n.string,this.isHorizontal()?(g=this.maxWidth,x=this._fitRows(a,o,l,c)+10):(x=this.maxHeight,g=this._fitCols(a,n,l,c)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(x,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,n){let{ctx:o,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],g=this.lineWidths=[0],x=n+l,b=t;o.textAlign="left",o.textBaseline="middle";let v=-1,k=-x;return this.legendItems.forEach((P,T)=>{let A=s+e/2+o.measureText(P.text).width;(T===0||g[g.length-1]+A+2*l>a)&&(b+=x,g[g.length-(T>0?0:1)]=0,k+=x,v++),c[T]={left:0,top:k,row:v,width:A,height:n},g[g.length-1]+=A+l}),b}_fitCols(t,e,s,n){let{ctx:o,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],g=this.columnSizes=[],x=a-t,b=l,v=0,k=0,P=0,T=0;return this.legendItems.forEach((A,$)=>{let{itemWidth:tt,itemHeight:Z}=function(X,lt,ft,Ct,Rt){let $t=function(Gt,jt,Nt,Wt){let Ft=Gt.text;return Ft&&typeof Ft!="string"&&(Ft=Ft.reduce((ie,Me)=>ie.length>Me.length?ie:Me)),jt+Nt.size/2+Wt.measureText(Ft).width}(Ct,X,lt,ft),Ht=function(Gt,jt,Nt){let Wt=Gt;return typeof jt.text!="string"&&(Wt=xa(jt,Nt)),Wt}(Rt,Ct,lt.lineHeight);return{itemWidth:$t,itemHeight:Ht}}(s,e,o,A,n);$>0&&k+Z+2*l>x&&(b+=v+l,g.push({width:v,height:k}),P+=v+l,T++,v=k=0),c[$]={left:P,top:k,col:T,width:tt,height:Z},v=Math.max(v,tt),k+=Z+l}),b+=v,g.push({width:v,height:k}),b}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:n},rtl:o}}=this,a=Ss(o,this.left,this.width);if(this.isHorizontal()){let l=0,c=Ce(s,this.left+n,this.right-this.lineWidths[l]);for(let g of e)l!==g.row&&(l=g.row,c=Ce(s,this.left+n,this.right-this.lineWidths[l])),g.top+=this.top+t+n,g.left=a.leftForLtr(a.x(c),g.width),c+=g.width+n}else{let l=0,c=Ce(s,this.top+t+n,this.bottom-this.columnSizes[l].height);for(let g of e)g.col!==l&&(l=g.col,c=Ce(s,this.top+t+n,this.bottom-this.columnSizes[l].height)),g.top=c,g.left+=this.left+n,g.left=a.leftForLtr(a.x(g.left),g.width),c+=g.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;qt(t,this),this._draw(),Xt(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:s,ctx:n}=this,{align:o,labels:a}=t,l=mt.color,c=Ss(t.rtl,this.left,this.width),g=qe(a.font),{padding:x}=a,b=g.size,v=b/2,k;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=g.string;let{boxWidth:P,boxHeight:T,itemHeight:A}=ba(a,b),$=this.isHorizontal(),tt=this._computeTitleHeight();k=$?{x:Ce(o,this.left+x,this.right-s[0]),y:this.top+x+tt,line:0}:{x:this.left+x,y:Ce(o,this.top+tt+x,this.bottom-e[0].height),line:0},Zn(this.ctx,t.textDirection);let Z=A+x;this.legendItems.forEach((X,lt)=>{n.strokeStyle=X.fontColor,n.fillStyle=X.fontColor;let ft=n.measureText(X.text).width,Ct=c.textAlign(X.textAlign||(X.textAlign=a.textAlign)),Rt=P+v+ft,$t=k.x,Ht=k.y;if(c.setWidth(this.width),$?lt>0&&$t+Rt+x>this.right&&(Ht=k.y+=Z,k.line++,$t=k.x=Ce(o,this.left+x,this.right-s[k.line])):lt>0&&Ht+Z>this.bottom&&($t=k.x=$t+e[k.line].width+x,k.line++,Ht=k.y=Ce(o,this.top+tt+x,this.bottom-e[k.line].height)),function(Gt,jt,Nt){if(isNaN(P)||P<=0||isNaN(T)||T<0)return;n.save();let Wt=q(Nt.lineWidth,1);if(n.fillStyle=q(Nt.fillStyle,l),n.lineCap=q(Nt.lineCap,"butt"),n.lineDashOffset=q(Nt.lineDashOffset,0),n.lineJoin=q(Nt.lineJoin,"miter"),n.lineWidth=Wt,n.strokeStyle=q(Nt.strokeStyle,l),n.setLineDash(q(Nt.lineDash,[])),a.usePointStyle){let Ft={radius:T*Math.SQRT2/2,pointStyle:Nt.pointStyle,rotation:Nt.rotation,borderWidth:Wt},ie=c.xPlus(Gt,P/2);wt(n,Ft,ie,jt+v,a.pointStyleWidth&&P)}else{let Ft=jt+Math.max((b-T)/2,0),ie=c.leftForLtr(Gt,P),Me=fs(Nt.borderRadius);n.beginPath(),Object.values(Me).some(ye=>ye!==0)?xi(n,{x:ie,y:Ft,w:P,h:T,radius:Me}):n.rect(ie,Ft,P,T),n.fill(),Wt!==0&&n.stroke()}n.restore()}(c.x($t),Ht,X),$t=os(Ct,$t+P+v,$?$t+Rt:this.right,t.rtl),function(Gt,jt,Nt){Xe(n,Nt.text,Gt,jt+A/2,g,{strikethrough:Nt.hidden,textAlign:c.textAlign(Nt.textAlign)})}(c.x($t),Ht,X),$)k.x+=Rt+x;else if(typeof X.text!="string"){let Gt=g.lineHeight;k.y+=xa(X,Gt)+x}else k.y+=Z}),Jn(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,s=qe(e.font),n=oi(e.padding);if(!e.display)return;let o=Ss(t.rtl,this.left,this.width),a=this.ctx,l=e.position,c=s.size/2,g=n.top+c,x,b=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),x=this.top+g,b=Ce(t.align,b,this.right-v);else{let P=this.columnSizes.reduce((T,A)=>Math.max(T,A.height),0);x=g+Ce(t.align,this.top,this.bottom-P-t.labels.padding-this._computeTitleHeight())}let k=Ce(l,b,b+v);a.textAlign=o.textAlign(xe(l)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=s.string,Xe(a,e.text,k,x,s)}_computeTitleHeight(){let t=this.options.title,e=qe(t.font),s=oi(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,n,o;if(nt(t,this.left,this.right)&&nt(e,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(n=o[s],nt(t,n.left,n.left+n.width)&&nt(e,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){let e=this.options;if(!function(a,l){return!!((a==="mousemove"||a==="mouseout")&&(l.onHover||l.onLeave)||l.onClick&&(a==="click"||a==="mouseup"))}(t.type,e))return;let s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let a=this._hoveredItem,l=(o=s,(n=a)!==null&&o!==null&&n.datasetIndex===o.datasetIndex&&n.index===o.index);a&&!l&&bt(e.onLeave,[t,a,this],this),this._hoveredItem=s,s&&!l&&bt(e.onHover,[t,s,this],this)}else s&&bt(e.onClick,[t,s,this],this);var n,o}}function xa(i,t){return t*(i.text?i.text.length:0)}var gh={id:"legend",_element:ya,start(i,t,e){let s=i.legend=new ya({ctx:i.ctx,options:e,chart:i});ri.configure(i,s,e),ri.addBox(i,s)},stop(i){ri.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){let s=i.legend;ri.configure(i,s,e),s.options=e},afterUpdate(i){let t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){let s=t.datasetIndex,n=e.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){let t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:n,color:o,useBorderRadius:a,borderRadius:l}}=i.legend.options;return i._getSortedDatasetMetas().map(c=>{let g=c.controller.getStyle(e?0:void 0),x=oi(g.borderWidth);return{text:t[c.index].label,fillStyle:g.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:g.borderColor,pointStyle:s||g.pointStyle,rotation:g.rotation,textAlign:n||g.textAlign,borderRadius:a&&(l||g.borderRadius),datasetIndex:c.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class So extends ss{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let s=this.options;if(this.left=0,this.top=0,!s.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;let n=I(s.text)?s.text.length:1;this._padding=oi(s.padding);let o=n*qe(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:s,bottom:n,right:o,options:a}=this,l=a.align,c,g,x,b=0;return this.isHorizontal()?(g=Ce(l,s,o),x=e+t,c=o-s):(a.position==="left"?(g=s+t,x=Ce(l,n,e),b=-.5*y):(g=o-t,x=Ce(l,e,n),b=.5*y),c=n-e),{titleX:g,titleY:x,maxWidth:c,rotation:b}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let s=qe(e.font),n=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(n);Xe(t,e.text,0,0,s,{color:e.color,maxWidth:l,rotation:c,textAlign:xe(e.align),textBaseline:"middle",translation:[o,a]})}}var ph={id:"title",_element:So,start(i,t,e){(function(s,n){let o=new So({ctx:s.ctx,options:n,chart:s});ri.configure(s,o,n),ri.addBox(s,o),s.titleBlock=o})(i,e)},stop(i){let t=i.titleBlock;ri.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){let s=i.titleBlock;ri.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};let kn=new WeakMap;var fh={id:"subtitle",start(i,t,e){let s=new So({ctx:i.ctx,options:e,chart:i});ri.configure(i,s,e),ri.addBox(i,s),kn.set(i,s)},stop(i){ri.removeBox(i,kn.get(i)),kn.delete(i)},beforeUpdate(i,t,e){let s=kn.get(i);ri.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};let Ks={average(i){if(!i.length)return!1;let t,e,s=0,n=0,o=0;for(t=0,e=i.length;t<e;++t){let a=i[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();s+=l.x,n+=l.y,++o}}return{x:s/o,y:n/o}},nearest(i,t){if(!i.length)return!1;let e,s,n,o=t.x,a=t.y,l=Number.POSITIVE_INFINITY;for(e=0,s=i.length;e<s;++e){let c=i[e].element;if(c&&c.hasValue()){let g=wi(t,c.getCenterPoint());g<l&&(l=g,n=c)}}if(n){let c=n.tooltipPosition();o=c.x,a=c.y}return{x:o,y:a}}};function ns(i,t){return t&&(I(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function ls(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function mh(i,t){let{element:e,datasetIndex:s,index:n}=t,o=i.getDatasetMeta(s).controller,{label:a,value:l}=o.getLabelAndValue(n);return{chart:i,label:a,parsed:o.getParsed(n),raw:i.data.datasets[s].data[n],formattedValue:l,dataset:o.getDataset(),dataIndex:n,datasetIndex:s,element:e}}function va(i,t){let e=i.chart.ctx,{body:s,footer:n,title:o}=i,{boxWidth:a,boxHeight:l}=t,c=qe(t.bodyFont),g=qe(t.titleFont),x=qe(t.footerFont),b=o.length,v=n.length,k=s.length,P=oi(t.padding),T=P.height,A=0,$=s.reduce((X,lt)=>X+lt.before.length+lt.lines.length+lt.after.length,0);$+=i.beforeBody.length+i.afterBody.length,b&&(T+=b*g.lineHeight+(b-1)*t.titleSpacing+t.titleMarginBottom),$&&(T+=k*(t.displayColors?Math.max(l,c.lineHeight):c.lineHeight)+($-k)*c.lineHeight+($-1)*t.bodySpacing),v&&(T+=t.footerMarginTop+v*x.lineHeight+(v-1)*t.footerSpacing);let tt=0,Z=function(X){A=Math.max(A,e.measureText(X).width+tt)};return e.save(),e.font=g.string,xt(i.title,Z),e.font=c.string,xt(i.beforeBody.concat(i.afterBody),Z),tt=t.displayColors?a+2+t.boxPadding:0,xt(s,X=>{xt(X.before,Z),xt(X.lines,Z),xt(X.after,Z)}),tt=0,e.font=x.string,xt(i.footer,Z),e.restore(),A+=P.width,{width:A,height:T}}function bh(i,t,e,s){let{x:n,width:o}=e,{width:a,chartArea:{left:l,right:c}}=i,g="center";return s==="center"?g=n<=(l+c)/2?"left":"right":n<=o/2?g="left":n>=a-o/2&&(g="right"),function(x,b,v,k){let{x:P,width:T}=k,A=v.caretSize+v.caretPadding;return x==="left"&&P+T+A>b.width||x==="right"&&P-T-A<0||void 0}(g,i,t,e)&&(g="center"),g}function wa(i,t,e){let s=e.yAlign||t.yAlign||function(n,o){let{y:a,height:l}=o;return a<l/2?"top":a>n.height-l/2?"bottom":"center"}(i,e);return{xAlign:e.xAlign||t.xAlign||bh(i,t,e,s),yAlign:s}}function _a(i,t,e,s){let{caretSize:n,caretPadding:o,cornerRadius:a}=i,{xAlign:l,yAlign:c}=e,g=n+o,{topLeft:x,topRight:b,bottomLeft:v,bottomRight:k}=fs(a),P=function(A,$){let{x:tt,width:Z}=A;return $==="right"?tt-=Z:$==="center"&&(tt-=Z/2),tt}(t,l),T=function(A,$,tt){let{y:Z,height:X}=A;return $==="top"?Z+=tt:Z-=$==="bottom"?X+tt:X/2,Z}(t,c,g);return c==="center"?l==="left"?P+=g:l==="right"&&(P-=g):l==="left"?P-=Math.max(x,v)+n:l==="right"&&(P+=Math.max(b,k)+n),{x:J(P,0,s.width-t.width),y:J(T,0,s.height-t.height)}}function Mn(i,t,e){let s=oi(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-s.right:i.x+s.left}function ka(i){return ns([],ls(i))}function Ma(i,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}let Sa={beforeTitle:d,title(i){if(i.length>0){let t=i[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:d,beforeBody:d,beforeLabel:d,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");let e=i.formattedValue;return C(e)||(t+=e),t},labelColor(i){let t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){let t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:d,afterBody:d,beforeFooter:d,footer:d,afterFooter:d};function Ci(i,t,e,s){let n=i[t].call(e,s);return n===void 0?Sa[t].call(e,s):n}class Ca extends ss{static positioners=Ks;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let e=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&e.options.animation&&s.animations,o=new ro(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,s=this._tooltipItems,rs(t,{tooltip:e,tooltipItems:s,type:"tooltip"})));var t,e,s}getTitle(t,e){let{callbacks:s}=e,n=Ci(s,"beforeTitle",this,t),o=Ci(s,"title",this,t),a=Ci(s,"afterTitle",this,t),l=[];return l=ns(l,ls(n)),l=ns(l,ls(o)),l=ns(l,ls(a)),l}getBeforeBody(t,e){return ka(Ci(e.callbacks,"beforeBody",this,t))}getBody(t,e){let{callbacks:s}=e,n=[];return xt(t,o=>{let a={before:[],lines:[],after:[]},l=Ma(s,o);ns(a.before,ls(Ci(l,"beforeLabel",this,o))),ns(a.lines,Ci(l,"label",this,o)),ns(a.after,ls(Ci(l,"afterLabel",this,o))),n.push(a)}),n}getAfterBody(t,e){return ka(Ci(e.callbacks,"afterBody",this,t))}getFooter(t,e){let{callbacks:s}=e,n=Ci(s,"beforeFooter",this,t),o=Ci(s,"footer",this,t),a=Ci(s,"afterFooter",this,t),l=[];return l=ns(l,ls(n)),l=ns(l,ls(o)),l=ns(l,ls(a)),l}_createItems(t){let e=this._active,s=this.chart.data,n=[],o=[],a=[],l,c,g=[];for(l=0,c=e.length;l<c;++l)g.push(mh(this.chart,e[l]));return t.filter&&(g=g.filter((x,b,v)=>t.filter(x,b,v,s))),t.itemSort&&(g=g.sort((x,b)=>t.itemSort(x,b,s))),xt(g,x=>{let b=Ma(t.callbacks,x);n.push(Ci(b,"labelColor",this,x)),o.push(Ci(b,"labelPointStyle",this,x)),a.push(Ci(b,"labelTextColor",this,x))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=g,g}update(t,e){let s=this.options.setContext(this.getContext()),n=this._active,o,a=[];if(n.length){let l=Ks[s.position].call(this,n,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);let c=this._size=va(this,s),g=Object.assign({},l,c),x=wa(this.chart,s,g),b=_a(s,g,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,o={opacity:1,x:b.x,y:b.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}else this.opacity!==0&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,n){let o=this.getCaretPosition(t,s,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,s){let{xAlign:n,yAlign:o}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:g,bottomLeft:x,bottomRight:b}=fs(l),{x:v,y:k}=t,{width:P,height:T}=e,A,$,tt,Z,X,lt;return o==="center"?(X=k+T/2,n==="left"?(A=v,$=A-a,Z=X+a,lt=X-a):(A=v+P,$=A+a,Z=X-a,lt=X+a),tt=A):($=n==="left"?v+Math.max(c,x)+a:n==="right"?v+P-Math.max(g,b)-a:this.caretX,o==="top"?(Z=k,X=Z-a,A=$-a,tt=$+a):(Z=k+T,X=Z+a,A=$+a,tt=$-a),lt=Z),{x1:A,x2:$,x3:tt,y1:Z,y2:X,y3:lt}}drawTitle(t,e,s){let n=this.title,o=n.length,a,l,c;if(o){let g=Ss(s.rtl,this.x,this.width);for(t.x=Mn(this,s.titleAlign,s),e.textAlign=g.textAlign(s.titleAlign),e.textBaseline="middle",a=qe(s.titleFont),l=s.titleSpacing,e.fillStyle=s.titleColor,e.font=a.string,c=0;c<o;++c)e.fillText(n[c],g.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===o&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,e,s,n,o){let a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:g}=o,x=qe(o.bodyFont),b=Mn(this,"left",o),v=n.x(b),k=c<x.lineHeight?(x.lineHeight-c)/2:0,P=e.y+k;if(o.usePointStyle){let T={radius:Math.min(g,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},A=n.leftForLtr(v,g)+g/2,$=P+c/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,gt(t,T,A,$),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,gt(t,T,A,$)}else{t.lineWidth=Q(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let T=n.leftForLtr(v,g),A=n.leftForLtr(n.xPlus(v,1),g-2),$=fs(a.borderRadius);Object.values($).some(tt=>tt!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,xi(t,{x:T,y:P,w:g,h:c,radius:$}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),xi(t,{x:A,y:P+1,w:g-2,h:c-2,radius:$}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(T,P,g,c),t.strokeRect(T,P,g,c),t.fillStyle=a.backgroundColor,t.fillRect(A,P+1,g-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){let{body:n}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:g,boxPadding:x}=s,b=qe(s.bodyFont),v=b.lineHeight,k=0,P=Ss(s.rtl,this.x,this.width),T=function(Rt){e.fillText(Rt,P.x(t.x+k),t.y+v/2),t.y+=v+o},A=P.textAlign(a),$,tt,Z,X,lt,ft,Ct;for(e.textAlign=a,e.textBaseline="middle",e.font=b.string,t.x=Mn(this,A,s),e.fillStyle=s.bodyColor,xt(this.beforeBody,T),k=l&&A!=="right"?a==="center"?g/2+x:g+2+x:0,X=0,ft=n.length;X<ft;++X){for($=n[X],tt=this.labelTextColors[X],e.fillStyle=tt,xt($.before,T),Z=$.lines,l&&Z.length&&(this._drawColorBox(e,t,X,P,s),v=Math.max(b.lineHeight,c)),lt=0,Ct=Z.length;lt<Ct;++lt)T(Z[lt]),v=b.lineHeight;xt($.after,T)}k=0,v=b.lineHeight,xt(this.afterBody,T),t.y-=o}drawFooter(t,e,s){let n=this.footer,o=n.length,a,l;if(o){let c=Ss(s.rtl,this.x,this.width);for(t.x=Mn(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=c.textAlign(s.footerAlign),e.textBaseline="middle",a=qe(s.footerFont),e.fillStyle=s.footerColor,e.font=a.string,l=0;l<o;++l)e.fillText(n[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,e,s,n){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=t,{width:g,height:x}=s,{topLeft:b,topRight:v,bottomLeft:k,bottomRight:P}=fs(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(l+b,c),a==="top"&&this.drawCaret(t,e,s,n),e.lineTo(l+g-v,c),e.quadraticCurveTo(l+g,c,l+g,c+v),a==="center"&&o==="right"&&this.drawCaret(t,e,s,n),e.lineTo(l+g,c+x-P),e.quadraticCurveTo(l+g,c+x,l+g-P,c+x),a==="bottom"&&this.drawCaret(t,e,s,n),e.lineTo(l+k,c+x),e.quadraticCurveTo(l,c+x,l,c+x-k),a==="center"&&o==="left"&&this.drawCaret(t,e,s,n),e.lineTo(l,c+b),e.quadraticCurveTo(l,c,l+b,c),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){let e=this.chart,s=this.$animations,n=s&&s.x,o=s&&s.y;if(n||o){let a=Ks[t.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=va(this,t),c=Object.assign({},a,this._size),g=wa(e,t,c),x=_a(t,c,g,e);n._to===x.x&&o._to===x.y||(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(t){let e=this.options.setContext(this.getContext()),s=this.opacity;if(!s)return;this._updateAnimationTarget(e);let n={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;let a=oi(e.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(o,t,n,e),Zn(t,e.textDirection),o.y+=a.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),Jn(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){let s=this._active,n=t.map(({datasetIndex:l,index:c})=>{let g=this.chart.getDatasetMeta(l);if(!g)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:g.data[c],index:c}}),o=!Ut(s,n),a=this._positionChanged(n,e);(o||a)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let n=this.options,o=this._active||[],a=this._getActiveElements(t,o,e,s),l=this._positionChanged(a,t),c=e||!Ut(a,o)||l;return c&&(this._active=a,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),c}_getActiveElements(t,e,s,n){let o=this.options;if(t.type==="mouseout")return[];if(!n)return e.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,s);return o.reverse&&a.reverse(),a}_positionChanged(t,e){let{caretX:s,caretY:n,options:o}=this,a=Ks[o.position].call(this,t,e);return a!==!1&&(s!==a.x||n!==a.y)}}var yh={id:"tooltip",_element:Ca,positioners:Ks,afterInit(i,t,e){e&&(i.tooltip=new Ca({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){let t=i.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){let e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Sa},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};return Ve.register(Wr,sa,yo,R),Ve.helpers={...ll},Ve._adapters=Lr,Ve.Animation=cr,Ve.Animations=ro,Ve.animator=Be,Ve.controllers=Yi.controllers.items,Ve.DatasetController=as,Ve.Element=ss,Ve.elements=yo,Ve.Interaction=Xo,Ve.layouts=ri,Ve.platforms=lr,Ve.Scale=ms,Ve.Ticks=pt,Object.assign(Ve,Wr,sa,yo,R,lr),Ve.Chart=Ve,typeof window<"u"&&(window.Chart=Ve),Ve});(function(R,d){typeof exports=="object"&&typeof module<"u"?d(ys("chart.js")):typeof define=="function"&&define.amd?define(["chart.js"],d):d((R=typeof globalThis<"u"?globalThis:R||self).Chart)})(void 0,function(R){"use strict";function d(h){if(h===null||h===!0||h===!1)return NaN;var p=Number(h);return isNaN(p)?p:p<0?Math.ceil(p):Math.floor(p)}function m(h,p){if(p.length<h)throw new TypeError(h+" argument"+(h>1?"s":"")+" required, but only "+p.length+" present")}function C(h){m(1,arguments);var p=Object.prototype.toString.call(h);return h instanceof Date||typeof h=="object"&&p==="[object Date]"?new Date(h.getTime()):typeof h=="number"||p==="[object Number]"?new Date(h):(typeof h!="string"&&p!=="[object String]"||typeof console>"u"||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function I(h,p){m(2,arguments);var f=C(h),_=d(p);return isNaN(_)?new Date(NaN):(_&&f.setDate(f.getDate()+_),f)}function Q(h,p){m(2,arguments);var f=C(h),_=d(p);if(isNaN(_))return new Date(NaN);if(!_)return f;var L=f.getDate(),K=new Date(f.getTime());K.setMonth(f.getMonth()+_+1,0);var gt=K.getDate();return L>=gt?K:(f.setFullYear(K.getFullYear(),K.getMonth(),L),f)}function W(h,p){m(2,arguments);var f=C(h).getTime(),_=d(p);return new Date(f+_)}var ht=36e5;function q(h,p){m(1,arguments);var f=p||{},_=f.locale,L=_&&_.options&&_.options.weekStartsOn,K=L==null?0:d(L),gt=f.weekStartsOn==null?K:d(f.weekStartsOn);if(!(gt>=0&&gt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var wt=C(h),Mt=wt.getDay(),qt=(Mt<gt?7:0)+Mt-gt;return wt.setDate(wt.getDate()-qt),wt.setHours(0,0,0,0),wt}function Dt(h){var p=new Date(Date.UTC(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()));return p.setUTCFullYear(h.getFullYear()),h.getTime()-p.getTime()}function It(h){m(1,arguments);var p=C(h);return p.setHours(0,0,0,0),p}var bt=864e5;function xt(h,p){m(2,arguments);var f=It(h),_=It(p),L=f.getTime()-Dt(f),K=_.getTime()-Dt(_);return Math.round((L-K)/bt)}function Ut(h,p){m(2,arguments);var f=C(h),_=C(p),L=f.getTime()-_.getTime();return L<0?-1:L>0?1:L}function Jt(h){m(1,arguments);var p=C(h);return!isNaN(p)}function oe(h,p){m(2,arguments);var f=C(h),_=C(p),L=f.getFullYear()-_.getFullYear(),K=f.getMonth()-_.getMonth();return 12*L+K}function Pe(h,p){m(2,arguments);var f=C(h),_=C(p);return f.getFullYear()-_.getFullYear()}function ce(h,p){var f=h.getFullYear()-p.getFullYear()||h.getMonth()-p.getMonth()||h.getDate()-p.getDate()||h.getHours()-p.getHours()||h.getMinutes()-p.getMinutes()||h.getSeconds()-p.getSeconds()||h.getMilliseconds()-p.getMilliseconds();return f<0?-1:f>0?1:f}function _e(h,p){m(2,arguments);var f=C(h),_=C(p),L=ce(f,_),K=Math.abs(xt(f,_));f.setDate(f.getDate()-L*K);var gt=ce(f,_)===-L,wt=L*(K-gt);return wt===0?0:wt}function Re(h,p){m(2,arguments);var f=C(h),_=C(p);return f.getTime()-_.getTime()}var Te=36e5;function Ge(h){m(1,arguments);var p=C(h);return p.setHours(23,59,59,999),p}function Ee(h){m(1,arguments);var p=C(h),f=p.getMonth();return p.setFullYear(p.getFullYear(),f+1,0),p.setHours(23,59,59,999),p}function te(h){m(1,arguments);var p=C(h);return Ge(p).getTime()===Ee(p).getTime()}function Vt(h,p){m(2,arguments);var f,_=C(h),L=C(p),K=Ut(_,L),gt=Math.abs(oe(_,L));if(gt<1)f=0;else{_.getMonth()===1&&_.getDate()>27&&_.setDate(30),_.setMonth(_.getMonth()-K*gt);var wt=Ut(_,L)===-K;te(C(h))&&gt===1&&Ut(h,L)===1&&(wt=!1),f=K*(gt-wt)}return f===0?0:f}var St={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function r(h){return function(p){var f=p||{},_=f.width?String(f.width):h.defaultWidth;return h.formats[_]||h.formats[h.defaultWidth]}}var u={date:r({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:r({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:r({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},y={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function w(h){return function(p,f){var _,L=f||{};if((L.context?String(L.context):"standalone")==="formatting"&&h.formattingValues){var K=h.defaultFormattingWidth||h.defaultWidth,gt=L.width?String(L.width):K;_=h.formattingValues[gt]||h.formattingValues[K]}else{var wt=h.defaultWidth,Mt=L.width?String(L.width):h.defaultWidth;_=h.values[Mt]||h.values[wt]}return _[h.argumentCallback?h.argumentCallback(p):p]}}function D(h){return function(p,f){var _=String(p),L=f||{},K=L.width,gt=K&&h.matchPatterns[K]||h.matchPatterns[h.defaultMatchWidth],wt=_.match(gt);if(!wt)return null;var Mt,qt=wt[0],Xt=K&&h.parsePatterns[K]||h.parsePatterns[h.defaultParseWidth];return Mt=Object.prototype.toString.call(Xt)==="[object Array]"?function(Zt,ge){for(var ae=0;ae<Zt.length;ae++)if(ge(Zt[ae]))return ae}(Xt,function(Zt){return Zt.test(qt)}):function(Zt,ge){for(var ae in Zt)if(Zt.hasOwnProperty(ae)&&ge(Zt[ae]))return ae}(Xt,function(Zt){return Zt.test(qt)}),Mt=h.valueCallback?h.valueCallback(Mt):Mt,{value:Mt=L.valueCallback?L.valueCallback(Mt):Mt,rest:_.slice(qt.length)}}}var F,V={code:"en-US",formatDistance:function(h,p,f){var _;return f=f||{},_=typeof St[h]=="string"?St[h]:p===1?St[h].one:St[h].other.replace("{{count}}",p),f.addSuffix?f.comparison>0?"in "+_:_+" ago":_},formatLong:u,formatRelative:function(h,p,f,_){return y[h]},localize:{ordinalNumber:function(h,p){var f=Number(h),_=f%100;if(_>20||_<10)switch(_%10){case 1:return f+"st";case 2:return f+"nd";case 3:return f+"rd"}return f+"th"},era:w({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:w({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(h){return Number(h)-1}}),month:w({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:w({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:w({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(F={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(h){return parseInt(h,10)}},function(h,p){var f=String(h),_=p||{},L=f.match(F.matchPattern);if(!L)return null;var K=L[0],gt=f.match(F.parsePattern);if(!gt)return null;var wt=F.valueCallback?F.valueCallback(gt[0]):gt[0];return{value:wt=_.valueCallback?_.valueCallback(wt):wt,rest:f.slice(K.length)}}),era:D({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:D({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(h){return h+1}}),month:D({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:D({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:D({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function ot(h,p){m(2,arguments);var f=d(p);return W(h,-f)}function Y(h,p){for(var f=h<0?"-":"",_=Math.abs(h).toString();_.length<p;)_="0"+_;return f+_}var it={y:function(h,p){var f=h.getUTCFullYear(),_=f>0?f:1-f;return Y(p==="yy"?_%100:_,p.length)},M:function(h,p){var f=h.getUTCMonth();return p==="M"?String(f+1):Y(f+1,2)},d:function(h,p){return Y(h.getUTCDate(),p.length)},a:function(h,p){var f=h.getUTCHours()/12>=1?"pm":"am";switch(p){case"a":case"aa":return f.toUpperCase();case"aaa":return f;case"aaaaa":return f[0];default:return f==="am"?"a.m.":"p.m."}},h:function(h,p){return Y(h.getUTCHours()%12||12,p.length)},H:function(h,p){return Y(h.getUTCHours(),p.length)},m:function(h,p){return Y(h.getUTCMinutes(),p.length)},s:function(h,p){return Y(h.getUTCSeconds(),p.length)},S:function(h,p){var f=p.length,_=h.getUTCMilliseconds();return Y(Math.floor(_*Math.pow(10,f-3)),p.length)}},kt=864e5;function Et(h){m(1,arguments);var p=1,f=C(h),_=f.getUTCDay(),L=(_<p?7:0)+_-p;return f.setUTCDate(f.getUTCDate()-L),f.setUTCHours(0,0,0,0),f}function ee(h){m(1,arguments);var p=C(h),f=p.getUTCFullYear(),_=new Date(0);_.setUTCFullYear(f+1,0,4),_.setUTCHours(0,0,0,0);var L=Et(_),K=new Date(0);K.setUTCFullYear(f,0,4),K.setUTCHours(0,0,0,0);var gt=Et(K);return p.getTime()>=L.getTime()?f+1:p.getTime()>=gt.getTime()?f:f-1}function Le(h){m(1,arguments);var p=ee(h),f=new Date(0);f.setUTCFullYear(p,0,4),f.setUTCHours(0,0,0,0);var _=Et(f);return _}var ti=6048e5;function Ae(h){m(1,arguments);var p=C(h),f=Et(p).getTime()-Le(p).getTime();return Math.round(f/ti)+1}function We(h,p){m(1,arguments);var f=p||{},_=f.locale,L=_&&_.options&&_.options.weekStartsOn,K=L==null?0:d(L),gt=f.weekStartsOn==null?K:d(f.weekStartsOn);if(!(gt>=0&&gt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var wt=C(h),Mt=wt.getUTCDay(),qt=(Mt<gt?7:0)+Mt-gt;return wt.setUTCDate(wt.getUTCDate()-qt),wt.setUTCHours(0,0,0,0),wt}function Ke(h,p){m(1,arguments);var f=C(h,p),_=f.getUTCFullYear(),L=p||{},K=L.locale,gt=K&&K.options&&K.options.firstWeekContainsDate,wt=gt==null?1:d(gt),Mt=L.firstWeekContainsDate==null?wt:d(L.firstWeekContainsDate);if(!(Mt>=1&&Mt<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var qt=new Date(0);qt.setUTCFullYear(_+1,0,Mt),qt.setUTCHours(0,0,0,0);var Xt=We(qt,p),Zt=new Date(0);Zt.setUTCFullYear(_,0,Mt),Zt.setUTCHours(0,0,0,0);var ge=We(Zt,p);return f.getTime()>=Xt.getTime()?_+1:f.getTime()>=ge.getTime()?_:_-1}function Ie(h,p){m(1,arguments);var f=p||{},_=f.locale,L=_&&_.options&&_.options.firstWeekContainsDate,K=L==null?1:d(L),gt=f.firstWeekContainsDate==null?K:d(f.firstWeekContainsDate),wt=Ke(h,p),Mt=new Date(0);Mt.setUTCFullYear(wt,0,gt),Mt.setUTCHours(0,0,0,0);var qt=We(Mt,p);return qt}var Ze=6048e5;function Ne(h,p){m(1,arguments);var f=C(h),_=We(f,p).getTime()-Ie(f,p).getTime();return Math.round(_/Ze)+1}var ei="midnight",wi="noon",Di="morning",ve="afternoon",N="evening",J="night",et={G:function(h,p,f){var _=h.getUTCFullYear()>0?1:0;switch(p){case"G":case"GG":case"GGG":return f.era(_,{width:"abbreviated"});case"GGGGG":return f.era(_,{width:"narrow"});default:return f.era(_,{width:"wide"})}},y:function(h,p,f){if(p==="yo"){var _=h.getUTCFullYear(),L=_>0?_:1-_;return f.ordinalNumber(L,{unit:"year"})}return it.y(h,p)},Y:function(h,p,f,_){var L=Ke(h,_),K=L>0?L:1-L;return p==="YY"?Y(K%100,2):p==="Yo"?f.ordinalNumber(K,{unit:"year"}):Y(K,p.length)},R:function(h,p){return Y(ee(h),p.length)},u:function(h,p){return Y(h.getUTCFullYear(),p.length)},Q:function(h,p,f){var _=Math.ceil((h.getUTCMonth()+1)/3);switch(p){case"Q":return String(_);case"QQ":return Y(_,2);case"Qo":return f.ordinalNumber(_,{unit:"quarter"});case"QQQ":return f.quarter(_,{width:"abbreviated",context:"formatting"});case"QQQQQ":return f.quarter(_,{width:"narrow",context:"formatting"});default:return f.quarter(_,{width:"wide",context:"formatting"})}},q:function(h,p,f){var _=Math.ceil((h.getUTCMonth()+1)/3);switch(p){case"q":return String(_);case"qq":return Y(_,2);case"qo":return f.ordinalNumber(_,{unit:"quarter"});case"qqq":return f.quarter(_,{width:"abbreviated",context:"standalone"});case"qqqqq":return f.quarter(_,{width:"narrow",context:"standalone"});default:return f.quarter(_,{width:"wide",context:"standalone"})}},M:function(h,p,f){var _=h.getUTCMonth();switch(p){case"M":case"MM":return it.M(h,p);case"Mo":return f.ordinalNumber(_+1,{unit:"month"});case"MMM":return f.month(_,{width:"abbreviated",context:"formatting"});case"MMMMM":return f.month(_,{width:"narrow",context:"formatting"});default:return f.month(_,{width:"wide",context:"formatting"})}},L:function(h,p,f){var _=h.getUTCMonth();switch(p){case"L":return String(_+1);case"LL":return Y(_+1,2);case"Lo":return f.ordinalNumber(_+1,{unit:"month"});case"LLL":return f.month(_,{width:"abbreviated",context:"standalone"});case"LLLLL":return f.month(_,{width:"narrow",context:"standalone"});default:return f.month(_,{width:"wide",context:"standalone"})}},w:function(h,p,f,_){var L=Ne(h,_);return p==="wo"?f.ordinalNumber(L,{unit:"week"}):Y(L,p.length)},I:function(h,p,f){var _=Ae(h);return p==="Io"?f.ordinalNumber(_,{unit:"week"}):Y(_,p.length)},d:function(h,p,f){return p==="do"?f.ordinalNumber(h.getUTCDate(),{unit:"date"}):it.d(h,p)},D:function(h,p,f){var _=function(L){m(1,arguments);var K=C(L),gt=K.getTime();K.setUTCMonth(0,1),K.setUTCHours(0,0,0,0);var wt=K.getTime(),Mt=gt-wt;return Math.floor(Mt/kt)+1}(h);return p==="Do"?f.ordinalNumber(_,{unit:"dayOfYear"}):Y(_,p.length)},E:function(h,p,f){var _=h.getUTCDay();switch(p){case"E":case"EE":case"EEE":return f.day(_,{width:"abbreviated",context:"formatting"});case"EEEEE":return f.day(_,{width:"narrow",context:"formatting"});case"EEEEEE":return f.day(_,{width:"short",context:"formatting"});default:return f.day(_,{width:"wide",context:"formatting"})}},e:function(h,p,f,_){var L=h.getUTCDay(),K=(L-_.weekStartsOn+8)%7||7;switch(p){case"e":return String(K);case"ee":return Y(K,2);case"eo":return f.ordinalNumber(K,{unit:"day"});case"eee":return f.day(L,{width:"abbreviated",context:"formatting"});case"eeeee":return f.day(L,{width:"narrow",context:"formatting"});case"eeeeee":return f.day(L,{width:"short",context:"formatting"});default:return f.day(L,{width:"wide",context:"formatting"})}},c:function(h,p,f,_){var L=h.getUTCDay(),K=(L-_.weekStartsOn+8)%7||7;switch(p){case"c":return String(K);case"cc":return Y(K,p.length);case"co":return f.ordinalNumber(K,{unit:"day"});case"ccc":return f.day(L,{width:"abbreviated",context:"standalone"});case"ccccc":return f.day(L,{width:"narrow",context:"standalone"});case"cccccc":return f.day(L,{width:"short",context:"standalone"});default:return f.day(L,{width:"wide",context:"standalone"})}},i:function(h,p,f){var _=h.getUTCDay(),L=_===0?7:_;switch(p){case"i":return String(L);case"ii":return Y(L,p.length);case"io":return f.ordinalNumber(L,{unit:"day"});case"iii":return f.day(_,{width:"abbreviated",context:"formatting"});case"iiiii":return f.day(_,{width:"narrow",context:"formatting"});case"iiiiii":return f.day(_,{width:"short",context:"formatting"});default:return f.day(_,{width:"wide",context:"formatting"})}},a:function(h,p,f){var _=h.getUTCHours()/12>=1?"pm":"am";switch(p){case"a":case"aa":return f.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"aaa":return f.dayPeriod(_,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return f.dayPeriod(_,{width:"narrow",context:"formatting"});default:return f.dayPeriod(_,{width:"wide",context:"formatting"})}},b:function(h,p,f){var _,L=h.getUTCHours();switch(_=L===12?wi:L===0?ei:L/12>=1?"pm":"am",p){case"b":case"bb":return f.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"bbb":return f.dayPeriod(_,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return f.dayPeriod(_,{width:"narrow",context:"formatting"});default:return f.dayPeriod(_,{width:"wide",context:"formatting"})}},B:function(h,p,f){var _,L=h.getUTCHours();switch(_=L>=17?N:L>=12?ve:L>=4?Di:J,p){case"B":case"BB":case"BBB":return f.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"BBBBB":return f.dayPeriod(_,{width:"narrow",context:"formatting"});default:return f.dayPeriod(_,{width:"wide",context:"formatting"})}},h:function(h,p,f){if(p==="ho"){var _=h.getUTCHours()%12;return _===0&&(_=12),f.ordinalNumber(_,{unit:"hour"})}return it.h(h,p)},H:function(h,p,f){return p==="Ho"?f.ordinalNumber(h.getUTCHours(),{unit:"hour"}):it.H(h,p)},K:function(h,p,f){var _=h.getUTCHours()%12;return p==="Ko"?f.ordinalNumber(_,{unit:"hour"}):Y(_,p.length)},k:function(h,p,f){var _=h.getUTCHours();return _===0&&(_=24),p==="ko"?f.ordinalNumber(_,{unit:"hour"}):Y(_,p.length)},m:function(h,p,f){return p==="mo"?f.ordinalNumber(h.getUTCMinutes(),{unit:"minute"}):it.m(h,p)},s:function(h,p,f){return p==="so"?f.ordinalNumber(h.getUTCSeconds(),{unit:"second"}):it.s(h,p)},S:function(h,p){return it.S(h,p)},X:function(h,p,f,_){var L=(_._originalDate||h).getTimezoneOffset();if(L===0)return"Z";switch(p){case"X":return ut(L);case"XXXX":case"XX":return dt(L);default:return dt(L,":")}},x:function(h,p,f,_){var L=(_._originalDate||h).getTimezoneOffset();switch(p){case"x":return ut(L);case"xxxx":case"xx":return dt(L);default:return dt(L,":")}},O:function(h,p,f,_){var L=(_._originalDate||h).getTimezoneOffset();switch(p){case"O":case"OO":case"OOO":return"GMT"+nt(L,":");default:return"GMT"+dt(L,":")}},z:function(h,p,f,_){var L=(_._originalDate||h).getTimezoneOffset();switch(p){case"z":case"zz":case"zzz":return"GMT"+nt(L,":");default:return"GMT"+dt(L,":")}},t:function(h,p,f,_){var L=_._originalDate||h;return Y(Math.floor(L.getTime()/1e3),p.length)},T:function(h,p,f,_){return Y((_._originalDate||h).getTime(),p.length)}};function nt(h,p){var f=h>0?"-":"+",_=Math.abs(h),L=Math.floor(_/60),K=_%60;if(K===0)return f+String(L);var gt=p||"";return f+String(L)+gt+Y(K,2)}function ut(h,p){return h%60==0?(h>0?"-":"+")+Y(Math.abs(h)/60,2):dt(h,p)}function dt(h,p){var f=p||"",_=h>0?"-":"+",L=Math.abs(h);return _+Y(Math.floor(L/60),2)+f+Y(L%60,2)}var yt=et;function At(h,p){switch(h){case"P":return p.date({width:"short"});case"PP":return p.date({width:"medium"});case"PPP":return p.date({width:"long"});default:return p.date({width:"full"})}}function Tt(h,p){switch(h){case"p":return p.time({width:"short"});case"pp":return p.time({width:"medium"});case"ppp":return p.time({width:"long"});default:return p.time({width:"full"})}}var Bt={p:Tt,P:function(h,p){var f,_=h.match(/(P+)(p+)?/),L=_[1],K=_[2];if(!K)return At(h,p);switch(L){case"P":f=p.dateTime({width:"short"});break;case"PP":f=p.dateTime({width:"medium"});break;case"PPP":f=p.dateTime({width:"long"});break;default:f=p.dateTime({width:"full"})}return f.replace("{{date}}",At(L,p)).replace("{{time}}",Tt(K,p))}},Ot=Bt,le=["D","DD"],ne=["YY","YYYY"];function Se(h){return le.indexOf(h)!==-1}function fe(h){return ne.indexOf(h)!==-1}function xe(h,p,f){if(h==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(p,"`) for formatting years to the input `").concat(f,"`; see: https://git.io/fxCyr"));if(h==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(p,"`) for formatting years to the input `").concat(f,"`; see: https://git.io/fxCyr"));if(h==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(p,"`) for formatting days of the month to the input `").concat(f,"`; see: https://git.io/fxCyr"));if(h==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(p,"`) for formatting days of the month to the input `").concat(f,"`; see: https://git.io/fxCyr"))}var Ce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,os=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,li=/^'([^]*?)'?$/,hi=/''/g,Ki=/[a-zA-Z]/;function Be(h){return h.match(li)[1].replace(hi,"'")}function Hi(h,p){if(h==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var f in p=p||{})p.hasOwnProperty(f)&&(h[f]=p[f]);return h}function ii(h,p,f){m(2,arguments);var _=f||{},L=_.locale,K=L&&L.options&&L.options.weekStartsOn,gt=K==null?0:d(K),wt=_.weekStartsOn==null?gt:d(_.weekStartsOn);if(!(wt>=0&&wt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var Mt=C(h),qt=d(p),Xt=Mt.getUTCDay(),Zt=qt%7,ge=(Zt+7)%7,ae=(ge<wt?7:0)+qt-Xt;return Mt.setUTCDate(Mt.getUTCDate()+ae),Mt}var _i=/^(1[0-2]|0?\d)/,ci=/^(3[0-1]|[0-2]?\d)/,di=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Zi=/^(5[0-3]|[0-4]?\d)/,$e=/^(2[0-3]|[0-1]?\d)/,Ui=/^(2[0-4]|[0-1]?\d)/,Ji=/^(1[0-1]|0?\d)/,ji=/^(1[0-2]|0?\d)/,Pi=/^[0-5]?\d/,He=/^[0-5]?\d/,Ai=/^\d/,be=/^\d{1,2}/,Ye=/^\d{1,3}/,ts=/^\d{1,4}/,ki=/^-?\d+/,mi=/^-?\d/,bi=/^-?\d{1,2}/,Ii=/^-?\d{1,3}/,ui=/^-?\d{1,4}/,yi=/^([+-])(\d{2})(\d{2})?|Z/,Vi=/^([+-])(\d{2})(\d{2})|Z/,Ri=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Oi=/^([+-])(\d{2}):(\d{2})|Z/,ds=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function de(h,p,f){var _=p.match(h);if(!_)return null;var L=parseInt(_[0],10);return{value:f?f(L):L,rest:p.slice(_[0].length)}}function Ue(h,p){var f=p.match(h);return f?f[0]==="Z"?{value:0,rest:p.slice(1)}:{value:(f[1]==="+"?1:-1)*(36e5*(f[2]?parseInt(f[2],10):0)+6e4*(f[3]?parseInt(f[3],10):0)+1e3*(f[5]?parseInt(f[5],10):0)),rest:p.slice(f[0].length)}:null}function Ni(h,p){return de(ki,h,p)}function we(h,p,f){switch(h){case 1:return de(Ai,p,f);case 2:return de(be,p,f);case 3:return de(Ye,p,f);case 4:return de(ts,p,f);default:return de(new RegExp("^\\d{1,"+h+"}"),p,f)}}function es(h,p,f){switch(h){case 1:return de(mi,p,f);case 2:return de(bi,p,f);case 3:return de(Ii,p,f);case 4:return de(ui,p,f);default:return de(new RegExp("^-?\\d{1,"+h+"}"),p,f)}}function E(h){switch(h){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function M(h,p){var f,_=p>0,L=_?p:1-p;if(L<=50)f=h||100;else{var K=L+50;f=h+100*Math.floor(K/100)-(h>=K%100?100:0)}return _?f:1-f}var z=[31,28,31,30,31,30,31,31,30,31,30,31],H=[31,29,31,30,31,30,31,31,30,31,30,31];function j(h){return h%400==0||h%4==0&&h%100!=0}var U={G:{priority:140,parse:function(h,p,f,_){switch(p){case"G":case"GG":case"GGG":return f.era(h,{width:"abbreviated"})||f.era(h,{width:"narrow"});case"GGGGG":return f.era(h,{width:"narrow"});default:return f.era(h,{width:"wide"})||f.era(h,{width:"abbreviated"})||f.era(h,{width:"narrow"})}},set:function(h,p,f,_){return p.era=f,h.setUTCFullYear(f,0,1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(h,p,f,_){var L=function(K){return{year:K,isTwoDigitYear:p==="yy"}};switch(p){case"y":return we(4,h,L);case"yo":return f.ordinalNumber(h,{unit:"year",valueCallback:L});default:return we(p.length,h,L)}},validate:function(h,p,f){return p.isTwoDigitYear||p.year>0},set:function(h,p,f,_){var L=h.getUTCFullYear();if(f.isTwoDigitYear){var K=M(f.year,L);return h.setUTCFullYear(K,0,1),h.setUTCHours(0,0,0,0),h}var gt="era"in p&&p.era!==1?1-f.year:f.year;return h.setUTCFullYear(gt,0,1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(h,p,f,_){var L=function(K){return{year:K,isTwoDigitYear:p==="YY"}};switch(p){case"Y":return we(4,h,L);case"Yo":return f.ordinalNumber(h,{unit:"year",valueCallback:L});default:return we(p.length,h,L)}},validate:function(h,p,f){return p.isTwoDigitYear||p.year>0},set:function(h,p,f,_){var L=Ke(h,_);if(f.isTwoDigitYear){var K=M(f.year,L);return h.setUTCFullYear(K,0,_.firstWeekContainsDate),h.setUTCHours(0,0,0,0),We(h,_)}var gt="era"in p&&p.era!==1?1-f.year:f.year;return h.setUTCFullYear(gt,0,_.firstWeekContainsDate),h.setUTCHours(0,0,0,0),We(h,_)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(h,p,f,_){return es(p==="R"?4:p.length,h)},set:function(h,p,f,_){var L=new Date(0);return L.setUTCFullYear(f,0,4),L.setUTCHours(0,0,0,0),Et(L)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(h,p,f,_){return es(p==="u"?4:p.length,h)},set:function(h,p,f,_){return h.setUTCFullYear(f,0,1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(h,p,f,_){switch(p){case"Q":case"QQ":return we(p.length,h);case"Qo":return f.ordinalNumber(h,{unit:"quarter"});case"QQQ":return f.quarter(h,{width:"abbreviated",context:"formatting"})||f.quarter(h,{width:"narrow",context:"formatting"});case"QQQQQ":return f.quarter(h,{width:"narrow",context:"formatting"});default:return f.quarter(h,{width:"wide",context:"formatting"})||f.quarter(h,{width:"abbreviated",context:"formatting"})||f.quarter(h,{width:"narrow",context:"formatting"})}},validate:function(h,p,f){return p>=1&&p<=4},set:function(h,p,f,_){return h.setUTCMonth(3*(f-1),1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(h,p,f,_){switch(p){case"q":case"qq":return we(p.length,h);case"qo":return f.ordinalNumber(h,{unit:"quarter"});case"qqq":return f.quarter(h,{width:"abbreviated",context:"standalone"})||f.quarter(h,{width:"narrow",context:"standalone"});case"qqqqq":return f.quarter(h,{width:"narrow",context:"standalone"});default:return f.quarter(h,{width:"wide",context:"standalone"})||f.quarter(h,{width:"abbreviated",context:"standalone"})||f.quarter(h,{width:"narrow",context:"standalone"})}},validate:function(h,p,f){return p>=1&&p<=4},set:function(h,p,f,_){return h.setUTCMonth(3*(f-1),1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(h,p,f,_){var L=function(K){return K-1};switch(p){case"M":return de(_i,h,L);case"MM":return we(2,h,L);case"Mo":return f.ordinalNumber(h,{unit:"month",valueCallback:L});case"MMM":return f.month(h,{width:"abbreviated",context:"formatting"})||f.month(h,{width:"narrow",context:"formatting"});case"MMMMM":return f.month(h,{width:"narrow",context:"formatting"});default:return f.month(h,{width:"wide",context:"formatting"})||f.month(h,{width:"abbreviated",context:"formatting"})||f.month(h,{width:"narrow",context:"formatting"})}},validate:function(h,p,f){return p>=0&&p<=11},set:function(h,p,f,_){return h.setUTCMonth(f,1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(h,p,f,_){var L=function(K){return K-1};switch(p){case"L":return de(_i,h,L);case"LL":return we(2,h,L);case"Lo":return f.ordinalNumber(h,{unit:"month",valueCallback:L});case"LLL":return f.month(h,{width:"abbreviated",context:"standalone"})||f.month(h,{width:"narrow",context:"standalone"});case"LLLLL":return f.month(h,{width:"narrow",context:"standalone"});default:return f.month(h,{width:"wide",context:"standalone"})||f.month(h,{width:"abbreviated",context:"standalone"})||f.month(h,{width:"narrow",context:"standalone"})}},validate:function(h,p,f){return p>=0&&p<=11},set:function(h,p,f,_){return h.setUTCMonth(f,1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(h,p,f,_){switch(p){case"w":return de(Zi,h);case"wo":return f.ordinalNumber(h,{unit:"week"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=1&&p<=53},set:function(h,p,f,_){return We(function(L,K,gt){m(2,arguments);var wt=C(L),Mt=d(K),qt=Ne(wt,gt)-Mt;return wt.setUTCDate(wt.getUTCDate()-7*qt),wt}(h,f,_),_)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(h,p,f,_){switch(p){case"I":return de(Zi,h);case"Io":return f.ordinalNumber(h,{unit:"week"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=1&&p<=53},set:function(h,p,f,_){return Et(function(L,K){m(2,arguments);var gt=C(L),wt=d(K),Mt=Ae(gt)-wt;return gt.setUTCDate(gt.getUTCDate()-7*Mt),gt}(h,f,_),_)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(h,p,f,_){switch(p){case"d":return de(ci,h);case"do":return f.ordinalNumber(h,{unit:"date"});default:return we(p.length,h)}},validate:function(h,p,f){var _=j(h.getUTCFullYear()),L=h.getUTCMonth();return _?p>=1&&p<=H[L]:p>=1&&p<=z[L]},set:function(h,p,f,_){return h.setUTCDate(f),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(h,p,f,_){switch(p){case"D":case"DD":return de(di,h);case"Do":return f.ordinalNumber(h,{unit:"date"});default:return we(p.length,h)}},validate:function(h,p,f){return j(h.getUTCFullYear())?p>=1&&p<=366:p>=1&&p<=365},set:function(h,p,f,_){return h.setUTCMonth(0,f),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(h,p,f,_){switch(p){case"E":case"EE":case"EEE":return f.day(h,{width:"abbreviated",context:"formatting"})||f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"});case"EEEEE":return f.day(h,{width:"narrow",context:"formatting"});case"EEEEEE":return f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"});default:return f.day(h,{width:"wide",context:"formatting"})||f.day(h,{width:"abbreviated",context:"formatting"})||f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"})}},validate:function(h,p,f){return p>=0&&p<=6},set:function(h,p,f,_){return(h=ii(h,f,_)).setUTCHours(0,0,0,0),h},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(h,p,f,_){var L=function(K){var gt=7*Math.floor((K-1)/7);return(K+_.weekStartsOn+6)%7+gt};switch(p){case"e":case"ee":return we(p.length,h,L);case"eo":return f.ordinalNumber(h,{unit:"day",valueCallback:L});case"eee":return f.day(h,{width:"abbreviated",context:"formatting"})||f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"});case"eeeee":return f.day(h,{width:"narrow",context:"formatting"});case"eeeeee":return f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"});default:return f.day(h,{width:"wide",context:"formatting"})||f.day(h,{width:"abbreviated",context:"formatting"})||f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"})}},validate:function(h,p,f){return p>=0&&p<=6},set:function(h,p,f,_){return(h=ii(h,f,_)).setUTCHours(0,0,0,0),h},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(h,p,f,_){var L=function(K){var gt=7*Math.floor((K-1)/7);return(K+_.weekStartsOn+6)%7+gt};switch(p){case"c":case"cc":return we(p.length,h,L);case"co":return f.ordinalNumber(h,{unit:"day",valueCallback:L});case"ccc":return f.day(h,{width:"abbreviated",context:"standalone"})||f.day(h,{width:"short",context:"standalone"})||f.day(h,{width:"narrow",context:"standalone"});case"ccccc":return f.day(h,{width:"narrow",context:"standalone"});case"cccccc":return f.day(h,{width:"short",context:"standalone"})||f.day(h,{width:"narrow",context:"standalone"});default:return f.day(h,{width:"wide",context:"standalone"})||f.day(h,{width:"abbreviated",context:"standalone"})||f.day(h,{width:"short",context:"standalone"})||f.day(h,{width:"narrow",context:"standalone"})}},validate:function(h,p,f){return p>=0&&p<=6},set:function(h,p,f,_){return(h=ii(h,f,_)).setUTCHours(0,0,0,0),h},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(h,p,f,_){var L=function(K){return K===0?7:K};switch(p){case"i":case"ii":return we(p.length,h);case"io":return f.ordinalNumber(h,{unit:"day"});case"iii":return f.day(h,{width:"abbreviated",context:"formatting",valueCallback:L})||f.day(h,{width:"short",context:"formatting",valueCallback:L})||f.day(h,{width:"narrow",context:"formatting",valueCallback:L});case"iiiii":return f.day(h,{width:"narrow",context:"formatting",valueCallback:L});case"iiiiii":return f.day(h,{width:"short",context:"formatting",valueCallback:L})||f.day(h,{width:"narrow",context:"formatting",valueCallback:L});default:return f.day(h,{width:"wide",context:"formatting",valueCallback:L})||f.day(h,{width:"abbreviated",context:"formatting",valueCallback:L})||f.day(h,{width:"short",context:"formatting",valueCallback:L})||f.day(h,{width:"narrow",context:"formatting",valueCallback:L})}},validate:function(h,p,f){return p>=1&&p<=7},set:function(h,p,f,_){return h=function(L,K){m(2,arguments);var gt=d(K);gt%7==0&&(gt-=7);var wt=1,Mt=C(L),qt=Mt.getUTCDay(),Xt=((gt%7+7)%7<wt?7:0)+gt-qt;return Mt.setUTCDate(Mt.getUTCDate()+Xt),Mt}(h,f,_),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(h,p,f,_){switch(p){case"a":case"aa":case"aaa":return f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"});case"aaaaa":return f.dayPeriod(h,{width:"narrow",context:"formatting"});default:return f.dayPeriod(h,{width:"wide",context:"formatting"})||f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"})}},set:function(h,p,f,_){return h.setUTCHours(E(f),0,0,0),h},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(h,p,f,_){switch(p){case"b":case"bb":case"bbb":return f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"});case"bbbbb":return f.dayPeriod(h,{width:"narrow",context:"formatting"});default:return f.dayPeriod(h,{width:"wide",context:"formatting"})||f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"})}},set:function(h,p,f,_){return h.setUTCHours(E(f),0,0,0),h},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(h,p,f,_){switch(p){case"B":case"BB":case"BBB":return f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"});case"BBBBB":return f.dayPeriod(h,{width:"narrow",context:"formatting"});default:return f.dayPeriod(h,{width:"wide",context:"formatting"})||f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"})}},set:function(h,p,f,_){return h.setUTCHours(E(f),0,0,0),h},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(h,p,f,_){switch(p){case"h":return de(ji,h);case"ho":return f.ordinalNumber(h,{unit:"hour"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=1&&p<=12},set:function(h,p,f,_){var L=h.getUTCHours()>=12;return L&&f<12?h.setUTCHours(f+12,0,0,0):L||f!==12?h.setUTCHours(f,0,0,0):h.setUTCHours(0,0,0,0),h},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(h,p,f,_){switch(p){case"H":return de($e,h);case"Ho":return f.ordinalNumber(h,{unit:"hour"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=0&&p<=23},set:function(h,p,f,_){return h.setUTCHours(f,0,0,0),h},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(h,p,f,_){switch(p){case"K":return de(Ji,h);case"Ko":return f.ordinalNumber(h,{unit:"hour"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=0&&p<=11},set:function(h,p,f,_){return h.getUTCHours()>=12&&f<12?h.setUTCHours(f+12,0,0,0):h.setUTCHours(f,0,0,0),h},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(h,p,f,_){switch(p){case"k":return de(Ui,h);case"ko":return f.ordinalNumber(h,{unit:"hour"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=1&&p<=24},set:function(h,p,f,_){var L=f<=24?f%24:f;return h.setUTCHours(L,0,0,0),h},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(h,p,f,_){switch(p){case"m":return de(Pi,h);case"mo":return f.ordinalNumber(h,{unit:"minute"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=0&&p<=59},set:function(h,p,f,_){return h.setUTCMinutes(f,0,0),h},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(h,p,f,_){switch(p){case"s":return de(He,h);case"so":return f.ordinalNumber(h,{unit:"second"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=0&&p<=59},set:function(h,p,f,_){return h.setUTCSeconds(f,0),h},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(h,p,f,_){return we(p.length,h,function(L){return Math.floor(L*Math.pow(10,3-p.length))})},set:function(h,p,f,_){return h.setUTCMilliseconds(f),h},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(h,p,f,_){switch(p){case"X":return Ue(yi,h);case"XX":return Ue(Vi,h);case"XXXX":return Ue(Ri,h);case"XXXXX":return Ue(ds,h);default:return Ue(Oi,h)}},set:function(h,p,f,_){return p.timestampIsSet?h:new Date(h.getTime()-f)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(h,p,f,_){switch(p){case"x":return Ue(yi,h);case"xx":return Ue(Vi,h);case"xxxx":return Ue(Ri,h);case"xxxxx":return Ue(ds,h);default:return Ue(Oi,h)}},set:function(h,p,f,_){return p.timestampIsSet?h:new Date(h.getTime()-f)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(h,p,f,_){return Ni(h)},set:function(h,p,f,_){return[new Date(1e3*f),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(h,p,f,_){return Ni(h)},set:function(h,p,f,_){return[new Date(f),{timestampIsSet:!0}]},incompatibleTokens:"*"}},G=U,rt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ct=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,st=/^'([^]*?)'?$/,pt=/''/g,at=/\S/,vt=/[a-zA-Z]/;function zt(h,p){if(p.timestampIsSet)return h;var f=new Date(0);return f.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),f.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),f}function Lt(h){return h.match(st)[1].replace(pt,"'")}var _t=36e5,mt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Pt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Yt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Qt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function se(h){var p,f={},_=h.split(mt.dateTimeDelimiter);if(_.length>2)return f;if(/:/.test(_[0])?(f.date=null,p=_[0]):(f.date=_[0],p=_[1],mt.timeZoneDelimiter.test(f.date)&&(f.date=h.split(mt.timeZoneDelimiter)[0],p=h.substr(f.date.length,h.length))),p){var L=mt.timezone.exec(p);L?(f.time=p.replace(L[1],""),f.timezone=L[1]):f.time=p}return f}function he(h,p){var f=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+p)+"})|(\\d{2}|[+-]\\d{"+(2+p)+"})$)"),_=h.match(f);if(!_)return{year:null};var L=_[1]&&parseInt(_[1]),K=_[2]&&parseInt(_[2]);return{year:K==null?L:100*K,restDateString:h.slice((_[1]||_[2]).length)}}function re(h,p){if(p===null)return null;var f=h.match(Pt);if(!f)return null;var _=!!f[4],L=Kt(f[1]),K=Kt(f[2])-1,gt=Kt(f[3]),wt=Kt(f[4]),Mt=Kt(f[5])-1;if(_)return function(Xt,Zt,ge){return Zt>=1&&Zt<=53&&ge>=0&&ge<=6}(0,wt,Mt)?function(Xt,Zt,ge){var ae=new Date(0);ae.setUTCFullYear(Xt,0,4);var si=ae.getUTCDay()||7,Xe=7*(Zt-1)+ge+1-si;return ae.setUTCDate(ae.getUTCDate()+Xe),ae}(p,wt,Mt):new Date(NaN);var qt=new Date(0);return function(Xt,Zt,ge){return Zt>=0&&Zt<=11&&ge>=1&&ge<=(S[Zt]||(O(Xt)?29:28))}(p,K,gt)&&function(Xt,Zt){return Zt>=1&&Zt<=(O(Xt)?366:365)}(p,L)?(qt.setUTCFullYear(p,K,Math.max(L,gt)),qt):new Date(NaN)}function Kt(h){return h?parseInt(h):1}function ke(h){var p=h.match(Yt);if(!p)return null;var f=me(p[1]),_=me(p[2]),L=me(p[3]);return function(K,gt,wt){return K===24?gt===0&&wt===0:wt>=0&&wt<60&&gt>=0&&gt<60&&K>=0&&K<25}(f,_,L)?f*_t+6e4*_+1e3*L:NaN}function me(h){return h&&parseFloat(h.replace(",","."))||0}function De(h){if(h==="Z")return 0;var p=h.match(Qt);if(!p)return 0;var f=p[1]==="+"?-1:1,_=parseInt(p[2]),L=p[3]&&parseInt(p[3])||0;return function(K,gt){return gt>=0&&gt<=59}(0,L)?f*(_*_t+6e4*L):NaN}var S=[31,null,31,30,31,30,31,31,30,31,30,31];function O(h){return h%400==0||h%4==0&&h%100}let B={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};R._adapters._date.override({_id:"date-fns",formats:function(){return B},parse:function(h,p){if(h==null)return null;let f=typeof h;return f==="number"||h instanceof Date?h=C(h):f==="string"&&(h=typeof p=="string"?function(_,L,K,gt){m(3,arguments);var wt=String(_),Mt=String(L),qt=gt||{},Xt=qt.locale||V;if(!Xt.match)throw new RangeError("locale must contain match property");var Zt=Xt.options&&Xt.options.firstWeekContainsDate,ge=Zt==null?1:d(Zt),ae=qt.firstWeekContainsDate==null?ge:d(qt.firstWeekContainsDate);if(!(ae>=1&&ae<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var si=Xt.options&&Xt.options.weekStartsOn,Xe=si==null?0:d(si),xi=qt.weekStartsOn==null?Xe:d(qt.weekStartsOn);if(!(xi>=0&&xi<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(Mt==="")return wt===""?C(K):new Date(NaN);var Qe,ni={firstWeekContainsDate:ae,weekStartsOn:xi,locale:Xt},Oe=[{priority:10,subPriority:-1,set:zt,index:0}],gi=Mt.match(ct).map(function(Je){var Mi=Je[0];return Mi==="p"||Mi==="P"?(0,Ot[Mi])(Je,Xt.formatLong,ni):Je}).join("").match(rt),vi=[];for(Qe=0;Qe<gi.length;Qe++){var je=gi[Qe];!qt.useAdditionalWeekYearTokens&&fe(je)&&xe(je,Mt,_),!qt.useAdditionalDayOfYearTokens&&Se(je)&&xe(je,Mt,_);var $i=je[0],is=G[$i];if(is){var ln=is.incompatibleTokens;if(Array.isArray(ln)){for(var _s=void 0,ks=0;ks<vi.length;ks++){var $s=vi[ks].token;if(ln.indexOf($s)!==-1||$s===$i){_s=vi[ks];break}}if(_s)throw new RangeError("The format string mustn't contain `".concat(_s.fullToken,"` and `").concat(je,"` at the same time"))}else if(is.incompatibleTokens==="*"&&vi.length)throw new RangeError("The format string mustn't contain `".concat(je,"` and any other token at the same time"));vi.push({token:$i,fullToken:je});var Os=is.parse(wt,je,Xt.match,ni);if(!Os)return new Date(NaN);Oe.push({priority:is.priority,subPriority:is.subPriority||0,set:is.set,validate:is.validate,value:Os.value,index:Oe.length}),wt=Os.rest}else{if($i.match(vt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$i+"`");if(je==="''"?je="'":$i==="'"&&(je=Lt(je)),wt.indexOf(je)!==0)return new Date(NaN);wt=wt.slice(je.length)}}if(wt.length>0&&at.test(wt))return new Date(NaN);var zs=Oe.map(function(Je){return Je.priority}).sort(function(Je,Mi){return Mi-Je}).filter(function(Je,Mi,gs){return gs.indexOf(Je)===Mi}).map(function(Je){return Oe.filter(function(Mi){return Mi.priority===Je}).sort(function(Mi,gs){return gs.subPriority-Mi.subPriority})}).map(function(Je){return Je[0]}),Fs=C(K);if(isNaN(Fs))return new Date(NaN);var Fi=ot(Fs,Dt(Fs)),Ws={};for(Qe=0;Qe<zs.length;Qe++){var us=zs[Qe];if(us.validate&&!us.validate(Fi,us.value,ni))return new Date(NaN);var Ms=us.set(Fi,Ws,us.value,ni);Ms[0]?(Fi=Ms[0],Hi(Ws,Ms[1])):Fi=Ms}return Fi}(h,p,new Date,this.options):function(_,L){m(1,arguments);var K=L||{},gt=K.additionalDigits==null?2:d(K.additionalDigits);if(gt!==2&&gt!==1&&gt!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(typeof _!="string"&&Object.prototype.toString.call(_)!=="[object String]")return new Date(NaN);var wt,Mt=se(_);if(Mt.date){var qt=he(Mt.date,gt);wt=re(qt.restDateString,qt.year)}if(isNaN(wt)||!wt)return new Date(NaN);var Xt,Zt=wt.getTime(),ge=0;if(Mt.time&&(ge=ke(Mt.time),isNaN(ge)||ge===null))return new Date(NaN);if(!Mt.timezone){var ae=new Date(Zt+ge),si=new Date(0);return si.setFullYear(ae.getUTCFullYear(),ae.getUTCMonth(),ae.getUTCDate()),si.setHours(ae.getUTCHours(),ae.getUTCMinutes(),ae.getUTCSeconds(),ae.getUTCMilliseconds()),si}return Xt=De(Mt.timezone),isNaN(Xt)?new Date(NaN):new Date(Zt+ge+Xt)}(h,this.options)),Jt(h)?h.getTime():null},format:function(h,p){return function(f,_,L){m(2,arguments);var K=String(_),gt=L||{},wt=gt.locale||V,Mt=wt.options&&wt.options.firstWeekContainsDate,qt=Mt==null?1:d(Mt),Xt=gt.firstWeekContainsDate==null?qt:d(gt.firstWeekContainsDate);if(!(Xt>=1&&Xt<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Zt=wt.options&&wt.options.weekStartsOn,ge=Zt==null?0:d(Zt),ae=gt.weekStartsOn==null?ge:d(gt.weekStartsOn);if(!(ae>=0&&ae<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!wt.localize)throw new RangeError("locale must contain localize property");if(!wt.formatLong)throw new RangeError("locale must contain formatLong property");var si=C(f);if(!Jt(si))throw new RangeError("Invalid time value");var Xe=Dt(si),xi=ot(si,Xe),Qe={firstWeekContainsDate:Xt,weekStartsOn:ae,locale:wt,_originalDate:si},ni=K.match(os).map(function(Oe){var gi=Oe[0];return gi==="p"||gi==="P"?(0,Ot[gi])(Oe,wt.formatLong,Qe):Oe}).join("").match(Ce).map(function(Oe){if(Oe==="''")return"'";var gi=Oe[0];if(gi==="'")return Be(Oe);var vi=yt[gi];if(vi)return!gt.useAdditionalWeekYearTokens&&fe(Oe)&&xe(Oe,_,f),!gt.useAdditionalDayOfYearTokens&&Se(Oe)&&xe(Oe,_,f),vi(xi,Oe,wt.localize,Qe);if(gi.match(Ki))throw new RangeError("Format string contains an unescaped latin alphabet character `"+gi+"`");return Oe}).join("");return ni}(h,p,this.options)},add:function(h,p,f){switch(f){case"millisecond":return W(h,p);case"second":return function(_,L){m(2,arguments);var K=d(L);return W(_,1e3*K)}(h,p);case"minute":return function(_,L){m(2,arguments);var K=d(L);return W(_,6e4*K)}(h,p);case"hour":return function(_,L){m(2,arguments);var K=d(L);return W(_,K*ht)}(h,p);case"day":return I(h,p);case"week":return function(_,L){m(2,arguments);var K=d(L),gt=7*K;return I(_,gt)}(h,p);case"month":return Q(h,p);case"quarter":return function(_,L){m(2,arguments);var K=d(L),gt=3*K;return Q(_,gt)}(h,p);case"year":return function(_,L){m(2,arguments);var K=d(L);return Q(_,12*K)}(h,p);default:return h}},diff:function(h,p,f){switch(f){case"millisecond":return Re(h,p);case"second":return function(_,L){m(2,arguments);var K=Re(_,L)/1e3;return K>0?Math.floor(K):Math.ceil(K)}(h,p);case"minute":return function(_,L){m(2,arguments);var K=Re(_,L)/6e4;return K>0?Math.floor(K):Math.ceil(K)}(h,p);case"hour":return function(_,L){m(2,arguments);var K=Re(_,L)/Te;return K>0?Math.floor(K):Math.ceil(K)}(h,p);case"day":return _e(h,p);case"week":return function(_,L){m(2,arguments);var K=_e(_,L)/7;return K>0?Math.floor(K):Math.ceil(K)}(h,p);case"month":return Vt(h,p);case"quarter":return function(_,L){m(2,arguments);var K=Vt(_,L)/3;return K>0?Math.floor(K):Math.ceil(K)}(h,p);case"year":return function(_,L){m(2,arguments);var K=C(_),gt=C(L),wt=Ut(K,gt),Mt=Math.abs(Pe(K,gt));K.setFullYear("1584"),gt.setFullYear("1584");var qt=Ut(K,gt)===-wt,Xt=wt*(Mt-qt);return Xt===0?0:Xt}(h,p);default:return 0}},startOf:function(h,p,f){switch(p){case"second":return function(_){m(1,arguments);var L=C(_);return L.setMilliseconds(0),L}(h);case"minute":return function(_){m(1,arguments);var L=C(_);return L.setSeconds(0,0),L}(h);case"hour":return function(_){m(1,arguments);var L=C(_);return L.setMinutes(0,0,0),L}(h);case"day":return It(h);case"week":return q(h);case"isoWeek":return q(h,{weekStartsOn:+f});case"month":return function(_){m(1,arguments);var L=C(_);return L.setDate(1),L.setHours(0,0,0,0),L}(h);case"quarter":return function(_){m(1,arguments);var L=C(_),K=L.getMonth(),gt=K-K%3;return L.setMonth(gt,1),L.setHours(0,0,0,0),L}(h);case"year":return function(_){m(1,arguments);var L=C(_),K=new Date(0);return K.setFullYear(L.getFullYear(),0,1),K.setHours(0,0,0,0),K}(h);default:return h}},endOf:function(h,p){switch(p){case"second":return function(f){m(1,arguments);var _=C(f);return _.setMilliseconds(999),_}(h);case"minute":return function(f){m(1,arguments);var _=C(f);return _.setSeconds(59,999),_}(h);case"hour":return function(f){m(1,arguments);var _=C(f);return _.setMinutes(59,59,999),_}(h);case"day":return Ge(h);case"week":return function(f,_){m(1,arguments);var L=_||{},K=L.locale,gt=K&&K.options&&K.options.weekStartsOn,wt=gt==null?0:d(gt),Mt=L.weekStartsOn==null?wt:d(L.weekStartsOn);if(!(Mt>=0&&Mt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var qt=C(f),Xt=qt.getDay(),Zt=6+(Xt<Mt?-7:0)-(Xt-Mt);return qt.setDate(qt.getDate()+Zt),qt.setHours(23,59,59,999),qt}(h);case"month":return Ee(h);case"quarter":return function(f){m(1,arguments);var _=C(f),L=_.getMonth(),K=L-L%3+3;return _.setMonth(K,0),_.setHours(23,59,59,999),_}(h);case"year":return function(f){m(1,arguments);var _=C(f),L=_.getFullYear();return _.setFullYear(L+1,0,0),_.setHours(23,59,59,999),_}(h);default:return h}}})});(function(R,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(ys("chart.js"),ys("hammerjs"),ys("chart.js/helpers")):typeof define=="function"&&define.amd?define(["chart.js","hammerjs","chart.js/helpers"],d):(R=typeof globalThis<"u"?globalThis:R||self).ChartZoom=d(R.Chart,R.Hammer,R.Chart.helpers)})(void 0,function(R,d,m){"use strict";function C(N){return N&&typeof N=="object"&&"default"in N?N:{default:N}}var I=C(d);let Q=N=>N&&N.enabled&&N.modifierKey,W=(N,J)=>N&&J[N+"Key"],ht=(N,J)=>N&&!J[N+"Key"];function q(N,J,et){return N===void 0||(typeof N=="string"?N.indexOf(J)!==-1:typeof N=="function"&&N({chart:et}).indexOf(J)!==-1)}function Dt(N,J){return typeof N=="function"&&(N=N({chart:J})),typeof N=="string"?{x:N.indexOf("x")!==-1,y:N.indexOf("y")!==-1}:{x:!1,y:!1}}function It(N,J,et){let{mode:nt="xy",scaleMode:ut,overScaleMode:dt}=N||{},yt=function({x:Ot,y:le},ne){let Se=ne.scales,fe=Object.keys(Se);for(let xe=0;xe<fe.length;xe++){let Ce=Se[fe[xe]];if(le>=Ce.top&&le<=Ce.bottom&&Ot>=Ce.left&&Ot<=Ce.right)return Ce}return null}(J,et),At=Dt(nt,et),Tt=Dt(ut,et);if(dt){let Ot=Dt(dt,et);for(let le of["x","y"])Ot[le]&&(Tt[le]=At[le],At[le]=!1)}if(yt&&Tt[yt.axis])return[yt];let Bt=[];return m.each(et.scales,function(Ot){At[Ot.axis]&&Bt.push(Ot)}),Bt}let bt=new WeakMap;function xt(N){let J=bt.get(N);return J||(J={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{}},bt.set(N,J)),J}function Ut(N,J,et){let nt=N.max-N.min,ut=nt*(J-1),dt=N.isHorizontal()?et.x:et.y,yt=Math.max(0,Math.min(1,(N.getValueForPixel(dt)-N.min)/nt||0));return{min:ut*yt,max:ut*(1-yt)}}function Jt(N,J,et,nt,ut){let dt=et[nt];if(dt==="original"){let yt=N.originalScaleLimits[J.id][nt];dt=m.valueOrDefault(yt.options,yt.scale)}return m.valueOrDefault(dt,ut)}function oe(N,{min:J,max:et},nt,ut=!1){let dt=xt(N.chart),{id:yt,axis:At,options:Tt}=N,Bt=nt&&(nt[yt]||nt[At])||{},{minRange:Ot=0}=Bt,le=Jt(dt,N,Bt,"min",-1/0),ne=Jt(dt,N,Bt,"max",1/0),Se=ut?Math.max(et-J,Ot):N.max-N.min,fe=(Se-et+J)/2;return et+=fe,(J-=fe)<le?(J=le,et=Math.min(le+Se,ne)):et>ne&&(et=ne,J=Math.max(ne-Se,le)),Tt.min=J,Tt.max=et,dt.updatedScaleLimits[N.id]={min:J,max:et},N.parse(J)!==N.min||N.parse(et)!==N.max}let Pe=N=>N===0||isNaN(N)?0:N<0?Math.min(Math.round(N),-1):Math.max(Math.round(N),1),ce={second:500,minute:3e4,hour:18e5,day:432e5,week:3024e5,month:1296e6,quarter:5184e6,year:157248e5};function _e(N,J,et,nt=!1){let{min:ut,max:dt,options:yt}=N,At=yt.time&&yt.time.round,Tt=ce[At]||0,Bt=N.getValueForPixel(N.getPixelForValue(ut+Tt)-J),Ot=N.getValueForPixel(N.getPixelForValue(dt+Tt)-J),{min:le=-1/0,max:ne=1/0}=nt&&et&&et[N.axis]||{};return!!(isNaN(Bt)||isNaN(Ot)||Bt<le||Ot>ne)||oe(N,{min:Bt,max:Ot},et,nt)}function Re(N,J,et){return _e(N,J,et,!0)}let Te={category:function(N,J,et,nt){let ut=Ut(N,J,et);return N.min===N.max&&J<1&&function(dt){let yt=dt.getLabels().length-1;dt.min>0&&(dt.min-=1),dt.max<yt&&(dt.max+=1)}(N),oe(N,{min:N.min+Pe(ut.min),max:N.max-Pe(ut.max)},nt,!0)},default:function(N,J,et,nt){let ut=Ut(N,J,et);return oe(N,{min:N.min+ut.min,max:N.max-ut.max},nt,!0)}},Ge={default:function(N,J,et,nt){oe(N,function(ut,dt,yt){let At=ut.getValueForPixel(dt),Tt=ut.getValueForPixel(yt);return{min:Math.min(At,Tt),max:Math.max(At,Tt)}}(N,J,et),nt,!0)}},Ee={category:function(N,J,et){let nt=N.getLabels().length-1,{min:ut,max:dt}=N,yt=Math.max(dt-ut,1),At=Math.round(function(Ot){return Ot.isHorizontal()?Ot.width:Ot.height}(N)/Math.max(yt,10)),Tt=Math.round(Math.abs(J/At)),Bt;return J<-At?(dt=Math.min(dt+Tt,nt),ut=yt===1?dt:dt-yt,Bt=dt===nt):J>At&&(ut=Math.max(0,ut-Tt),dt=yt===1?ut:ut+yt,Bt=ut===0),oe(N,{min:ut,max:dt},et)||Bt},default:_e,logarithmic:Re,timeseries:Re};function te(N,J){m.each(N,(et,nt)=>{J[nt]||delete N[nt]})}function Vt(N,J){let{scales:et}=N,{originalScaleLimits:nt,updatedScaleLimits:ut}=J;return m.each(et,function(dt){(function(yt,At,Tt){let{id:Bt,options:{min:Ot,max:le}}=yt;if(!At[Bt]||!Tt[Bt])return!0;let ne=Tt[Bt];return ne.min!==Ot||ne.max!==le})(dt,nt,ut)&&(nt[dt.id]={min:{scale:dt.min,options:dt.options.min},max:{scale:dt.max,options:dt.options.max}})}),te(nt,et),te(ut,et),nt}function St(N,J,et,nt){let ut=Te[N.type]||Te.default;m.callback(ut,[N,J,et,nt])}function r(N,J,et,nt,ut){let dt=Ge[N.type]||Ge.default;m.callback(dt,[N,J,et,nt,ut])}function u(N){let J=N.chartArea;return{x:(J.left+J.right)/2,y:(J.top+J.bottom)/2}}function y(N,J,et="none"){let{x:nt=1,y:ut=1,focalPoint:dt=u(N)}=typeof J=="number"?{x:J,y:J}:J,yt=xt(N),{options:{limits:At,zoom:Tt}}=yt;Vt(N,yt);let Bt=nt!==1,Ot=ut!==1,le=It(Tt,dt,N);m.each(le||N.scales,function(ne){ne.isHorizontal()&&Bt?St(ne,nt,dt,At):!ne.isHorizontal()&&Ot&&St(ne,ut,dt,At)}),N.update(et),m.callback(Tt.onZoom,[{chart:N}])}function w(N,J,et,nt="none"){let ut=xt(N),{options:{limits:dt,zoom:yt}}=ut,{mode:At="xy"}=yt;Vt(N,ut);let Tt=q(At,"x",N),Bt=q(At,"y",N);m.each(N.scales,function(Ot){Ot.isHorizontal()&&Tt?r(Ot,J.x,et.x,dt):!Ot.isHorizontal()&&Bt&&r(Ot,J.y,et.y,dt)}),N.update(nt),m.callback(yt.onZoom,[{chart:N}])}function D(N){let J=xt(N),et=1,nt=1;return m.each(N.scales,function(ut){let dt=function(yt,At){let Tt=yt.originalScaleLimits[At];if(!Tt)return;let{min:Bt,max:Ot}=Tt;return m.valueOrDefault(Ot.options,Ot.scale)-m.valueOrDefault(Bt.options,Bt.scale)}(J,ut.id);if(dt){let yt=Math.round(dt/(ut.max-ut.min)*100)/100;et=Math.min(et,yt),nt=Math.max(nt,yt)}}),et<1?et:nt}function F(N,J,et,nt){let{panDelta:ut}=nt,dt=ut[N.id]||0;m.sign(dt)===m.sign(J)&&(J+=dt);let yt=Ee[N.type]||Ee.default;m.callback(yt,[N,J,et])?ut[N.id]=0:ut[N.id]=J}function V(N,J,et,nt="none"){let{x:ut=0,y:dt=0}=typeof J=="number"?{x:J,y:J}:J,yt=xt(N),{options:{pan:At,limits:Tt}}=yt,{onPan:Bt}=At||{};Vt(N,yt);let Ot=ut!==0,le=dt!==0;m.each(et||N.scales,function(ne){ne.isHorizontal()&&Ot?F(ne,ut,Tt,yt):!ne.isHorizontal()&&le&&F(ne,dt,Tt,yt)}),N.update(nt),m.callback(Bt,[{chart:N}])}function ot(N){let J=xt(N);Vt(N,J);let et={};for(let nt of Object.keys(N.scales)){let{min:ut,max:dt}=J.originalScaleLimits[nt]||{min:{},max:{}};et[nt]={min:ut.scale,max:dt.scale}}return et}function Y(N,J){let{handlers:et}=xt(N),nt=et[J];nt&&nt.target&&(nt.target.removeEventListener(J,nt),delete et[J])}function it(N,J,et,nt){let{handlers:ut,options:dt}=xt(N),yt=ut[et];yt&&yt.target===J||(Y(N,et),ut[et]=At=>nt(N,At,dt),ut[et].target=J,J.addEventListener(et,ut[et]))}function kt(N,J){let et=xt(N);et.dragStart&&(et.dragging=!0,et.dragEnd=J,N.update("none"))}function Et(N,J){let et=xt(N);et.dragStart&&J.key==="Escape"&&(Y(N,"keydown"),et.dragging=!1,et.dragStart=et.dragEnd=null,N.update("none"))}function ee(N,J,et){let{onZoomStart:nt,onZoomRejected:ut}=et;if(nt){let dt=m.getRelativePosition(J,N);if(m.callback(nt,[{chart:N,event:J,point:dt}])===!1)return m.callback(ut,[{chart:N,event:J}]),!1}}function Le(N,J){let et=xt(N),{pan:nt,zoom:ut={}}=et.options;if(J.button!==0||W(Q(nt),J)||ht(Q(ut.drag),J))return m.callback(ut.onZoomRejected,[{chart:N,event:J}]);ee(N,J,ut)!==!1&&(et.dragStart=J,it(N,N.canvas,"mousemove",kt),it(N,window.document,"keydown",Et))}function ti(N,J,et,nt){let ut=q(J,"x",N),dt=q(J,"y",N),{top:yt,left:At,right:Tt,bottom:Bt,width:Ot,height:le}=N.chartArea,ne=m.getRelativePosition(et,N),Se=m.getRelativePosition(nt,N);ut&&(At=Math.min(ne.x,Se.x),Tt=Math.max(ne.x,Se.x)),dt&&(yt=Math.min(ne.y,Se.y),Bt=Math.max(ne.y,Se.y));let fe=Tt-At,xe=Bt-yt;return{left:At,top:yt,right:Tt,bottom:Bt,width:fe,height:xe,zoomX:ut&&fe?1+(Ot-fe)/Ot:1,zoomY:dt&&xe?1+(le-xe)/le:1}}function Ae(N,J){let et=xt(N);if(!et.dragStart)return;Y(N,"mousemove");let{mode:nt,onZoomComplete:ut,drag:{threshold:dt=0}}=et.options.zoom,yt=ti(N,nt,et.dragStart,J),At=q(nt,"x",N)?yt.width:0,Tt=q(nt,"y",N)?yt.height:0,Bt=Math.sqrt(At*At+Tt*Tt);if(et.dragStart=et.dragEnd=null,Bt<=dt)return et.dragging=!1,void N.update("none");w(N,{x:yt.left,y:yt.top},{x:yt.right,y:yt.bottom},"zoom"),setTimeout(()=>et.dragging=!1,500),m.callback(ut,[{chart:N}])}function We(N,J){let{handlers:{onZoomComplete:et},options:{zoom:nt}}=xt(N);if(!function(yt,At,Tt){if(ht(Q(Tt.wheel),At))m.callback(Tt.onZoomRejected,[{chart:yt,event:At}]);else if(ee(yt,At,Tt)!==!1&&(At.cancelable&&At.preventDefault(),At.deltaY!==void 0))return!0}(N,J,nt))return;let ut=J.target.getBoundingClientRect(),dt=1+(J.deltaY>=0?-nt.wheel.speed:nt.wheel.speed);y(N,{x:dt,y:dt,focalPoint:{x:J.clientX-ut.left,y:J.clientY-ut.top}}),et&&et()}function Ke(N,J,et,nt){et&&(xt(N).handlers[J]=function(ut,dt){let yt;return function(){return clearTimeout(yt),yt=setTimeout(ut,dt),dt}}(()=>m.callback(et,[{chart:N}]),nt))}function Ie(N,J){return function(et,nt){let{pan:ut,zoom:dt={}}=J.options;if(!ut||!ut.enabled)return!1;let yt=nt&&nt.srcEvent;return!yt||!(!J.panning&&nt.pointerType==="mouse"&&(ht(Q(ut),yt)||W(Q(dt.drag),yt)))||(m.callback(ut.onPanRejected,[{chart:N,event:nt}]),!1)}}function Ze(N,J,et){if(J.scale){let{center:nt,pointers:ut}=et,dt=1/J.scale*et.scale,yt=et.target.getBoundingClientRect(),At=function(Bt,Ot){let le=Math.abs(Bt.clientX-Ot.clientX),ne=Math.abs(Bt.clientY-Ot.clientY),Se=le/ne,fe,xe;return Se>.3&&Se<1.7?fe=xe=!0:le>ne?fe=!0:xe=!0,{x:fe,y:xe}}(ut[0],ut[1]),Tt=J.options.zoom.mode;y(N,{x:At.x&&q(Tt,"x",N)?dt:1,y:At.y&&q(Tt,"y",N)?dt:1,focalPoint:{x:nt.x-yt.left,y:nt.y-yt.top}}),J.scale=et.scale}}function Ne(N,J,et){let nt=J.delta;nt&&(J.panning=!0,V(N,{x:et.deltaX-nt.x,y:et.deltaY-nt.y},J.panScales),J.delta={x:et.deltaX,y:et.deltaY})}let ei=new WeakMap;function wi(N,J){let et=xt(N),nt=N.canvas,{pan:ut,zoom:dt}=J,yt=new I.default.Manager(nt);dt&&dt.pinch.enabled&&(yt.add(new I.default.Pinch),yt.on("pinchstart",()=>function(At,Tt){Tt.options.zoom.pinch.enabled&&(Tt.scale=1)}(0,et)),yt.on("pinch",At=>Ze(N,et,At)),yt.on("pinchend",At=>function(Tt,Bt,Ot){Bt.scale&&(Ze(Tt,Bt,Ot),Bt.scale=null,m.callback(Bt.options.zoom.onZoomComplete,[{chart:Tt}]))}(N,et,At))),ut&&ut.enabled&&(yt.add(new I.default.Pan({threshold:ut.threshold,enable:Ie(N,et)})),yt.on("panstart",At=>function(Tt,Bt,Ot){let{enabled:le,onPanStart:ne,onPanRejected:Se}=Bt.options.pan;if(!le)return;let fe=Ot.target.getBoundingClientRect(),xe={x:Ot.center.x-fe.left,y:Ot.center.y-fe.top};if(m.callback(ne,[{chart:Tt,event:Ot,point:xe}])===!1)return m.callback(Se,[{chart:Tt,event:Ot}]);Bt.panScales=It(Bt.options.pan,xe,Tt),Bt.delta={x:0,y:0},clearTimeout(Bt.panEndTimeout),Ne(Tt,Bt,Ot)}(N,et,At)),yt.on("panmove",At=>Ne(N,et,At)),yt.on("panend",()=>function(At,Tt){Tt.delta=null,Tt.panning&&(Tt.panEndTimeout=setTimeout(()=>Tt.panning=!1,500),m.callback(Tt.options.pan.onPanComplete,[{chart:At}]))}(N,et))),ei.set(N,yt)}function Di(N,J,et){let nt=et.zoom.drag,{dragStart:ut,dragEnd:dt}=xt(N);if(nt.drawTime!==J||!dt)return;let{left:yt,top:At,width:Tt,height:Bt}=ti(N,et.zoom.mode,ut,dt),Ot=N.ctx;Ot.save(),Ot.beginPath(),Ot.fillStyle=nt.backgroundColor||"rgba(225,225,225,0.3)",Ot.fillRect(yt,At,Tt,Bt),nt.borderWidth>0&&(Ot.lineWidth=nt.borderWidth,Ot.strokeStyle=nt.borderColor||"rgba(225,225,225)",Ot.strokeRect(yt,At,Tt,Bt)),Ot.restore()}var ve={id:"zoom",version:"2.0.1",defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(N,J,et){xt(N).options=et,Object.prototype.hasOwnProperty.call(et.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(et.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(et.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),I.default&&wi(N,et),N.pan=(nt,ut,dt)=>V(N,nt,ut,dt),N.zoom=(nt,ut)=>y(N,nt,ut),N.zoomRect=(nt,ut,dt)=>w(N,nt,ut,dt),N.zoomScale=(nt,ut,dt)=>function(yt,At,Tt,Bt="none"){Vt(yt,xt(yt)),oe(yt.scales[At],Tt,void 0,!0),yt.update(Bt)}(N,nt,ut,dt),N.resetZoom=nt=>function(ut,dt="default"){let yt=xt(ut),At=Vt(ut,yt);m.each(ut.scales,function(Tt){let Bt=Tt.options;At[Tt.id]?(Bt.min=At[Tt.id].min.options,Bt.max=At[Tt.id].max.options):(delete Bt.min,delete Bt.max)}),ut.update(dt),m.callback(yt.options.zoom.onZoomComplete,[{chart:ut}])}(N,nt),N.getZoomLevel=()=>D(N),N.getInitialScaleBounds=()=>ot(N),N.isZoomedOrPanned=()=>function(nt){let ut=ot(nt);for(let dt of Object.keys(nt.scales)){let{min:yt,max:At}=ut[dt];if(yt!==void 0&&nt.scales[dt].min!==yt||At!==void 0&&nt.scales[dt].max!==At)return!0}return!1}(N)},beforeEvent(N){let J=xt(N);if(J.panning||J.dragging)return!1},beforeUpdate:function(N,J,et){xt(N).options=et,function(nt,ut){let dt=nt.canvas,{wheel:yt,drag:At,onZoomComplete:Tt}=ut.zoom;yt.enabled?(it(nt,dt,"wheel",We),Ke(nt,"onZoomComplete",Tt,250)):Y(nt,"wheel"),At.enabled?(it(nt,dt,"mousedown",Le),it(nt,dt.ownerDocument,"mouseup",Ae)):(Y(nt,"mousedown"),Y(nt,"mousemove"),Y(nt,"mouseup"),Y(nt,"keydown"))}(N,et)},beforeDatasetsDraw(N,J,et){Di(N,"beforeDatasetsDraw",et)},afterDatasetsDraw(N,J,et){Di(N,"afterDatasetsDraw",et)},beforeDraw(N,J,et){Di(N,"beforeDraw",et)},afterDraw(N,J,et){Di(N,"afterDraw",et)},stop:function(N){(function(J){Y(J,"mousedown"),Y(J,"mousemove"),Y(J,"mouseup"),Y(J,"wheel"),Y(J,"click"),Y(J,"keydown")})(N),I.default&&function(J){let et=ei.get(J);et&&(et.remove("pinchstart"),et.remove("pinch"),et.remove("pinchend"),et.remove("panstart"),et.remove("pan"),et.remove("panend"),et.destroy(),ei.delete(J))}(N),function(J){bt.delete(J)}(N)},panFunctions:Ee,zoomFunctions:Te,zoomRectFunctions:Ge};return R.Chart.register(ve),ve});(function(R,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(ys("chart.js"),ys("chart.js/helpers")):typeof define=="function"&&define.amd?define(["chart.js","chart.js/helpers"],d):(R=typeof globalThis<"u"?globalThis:R||self)["chartjs-plugin-annotation"]=d(R.Chart,R.Chart.helpers)})(void 0,function(R,d){"use strict";let m={modes:{point:(E,M)=>I(E,M,{intersect:!0}),nearest:(E,M,z)=>function(H,j,U){let G=Number.POSITIVE_INFINITY;return I(H,j,U).reduce((rt,ct)=>{let st=ct.getCenterPoint(),pt=function(vt,zt,Lt){return Lt==="x"?{x:vt.x,y:zt.y}:Lt==="y"?{x:zt.x,y:vt.y}:zt}(j,st,U.axis),at=d.distanceBetweenPoints(j,pt);return at<G?(rt=[ct],G=at):at===G&&rt.push(ct),rt},[]).sort((rt,ct)=>rt._index-ct._index).slice(0,1)}(E,M,z),x:(E,M,z)=>I(E,M,{intersect:z.intersect,axis:"x"}),y:(E,M,z)=>I(E,M,{intersect:z.intersect,axis:"y"})}};function C(E,M,z){return(m.modes[z.mode]||m.modes.nearest)(E,M,z)}function I(E,M,z){return E.visibleElements.filter(H=>z.intersect?H.inRange(M.x,M.y):function(j,U,G){return G!=="x"&&G!=="y"?j.inRange(U.x,U.y,"x",!0)||j.inRange(U.x,U.y,"y",!0):j.inRange(U.x,U.y,G,!0)}(H,M,z.axis))}let Q=(E,M)=>M>E||E.length>M.length&&E.slice(0,M.length)===M,W=.001,ht=(E,M,z)=>Math.min(z,Math.max(M,E));function q(E,M,z){for(let H of Object.keys(E))E[H]=ht(E[H],M,z);return E}function Dt(E,{x:M,y:z,x2:H,y2:j},U,G){let rt=G/2,ct=E.x>=M-rt-W&&E.x<=H+rt+W,st=E.y>=z-rt-W&&E.y<=j+rt+W;return U==="x"?ct:(U==="y"||ct)&&st}function It(E,M){let{centerX:z,centerY:H}=E.getProps(["centerX","centerY"],M);return{x:z,y:H}}let bt=E=>typeof E=="string"&&E.endsWith("%"),xt=E=>parseFloat(E)/100,Ut=E=>ht(xt(E),0,1),Jt=(E,M)=>({x:E,y:M,x2:E,y2:M,width:0,height:0}),oe={box:E=>Jt(E.centerX,E.centerY),ellipse:E=>({centerX:E.centerX,centerY:E.centerX,radius:0,width:0,height:0}),label:E=>Jt(E.centerX,E.centerY),line:E=>Jt(E.x,E.y),point:E=>({centerX:E.centerX,centerY:E.centerY,radius:0,width:0,height:0}),polygon:E=>Jt(E.centerX,E.centerY)};function Pe(E,M){return M==="start"?0:M==="end"?E:bt(M)?Ut(M)*E:E/2}function ce(E,M,z=!0){return typeof M=="number"?M:bt(M)?(z?Ut(M):xt(M))*E:E}function _e(E,M="center"){return d.isObject(E)?{x:d.valueOrDefault(E.x,M),y:d.valueOrDefault(E.y,M)}:{x:E=d.valueOrDefault(E,M),y:E}}function Re(E){return E&&(d.defined(E.xValue)||d.defined(E.yValue))}function Te(E,M,z){let H=z.init;if(H)return H===!0?Ee(M,z):function(j,U,G){let rt=d.callback(G.init,[{chart:j,properties:U,options:G}]);if(rt===!0)return Ee(U,G);if(d.isObject(rt))return rt}(E,M,z)}function Ge(E,M,z){let H=!1;return M.forEach(j=>{d.isFunction(E[j])?(H=!0,z[j]=E[j]):d.defined(z[j])&&delete z[j]}),H}function Ee(E,M){let z=M.type||"line";return oe[z](E)}let te=new Map,Vt=E=>isNaN(E)||E<=0,St=E=>E.reduce(function(M,z){return M+=z.string},"");function r(E){if(E&&typeof E=="object"){let M=E.toString();return M==="[object HTMLImageElement]"||M==="[object HTMLCanvasElement]"}}function u(E,{x:M,y:z},H){H&&(E.translate(M,z),E.rotate(d.toRadians(H)),E.translate(-M,-z))}function y(E,M){if(M&&M.borderWidth)return E.lineCap=M.borderCapStyle,E.setLineDash(M.borderDash),E.lineDashOffset=M.borderDashOffset,E.lineJoin=M.borderJoinStyle,E.lineWidth=M.borderWidth,E.strokeStyle=M.borderColor,!0}function w(E,M){E.shadowColor=M.backgroundShadowColor,E.shadowBlur=M.shadowBlur,E.shadowOffsetX=M.shadowOffsetX,E.shadowOffsetY=M.shadowOffsetY}function D(E,M){let z=M.content;if(r(z))return{width:ce(z.width,M.width),height:ce(z.height,M.height)};let H=M.font,j=d.isArray(H)?H.map(ct=>d.toFont(ct)):[d.toFont(H)],U=M.textStrokeWidth,G=d.isArray(z)?z:[z],rt=G.join()+St(j)+U+(E._measureText?"-spriting":"");return te.has(rt)||te.set(rt,function(ct,st,pt,at){ct.save();let vt=st.length,zt=0,Lt=at;for(let _t=0;_t<vt;_t++){let mt=pt[Math.min(_t,pt.length-1)];ct.font=mt.string;let Pt=st[_t];zt=Math.max(zt,ct.measureText(Pt).width+at),Lt+=mt.lineHeight}return ct.restore(),{width:zt,height:Lt}}(E,G,j,U)),te.get(rt)}function F(E,M,z){let{x:H,y:j,width:U,height:G}=M;E.save(),w(E,z);let rt=y(E,z);E.fillStyle=z.backgroundColor,E.beginPath(),d.addRoundedRectPath(E,{x:H,y:j,w:U,h:G,radius:q(d.toTRBLCorners(z.borderRadius),0,Math.min(U,G)/2)}),E.closePath(),E.fill(),rt&&(E.shadowColor=z.borderShadowColor,E.stroke()),E.restore()}function V(E,M,z){let H=z.content;if(r(H))return E.save(),E.globalAlpha=function(at,vt){let zt=d.isNumber(at)?at:vt;return d.isNumber(zt)?ht(zt,0,1):1}(z.opacity,H.style.opacity),E.drawImage(H,M.x,M.y,M.width,M.height),void E.restore();let j=d.isArray(H)?H:[H],U=z.font,G=d.isArray(U)?U.map(at=>d.toFont(at)):[d.toFont(U)],rt=z.color,ct=d.isArray(rt)?rt:[rt],st=function(at,vt){let{x:zt,width:Lt}=at,_t=vt.textAlign;return _t==="center"?zt+Lt/2:_t==="end"||_t==="right"?zt+Lt:zt}(M,z),pt=M.y+z.textStrokeWidth/2;E.save(),E.textBaseline="middle",E.textAlign=z.textAlign,function(at,vt){if(vt.textStrokeWidth>0)return at.lineJoin="round",at.miterLimit=2,at.lineWidth=vt.textStrokeWidth,at.strokeStyle=vt.textStrokeColor,!0}(E,z)&&function(at,{x:vt,y:zt},Lt,_t){at.beginPath();let mt=0;Lt.forEach(function(Pt,Yt){let Qt=_t[Math.min(Yt,_t.length-1)],se=Qt.lineHeight;at.font=Qt.string,at.strokeText(Pt,vt,zt+se/2+mt),mt+=se}),at.stroke()}(E,{x:st,y:pt},j,G),function(at,{x:vt,y:zt},Lt,{fonts:_t,colors:mt}){let Pt=0;Lt.forEach(function(Yt,Qt){let se=mt[Math.min(Qt,mt.length-1)],he=_t[Math.min(Qt,_t.length-1)],re=he.lineHeight;at.beginPath(),at.font=he.string,at.fillStyle=se,at.fillText(Yt,vt,zt+re/2+Pt),Pt+=re,at.fill()})}(E,{x:st,y:pt},j,{fonts:G,colors:ct}),E.restore()}function ot(E,M,z,H){let{radius:j,options:U}=M,G=U.pointStyle,rt=U.rotation,ct=(rt||0)*d.RAD_PER_DEG;if(r(G))return E.save(),E.translate(z,H),E.rotate(ct),E.drawImage(G,-G.width/2,-G.height/2,G.width,G.height),void E.restore();Vt(j)||function(st,{x:pt,y:at,radius:vt,rotation:zt,style:Lt,rad:_t}){let mt,Pt,Yt,Qt;switch(st.beginPath(),Lt){default:st.arc(pt,at,vt,0,d.TAU),st.closePath();break;case"triangle":st.moveTo(pt+Math.sin(_t)*vt,at-Math.cos(_t)*vt),_t+=d.TWO_THIRDS_PI,st.lineTo(pt+Math.sin(_t)*vt,at-Math.cos(_t)*vt),_t+=d.TWO_THIRDS_PI,st.lineTo(pt+Math.sin(_t)*vt,at-Math.cos(_t)*vt),st.closePath();break;case"rectRounded":Qt=.516*vt,Yt=vt-Qt,mt=Math.cos(_t+d.QUARTER_PI)*Yt,Pt=Math.sin(_t+d.QUARTER_PI)*Yt,st.arc(pt-mt,at-Pt,Qt,_t-d.PI,_t-d.HALF_PI),st.arc(pt+Pt,at-mt,Qt,_t-d.HALF_PI,_t),st.arc(pt+mt,at+Pt,Qt,_t,_t+d.HALF_PI),st.arc(pt-Pt,at+mt,Qt,_t+d.HALF_PI,_t+d.PI),st.closePath();break;case"rect":if(!zt){Yt=Math.SQRT1_2*vt,st.rect(pt-Yt,at-Yt,2*Yt,2*Yt);break}_t+=d.QUARTER_PI;case"rectRot":mt=Math.cos(_t)*vt,Pt=Math.sin(_t)*vt,st.moveTo(pt-mt,at-Pt),st.lineTo(pt+Pt,at-mt),st.lineTo(pt+mt,at+Pt),st.lineTo(pt-Pt,at+mt),st.closePath();break;case"crossRot":_t+=d.QUARTER_PI;case"cross":mt=Math.cos(_t)*vt,Pt=Math.sin(_t)*vt,st.moveTo(pt-mt,at-Pt),st.lineTo(pt+mt,at+Pt),st.moveTo(pt+Pt,at-mt),st.lineTo(pt-Pt,at+mt);break;case"star":mt=Math.cos(_t)*vt,Pt=Math.sin(_t)*vt,st.moveTo(pt-mt,at-Pt),st.lineTo(pt+mt,at+Pt),st.moveTo(pt+Pt,at-mt),st.lineTo(pt-Pt,at+mt),_t+=d.QUARTER_PI,mt=Math.cos(_t)*vt,Pt=Math.sin(_t)*vt,st.moveTo(pt-mt,at-Pt),st.lineTo(pt+mt,at+Pt),st.moveTo(pt+Pt,at-mt),st.lineTo(pt-Pt,at+mt);break;case"line":mt=Math.cos(_t)*vt,Pt=Math.sin(_t)*vt,st.moveTo(pt-mt,at-Pt),st.lineTo(pt+mt,at+Pt);break;case"dash":st.moveTo(pt,at),st.lineTo(pt+Math.cos(_t)*vt,at+Math.sin(_t)*vt)}st.fill()}(E,{x:z,y:H,radius:j,rotation:rt,style:G,rad:ct})}let Y={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function it(E,M,z){return M=typeof M=="number"?M:E.parse(M),d.isFinite(M)?E.getPixelForValue(M):z}function kt(E,M,z){let H=M[z];if(H||z==="scaleID")return H;let j=z.charAt(0),U=Object.values(E).filter(G=>G.axis&&G.axis===j);return U.length?U[0].id:j}function Et(E,M){if(E){let z=E.options.reverse;return{start:it(E,M.min,z?M.end:M.start),end:it(E,M.max,z?M.start:M.end)}}}function ee(E,M){let{chartArea:z,scales:H}=E,j=H[kt(H,M,"xScaleID")],U=H[kt(H,M,"yScaleID")],G=z.width/2,rt=z.height/2;return j&&(G=it(j,M.xValue,j.left+j.width/2)),U&&(rt=it(U,M.yValue,U.top+U.height/2)),{x:G,y:rt}}function Le(E,M){let z=E.scales,H=z[kt(z,M,"xScaleID")],j=z[kt(z,M,"yScaleID")];if(!H&&!j)return{};let{left:U,right:G}=H||E.chartArea,{top:rt,bottom:ct}=j||E.chartArea,st=Ke(H,{min:M.xMin,max:M.xMax,start:U,end:G});U=st.start,G=st.end;let pt=Ke(j,{min:M.yMin,max:M.yMax,start:ct,end:rt});return rt=pt.start,ct=pt.end,{x:U,y:rt,x2:G,y2:ct,width:G-U,height:ct-rt,centerX:U+(G-U)/2,centerY:rt+(ct-rt)/2}}function ti(E,M){if(!Re(M)){let z=Le(E,M),H=M.radius;H&&!isNaN(H)||(H=Math.min(z.width,z.height)/2,M.radius=H);let j=2*H,U=z.centerX+M.xAdjust,G=z.centerY+M.yAdjust;return{x:U-H,y:G-H,x2:U+H,y2:G+H,centerX:U,centerY:G,width:j,height:j,radius:H}}return function(z,H){let j=ee(z,H),U=2*H.radius;return{x:j.x-H.radius+H.xAdjust,y:j.y-H.radius+H.yAdjust,x2:j.x+H.radius+H.xAdjust,y2:j.y+H.radius+H.yAdjust,centerX:j.x+H.xAdjust,centerY:j.y+H.yAdjust,radius:H.radius,width:U,height:U}}(E,M)}function Ae(E,M){let{scales:z,chartArea:H}=E,j=z[M.scaleID],U={x:H.left,y:H.top,x2:H.right,y2:H.bottom};return j?function(G,rt,ct){let st=it(G,ct.value,NaN),pt=it(G,ct.endValue,st);G.isHorizontal()?(rt.x=st,rt.x2=pt):(rt.y=st,rt.y2=pt)}(j,U,M):function(G,rt,ct){for(let st of Object.keys(Y)){let pt=G[kt(G,ct,st)];if(pt){let{min:at,max:vt,start:zt,end:Lt,startProp:_t,endProp:mt}=Y[st],Pt=Et(pt,{min:ct[at],max:ct[vt],start:pt[zt],end:pt[Lt]});rt[_t]=Pt.start,rt[mt]=Pt.end}}}(z,U,M),U}function We(E,M){let z=Le(E,M);return z.initProperties=Te(E,z,M),z.elements=[{type:"label",optionScope:"label",properties:Ze(E,z,M),initProperties:z.initProperties}],z}function Ke(E,M){let z=Et(E,M)||M;return{start:Math.min(z.start,z.end),end:Math.max(z.start,z.end)}}function Ie(E,M){let{start:z,end:H,borderWidth:j}=E,{position:U,padding:{start:G,end:rt},adjust:ct}=M;return z+j/2+ct+Pe(H-j-z-G-rt-M.size,U)}function Ze(E,M,z){let H=z.label;H.backgroundColor="transparent",H.callout.display=!1;let j=_e(H.position),U=d.toPadding(H.padding),G=D(E.ctx,H),rt=function({properties:at,options:vt},zt,Lt,_t){let{x:mt,x2:Pt,width:Yt}=at;return Ie({start:mt,end:Pt,size:Yt,borderWidth:vt.borderWidth},{position:Lt.x,padding:{start:_t.left,end:_t.right},adjust:vt.label.xAdjust,size:zt.width})}({properties:M,options:z},G,j,U),ct=function({properties:at,options:vt},zt,Lt,_t){let{y:mt,y2:Pt,height:Yt}=at;return Ie({start:mt,end:Pt,size:Yt,borderWidth:vt.borderWidth},{position:Lt.y,padding:{start:_t.top,end:_t.bottom},adjust:vt.label.yAdjust,size:zt.height})}({properties:M,options:z},G,j,U),st=G.width+U.width,pt=G.height+U.height;return{x:rt,y:ct,x2:rt+st,y2:ct+pt,width:st,height:pt,centerX:rt+st/2,centerY:ct+pt/2,rotation:H.rotation}}function Ne(E,M,z){let H=Math.cos(z),j=Math.sin(z),U=M.x,G=M.y;return{x:U+H*(E.x-U)-j*(E.y-G),y:G+j*(E.x-U)+H*(E.y-G)}}let ei=["enter","leave"],wi=ei.concat("click");function Di(E,M,z){if(E.listened)switch(M.type){case"mousemove":case"mouseout":return function(H,j,U){if(!H.moveListened)return;let G;G=j.type==="mousemove"?C(H,j,U.interaction):[];let rt=H.hovered;H.hovered=G;let ct={state:H,event:j},st=ve(ct,"leave",rt,G);return ve(ct,"enter",G,rt)||st}(E,M,z);case"click":return function(H,j,U){let G=H.listeners,rt=C(H,j,U.interaction),ct;for(let st of rt)ct=N(st.options.click||G.click,st,j)||ct;return ct}(E,M,z)}}function ve({state:E,event:M},z,H,j){let U;for(let G of H)j.indexOf(G)<0&&(U=N(G.options[z]||E.listeners[z],G,M)||U);return U}function N(E,M,z){return d.callback(E,[M.$context,z])===!0}let J=["afterDraw","beforeDraw"];function et(E,M,z){if(E.hooked){let H=M.options[z]||E.hooks[z];return d.callback(H,[M.$context])}}function nt(E,M,z){let H=function(U,G,rt){let ct=G.axis,st=G.id,pt=ct+"ScaleID",at={min:d.valueOrDefault(G.min,Number.NEGATIVE_INFINITY),max:d.valueOrDefault(G.max,Number.POSITIVE_INFINITY)};for(let vt of rt)vt.scaleID===st?At(vt,G,["value","endValue"],at):kt(U,vt,pt)===st&&At(vt,G,[ct+"Min",ct+"Max",ct+"Value"],at);return at}(E.scales,M,z),j=ut(M,H,"min","suggestedMin");j=ut(M,H,"max","suggestedMax")||j,j&&d.isFunction(M.handleTickRangeOptions)&&M.handleTickRangeOptions()}function ut(E,M,z,H){if(d.isFinite(M[z])&&!function(j,U,G){return d.defined(j[U])||d.defined(j[G])}(E.options,z,H)){let j=E[z]!==M[z];return E[z]=M[z],j}}function dt(E,M){for(let z of["scaleID","xScaleID","yScaleID"]){let H=kt(M,E,z);H&&!M[H]&&yt(E,z)&&console.warn(`No scale found with id '${H}' for annotation '${E.id}'`)}}function yt(E,M){if(M==="scaleID")return!0;let z=M.charAt(0);for(let H of["Min","Max","Value"])if(d.defined(E[z+H]))return!0;return!1}function At(E,M,z,H){for(let j of z){let U=E[j];if(d.defined(U)){let G=M.parse(U);H.min=Math.min(H.min,G),H.max=Math.max(H.max,G)}}}class Tt extends R.Element{inRange(M,z,H,j){let{x:U,y:G}=Ne({x:M,y:z},this.getCenterPoint(j),d.toRadians(-this.options.rotation));return Dt({x:U,y:G},this.getProps(["x","y","x2","y2"],j),H,this.options.borderWidth)}getCenterPoint(M){return It(this,M)}draw(M){M.save(),u(M,this.getCenterPoint(),this.options.rotation),F(M,this,this.options),M.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(M,z){return We(M,z)}}Tt.id="boxAnnotation",Tt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},Tt.defaultRoutes={borderColor:"color",backgroundColor:"color"},Tt.descriptors={label:{_fallback:!0}};let Bt=["left","bottom","top","right"];class Ot extends R.Element{inRange(M,z,H,j){let{x:U,y:G}=Ne({x:M,y:z},this.getCenterPoint(j),d.toRadians(-this.rotation));return Dt({x:U,y:G},this.getProps(["x","y","x2","y2"],j),H,this.options.borderWidth)}getCenterPoint(M){return It(this,M)}draw(M){let z=this.options,H=!d.defined(this._visible)||this._visible;z.display&&z.content&&H&&(M.save(),u(M,this.getCenterPoint(),this.rotation),function(j,U){let{pointX:G,pointY:rt,options:ct}=U,st=ct.callout,pt=st&&st.display&&function(Pt,Yt){let Qt=Yt.position;return Bt.includes(Qt)?Qt:function(se,he){let{x:re,y:Kt,x2:ke,y2:me,width:De,height:S,pointX:O,pointY:B,centerX:h,centerY:p,rotation:f}=se,_={x:h,y:p},L=he.start,K=ce(De,L),gt=ce(S,L),wt=[re,re+K,re+K,ke],Mt=[Kt+gt,me,Kt,me],qt=[];for(let Xt=0;Xt<4;Xt++){let Zt=Ne({x:wt[Xt],y:Mt[Xt]},_,d.toRadians(f));qt.push({position:Bt[Xt],distance:d.distanceBetweenPoints(Zt,{x:O,y:B})})}return qt.sort((Xt,Zt)=>Xt.distance-Zt.distance)[0].position}(Pt,Yt)}(U,st);if(!pt||function(Pt,Yt,Qt){let{pointX:se,pointY:he}=Pt,re=Yt.margin,Kt=se,ke=he;return Qt==="left"?Kt+=re:Qt==="right"?Kt-=re:Qt==="top"?ke+=re:Qt==="bottom"&&(ke-=re),Pt.inRange(Kt,ke)}(U,st,pt))return;if(j.save(),j.beginPath(),!y(j,st))return j.restore();let{separatorStart:vt,separatorEnd:zt}=function(Pt,Yt){let{x:Qt,y:se,x2:he,y2:re}=Pt,Kt=function(De,S){let{width:O,height:B,options:h}=De,p=h.callout.margin+h.borderWidth/2;return S==="right"?O+p:S==="bottom"?B+p:-p}(Pt,Yt),ke,me;return Yt==="left"||Yt==="right"?(ke={x:Qt+Kt,y:se},me={x:ke.x,y:re}):(ke={x:Qt,y:se+Kt},me={x:he,y:ke.y}),{separatorStart:ke,separatorEnd:me}}(U,pt),{sideStart:Lt,sideEnd:_t}=function(Pt,Yt,Qt){let{y:se,width:he,height:re,options:Kt}=Pt,ke=Kt.callout.start,me=function(O,B){let h=B.side;return O==="left"||O==="top"?-h:h}(Yt,Kt.callout),De,S;return Yt==="left"||Yt==="right"?(De={x:Qt.x,y:se+ce(re,ke)},S={x:De.x+me,y:De.y}):(De={x:Qt.x+ce(he,ke),y:Qt.y},S={x:De.x,y:De.y+me}),{sideStart:De,sideEnd:S}}(U,pt,vt);(st.margin>0||ct.borderWidth===0)&&(j.moveTo(vt.x,vt.y),j.lineTo(zt.x,zt.y)),j.moveTo(Lt.x,Lt.y),j.lineTo(_t.x,_t.y);let mt=Ne({x:G,y:rt},U.getCenterPoint(),d.toRadians(-U.rotation));j.lineTo(mt.x,mt.y),j.stroke(),j.restore()}(M,this),F(M,this,z),V(M,function({x:j,y:U,width:G,height:rt,options:ct}){let st=ct.borderWidth/2,pt=d.toPadding(ct.padding);return{x:j+pt.left+st,y:U+pt.top+st,width:G-pt.left-pt.right-ct.borderWidth,height:rt-pt.top-pt.bottom-ct.borderWidth}}(this),z),M.restore())}resolveElementProperties(M,z){let H;if(Re(z))H=ee(M,z);else{let{centerX:G,centerY:rt}=Le(M,z);H={x:G,y:rt}}let j=d.toPadding(z.padding),U=function(G,rt,ct,st){let pt=rt.width+st.width+ct.borderWidth,at=rt.height+st.height+ct.borderWidth,vt=_e(ct.position,"center"),zt=le(G.x,pt,ct.xAdjust,vt.x),Lt=le(G.y,at,ct.yAdjust,vt.y);return{x:zt,y:Lt,x2:zt+pt,y2:Lt+at,width:pt,height:at,centerX:zt+pt/2,centerY:Lt+at/2}}(H,D(M.ctx,z),z,j);return{initProperties:Te(M,U,z),pointX:H.x,pointY:H.y,...U,rotation:z.rotation}}}function le(E,M,z=0,H){return E-Pe(M,H)+z}Ot.id="labelAnnotation",Ot.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},Ot.defaultRoutes={borderColor:"color"};let ne=(E,M,z)=>({x:E.x+z*(M.x-E.x),y:E.y+z*(M.y-E.y)}),Se=(E,M,z)=>ne(M,z,Math.abs((E-M.y)/(z.y-M.y))).x,fe=(E,M,z)=>ne(M,z,Math.abs((E-M.x)/(z.x-M.x))).y,xe=E=>E*E,Ce=(E,M,{x:z,y:H,x2:j,y2:U},G)=>G==="y"?{start:Math.min(H,U),end:Math.max(H,U),value:M}:{start:Math.min(z,j),end:Math.max(z,j),value:E},os=(E,M,z,H)=>(1-H)*(1-H)*E+2*(1-H)*H*M+H*H*z,li=(E,M,z,H)=>({x:os(E.x,M.x,z.x,H),y:os(E.y,M.y,z.y,H)}),hi=(E,M,z,H)=>2*(1-H)*(M-E)+2*H*(z-M),Ki=(E,M,z,H)=>-Math.atan2(hi(E.x,M.x,z.x,H),hi(E.y,M.y,z.y,H))+.5*d.PI;class Be extends R.Element{inRange(M,z,H,j){let U=this.options.borderWidth/2;if(H!=="x"&&H!=="y"){let G={mouseX:M,mouseY:z},{path:rt,ctx:ct}=this;if(rt){y(ct,this.options);let{chart:st}=this.$context,pt=M*st.currentDevicePixelRatio,at=z*st.currentDevicePixelRatio,vt=ct.isPointInStroke(rt,pt,at)||_i(this,G,j);return ct.restore(),vt}return function(st,{mouseX:pt,mouseY:at},vt=W,zt){let{x:Lt,y:_t,x2:mt,y2:Pt}=st.getProps(["x","y","x2","y2"],zt),Yt=mt-Lt,Qt=Pt-_t,se=xe(Yt)+xe(Qt),he=se===0?-1:((pt-Lt)*Yt+(at-_t)*Qt)/se,re,Kt;return he<0?(re=Lt,Kt=_t):he>1?(re=mt,Kt=Pt):(re=Lt+he*Yt,Kt=_t+he*Qt),xe(pt-re)+xe(at-Kt)<=vt}(this,G,xe(U),j)||_i(this,G,j)}return function(G,{mouseX:rt,mouseY:ct},st,{hBorderWidth:pt,useFinalPosition:at}){let vt=Ce(rt,ct,G.getProps(["x","y","x2","y2"],at),st);return vt.value>=vt.start-pt&&vt.value<=vt.end+pt||_i(G,{mouseX:rt,mouseY:ct},at,st)}(this,{mouseX:M,mouseY:z},H,{hBorderWidth:U,useFinalPosition:j})}getCenterPoint(M){return It(this,M)}draw(M){let{x:z,y:H,x2:j,y2:U,cp:G,options:rt}=this;if(M.save(),!y(M,rt))return M.restore();w(M,rt);let ct=Math.sqrt(Math.pow(j-z,2)+Math.pow(U-H,2));if(rt.curve&&G)return function(Lt,_t,mt,Pt){let{x:Yt,y:Qt,x2:se,y2:he,options:re}=_t,{startOpts:Kt,endOpts:ke,startAdjust:me,endAdjust:De}=Zi(_t),S={x:Yt,y:Qt},O={x:se,y:he},B=Ki(S,mt,O,0),h=Ki(S,mt,O,1)-d.PI,p=li(S,mt,O,me/Pt),f=li(S,mt,O,1-De/Pt),_=new Path2D;Lt.beginPath(),_.moveTo(p.x,p.y),_.quadraticCurveTo(mt.x,mt.y,f.x,f.y),Lt.shadowColor=re.borderShadowColor,Lt.stroke(_),_t.path=_,_t.ctx=Lt,Ji(Lt,p,{angle:B,adjust:me},Kt),Ji(Lt,f,{angle:h,adjust:De},ke)}(M,this,G,ct),M.restore();let{startOpts:st,endOpts:pt,startAdjust:at,endAdjust:vt}=Zi(this),zt=Math.atan2(U-H,j-z);M.translate(z,H),M.rotate(zt),M.beginPath(),M.moveTo(0+at,0),M.lineTo(ct-vt,0),M.shadowColor=rt.borderShadowColor,M.stroke(),Ui(M,0,at,st),Ui(M,ct,-vt,pt),M.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(M,z){let H=Ae(M,z),{x:j,y:U,x2:G,y2:rt}=H,ct=function({x:at,y:vt,x2:zt,y2:Lt},{top:_t,right:mt,bottom:Pt,left:Yt}){return!(at<Yt&&zt<Yt||at>mt&&zt>mt||vt<_t&&Lt<_t||vt>Pt&&Lt>Pt)}(H,M.chartArea),st=ct?function(at,vt,zt){let{x:Lt,y:_t}=ii(at,vt,zt),{x:mt,y:Pt}=ii(vt,at,zt);return{x:Lt,y:_t,x2:mt,y2:Pt,width:Math.abs(mt-Lt),height:Math.abs(Pt-_t)}}({x:j,y:U},{x:G,y:rt},M.chartArea):{x:j,y:U,x2:G,y2:rt,width:Math.abs(G-j),height:Math.abs(rt-U)};if(st.centerX=(G+j)/2,st.centerY=(rt+U)/2,st.initProperties=Te(M,st,z),z.curve){let at={x:st.x,y:st.y},vt={x:st.x2,y:st.y2};st.cp=function(zt,Lt,_t){let{x:mt,y:Pt,x2:Yt,y2:Qt,centerX:se,centerY:he}=zt,re=Math.atan2(Qt-Pt,Yt-mt),Kt=_e(Lt.controlPoint,0);return Ne({x:se+ce(_t,Kt.x,!1),y:he+ce(_t,Kt.y,!1)},{x:se,y:he},re)}(st,z,d.distanceBetweenPoints(at,vt))}let pt=function(at,vt,zt){let Lt=zt.borderWidth,_t=d.toPadding(zt.padding),mt=D(at.ctx,zt),Pt=mt.width+_t.width+Lt,Yt=mt.height+_t.height+Lt;return function(Qt,se,he,re){let{width:Kt,height:ke,padding:me}=he,{xAdjust:De,yAdjust:S}=se,O={x:Qt.x,y:Qt.y},B={x:Qt.x2,y:Qt.y2},h=se.rotation==="auto"?function(Mt){let{x:qt,y:Xt,x2:Zt,y2:ge}=Mt,ae=Math.atan2(ge-Xt,Zt-qt);return ae>d.PI/2?ae-d.PI:ae<d.PI/-2?ae+d.PI:ae}(Qt):d.toRadians(se.rotation),p=function(Mt,qt,Xt){let Zt=Math.cos(Xt),ge=Math.sin(Xt);return{w:Math.abs(Mt*Zt)+Math.abs(qt*ge),h:Math.abs(Mt*ge)+Math.abs(qt*Zt)}}(Kt,ke,h),f=function(Mt,qt,Xt,Zt){let ge,ae=function(si,Xe){let{x:xi,x2:Qe,y:ni,y2:Oe}=si,gi=Math.min(ni,Oe)-Xe.top,vi=Math.min(xi,Qe)-Xe.left,je=Xe.bottom-Math.max(ni,Oe),$i=Xe.right-Math.max(xi,Qe);return{x:Math.min(vi,$i),y:Math.min(gi,je),dx:vi<=$i?1:-1,dy:gi<=je?1:-1}}(Mt,Zt);return ge=qt.position==="start"?ci({w:Mt.x2-Mt.x,h:Mt.y2-Mt.y},Xt,qt,ae):qt.position==="end"?1-ci({w:Mt.x-Mt.x2,h:Mt.y-Mt.y2},Xt,qt,ae):Pe(1,qt.position),ge}(Qt,se,{labelSize:p,padding:me},re),_=Qt.cp?li(O,Qt.cp,B,f):ne(O,B,f),L={size:p.w,min:re.left,max:re.right,padding:me.left},K={size:p.h,min:re.top,max:re.bottom,padding:me.top},gt=di(_.x,L)+De,wt=di(_.y,K)+S;return{x:gt-Kt/2,y:wt-ke/2,x2:gt+Kt/2,y2:wt+ke/2,centerX:gt,centerY:wt,pointX:_.x,pointY:_.y,width:Kt,height:ke,rotation:d.toDegrees(h)}}(vt,zt,{width:Pt,height:Yt,padding:_t},at.chartArea)}(M,st,z.label);return pt._visible=ct,st.elements=[{type:"label",optionScope:"label",properties:pt,initProperties:st.initProperties}],st}}Be.id="lineAnnotation";let Hi={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};function ii({x:E,y:M},z,{top:H,right:j,bottom:U,left:G}){return E<G&&(M=fe(G,{x:E,y:M},z),E=G),E>j&&(M=fe(j,{x:E,y:M},z),E=j),M<H&&(E=Se(H,{x:E,y:M},z),M=H),M>U&&(E=Se(U,{x:E,y:M},z),M=U),{x:E,y:M}}function _i(E,{mouseX:M,mouseY:z},H,j){let U=E.label;return U.options.display&&U.inRange(M,z,j,H)}function ci(E,M,z,H){let{labelSize:j,padding:U}=M,G=E.w*H.dx,rt=E.h*H.dy,ct=G>0&&(j.w/2+U.left-H.x)/G,st=rt>0&&(j.h/2+U.top-H.y)/rt;return ht(Math.max(ct,st),0,.25)}function di(E,M){let{size:z,min:H,max:j,padding:U}=M,G=z/2;return z>j-H?(j+H)/2:(H>=E-U-G&&(E=H+U+G),j<=E+U+G&&(E=j-U-G),E)}function Zi(E){let M=E.options,z=M.arrowHeads&&M.arrowHeads.start,H=M.arrowHeads&&M.arrowHeads.end;return{startOpts:z,endOpts:H,startAdjust:$e(E,z),endAdjust:$e(E,H)}}function $e(E,M){if(!M||!M.display)return 0;let{length:z,width:H}=M,j=E.options.borderWidth/2,U={x:z,y:H+j};return Math.abs(Se(0,U,{x:0,y:j}))}function Ui(E,M,z,H){if(!H||!H.display)return;let{length:j,width:U,fill:G,backgroundColor:rt,borderColor:ct}=H,st=Math.abs(M-j)+z;E.beginPath(),w(E,H),y(E,H),E.moveTo(st,-U),E.lineTo(M+z,0),E.lineTo(st,U),G===!0?(E.fillStyle=rt||ct,E.closePath(),E.fill(),E.shadowColor="transparent"):E.shadowColor=H.borderShadowColor,E.stroke()}function Ji(E,{x:M,y:z},{angle:H,adjust:j},U){U&&U.display&&(E.save(),E.translate(M,z),E.rotate(H),Ui(E,0,-j,U),E.restore())}Be.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Hi),fill:!1,length:12,start:Object.assign({},Hi),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Ot.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},Be.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}},Be.defaultRoutes={borderColor:"color"};class ji extends R.Element{inRange(M,z,H,j){let U=this.options.rotation,G=this.options.borderWidth;if(H!=="x"&&H!=="y")return function(Lt,_t,mt,Pt){let{width:Yt,height:Qt,centerX:se,centerY:he}=_t,re=Yt/2,Kt=Qt/2;if(re<=0||Kt<=0)return!1;let ke=d.toRadians(mt||0),me=Pt/2||0,De=Math.cos(ke),S=Math.sin(ke),O=Math.pow(De*(Lt.x-se)+S*(Lt.y-he),2),B=Math.pow(S*(Lt.x-se)-De*(Lt.y-he),2);return O/Math.pow(re+me,2)+B/Math.pow(Kt+me,2)<=1.0001}({x:M,y:z},this.getProps(["width","height","centerX","centerY"],j),U,G);let{x:rt,y:ct,x2:st,y2:pt}=this.getProps(["x","y","x2","y2"],j),at=G/2,vt=H==="y"?{start:ct,end:pt}:{start:rt,end:st},zt=Ne({x:M,y:z},this.getCenterPoint(j),d.toRadians(-U));return zt[H]>=vt.start-at-W&&zt[H]<=vt.end+at+W}getCenterPoint(M){return It(this,M)}draw(M){let{width:z,height:H,centerX:j,centerY:U,options:G}=this;M.save(),u(M,this.getCenterPoint(),G.rotation),w(M,this.options),M.beginPath(),M.fillStyle=G.backgroundColor;let rt=y(M,G);M.ellipse(j,U,H/2,z/2,d.PI/2,0,2*d.PI),M.fill(),rt&&(M.shadowColor=G.borderShadowColor,M.stroke()),M.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(M,z){return We(M,z)}}ji.id="ellipseAnnotation",ji.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:Object.assign({},Tt.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},ji.defaultRoutes={borderColor:"color",backgroundColor:"color"},ji.descriptors={label:{_fallback:!0}};class Pi extends R.Element{inRange(M,z,H,j){let{x:U,y:G,x2:rt,y2:ct,width:st}=this.getProps(["x","y","x2","y2","width"],j),pt=this.options.borderWidth;if(H!=="x"&&H!=="y")return function(zt,Lt,_t,mt){if(!zt||!Lt||_t<=0)return!1;let Pt=mt/2;return Math.pow(zt.x-Lt.x,2)+Math.pow(zt.y-Lt.y,2)<=Math.pow(_t+Pt,2)}({x:M,y:z},this.getCenterPoint(j),st/2,pt);let at=pt/2,vt=H==="y"?{start:G,end:ct,value:z}:{start:U,end:rt,value:M};return vt.value>=vt.start-at&&vt.value<=vt.end+at}getCenterPoint(M){return It(this,M)}draw(M){let z=this.options,H=z.borderWidth;if(z.radius<.1)return;M.save(),M.fillStyle=z.backgroundColor,w(M,z);let j=y(M,z);ot(M,this,this.centerX,this.centerY),j&&!r(z.pointStyle)&&(M.shadowColor=z.borderShadowColor,M.stroke()),M.restore(),z.borderWidth=H}resolveElementProperties(M,z){let H=ti(M,z);return H.initProperties=Te(M,H,z),H}}Pi.id="pointAnnotation",Pi.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},Pi.defaultRoutes={borderColor:"color",backgroundColor:"color"};class He extends R.Element{inRange(M,z,H,j){if(H!=="x"&&H!=="y")return this.options.radius>=.1&&this.elements.length>1&&function(st,pt,at,vt){let zt=!1,Lt=st[st.length-1].getProps(["bX","bY"],vt);for(let _t of st){let mt=_t.getProps(["bX","bY"],vt);mt.bY>at!=Lt.bY>at&&pt<(Lt.bX-mt.bX)*(at-mt.bY)/(Lt.bY-mt.bY)+mt.bX&&(zt=!zt),Lt=mt}return zt}(this.elements,M,z,j);let U=Ne({x:M,y:z},this.getCenterPoint(j),d.toRadians(-this.options.rotation)),G=this.elements.map(st=>H==="y"?st.bY:st.bX),rt=Math.min(...G),ct=Math.max(...G);return U[H]>=rt&&U[H]<=ct}getCenterPoint(M){return It(this,M)}draw(M){let{elements:z,options:H}=this;M.save(),M.beginPath(),M.fillStyle=H.backgroundColor,w(M,H);let j=y(M,H),U=!0;for(let G of z)U?(M.moveTo(G.x,G.y),U=!1):M.lineTo(G.x,G.y);M.closePath(),M.fill(),j&&(M.shadowColor=H.borderShadowColor,M.stroke()),M.restore()}resolveElementProperties(M,z){let H=ti(M,z),{sides:j,rotation:U}=z,G=[],rt=2*d.PI/j,ct=U*d.RAD_PER_DEG;for(let st=0;st<j;st++,ct+=rt){let pt=Ai(H,z,ct);pt.initProperties=Te(M,H,z),G.push(pt)}return H.elements=G,H}}function Ai({centerX:E,centerY:M},{radius:z,borderWidth:H},j){let U=H/2,G=Math.sin(j),rt=Math.cos(j),ct={x:E+G*z,y:M-rt*z};return{type:"point",optionScope:"point",properties:{x:ct.x,y:ct.y,centerX:ct.x,centerY:ct.y,bX:E+G*(z+U),bY:M-rt*(z+U)}}}He.id="polygonAnnotation",He.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},He.defaultRoutes={borderColor:"color",backgroundColor:"color"};let be={box:Tt,ellipse:ji,label:Ot,line:Be,point:Pi,polygon:He};Object.keys(be).forEach(E=>{R.defaults.describe(`elements.${be[E].id}`,{_fallback:"plugins.annotation.common"})});let Ye={update:Object.assign},ts=wi.concat(J),ki=(E,M)=>d.isObject(M)?Oi(E,M):E,mi=E=>E==="color"||E==="font";function bi(E="line"){return be[E]?E:(console.warn(`Unknown annotation type: '${E}', defaulting to 'line'`),"line")}function Ii(E,M,z,H){let j=function(rt,ct,st){return st==="reset"||st==="none"||st==="resize"?Ye:new R.Animations(rt,ct)}(E,z.animations,H),U=M.annotations,G=function(rt,ct){let st=ct.length,pt=rt.length;if(pt<st){let at=st-pt;rt.splice(pt,0,...new Array(at))}else pt>st&&rt.splice(st,pt-st);return rt}(M.elements,U);for(let rt=0;rt<U.length;rt++){let ct=U[rt],st=Vi(G,rt,ct.type),pt=ct.setContext(ds(E,st,ct)),at=st.resolveElementProperties(E,pt);at.skip=ui(at),"elements"in at&&(yi(st,at.elements,pt,j),delete at.elements),d.defined(st.x)||Object.assign(st,at),Object.assign(st,at.initProperties),at.options=Ri(pt),j.update(st,at)}}function ui(E){return isNaN(E.x)||isNaN(E.y)}function yi(E,M,z,H){let j=E.elements||(E.elements=[]);j.length=M.length;for(let U=0;U<M.length;U++){let G=M[U],rt=G.properties,ct=Vi(j,U,G.type,G.initProperties),st=z[G.optionScope].override(G);rt.options=Ri(st),H.update(ct,rt)}}function Vi(E,M,z,H){let j=be[bi(z)],U=E[M];return U&&U instanceof j||(U=E[M]=new j,Object.assign(U,H)),U}function Ri(E){let M=be[bi(E.type)],z={};z.id=E.id,z.type=E.type,z.drawTime=E.drawTime,Object.assign(z,Oi(E,M.defaults),Oi(E,M.defaultRoutes));for(let H of ts)z[H]=E[H];return z}function Oi(E,M){let z={};for(let H of Object.keys(M)){let j=M[H],U=E[H];mi(H)&&d.isArray(U)?z[H]=U.map(G=>ki(G,j)):z[H]=ki(U,j)}return z}function ds(E,M,z){return M.$context||(M.$context=Object.assign(Object.create(E.getContext()),{element:M,id:z.id,type:"annotation"}))}let de=new Map,Ue=wi.concat(J);var Ni={id:"annotation",version:"3.0.1",beforeRegister(){(function(E,M,z,H=!0){let j=z.split("."),U=0;for(let G of M.split(".")){let rt=j[U++];if(parseInt(G,10)<parseInt(rt,10))break;if(Q(rt,G)){if(H)throw new Error(`${E} v${z} is not supported. v${M} or newer is required.`);return!1}}})("chart.js","4.0",R.Chart.version)},afterRegister(){R.Chart.register(be)},afterUnregister(){R.Chart.unregister(be)},beforeInit(E){de.set(E,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(E,M,z){let H=de.get(E).annotations=[],j=z.annotations;d.isObject(j)?Object.keys(j).forEach(U=>{let G=j[U];d.isObject(G)&&(G.id=U,H.push(G))}):d.isArray(j)&&H.push(...j),function(U,G){for(let rt of U)dt(rt,G)}(H,E.scales)},afterDataLimits(E,M){let z=de.get(E);nt(E,M.scale,z.annotations.filter(H=>H.display&&H.adjustScaleRange))},afterUpdate(E,M,z){let H=de.get(E);(function(j,U,G){U.listened=Ge(G,wi,U.listeners),U.moveListened=!1,U._getElements=C,ei.forEach(rt=>{d.isFunction(G[rt])&&(U.moveListened=!0)}),U.listened&&U.moveListened||U.annotations.forEach(rt=>{!U.listened&&d.isFunction(rt.click)&&(U.listened=!0),U.moveListened||ei.forEach(ct=>{d.isFunction(rt[ct])&&(U.listened=!0,U.moveListened=!0)})})})(0,H,z),Ii(E,H,z,M.mode),H.visibleElements=H.elements.filter(j=>!j.skip&&j.options.display),function(j,U,G){let rt=U.visibleElements;U.hooked=Ge(G,J,U.hooks),U.hooked||rt.forEach(ct=>{U.hooked||J.forEach(st=>{d.isFunction(ct.options[st])&&(U.hooked=!0)})})}(0,H,z)},beforeDatasetsDraw(E,M,z){we(E,"beforeDatasetsDraw",z.clip)},afterDatasetsDraw(E,M,z){we(E,"afterDatasetsDraw",z.clip)},beforeDraw(E,M,z){we(E,"beforeDraw",z.clip)},afterDraw(E,M,z){we(E,"afterDraw",z.clip)},beforeEvent(E,M,z){Di(de.get(E),M.event,z)&&(M.changed=!0)},afterDestroy(E){de.delete(E)},_getState:E=>de.get(E),defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:E=>!Ue.includes(E)&&E!=="init",annotations:{_allKeys:!1,_fallback:(E,M)=>`elements.${be[bi(M.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:mi,_fallback:!0},_indexable:mi}},additionalOptionScopes:[""]};function we(E,M,z){let{ctx:H,chartArea:j}=E,U=de.get(E);z&&d.clipArea(H,j);let G=function(rt,ct){let st=[];for(let pt of rt)if(pt.options.drawTime===ct&&st.push({element:pt,main:!0}),pt.elements&&pt.elements.length)for(let at of pt.elements)at.options.display&&at.options.drawTime===ct&&st.push({element:at});return st}(U.visibleElements,M).sort((rt,ct)=>rt.element.options.z-ct.element.options.z);for(let rt of G)es(H,j,U,rt);z&&d.unclipArea(H)}function es(E,M,z,H){let j=H.element;H.main?(et(z,j,"beforeDraw"),j.draw(E,M),et(z,j,"afterDraw")):j.draw(E,M)}return R.Chart.register(Ni),Ni});(function(R,d){typeof exports=="object"&&typeof module<"u"?d(exports,ys("chart.js"),ys("chart.js/helpers")):typeof define=="function"&&define.amd?define(["exports","chart.js","chart.js/helpers"],d):d((R=typeof globalThis<"u"?globalThis:R||self).ChartGauge={},R.Chart,R.Chart.helpers)})(void 0,function(R,d,m){"use strict";let C={needle:{radius:"10%",width:"15%",length:"80%"},valueLabel:{display:!0,font:void 0,formatter:Math.round,color:()=>"#FFF",backgroundColor:d.Chart.defaults.backgroundColor,borderColor:d.Chart.defaults.borderColor,borderWidth:0,borderRadius:5,padding:{top:5,right:5,bottom:5,left:5},offsetX:0,offsetY:0},animation:{animateRotate:!0,animateScale:!1},cutout:"50%",rotation:-90,circumference:180,value:0,minValue:0};class I extends d.DoughnutController{constructor(W,ht){super(W,ht),this.center=new d.ArcElement({}),this.values=[],this.valuePercent=0,this.previous=0,this.current=0}_updateMeta(){let W=this._cachedMeta,ht=W._parsed;if(this.values=[],this.valuePercent=0,ht.length===0)return W;let q=this.options,{value:Dt=0,minValue:It=0}=q,bt=ht.length>0?ht[ht.length-1]:It+1;ht.reduce((Ut,Jt)=>(this.values.push(Jt-Ut),Jt),It);let xt=bt-It;return this.valuePercent=Dt/xt,W}_getTranslation(){let W=this._cachedMeta.data[0];return W==null?{dx:0,dy:0}:{dx:W.x,dy:W.y}}_getAngle(W){let ht=this.options,{rotation:q,circumference:Dt}=ht;return m.toRadians(q+Dt*W)}_getSize(W){return m.toPercentage(W,this.outerRadius)*this.outerRadius}drawNeedle(){let W=this.options,{ctx:ht}=this.chart,{needle:q}=W,{radius:Dt,width:It,length:bt}=q,{color:xt}=q,Ut=this._getSize(Dt),Jt=this._getSize(It),oe=this._getSize(bt),{dx:Pe,dy:ce}=this._getTranslation(),_e=this._getAngle(this.center.endAngle);ht.save(),ht.translate(Pe,ce),ht.rotate(_e),ht.fillStyle=xt,ht.beginPath(),ht.ellipse(0,0,Ut,Ut,0,0,2*Math.PI),ht.fill(),ht.beginPath(),ht.moveTo(-Jt/2,0),ht.lineTo(0,-oe),ht.lineTo(Jt/2,0),ht.fill(),ht.restore()}drawValueLabel(){let W=this.options,{valueLabel:ht}=W;if(!ht.display)return;let{ctx:q}=this.chart,{color:Dt,formatter:It,backgroundColor:bt,borderColor:xt,borderWidth:Ut,borderRadius:Jt,padding:oe,offsetX:Pe,offsetY:ce}=ht,_e=m.toFont(ht.font),{value:Re}=W,Te=(It?It(Re):Re).toString();q.save(),q.textBaseline="middle",q.textAlign="center",q.font=_e.string;let{width:Ge}=q.measureText(Te),{lineHeight:Ee}=_e,te=1*Ee,Vt=-(oe.left+Ge/2)-Ut,St=-(oe.top+te/2)-Ut,r=oe.left+Ge+oe.right+2*Ut,u=oe.top+te+oe.bottom+2*Ut,{dx:y,dy:w}=this._getTranslation();y+=this._getSize(Pe),w+=this._getSize(ce),q.translate(y,w),q.fillStyle=bt,q.beginPath(),m.addRoundedRectPath(q,{x:Vt,y:St,w:r,h:u,radius:m.toTRBLCorners(Jt)}),q.closePath(),q.fill(),Ut&&(q.strokeStyle=xt,q.lineWidth=Ut,q.stroke()),m.renderText(q,Te,0,.075*te,_e,{textAlign:"center",textBaseline:"middle",color:Dt}),q.restore()}update(W){let ht=W==="reset",q=this._updateMeta();ht?(this.previous=0,this.current=0):(this.previous=this.current||0,this.current=this.valuePercent);let Dt=q._parsed;q._parsed=this.values,super.update(W),q._parsed=Dt}updateElements(W,ht,q,Dt){let It=this._cachedMeta,bt=It._parsed;if(It._parsed=this.values,super.updateElements(W,ht,q,Dt),It._parsed=bt,W.length===0)return;let xt=W[0];super.updateElement(this.center,void 0,{x:xt.x,y:xt.y,startAngle:this.previous,endAngle:this.current,circumference:0,outerRadius:100,innerRadius:0,options:{}},Dt)}draw(){super.draw(),this.values.length!==0&&(this.drawNeedle(),this.drawValueLabel())}}I.id="gauge",I.version="3.0.0",I.defaults=C,I.descriptors={_scriptable:Q=>Q!=="formatter"},I.overrides={aspectRatio:!1,layout:{padding:{top:10,bottom:80}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},d.Chart.register(I),d.Chart.register(d.ArcElement),R.GaugeController=I,Object.defineProperty(R,"__esModule",{value:!0})});var fi=class{static CACHE={};static accessToken(){return new URLSearchParams(window.location.search).get("access_token")}static async fetchGridLayout(d){try{let m=await fetch(new Request(`./grid-layout.json?name=${d}&access_token=${this.accessToken()}`),{cache:"no-store"});if(!m.ok)throw new Error(`Datastore.fetchGridLayout() - HTTP error, status = ${m.status}`);let C=await m.text(),I=JSON.parse(C);if(I.status===!1)throw new Error(`Dashboard with name "${d}" does not exist.`);return I}catch(m){console.error(m),alert(m.message)}}static async saveGridLayout(d,m){try{let C=await fetch(new Request(`./grid-layout.json?name=${d}&access_token=${this.accessToken()}`),{method:"PUT",body:JSON.stringify(m),cache:"no-store"});if(!C.ok)throw new Error(`Datastore.saveGridLayout() - HTTP error, status = ${C.status}`);let I=await C.text(),Q=JSON.parse(I);if(Q.status===!1)throw new Error(`Dashboard with name "${d}" does not exist.`);return alert(`Dashboard "${d}" successfully saved!`),Q}catch(C){console.error(C),alert(C.message)}}static async fetchMonitoredDevices(){return this.fetchAndCache("monitored-devices.json")}static async fetchSupportedAttributes(){return this.fetchAndCache("supported-attributes.json")}static async fetchAndCache(d){return this.CACHE[d]!==void 0?this.CACHE[d]:(this.CACHE[d]=fetch(new Request(`./${d}?access_token=${this.accessToken()}`),{cache:"no-store"}).then(m=>{if(!m.ok)throw new Error(`Datastore.fetchAndCache(${d}) - HTTP error, status = ${m.status}`);return m.text()}).then(m=>JSON.parse(m)).catch(m=>{console.error(m),alert(m.message),reject(m)}),this.CACHE[d])}static async fetchDeviceData(d,m,C,I){let Q={attr1:[],attr2:[]};try{let W=await fetch(new Request(`/local/wt_${d}_${I}.csv`),{cache:"no-store"});if(W.status==404)return Q;if(!W.ok)throw console.log(W),new Error(`Datastore.fetchSupportedAttributes() - HTTP error, status = ${W.status}`);let ht=(await W.text()).split(`
`),q=ht.shift().split(","),Dt=m=q.indexOf(m),It=C==null?0:q.indexOf(C);return ht.forEach(bt=>{let xt=bt.split(",");Q.attr1.push({x:parseInt(xt[0]*1e3),y:parseInt(xt[Dt])}),It!==0&&Q.attr2.push({x:parseInt(xt[0]*1e3),y:parseInt(xt[It])})}),Q}catch(W){console.error(W),alert(W.message)}}static async fetchAttributeData(d,m,C){let I={};for(let Q of m){let W=await this.fetchDeviceData(Q,d,void 0,C);I[`dev_${Q}`]=W.attr1}return I}};var Fn=class extends ze{static styles=pi`
        :host {
            display: block;
            height: calc(100vh - 10px);
        }
    `;constructor(){if(super(),this.params=new URLSearchParams(window.location.search),this.name=this.params.get("name"),this.name===null)throw alert("Query parameter [name] is missing!"),new Error("Query parameter [name] is missing!")}render(){return pe`
            <dashboard-grid name=${this.name}></dashboard-grid>
            <dashboard-menu @add=${this.showAddDialog} @save=${this.saveDashboard} @changeRefreshInterval=${this.changeRefreshInterval}></dashboard-menu>
            <dashboard-add-dialog @done=${this.addDashboardPanel}></dashboard-add-dialog>
        `}connectedCallback(){super.connectedCallback();let d=new URLSearchParams(window.location.search);document.documentElement.setAttribute("data-theme",this.params.get("dark")==="true"?"dark":"light"),document.body.classList.remove("spinner")}async firstUpdated(){let d=this.renderRoot.querySelector("dashboard-menu"),m=this.renderRoot.querySelector("dashboard-grid"),C=await fi.fetchGridLayout(this.params.get("name"));C.panels.length===0&&d.removeAttribute("hidden"),m.init(C.panels);let I=C.refresh?parseInt(C.refresh):0;d.refreshInterval=`${I}`,m.setRefreshInterval(I)}async saveDashboard(){let d={refresh:this.renderRoot.querySelector("dashboard-menu").refreshInterval,panels:this.renderRoot.querySelector("dashboard-grid").getPanelsConfig()};console.log("saveDashboard",this.name,d),await fi.saveGridLayout(this.name,d)}showAddDialog(){this.renderRoot.querySelector("dashboard-add-dialog").setAttribute("open",!0)}addDashboardPanel(d){this.renderRoot.querySelector("dashboard-grid").addPanel(d.detail)}changeRefreshInterval(d){let m=parseInt(d.detail);this.renderRoot.querySelector("dashboard-grid").setRefreshInterval(m)}};var Wn=class extends ze{static styles=pi`
        :host {
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
        }
        nav {
            position: absolute;
            top: 0;
            left: 0;
            width: 10em;
            height: 100%;
            padding: 5px;
            background-color: var(--bg-color-darker);
            color: var(--text-color);
            box-shadow: 0 0 0.3em var(--shadow-color);
            border-right: 1px var(--border-color) solid;
            animation: showme 1s;
        }
        :host([hidden]) nav {
            animation: hideme 1s;
            left: -500px;
        }
        @keyframes hideme {
            from { left: 0px }
            to { left: -500px }
        }
        @keyframes showme {
            from { left: -500px }
            to { left: 0px }
        }
        hr {
            border: 0;
            border-top: 1px var(--bg-color) solid;
            margin: 10px 0;
        }
        button {
            background-color: transparent;
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            border-radius: 5px;
            margin-bottom: 5px;
            padding: .4em .6em;
            cursor: pointer;
            display: block;
            width: 100%;
            text-align: left;
        }
        button:hover {
            background-color: var(--bg-color);
            box-shadow: 0 0 0.3em var(--shadow-color);
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-size: .85rem;
        }
        select {
            display: block;
        }
        select {
            display: block;
            width: 100%;
            margin-bottom: 5px;
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            padding: .5em;
        }
    `;static properties={hidden:{type:Boolean,reflect:!0},refreshInterval:{type:String,state:!0}};constructor(){super(),this.hidden=!0,this.refreshInterval="0"}render(){return pe`
            <nav>
                <button @click=${this.addPanel}>+ Add panel</button>
                <button @click=${this.saveDashboard}>✓ Save dashboard</button>
                <hr>
                <label for="refreshInterval">Auto-refresh</label>
                <select id="refreshInterval" .value=${this.refreshInterval} @change=${this.changeRefreshInterval}>
                    <option value="0">no refresh</option>
                    <option value="5">every 5 minutes</option>
                    <option value="10">every 10 minutes</option>
                    <option value="30">every 30 minutes</option>
                    <option value="60">every hour</option>
                </select>
            </nav>
        `}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",d=>d.key==="`"&&(this.hidden=!this.hidden))}addPanel(){this.dispatchEvent(new CustomEvent("add"))}saveDashboard(){this.dispatchEvent(new CustomEvent("save",{detail:{refresh:this.refresh}}))}changeRefreshInterval(d){this.refreshInterval=d.target.value,this.dispatchEvent(new CustomEvent("changeRefreshInterval",{detail:this.refreshInterval}))}};var Bn=class R extends ze{static styles=pi`
        :host {
            display: none;
            position: absolute;
            width: 100%; height: 100%;
            top: 0; left: 0;
            background-color: rgba(0, 0, 0, 0.3);
            font-size: 0.84rem;
        }
        :host([open="true"]) {
            display: block;
        }
        .spinner:after {
            position: absolute;
            top: calc(50% - 0.5em);
            left: 0.5em;
            content: ' ';
            display: block;
            width: 1em;
            height: 1em;
            border-radius: 50%;
            border: 1px solid var(--text-color-darker);
            border-color: var(--text-color-darker) transparent var(--text-color-darker) transparent;
            animation: spinner 1.2s linear infinite;
        }

        @keyframes spinner {
            0% { transform: rotate(0deg) }
            100% { transform: rotate(360deg) }
        }
        article {
            display: block;
            position: absolute;
            top: -50%;
            left: 50%;
            transform: translate(-50%, -50%);
            min-width: 400px;
            background-color: var(--bg-color-darker);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            box-shadow: 0 0 0.3em var(--shadow-color);
            border-radius: 5px;
            padding: 0;
        }
        :host([open="true"]) article {
            animation: showme .5s;
            animation-fill-mode: forwards;
        }
        @keyframes showme {
            to { top: 50% }
        }
        header {
            text-align: center;
            font-weight: bold;
            padding: 1em;
        }
        section.modal-body {
            max-height: 70vh;
            overflow-y: auto;
            padding: 0 1em;
        }
        section.modal-body section {
            margin-bottom: 1em;
        }
        footer {
            padding: 1em;
            text-align: right;
            border-top: 1px var(--bg-color) solid;
        }
        footer button {
            padding: .5em 1em;
            cursor: pointer;
            margin-left: 1em;
            background-color: var(--bg-color-darker);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            border-radius: 5px;
        }
        footer button:hover {
            background-color: var(--bg-color);
            box-shadow: 0 0 0.3em var(--shadow-color);
        }

        label { display: block; margin-bottom: .3em }
        select {
            display: block;
        }
        input[type="text"], select {
            box-sizing: border-box;
            display: block;
            width: 100%;
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            padding: .5em;
            margin: 0;
        }
        input[type="checkbox"] {
            appearance: none;
            margin: 0;
            background-color: var(--bg-color);
            border: 1px var(--border-color) solid;
            font: inherit;
            width: 1.15em;
            height: 1.15em;
            transform: translate(0, 3px);
            cursor: pointer;
        }
        input[type="checkbox"]:checked {
            background-color: var(--Blue)
        }
        input[type="checkbox"]:checked::before {
            content: "";
            display: block;
            width: calc(100% - 4px);
            height: calc(100% - 4px);
            margin: 2px;
            background-color: var(--Base3);
            clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
        }
        input[type="checkbox"]:focus, input[type="text"]:focus, select:focus, button:focus {
            outline: 1px var(--Blue) solid;
            border-color: var(--Blue)
        }
        input[type="checkbox"]:user-invalid, input[type="text"]:user-invalid, select:user-invalid {
            border-color: var(--Red) !important;
        }
        aside {
            display: block;
            position: relative;
            background-color: var(--bg-color);
            color: var(--text-color-darker);
            border: 1px var(--border-color) solid;
            padding: .5em .5em .5em 2.3em;
        }
    `;static panels={"text-panel":"Text","device-panel":"Device","attribute-panel":"Attribute"};static properties={open:{type:Boolean,reflect:!0},title:{type:String,title:!0},type:{type:String,state:!0}};constructor(){super(),this.title=void 0,this.type=void 0}render(){return pe`
            <article role="dialog" aria-modal="true" aria-labelledby="d-title">
                <form @submit=${this.submit}>
                    <header id="d-title">Add dashboard panel</header>
                    <section class="modal-body">
                        <section>
                            <label for="title">Panel title:</label>
                            <input type="text" id="title" placeholder="[optional]" autocomplete="off" @change=${d=>this.title=d.target.value}/>
                        </section>
                        <section>
                            <label for="type">Panel type:</label>
                            <select id="type" .value=${this.type} @change=${d=>this.type=d.target.value} required="true">
                                <option value=""></option>
                                ${Object.entries(R.panels).map(([d,m])=>pe`
                                    <option value="${d}" .selected=${this.type===d}>${m}</option>
                                `)}
                            </select>
                        </section>
                        <section>
                            ${this.type?this.renderPanelConfig():ue}
                        </section>
                    </section>
                    <footer>
                        <button type="reset" @click=${this.close}>Cancel</button>
                        <button type="submit">Add panel</button>
                    </footer>
                </form>
            </article>
        `}renderPanelConfig(){return $n(`<${this.type}-config class="panel-config"></${this.type}-config>`)}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",d=>d.key==="Escape"&&this.close())}updated(d){d.size==0||d.open===!0||setTimeout(()=>this.renderRoot.querySelector("#title").focus(),0)}resetForm(){this.title=void 0,this.type=void 0}close(){this.resetForm(),this.open=!1}submit(d){d.preventDefault();let m=this.renderRoot.querySelector(".panel-config").decorateConfig({title:this.title,type:this.type});console.log("submit config",m),this.close(),this.resetForm(),this.dispatchEvent(new CustomEvent("done",{detail:m}))}};var Un=class extends ze{static styles=pi`
        .grid-stack{position:relative}.grid-stack-rtl{direction:ltr}.grid-stack-rtl>.grid-stack-item{direction:rtl}.grid-stack-placeholder>.placeholder-content{background-color:rgba(0,0,0,.1);margin:0;position:absolute;width:auto;z-index:0!important}.grid-stack>.grid-stack-item{position:absolute;padding:0}.grid-stack>.grid-stack-item>.grid-stack-item-content{margin:0;position:absolute;width:auto;overflow-x:hidden;overflow-y:auto}.grid-stack>.grid-stack-item.size-to-content:not(.size-to-content-max)>.grid-stack-item-content{overflow-y:hidden}.grid-stack-item>.ui-resizable-handle{position:absolute;font-size:.1px;display:block;-ms-touch-action:none;touch-action:none}.grid-stack-item.ui-resizable-autohide>.ui-resizable-handle,.grid-stack-item.ui-resizable-disabled>.ui-resizable-handle{display:none}.grid-stack-item>.ui-resizable-ne,.grid-stack-item>.ui-resizable-nw,.grid-stack-item>.ui-resizable-se,.grid-stack-item>.ui-resizable-sw{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="%23666" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 20 20"><path d="m10 3 2 2H8l2-2v14l-2-2h4l-2 2"/></svg>');background-repeat:no-repeat;background-position:center}.grid-stack-item>.ui-resizable-ne{transform:translate(0,10px) rotate(45deg)}.grid-stack-item>.ui-resizable-sw{transform:rotate(45deg)}.grid-stack-item>.ui-resizable-nw{transform:translate(0,10px) rotate(-45deg)}.grid-stack-item>.ui-resizable-se{transform:rotate(-45deg)}.grid-stack-item>.ui-resizable-nw{cursor:nw-resize;width:20px;height:20px;top:0}.grid-stack-item>.ui-resizable-n{cursor:n-resize;height:10px;top:0;left:25px;right:25px}.grid-stack-item>.ui-resizable-ne{cursor:ne-resize;width:20px;height:20px;top:0}.grid-stack-item>.ui-resizable-e{cursor:e-resize;width:10px;top:15px;bottom:15px}.grid-stack-item>.ui-resizable-se{cursor:se-resize;width:20px;height:20px}.grid-stack-item>.ui-resizable-s{cursor:s-resize;height:10px;left:25px;bottom:0;right:25px}.grid-stack-item>.ui-resizable-sw{cursor:sw-resize;width:20px;height:20px}.grid-stack-item>.ui-resizable-w{cursor:w-resize;width:10px;top:15px;bottom:15px}.grid-stack-item.ui-draggable-dragging>.ui-resizable-handle{display:none!important}.grid-stack-item.ui-draggable-dragging{will-change:left,top;cursor:move}.grid-stack-item.ui-resizable-resizing{will-change:width,height}.ui-draggable-dragging,.ui-resizable-resizing{z-index:10000}.ui-draggable-dragging>.grid-stack-item-content,.ui-resizable-resizing>.grid-stack-item-content{box-shadow:1px 4px 6px rgba(0,0,0,.2);opacity:.8}.grid-stack-animate,.grid-stack-animate .grid-stack-item{transition:left .3s,top .3s,height .3s,width .3s}.grid-stack-animate .grid-stack-item.grid-stack-placeholder,.grid-stack-animate .grid-stack-item.ui-draggable-dragging,.grid-stack-animate .grid-stack-item.ui-resizable-resizing{transition:left 0s,top 0s,height 0s,width 0s}.grid-stack>.grid-stack-item[gs-y="0"]{top:0}.grid-stack>.grid-stack-item[gs-x="0"]{left:0}.gs-12>.grid-stack-item{width:8.333%}.gs-12>.grid-stack-item[gs-x="1"]{left:8.333%}.gs-12>.grid-stack-item[gs-w="2"]{width:16.667%}.gs-12>.grid-stack-item[gs-x="2"]{left:16.667%}.gs-12>.grid-stack-item[gs-w="3"]{width:25%}.gs-12>.grid-stack-item[gs-x="3"]{left:25%}.gs-12>.grid-stack-item[gs-w="4"]{width:33.333%}.gs-12>.grid-stack-item[gs-x="4"]{left:33.333%}.gs-12>.grid-stack-item[gs-w="5"]{width:41.667%}.gs-12>.grid-stack-item[gs-x="5"]{left:41.667%}.gs-12>.grid-stack-item[gs-w="6"]{width:50%}.gs-12>.grid-stack-item[gs-x="6"]{left:50%}.gs-12>.grid-stack-item[gs-w="7"]{width:58.333%}.gs-12>.grid-stack-item[gs-x="7"]{left:58.333%}.gs-12>.grid-stack-item[gs-w="8"]{width:66.667%}.gs-12>.grid-stack-item[gs-x="8"]{left:66.667%}.gs-12>.grid-stack-item[gs-w="9"]{width:75%}.gs-12>.grid-stack-item[gs-x="9"]{left:75%}.gs-12>.grid-stack-item[gs-w="10"]{width:83.333%}.gs-12>.grid-stack-item[gs-x="10"]{left:83.333%}.gs-12>.grid-stack-item[gs-w="11"]{width:91.667%}.gs-12>.grid-stack-item[gs-x="11"]{left:91.667%}.gs-12>.grid-stack-item[gs-w="12"]{width:100%}.gs-1>.grid-stack-item{width:100%}
        .gs-2>.grid-stack-item{width:50%}.gs-2>.grid-stack-item[gs-x="1"]{left:50%}.gs-2>.grid-stack-item[gs-w="2"]{width:100%}.gs-3>.grid-stack-item{width:33.333%}.gs-3>.grid-stack-item[gs-x="1"]{left:33.333%}.gs-3>.grid-stack-item[gs-w="2"]{width:66.667%}.gs-3>.grid-stack-item[gs-x="2"]{left:66.667%}.gs-3>.grid-stack-item[gs-w="3"]{width:100%}.gs-4>.grid-stack-item{width:25%}.gs-4>.grid-stack-item[gs-x="1"]{left:25%}.gs-4>.grid-stack-item[gs-w="2"]{width:50%}.gs-4>.grid-stack-item[gs-x="2"]{left:50%}.gs-4>.grid-stack-item[gs-w="3"]{width:75%}.gs-4>.grid-stack-item[gs-x="3"]{left:75%}.gs-4>.grid-stack-item[gs-w="4"]{width:100%}.gs-5>.grid-stack-item{width:20%}.gs-5>.grid-stack-item[gs-x="1"]{left:20%}.gs-5>.grid-stack-item[gs-w="2"]{width:40%}.gs-5>.grid-stack-item[gs-x="2"]{left:40%}.gs-5>.grid-stack-item[gs-w="3"]{width:60%}.gs-5>.grid-stack-item[gs-x="3"]{left:60%}.gs-5>.grid-stack-item[gs-w="4"]{width:80%}.gs-5>.grid-stack-item[gs-x="4"]{left:80%}.gs-5>.grid-stack-item[gs-w="5"]{width:100%}.gs-6>.grid-stack-item{width:16.667%}.gs-6>.grid-stack-item[gs-x="1"]{left:16.667%}.gs-6>.grid-stack-item[gs-w="2"]{width:33.333%}.gs-6>.grid-stack-item[gs-x="2"]{left:33.333%}.gs-6>.grid-stack-item[gs-w="3"]{width:50%}.gs-6>.grid-stack-item[gs-x="3"]{left:50%}.gs-6>.grid-stack-item[gs-w="4"]{width:66.667%}.gs-6>.grid-stack-item[gs-x="4"]{left:66.667%}.gs-6>.grid-stack-item[gs-w="5"]{width:83.333%}.gs-6>.grid-stack-item[gs-x="5"]{left:83.333%}.gs-6>.grid-stack-item[gs-w="6"]{width:100%}.gs-7>.grid-stack-item{width:14.286%}.gs-7>.grid-stack-item[gs-x="1"]{left:14.286%}.gs-7>.grid-stack-item[gs-w="2"]{width:28.571%}.gs-7>.grid-stack-item[gs-x="2"]{left:28.571%}.gs-7>.grid-stack-item[gs-w="3"]{width:42.857%}.gs-7>.grid-stack-item[gs-x="3"]{left:42.857%}.gs-7>.grid-stack-item[gs-w="4"]{width:57.143%}.gs-7>.grid-stack-item[gs-x="4"]{left:57.143%}.gs-7>.grid-stack-item[gs-w="5"]{width:71.429%}.gs-7>.grid-stack-item[gs-x="5"]{left:71.429%}.gs-7>.grid-stack-item[gs-w="6"]{width:85.714%}.gs-7>.grid-stack-item[gs-x="6"]{left:85.714%}.gs-7>.grid-stack-item[gs-w="7"]{width:100%}.gs-8>.grid-stack-item{width:12.5%}.gs-8>.grid-stack-item[gs-x="1"]{left:12.5%}.gs-8>.grid-stack-item[gs-w="2"]{width:25%}.gs-8>.grid-stack-item[gs-x="2"]{left:25%}.gs-8>.grid-stack-item[gs-w="3"]{width:37.5%}.gs-8>.grid-stack-item[gs-x="3"]{left:37.5%}.gs-8>.grid-stack-item[gs-w="4"]{width:50%}.gs-8>.grid-stack-item[gs-x="4"]{left:50%}.gs-8>.grid-stack-item[gs-w="5"]{width:62.5%}.gs-8>.grid-stack-item[gs-x="5"]{left:62.5%}.gs-8>.grid-stack-item[gs-w="6"]{width:75%}.gs-8>.grid-stack-item[gs-x="6"]{left:75%}.gs-8>.grid-stack-item[gs-w="7"]{width:87.5%}.gs-8>.grid-stack-item[gs-x="7"]{left:87.5%}.gs-8>.grid-stack-item[gs-w="8"]{width:100%}.gs-9>.grid-stack-item{width:11.111%}.gs-9>.grid-stack-item[gs-x="1"]{left:11.111%}.gs-9>.grid-stack-item[gs-w="2"]{width:22.222%}.gs-9>.grid-stack-item[gs-x="2"]{left:22.222%}.gs-9>.grid-stack-item[gs-w="3"]{width:33.333%}.gs-9>.grid-stack-item[gs-x="3"]{left:33.333%}.gs-9>.grid-stack-item[gs-w="4"]{width:44.444%}.gs-9>.grid-stack-item[gs-x="4"]{left:44.444%}.gs-9>.grid-stack-item[gs-w="5"]{width:55.556%}.gs-9>.grid-stack-item[gs-x="5"]{left:55.556%}.gs-9>.grid-stack-item[gs-w="6"]{width:66.667%}.gs-9>.grid-stack-item[gs-x="6"]{left:66.667%}.gs-9>.grid-stack-item[gs-w="7"]{width:77.778%}.gs-9>.grid-stack-item[gs-x="7"]{left:77.778%}.gs-9>.grid-stack-item[gs-w="8"]{width:88.889%}.gs-9>.grid-stack-item[gs-x="8"]{left:88.889%}.gs-9>.grid-stack-item[gs-w="9"]{width:100%}.gs-10>.grid-stack-item{width:10%}.gs-10>.grid-stack-item[gs-x="1"]{left:10%}.gs-10>.grid-stack-item[gs-w="2"]{width:20%}.gs-10>.grid-stack-item[gs-x="2"]{left:20%}.gs-10>.grid-stack-item[gs-w="3"]{width:30%}.gs-10>.grid-stack-item[gs-x="3"]{left:30%}.gs-10>.grid-stack-item[gs-w="4"]{width:40%}.gs-10>.grid-stack-item[gs-x="4"]{left:40%}.gs-10>.grid-stack-item[gs-w="5"]{width:50%}.gs-10>.grid-stack-item[gs-x="5"]{left:50%}.gs-10>.grid-stack-item[gs-w="6"]{width:60%}.gs-10>.grid-stack-item[gs-x="6"]{left:60%}.gs-10>.grid-stack-item[gs-w="7"]{width:70%}.gs-10>.grid-stack-item[gs-x="7"]{left:70%}.gs-10>.grid-stack-item[gs-w="8"]{width:80%}.gs-10>.grid-stack-item[gs-x="8"]{left:80%}.gs-10>.grid-stack-item[gs-w="9"]{width:90%}.gs-10>.grid-stack-item[gs-x="9"]{left:90%}.gs-10>.grid-stack-item[gs-w="10"]{width:100%}.gs-11>.grid-stack-item{width:9.091%}.gs-11>.grid-stack-item[gs-x="1"]{left:9.091%}.gs-11>.grid-stack-item[gs-w="2"]{width:18.182%}.gs-11>.grid-stack-item[gs-x="2"]{left:18.182%}.gs-11>.grid-stack-item[gs-w="3"]{width:27.273%}.gs-11>.grid-stack-item[gs-x="3"]{left:27.273%}.gs-11>.grid-stack-item[gs-w="4"]{width:36.364%}.gs-11>.grid-stack-item[gs-x="4"]{left:36.364%}.gs-11>.grid-stack-item[gs-w="5"]{width:45.455%}.gs-11>.grid-stack-item[gs-x="5"]{left:45.455%}.gs-11>.grid-stack-item[gs-w="6"]{width:54.545%}.gs-11>.grid-stack-item[gs-x="6"]{left:54.545%}.gs-11>.grid-stack-item[gs-w="7"]{width:63.636%}.gs-11>.grid-stack-item[gs-x="7"]{left:63.636%}.gs-11>.grid-stack-item[gs-w="8"]{width:72.727%}.gs-11>.grid-stack-item[gs-x="8"]{left:72.727%}.gs-11>.grid-stack-item[gs-w="9"]{width:81.818%}.gs-11>.grid-stack-item[gs-x="9"]{left:81.818%}.gs-11>.grid-stack-item[gs-w="10"]{width:90.909%}.gs-11>.grid-stack-item[gs-x="10"]{left:90.909%}.gs-11>.grid-stack-item[gs-w="11"]{width:100%}

        .grid-stack { min-height: 100% }
        .grid-stack-item-content {
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            border-radius: 5px;
            box-shadow: 0 0 0.3em var(--shadow-color);
        }
        .panel-container {
            width: 100%;
            height: 100%;
            position: relative;
            background-color: var(--bg-color-darker);
        }
        .panel-container .panel-title {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translate(-50%, 0);
            cursor: move;
            background-color: transparent;
            text-align: center;
            padding: 0.2em 1em;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        .panel-container:hover .panel-title {
            background-color: var(--bg-color);
            box-shadow: 0 0 0.3em var(--shadow-color);
            border: 1px var(--border-color) solid;
            border-radius: 0 0 5px 5px;
            border-top: 0;
        }
        .spinner:after {
            position: absolute;
            top: calc(50% - 32px);
            left: calc(50% - 32px);
            content: ' ';
            display: block;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            border: 1px solid var(--text-color-darker);
            border-color: var(--text-color-darker) transparent var(--text-color-darker) transparent;
            animation: spinner 1.2s linear infinite;
        }
        @keyframes spinner {
            0% { transform: rotate(0deg) }
            100% { transform: rotate(360deg) }
        }
    `;static properties={name:{type:String,reflect:!0}};constructor(){super(),this.interval=void 0}render(){return pe`
            <div class="grid-stack spinner"></div>
        `}firstUpdated(){this.grid=GridStack.init({sizeToContent:!1,margin:5,float:!0,cellHeight:206,column:8,columnOpts:{layout:"move",columnMax:8,breakpointForWindow:!0,breakpoints:[{w:420,c:1},{w:800,c:2},{w:1024,c:4},{w:1366,c:6}]},handle:".panel-title",removable:!0,alwaysShowResizeHandle:!1},this.renderRoot.querySelector(".grid-stack"))}async init(d,m){d.forEach(C=>{this.addPanel(C.config,C.w,C.h,C.x,C.y)}),this.renderRoot.querySelector(".grid-stack").classList.remove("spinner")}setRefreshInterval(d){this.interval&&clearInterval(this.interval),d!=0&&(this.interval=setInterval(()=>{console.log("calling refresh on all panels"),this.renderRoot.querySelectorAll(".panel").forEach(m=>m.refresh())},d*60*1e3),console.info(`Setting auto-refresh timer for ${d} minutes`))}addPanel(d,m=2,C=1,I=void 0,Q=void 0){let W=`
            <div class="panel-container">
                <${d.type} config='${JSON.stringify(d).replace(/'/g,"&apos;")}' class="panel spinner"></${d.type}>
                <div class="panel-title">${d.title||"&nbsp"}</div>
            </div>
        `;this.grid.addWidget({w:m,h:C,x:I,y:Q,config:d,content:W})}getPanelsConfig(){return this.grid.engine.nodes.map(d=>{let m=d.el.querySelector(".panel");return{w:d.w,h:d.h,x:d.x,y:d.y,config:m.decorateConfig(d.config)}})}};var jn=class R extends ze{static styles=pi`
        ul {
            margin: 0;
            padding: 0;
            list-style: none;
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            border-bottom: 0;
            box-shadow: 0 0 0.3em var(--shadow-color);
            border-radius: 5px 5px 0 0;
            display: flex;
            user-select: none;
        }
        ul li {
            list-style-type: none;
            display: inline-block;
            margin: 0;
            padding: .4em 0;
            border-right: 1px var(--border-color) solid;
            cursor: pointer;
            width: 2.85em;
            text-align: center;
        }
        ul li:first-child { border-radius: 5px 0 0 0 }
        ul li:last-child { border: 0; border-radius: 0 5px 0 0 }
        ul li:hover {
            background-color: var(--bg-color-darker);
        }
        ul li[data-selected] {
            background-color: var(--Blue);
            color: var(--Base3);
        }
        .ui-resizable-handle { opacity:0 }
    `;static precisions={"5m":"View data with 5 minutes precision","1h":"View data with 1 hour precision","1d":"View data with 1 day precision","1w":"View data with 1 week precision"};static properties={precision:{type:Object,state:!0}};render(){return pe`
            <nav><ul>
                ${Object.entries(R.precisions).map(([d,m])=>pe`<li @click=${this.selectPrecision} data-selected=${this.precision==d?"true":ue} inert=${this.precision==d?"true":ue} title="${m}">${d}</li>`)}
            </ul></nav>
        `}selectPrecision(d){this.precision=d.target.textContent,this.dispatchEvent(new CustomEvent("change",{detail:this.precision}))}};var Vn=class extends ze{static styles=pi`
        article {
            position: absolute;
            top: 50%;
            left: 50%;
            width: calc(100% - 2em);
            transform: translate(-50%, -50%);
        }
    `;static properties={config:{type:Object,reflect:!0}};render(){return pe`<article>${$n(this.config.message)}</article>`}firstUpdated(){this.classList.remove("spinner")}decorateConfig(d){return d}refresh(){}},Yn=class extends ze{static properties={message:{type:String,state:!0}};constructor(){super(),this.message=""}render(){return pe`
            <label for="message">Message to display:</label>
            <input type="text" id="message" required="true" placeholder="Enter text to display" autocomplete="off" @change=${d=>this.message=d.target.value}/>
        `}createRenderRoot(){return this}firstUpdated(){setTimeout(()=>this.renderRoot.querySelector("#message").focus(),0)}decorateConfig(d){return{...d,message:this.message}}};var cs=class{static colors(){let d=getComputedStyle(document.documentElement);return{BgColor:d.getPropertyValue("--bg-color"),BgColorDarker:d.getPropertyValue("--bg-color-darker"),TextColor:d.getPropertyValue("--text-color"),TextColorDarker:d.getPropertyValue("--text-color-darker"),BorderColor:d.getPropertyValue("--border-color"),Yellow:d.getPropertyValue("--Yellow"),Orange:d.getPropertyValue("--Orange"),Red:d.getPropertyValue("--Red"),Magenta:d.getPropertyValue("--Magenta"),Violet:d.getPropertyValue("--Violet"),Blue:d.getPropertyValue("--Blue"),Cyan:d.getPropertyValue("--Cyan"),Green:d.getPropertyValue("--Green"),Gray:d.getPropertyValue("--Gray")}}static graphColors(){let d=getComputedStyle(document.documentElement);return[d.getPropertyValue("--Red"),d.getPropertyValue("--Cyan"),d.getPropertyValue("--Yellow"),d.getPropertyValue("--Blue"),d.getPropertyValue("--Green"),d.getPropertyValue("--Orange"),d.getPropertyValue("--Magenta"),d.getPropertyValue("--Gray")]}};var Ei=class{static crosshairPlugin(){return{id:"crosshair",defaults:{width:1,color:"red",dash:[2,2]},afterInit:(d,m,C)=>{d.crosshair={x:0,y:0}},afterEvent:(d,m)=>{let{inChartArea:C}=m,{type:I,x:Q,y:W}=m.event;d.crosshair={x:Q,y:W,draw:C},d.draw()},beforeDatasetsDraw:(d,m,C)=>{let{ctx:I}=d,{top:Q,bottom:W,left:ht,right:q}=d.chartArea,{x:Dt,y:It,draw:bt}=d.crosshair;bt&&(I.save(),I.beginPath(),I.lineWidth=C.width,I.strokeStyle=C.color,I.setLineDash(C.dash),I.moveTo(Dt,W),I.lineTo(Dt,Q),I.stroke(),I.restore())}}}static updatePointStyle(d){let m=!1;if(d.scales.x===void 0||d.data.datasets[0]===void 0)return;let C=d.scales.x.min,I=d.scales.x.max,Q=d.data.datasets[0].data.filter(ht=>ht.x>=C&&ht.x<=I),W=Q.length==0||d.width/Q.length<10?!1:"circle";d.data.datasets.forEach(ht=>{W!==ht.pointStyle&&(ht.pointStyle=W,m=!0)}),m&&d.update()}};var qn=class extends ze{static styles=pi`
        :host {
            display: block;
            width: 100%;
            height: 100%;
        }
        canvas {
            width: 100%;
            height: 100%;
        }
        precision-selector {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translate(-50%, 0);
            visibility: hidden;
        }
        :host(:hover) precision-selector {
            visibility: visible;
        }
        aside {
            position: absolute;
            top: 50%;
            left: 0;
            transform: translate(0, -50%);
            display: block;
            color: var(--text-color-darker);
            width: 100%;
            text-align: center;
        }
    `;static properties={config:{type:Object,reflect:!0},chart:{type:Object,state:!0},nodata:{type:Boolean,state:!0},mobileView:{type:Boolean,state:!0}};render(){return pe`
            <canvas></canvas>
            <precision-selector @change=${this.changePrecision} .precision=${this.config.precision}></precision-selector>
            ${this.nodata===!0?pe`<aside>No data yet</aside>`:ue}
        `}async connectedCallback(){super.connectedCallback(),this.config.precision===void 0&&(this.config.precision="5m"),this.mobileView=window.innerWidth<768,window.addEventListener("resize",()=>{this.mobileView=window.innerWidth<768,this.chart.options.plugins.zoom.pan.enabled=this.mobileView!==!0,this.chart.options.plugins.zoom.zoom.pinch.enabled=this.mobileView!==!0});let d=cs.colors(),m=await fi.fetchSupportedAttributes(),C=await fi.fetchDeviceData(this.config.dev,this.config.attr1,this.config.attr2,this.config.precision);this.nodata=C.attr1.length==0;let I=[{label:this.config.attr1.charAt(0).toUpperCase()+this.config.attr1.slice(1),data:C.attr1,pointStyle:!1,backgroundColor:d.Green+"44",borderColor:d.Green,borderWidth:1.2,tension:.5,fill:"start",yAxisID:"attr1",unit:m[this.config.attr1].unit}];this.chart.options.scales.attr1={position:"left",display:!0,title:{display:!0,text:`${I[0].label} ${m[this.config.attr1].unit}`,color:d.Green},ticks:{color:d.TextColorDarker},grid:{color:d.BgColor}},this.config.attr2!==void 0&&(I.push({label:this.config.attr2.charAt(0).toUpperCase()+this.config.attr2.slice(1),data:C.attr2,pointStyle:!1,backgroundColor:d.Blue+"44",borderColor:d.Blue,borderWidth:1.2,tension:.5,fill:"start",yAxisID:"attr2",unit:m[this.config.attr2].unit}),this.chart.options.scales.attr2={position:"right",display:!0,title:{display:!0,text:`${I[1].label} ${m[this.config.attr2].unit}`,color:d.Blue},ticks:{color:d.TextColorDarker},grid:{drawOnChartArea:!1}}),this.classList.remove("spinner"),this.chart.data={datasets:I},this.chart.update("none")}firstUpdated(){let d=cs.colors();this.chart=new Chart(this.renderRoot.querySelector("canvas"),{type:"line",options:{parsing:!1,normalized:!0,responsive:!0,maintainAspectRatio:!1,onResize:m=>Ei.updatePointStyle(m),animation:{onComplete:({initial:m,chart:C})=>m?Ei.updatePointStyle(C):void 0},layout:{padding:{top:20,bottom:3}},stacked:!1,pointStyle:!1,scales:{x:{type:"time",time:{minUnit:"minute",displayFormats:{minute:"d LLL HH:mm",hour:"d LLL HH:mm",day:"d LLL"},tooltipFormat:"d LLL HH:mm"},title:{display:!1},ticks:{color:d.TextColorDarker,maxRotation:0,autoSkipPadding:15},grid:{color:d.BgColor}}},interaction:{mode:"nearest",axis:"x",intersect:!1},plugins:{legend:{display:!1},tooltip:{itemSort:(m,C)=>C.raw.y-m.raw.y,callbacks:{label:m=>` ${m.dataset.label}: ${m.parsed.y}${m.dataset.unit}`},backgroundColor:d.BgColorDarker,titleColor:d.TextColor,bodyColor:d.TextColorDarker,borderColor:d.BorderColor,borderWidth:1},decimation:{enabled:!0,algorithm:"lttb"},zoom:{pan:{enabled:this.mobileView!==!0,mode:"x"},zoom:{wheel:{enabled:!0},pinch:{enabled:this.mobileView!==!0},mode:"x",onZoomComplete:({chart:m})=>Ei.updatePointStyle(m)},limits:{x:{min:"original",max:"original"}}},crosshair:{color:d.TextColor}}},plugins:[Ei.crosshairPlugin()]})}changePrecision(d){this.config.precision=d.detail,this.refresh()}async refresh(){this.classList.add("spinner");let d=await fi.fetchDeviceData(this.config.dev,this.config.attr1,this.config.attr2,this.config.precision);this.nodata=d.attr1.length==0,this.chart.data.datasets[0].data=d.attr1,this.config.attr2!==void 0&&(this.chart.data.datasets[1].data=d.attr2),this.chart.update("none"),Ei.updatePointStyle(this.chart),this.classList.remove("spinner")}decorateConfig(d){return{...d,...this.config}}},Gn=class extends ze{static properties={devices:{type:Object,state:!0},attributes:{type:Object,state:!0},device:{type:String,state:!0},attr1:{type:String,state:!0},attr2:{type:String,state:!0}};constructor(){super(),this.devices=void 0,this.attributes=void 0,this.dev=void 0,this.attr1=void 0,this.attr2=void 0}render(){return pe`
            <label for="device">Select device:</label>
            ${this.devices?this.renderDevicesSelect():pe`<aside class="spinner">Loading devices ...</aside>`}
            ${this.attributes?this.renderAttributesSelect():ue}
        `}connectedCallback(){super.connectedCallback(),fi.fetchMonitoredDevices().then(d=>{this.devices=d})}createRenderRoot(){return this}renderDevicesSelect(){return pe`
            <section>
                <select id="device" .value=${this.dev} @change=${this.onDeviceSelect} required="true">
                    <option value=""></option>
                    ${this.devices.map(d=>pe`
                        <option value="${d.id}" .selected=${this.dev===d.id}>${d.name}</option>
                    `)}
                </select>
            </section>
        `}renderAttributesSelect(){return pe`
            <section>
                <label for="attr1">Select attribute:</label>
                <select id="attr1" .value=${this.attr1} @change=${d=>this.attr1=d.target.value} required="true">
                    <option value=""></option>
                    ${this.attributes.filter(d=>d!=this.attr2).map(d=>pe`
                        <option value="${d}" .selected=${this.attr1===d}>${d}</option>
                    `)}
                </select>
            </section>
            ${this.attr1!==void 0&&this.attributes.length>1?this.renderOptionalAttributesSelect():ue}
        `}renderOptionalAttributesSelect(){return pe`
            <section>
                <label for="attr2">Select second attribute:</label>
                <select id="attr2" .value=${this.attr2} @change=${d=>this.attr2=d.target.value}>
                    <option value="">[optional]</option>
                    ${this.attributes.filter(d=>d!=this.attr1).map(d=>pe`
                        <option value="${d}" .selected=${this.attr2===d}>${d}</option>
                    `)}
                </select>
            </section>
        `}onDeviceSelect(d){this.dev=d.target.value!==""?d.target.value:void 0,this.attributes=this.dev!==void 0?this.devices.find(m=>m.id==this.dev).attrs.sort():void 0}decorateConfig(d){return{...d,dev:this.dev,attr1:this.attr1,attr2:this.attr2,precision:"5m"}}};var Xn=class extends ze{static styles=pi`
       :host {
            display: block;
            width: 100%;
            height: 100%;
        }
        canvas {
            width: 100%;
            height: 100%;
        }
        precision-selector {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translate(-50%, 0);
            visibility: hidden;
        }
        :host(:hover) precision-selector {
            visibility: visible;
        }
        aside {
            position: absolute;
            top: 50%;
            left: 0;
            transform: translate(0, -50%);
            display: block;
            color: var(--text-color-darker);
            width: 100%;
            text-align: center;
        }
    `;static properties={config:{type:Object,reflect:!0},chart:{type:Object,state:!0},nodata:{type:Boolean,state:!0},mobileView:{type:Boolean,reflect:!0}};render(){return pe`
            <canvas></canvas>
            <precision-selector @change=${this.changePrecision} .precision=${this.config.precision}></precision-selector>
            ${this.nodata===!0?pe`<aside>No data yet</aside>`:ue}
        `}async connectedCallback(){super.connectedCallback(),this.config.precision===void 0&&(this.config.precision="5m"),this.mobileView=window.innerWidth<768,window.addEventListener("resize",()=>{this.mobileView=window.innerWidth<768,this.chart.options.plugins.zoom.pan.enabled=this.mobileView!==!0,this.chart.options.plugins.zoom.zoom.pinch.enabled=this.mobileView!==!0});let d=cs.colors(),m=cs.graphColors(),C=await fi.fetchSupportedAttributes(),I=await fi.fetchMonitoredDevices(),Q=await fi.fetchAttributeData(this.config.attr,this.config.devs,this.config.precision),W=[],ht=0;for(let Dt of this.config.devs){let It=m[ht++];W.push({label:I.find(bt=>bt.id==Dt).name,data:Q[`dev_${Dt}`],pointStyle:!1,backgroundColor:It?`${It}44`:void 0,borderColor:It||void 0,borderWidth:1.2,tension:.5,fill:"start",unit:C[this.config.attr].unit,ref:`dev_${Dt}`})}let q=this.config.attr.charAt(0).toUpperCase()+this.config.attr.slice(1);this.chart.options.scales.y={position:"left",display:!0,title:{display:!0,text:`${q} ${C[this.config.attr].unit}`,color:d.Green},ticks:{color:d.TextColorDarker},grid:{color:d.BgColor}},this.classList.remove("spinner"),this.chart.data={datasets:W},this.chart.update("none")}firstUpdated(){let d=cs.colors();this.chart=new Chart(this.renderRoot.querySelector("canvas"),{type:"line",options:{parsing:!1,normalized:!0,responsive:!0,maintainAspectRatio:!1,onResize:m=>Ei.updatePointStyle(m),animation:{onComplete:({initial:m,chart:C})=>m?Ei.updatePointStyle(C):void 0},layout:{padding:{top:20,bottom:3}},stacked:!1,pointStyle:!1,scales:{x:{type:"time",time:{minUnit:"minute",displayFormats:{minute:"d LLL HH:mm",hour:"d LLL HH:mm",day:"d LLL"},tooltipFormat:"d LLL HH:mm"},title:{display:!1},ticks:{color:d.TextColorDarker,maxRotation:0,autoSkipPadding:15},grid:{color:d.BgColor}}},interaction:{mode:"nearest",axis:"x",intersect:!1},plugins:{legend:{display:!1},tooltip:{itemSort:(m,C)=>C.raw.y-m.raw.y,callbacks:{label:m=>` ${m.dataset.label}: ${m.parsed.y}${m.dataset.unit}`},backgroundColor:d.BgColorDarker,titleColor:d.TextColor,bodyColor:d.TextColorDarker,borderColor:d.BorderColor,borderWidth:1},decimation:{enabled:!0,algorithm:"lttb"},zoom:{pan:{enabled:this.mobileView!==!0,mode:"x"},zoom:{wheel:{enabled:!0},pinch:{enabled:this.mobileView!==!0},mode:"x",onZoomComplete:({chart:m})=>Ei.updatePointStyle(m)},limits:{x:{min:"original",max:"original"}}},crosshair:{color:d.TextColor}}},plugins:[Ei.crosshairPlugin()]})}changePrecision(d){this.config.precision=d.detail,this.refresh()}async refresh(){this.classList.add("spinner");let d=await fi.fetchAttributeData(this.config.attr,this.config.devs,this.config.precision);this.chart.data.datasets.forEach(m=>m.data=d[m.ref]),this.chart.update("none"),Ei.updatePointStyle(this.chart),this.classList.remove("spinner")}decorateConfig(d){return{...d,...this.config}}},Qn=class extends ze{static properties={devices:{type:Object,state:!0},attributes:{type:Object,state:!0},attr:{type:String,state:!0},devs:{type:Object,state:!0}};constructor(){super(),this.devices=void 0,this.attributes=void 0,this.attr=void 0,this.devs=[]}render(){return pe`
            <label for="device">Select attribute:</label>
            ${this.attributes?this.renderAttributesSelect():pe`<aside class="spinner">Loading devices ...</aside>`}
            ${this.attr?this.renderDevicesSelect():ue}
        `}connectedCallback(){super.connectedCallback(),fi.fetchMonitoredDevices().then(d=>{this.devices=d;let m=new Set;d.forEach(C=>C.attrs.forEach(I=>m.add(I))),this.attributes=[...m].sort()})}createRenderRoot(){return this}renderAttributesSelect(){return pe`
            <section>
                <select id="attr" .value=${this.attr} @change=${this.onAttributeSelect} required="true">
                    <option value=""></option>
                    ${this.attributes.map(d=>pe`
                        <option value="${d}" .selected=${this.attr===d}>${d}</option>
                    `)}
                </select>
            </section>
        `}renderDevicesSelect(){let d=this.devices.filter(m=>m.attrs.includes(this.attr));return pe`
            <section>
                ${d.map(m=>pe`<label><input value="${m.id}" type="checkbox"
                        required=${this.devs.length==0?"yes":ue}
                        @change=${this.onDeviceSelect}
                    > ${m.name}</label>`)}
            </section>
        `}onAttributeSelect(d){this.attr=d.target.value!==""?d.target.value:void 0,this.devs=[]}onDeviceSelect(){this.devs=[...this.renderRoot.querySelectorAll('input[type="checkbox"]:checked')].map(d=>d.value)}decorateConfig(d){return{...d,attr:this.attr,devs:this.devs}}};customElements.define("watchtower-app",Fn);customElements.define("dashboard-menu",Wn);customElements.define("dashboard-add-dialog",Bn);customElements.define("dashboard-grid",Un);customElements.define("precision-selector",jn);customElements.define("text-panel",Vn);customElements.define("text-panel-config",Yn);customElements.define("device-panel",qn);customElements.define("device-panel-config",Gn);customElements.define("attribute-panel",Xn);customElements.define("attribute-panel-config",Qn);})();
