(()=>{var ys=(P=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(P,{get:(d,m)=>(typeof require<"u"?require:d)[m]}):P)(function(P){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+P+'" is not supported')});var Sn=globalThis,Io=Sn.ShadowRoot&&(Sn.ShadyCSS===void 0||Sn.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ho=Symbol(),Aa=new WeakMap,Cn=class{constructor(d,m,C){if(this._$cssResult$=!0,C!==Ho)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=d,this.t=m}get styleSheet(){let d=this.i,m=this.t;if(Io&&d===void 0){let C=m!==void 0&&m.length===1;C&&(d=Aa.get(m)),d===void 0&&((this.i=d=new CSSStyleSheet).replaceSync(this.cssText),C&&Aa.set(m,d))}return d}toString(){return this.cssText}},kh=P=>new Cn(typeof P=="string"?P:P+"",void 0,Ho),Xe=(P,...d)=>{let m=P.length===1?P[0]:d.reduce((C,H,X)=>C+(W=>{if(W._$cssResult$===!0)return W.cssText;if(typeof W=="number")return W;throw Error("Value passed to 'css' function must be a 'css' function result: "+W+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(H)+P[X+1],P[0]);return new Cn(m,P,Ho)},Mh=(P,d)=>{if(Io)P.adoptedStyleSheets=d.map(m=>m instanceof CSSStyleSheet?m:m.styleSheet);else for(let m of d){let C=document.createElement("style"),H=Sn.litNonce;H!==void 0&&C.setAttribute("nonce",H),C.textContent=m.cssText,P.appendChild(C)}},Ra=Io?P=>P:P=>P instanceof CSSStyleSheet?(d=>{let m="";for(let C of d.cssRules)m+=C.cssText;return kh(m)})(P):P,{is:Sh,defineProperty:Ch,getOwnPropertyDescriptor:Th,getOwnPropertyNames:Eh,getOwnPropertySymbols:Dh,getPrototypeOf:Ph}=Object,Hn=globalThis,Oa=Hn.trustedTypes,Ah=Oa?Oa.emptyScript:"",Rh=Hn.reactiveElementPolyfillSupport,Js=(P,d)=>P,Oo={toAttribute(P,d){switch(d){case Boolean:P=P?Ah:null;break;case Object:case Array:P=P==null?P:JSON.stringify(P)}return P},fromAttribute(P,d){let m=P;switch(d){case Boolean:m=P!==null;break;case Number:m=P===null?null:Number(P);break;case Object:case Array:try{m=JSON.parse(P)}catch{m=null}}return m}},Xa=(P,d)=>!Sh(P,d),za={attribute:!0,type:String,converter:Oo,reflect:!1,hasChanged:Xa};Symbol.metadata??=Symbol("metadata"),Hn.litPropertyMetadata??=new WeakMap;var vs=class extends HTMLElement{static addInitializer(d){this.o(),(this.l??=[]).push(d)}static get observedAttributes(){return this.finalize(),this.u&&[...this.u.keys()]}static createProperty(d,m=za){if(m.state&&(m.attribute=!1),this.o(),this.elementProperties.set(d,m),!m.noAccessor){let C=Symbol(),H=this.getPropertyDescriptor(d,C,m);H!==void 0&&Ch(this.prototype,d,H)}}static getPropertyDescriptor(d,m,C){let{get:H,set:X}=Th(this.prototype,d)??{get(){return this[m]},set(W){this[m]=W}};return{get(){return H?.call(this)},set(W){let at=H?.call(this);X.call(this,W),this.requestUpdate(d,at,C)},configurable:!0,enumerable:!0}}static getPropertyOptions(d){return this.elementProperties.get(d)??za}static o(){if(this.hasOwnProperty(Js("elementProperties")))return;let d=Ph(this);d.finalize(),d.l!==void 0&&(this.l=[...d.l]),this.elementProperties=new Map(d.elementProperties)}static finalize(){if(this.hasOwnProperty(Js("finalized")))return;if(this.finalized=!0,this.o(),this.hasOwnProperty(Js("properties"))){let m=this.properties,C=[...Eh(m),...Dh(m)];for(let H of C)this.createProperty(H,m[H])}let d=this[Symbol.metadata];if(d!==null){let m=litPropertyMetadata.get(d);if(m!==void 0)for(let[C,H]of m)this.elementProperties.set(C,H)}this.u=new Map;for(let[m,C]of this.elementProperties){let H=this.p(m,C);H!==void 0&&this.u.set(H,m)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(d){let m=[];if(Array.isArray(d)){let C=new Set(d.flat(1/0).reverse());for(let H of C)m.unshift(Ra(H))}else d!==void 0&&m.push(Ra(d));return m}static p(d,m){let C=m.attribute;return C===!1?void 0:typeof C=="string"?C:typeof d=="string"?d.toLowerCase():void 0}constructor(){super(),this.v=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.m=null,this._()}_(){this.S=new Promise(d=>this.enableUpdating=d),this._$AL=new Map,this.$(),this.requestUpdate(),this.constructor.l?.forEach(d=>d(this))}addController(d){(this.P??=new Set).add(d),this.renderRoot!==void 0&&this.isConnected&&d.hostConnected?.()}removeController(d){this.P?.delete(d)}$(){let d=new Map,m=this.constructor.elementProperties;for(let C of m.keys())this.hasOwnProperty(C)&&(d.set(C,this[C]),delete this[C]);d.size>0&&(this.v=d)}createRenderRoot(){let d=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Mh(d,this.constructor.elementStyles),d}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this.P?.forEach(d=>d.hostConnected?.())}enableUpdating(d){}disconnectedCallback(){this.P?.forEach(d=>d.hostDisconnected?.())}attributeChangedCallback(d,m,C){this._$AK(d,C)}C(d,m){let C=this.constructor.elementProperties.get(d),H=this.constructor.p(d,C);if(H!==void 0&&C.reflect===!0){let X=(C.converter?.toAttribute!==void 0?C.converter:Oo).toAttribute(m,C.type);this.m=d,X==null?this.removeAttribute(H):this.setAttribute(H,X),this.m=null}}_$AK(d,m){let C=this.constructor,H=C.u.get(d);if(H!==void 0&&this.m!==H){let X=C.getPropertyOptions(H),W=typeof X.converter=="function"?{fromAttribute:X.converter}:X.converter?.fromAttribute!==void 0?X.converter:Oo;this.m=H,this[H]=W.fromAttribute(m,X.type),this.m=null}}requestUpdate(d,m,C){if(d!==void 0){if(C??=this.constructor.getPropertyOptions(d),!(C.hasChanged??Xa)(this[d],m))return;this.T(d,m,C)}this.isUpdatePending===!1&&(this.S=this.A())}T(d,m,C){this._$AL.has(d)||this._$AL.set(d,m),C.reflect===!0&&this.m!==d&&(this.M??=new Set).add(d)}async A(){this.isUpdatePending=!0;try{await this.S}catch(m){Promise.reject(m)}let d=this.scheduleUpdate();return d!=null&&await d,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this.v){for(let[H,X]of this.v)this[H]=X;this.v=void 0}let C=this.constructor.elementProperties;if(C.size>0)for(let[H,X]of C)X.wrapped!==!0||this._$AL.has(H)||this[H]===void 0||this.T(H,this[H],X)}let d=!1,m=this._$AL;try{d=this.shouldUpdate(m),d?(this.willUpdate(m),this.P?.forEach(C=>C.hostUpdate?.()),this.update(m)):this.k()}catch(C){throw d=!1,this.k(),C}d&&this._$AE(m)}willUpdate(d){}_$AE(d){this.P?.forEach(m=>m.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(d)),this.updated(d)}k(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.S}shouldUpdate(d){return!0}update(d){this.M&&=this.M.forEach(m=>this.C(m,this[m])),this.k()}updated(d){}firstUpdated(d){}};vs.elementStyles=[],vs.shadowRootOptions={mode:"open"},vs[Js("elementProperties")]=new Map,vs[Js("finalized")]=new Map,Rh?.({ReactiveElement:vs}),(Hn.reactiveElementVersions??=[]).push("2.0.4");var No=globalThis,Tn=No.trustedTypes,La=Tn?Tn.createPolicy("lit-html",{createHTML:P=>P}):void 0,$o="$lit$",cs=`lit$${Math.random().toFixed(9).slice(2)}$`,Fo="?"+cs,Oh=`<${Fo}>`,Ps=document,en=()=>Ps.createComment(""),sn=P=>P===null||typeof P!="object"&&typeof P!="function",Ga=Array.isArray,Qa=P=>Ga(P)||typeof P?.[Symbol.iterator]=="function",Po=`[ 	
\f\r]`,Zs=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ia=/-->/g,Ha=/>/g,Es=RegExp(`>|${Po}(?:([^\\s"'>=/]+)(${Po}*=${Po}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Na=/'/g,$a=/"/g,Ka=/^(?:script|style|textarea|title)$/i,Za=P=>(d,...m)=>({_$litType$:P,strings:d,values:m}),re=Za(1),zh=Za(2),Fe=Symbol.for("lit-noChange"),ne=Symbol.for("lit-nothing"),Fa=new WeakMap,Ds=Ps.createTreeWalker(Ps,129);function Ja(P,d){if(!Array.isArray(P)||!P.hasOwnProperty("raw"))throw Error("invalid template strings array");return La!==void 0?La.createHTML(d):d}var tl=(P,d)=>{let m=P.length-1,C=[],H,X=d===2?"<svg>":"",W=Zs;for(let at=0;at<m;at++){let q=P[at],Rt,Ot,ft=-1,xt=0;for(;xt<q.length&&(W.lastIndex=xt,Ot=W.exec(q),Ot!==null);)xt=W.lastIndex,W===Zs?Ot[1]==="!--"?W=Ia:Ot[1]!==void 0?W=Ha:Ot[2]!==void 0?(Ka.test(Ot[2])&&(H=RegExp("</"+Ot[2],"g")),W=Es):Ot[3]!==void 0&&(W=Es):W===Es?Ot[0]===">"?(W=H??Zs,ft=-1):Ot[1]===void 0?ft=-2:(ft=W.lastIndex-Ot[2].length,Rt=Ot[1],W=Ot[3]===void 0?Es:Ot[3]==='"'?$a:Na):W===$a||W===Na?W=Es:W===Ia||W===Ha?W=Zs:(W=Es,H=void 0);let jt=W===Es&&P[at+1].startsWith("/>")?" ":"";X+=W===Zs?q+Oh:ft>=0?(C.push(Rt),q.slice(0,ft)+$o+q.slice(ft)+cs+jt):q+cs+(ft===-2?at:jt)}return[Ja(P,X+(P[m]||"<?>")+(d===2?"</svg>":"")),C]},nn=class P{constructor({strings:d,_$litType$:m},C){let H;this.parts=[];let X=0,W=0,at=d.length-1,q=this.parts,[Rt,Ot]=tl(d,m);if(this.el=P.createElement(Rt,C),Ds.currentNode=this.el.content,m===2){let ft=this.el.content.firstChild;ft.replaceWith(...ft.childNodes)}for(;(H=Ds.nextNode())!==null&&q.length<at;){if(H.nodeType===1){if(H.hasAttributes())for(let ft of H.getAttributeNames())if(ft.endsWith($o)){let xt=Ot[W++],jt=H.getAttribute(ft).split(cs),Jt=/([.?@])?(.*)/.exec(xt);q.push({type:1,index:X,name:Jt[2],strings:jt,ctor:Jt[1]==="."?Dn:Jt[1]==="?"?Pn:Jt[1]==="@"?An:Rs}),H.removeAttribute(ft)}else ft.startsWith(cs)&&(q.push({type:6,index:X}),H.removeAttribute(ft));if(Ka.test(H.tagName)){let ft=H.textContent.split(cs),xt=ft.length-1;if(xt>0){H.textContent=Tn?Tn.emptyScript:"";for(let jt=0;jt<xt;jt++)H.append(ft[jt],en()),Ds.nextNode(),q.push({type:2,index:++X});H.append(ft[xt],en())}}}else if(H.nodeType===8)if(H.data===Fo)q.push({type:2,index:X});else{let ft=-1;for(;(ft=H.data.indexOf(cs,ft+1))!==-1;)q.push({type:7,index:X}),ft+=cs.length-1}X++}}static createElement(d,m){let C=Ps.createElement("template");return C.innerHTML=d,C}};function As(P,d,m=P,C){if(d===Fe)return d;let H=C!==void 0?m.U?.[C]:m.N,X=sn(d)?void 0:d._$litDirective$;return H?.constructor!==X&&(H?._$AO?.(!1),X===void 0?H=void 0:(H=new X(P),H._$AT(P,m,C)),C!==void 0?(m.U??=[])[C]=H:m.N=H),H!==void 0&&(d=As(P,H._$AS(P,d.values),H,C)),d}var En=class{constructor(d,m){this._$AV=[],this._$AN=void 0,this._$AD=d,this._$AM=m}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}O(d){let{el:{content:m},parts:C}=this._$AD,H=(d?.creationScope??Ps).importNode(m,!0);Ds.currentNode=H;let X=Ds.nextNode(),W=0,at=0,q=C[0];for(;q!==void 0;){if(W===q.index){let Rt;q.type===2?Rt=new Nn(X,X.nextSibling,this,d):q.type===1?Rt=new q.ctor(X,q.name,q.strings,this,d):q.type===6&&(Rt=new Rn(X,this,d)),this._$AV.push(Rt),q=C[++at]}W!==q?.index&&(X=Ds.nextNode(),W++)}return Ds.currentNode=Ps,H}R(d){let m=0;for(let C of this._$AV)C!==void 0&&(C.strings!==void 0?(C._$AI(d,C,m),m+=C.strings.length-2):C._$AI(d[m])),m++}},Nn=class el{get _$AU(){return this._$AM?._$AU??this.V}constructor(d,m,C,H){this.type=2,this._$AH=ne,this._$AN=void 0,this._$AA=d,this._$AB=m,this._$AM=C,this.options=H,this.V=H?.isConnected??!0}get parentNode(){let d=this._$AA.parentNode,m=this._$AM;return m!==void 0&&d?.nodeType===11&&(d=m.parentNode),d}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(d,m=this){d=As(this,d,m),sn(d)?d===ne||d==null||d===""?(this._$AH!==ne&&this._$AR(),this._$AH=ne):d!==this._$AH&&d!==Fe&&this.L(d):d._$litType$!==void 0?this.I(d):d.nodeType!==void 0?this.j(d):Qa(d)?this.D(d):this.L(d)}H(d){return this._$AA.parentNode.insertBefore(d,this._$AB)}j(d){this._$AH!==d&&(this._$AR(),this._$AH=this.H(d))}L(d){this._$AH!==ne&&sn(this._$AH)?this._$AA.nextSibling.data=d:this.j(Ps.createTextNode(d)),this._$AH=d}I(d){let{values:m,_$litType$:C}=d,H=typeof C=="number"?this._$AC(d):(C.el===void 0&&(C.el=nn.createElement(Ja(C.h,C.h[0]),this.options)),C);if(this._$AH?._$AD===H)this._$AH.R(m);else{let X=new En(H,this),W=X.O(this.options);X.R(m),this.j(W),this._$AH=X}}_$AC(d){let m=Fa.get(d.strings);return m===void 0&&Fa.set(d.strings,m=new nn(d)),m}D(d){Ga(this._$AH)||(this._$AH=[],this._$AR());let m=this._$AH,C,H=0;for(let X of d)H===m.length?m.push(C=new el(this.H(en()),this.H(en()),this,this.options)):C=m[H],C._$AI(X),H++;H<m.length&&(this._$AR(C&&C._$AB.nextSibling,H),m.length=H)}_$AR(d=this._$AA.nextSibling,m){for(this._$AP?.(!1,!0,m);d&&d!==this._$AB;){let C=d.nextSibling;d.remove(),d=C}}setConnected(d){this._$AM===void 0&&(this.V=d,this._$AP?.(d))}},Rs=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(d,m,C,H,X){this.type=1,this._$AH=ne,this._$AN=void 0,this.element=d,this.name=m,this._$AM=H,this.options=X,C.length>2||C[0]!==""||C[1]!==""?(this._$AH=Array(C.length-1).fill(new String),this.strings=C):this._$AH=ne}_$AI(d,m=this,C,H){let X=this.strings,W=!1;if(X===void 0)d=As(this,d,m,0),W=!sn(d)||d!==this._$AH&&d!==Fe,W&&(this._$AH=d);else{let at=d,q,Rt;for(d=X[0],q=0;q<X.length-1;q++)Rt=As(this,at[C+q],m,q),Rt===Fe&&(Rt=this._$AH[q]),W||=!sn(Rt)||Rt!==this._$AH[q],Rt===ne?d=ne:d!==ne&&(d+=(Rt??"")+X[q+1]),this._$AH[q]=Rt}W&&!H&&this.B(d)}B(d){d===ne?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,d??"")}},Dn=class extends Rs{constructor(){super(...arguments),this.type=3}B(d){this.element[this.name]=d===ne?void 0:d}},Pn=class extends Rs{constructor(){super(...arguments),this.type=4}B(d){this.element.toggleAttribute(this.name,!!d&&d!==ne)}},An=class extends Rs{constructor(d,m,C,H,X){super(d,m,C,H,X),this.type=5}_$AI(d,m=this){if((d=As(this,d,m,0)??ne)===Fe)return;let C=this._$AH,H=d===ne&&C!==ne||d.capture!==C.capture||d.once!==C.once||d.passive!==C.passive,X=d!==ne&&(C===ne||H);H&&this.element.removeEventListener(this.name,this,C),X&&this.element.addEventListener(this.name,this,d),this._$AH=d}handleEvent(d){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,d):this._$AH.handleEvent(d)}},Rn=class{constructor(d,m,C){this.element=d,this.type=6,this._$AN=void 0,this._$AM=m,this.options=C}get _$AU(){return this._$AM._$AU}_$AI(d){As(this,d)}},Lh={W:$o,q:cs,J:Fo,Z:1,F:tl,G:En,K:Qa,X:As,Y:Nn,tt:Rs,st:Pn,it:An,et:Dn,ot:Rn},Ih=No.litHtmlPolyfillSupport;Ih?.(nn,Nn),(No.litHtmlVersions??=[]).push("3.1.4");var il=(P,d,m)=>{let C=m?.renderBefore??d,H=C._$litPart$;if(H===void 0){let X=m?.renderBefore??null;C._$litPart$=H=new Nn(d.insertBefore(en(),X),X,void 0,m??{})}return H._$AI(P),H};var ke=class extends vs{constructor(){super(...arguments),this.renderOptions={host:this},this.ht=void 0}createRenderRoot(){let d=super.createRenderRoot();return this.renderOptions.renderBefore??=d.firstChild,d}update(d){let m=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(d),this.ht=il(m,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this.ht?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this.ht?.setConnected(!1)}render(){return Fe}};ke._$litElement$=!0,ke.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:ke});var Hh=globalThis.litElementPolyfillSupport;Hh?.({LitElement:ke});(globalThis.litElementVersions??=[]).push("4.0.6");var{Y:Nh}=Lh,$h=P=>P===null||typeof P!="object"&&typeof P!="function";var Wa=(P,d)=>d===void 0?P?._$litType$!==void 0:P?._$litType$===d,Fh=P=>P?._$litType$?.h!=null;var sl=P=>P.strings===void 0,Ba=()=>document.createComment(""),ws=(P,d,m)=>{let C=P._$AA.parentNode,H=d===void 0?P._$AB:d._$AA;if(m===void 0){let X=C.insertBefore(Ba(),H),W=C.insertBefore(Ba(),H);m=new Nh(X,W,P,P.options)}else{let X=m._$AB.nextSibling,W=m._$AM,at=W!==P;if(at){let q;m._$AQ?.(P),m._$AM=P,m._$AP!==void 0&&(q=P._$AU)!==W._$AU&&m._$AP(q)}if(X!==H||at){let q=m._$AA;for(;q!==X;){let Rt=q.nextSibling;C.insertBefore(q,H),q=Rt}}}return m},xs=(P,d,m=P)=>(P._$AI(d,m),P),Wh={},on=(P,d=Wh)=>P._$AH=d,zo=P=>P._$AH,Ao=P=>{P._$AP?.(!1,!0);let d=P._$AA,m=P._$AB.nextSibling;for(;d!==m;){let C=d.nextSibling;d.remove(),d=C}},nl=P=>{P._$AR()};var Ti=P=>(...d)=>({_$litDirective$:P,values:d}),Bi=class{constructor(d){}get _$AU(){return this._$AM._$AU}_$AT(d,m,C){this.nt=d,this._$AM=m,this.rt=C}_$AS(d,m){return this.update(d,m)}update(d,m){return this.render(...m)}};var tn=(P,d)=>{let m=P._$AN;if(m===void 0)return!1;for(let C of m)C._$AO?.(d,!1),tn(C,d);return!0},On=P=>{let d,m;do{if((d=P._$AM)===void 0)break;m=d._$AN,m.delete(P),P=d}while(m?.size===0)},ol=P=>{for(let d;d=P._$AM;P=d){let m=d._$AN;if(m===void 0)d._$AN=m=new Set;else if(m.has(P))break;m.add(P),jh(d)}};function Bh(P){this._$AN!==void 0?(On(this),this._$AM=P,ol(this)):this._$AM=P}function Uh(P,d=!1,m=0){let C=this._$AH,H=this._$AN;if(H!==void 0&&H.size!==0)if(d)if(Array.isArray(C))for(let X=m;X<C.length;X++)tn(C[X],!1),On(C[X]);else C!=null&&(tn(C,!1),On(C));else tn(this,P)}var jh=P=>{P.type==2&&(P._$AP??=Uh,P._$AQ??=Bh)},rn=class extends Bi{constructor(){super(...arguments),this._$AN=void 0}_$AT(d,m,C){super._$AT(d,m,C),ol(this),this.isConnected=d._$AU}_$AO(d,m=!0){d!==this.isConnected&&(this.isConnected=d,d?this.reconnected?.():this.disconnected?.()),m&&(tn(this,d),On(this))}setValue(d){if(sl(this.nt))this.nt._$AI(d,this);else{let m=[...this.nt._$AH];m[this.rt]=d,this.nt._$AI(m,this,0)}}disconnected(){}reconnected(){}};var zn=class{constructor(d){this.ct=d}disconnect(){this.ct=void 0}reconnect(d){this.ct=d}deref(){return this.ct}},Ln=class{constructor(){this.lt=void 0,this.ut=void 0}get(){return this.lt}pause(){this.lt??=new Promise(d=>this.ut=d)}resume(){this.ut?.(),this.lt=this.ut=void 0}};var In=class extends rn{constructor(){super(...arguments),this.dt=new zn(this),this.ft=new Ln}render(d,m){return Fe}update(d,[m,C]){if(this.isConnected||this.disconnected(),m===this.vt)return Fe;this.vt=m;let H=0,{dt:X,ft:W}=this;return(async(at,q)=>{for await(let Rt of at)if(await q(Rt)===!1)return})(m,async at=>{for(;W.get();)await W.get();let q=X.deref();if(q!==void 0){if(q.vt!==m)return!1;C!==void 0&&(at=C(at,H)),q.commitValue(at,H),H++}return!0}),Fe}commitValue(d,m){this.setValue(d)}disconnected(){this.dt.disconnect(),this.ft.pause()}reconnected(){this.dt.reconnect(this),this.ft.resume()}},Qh=Ti(In),Kh=Ti(class extends In{constructor(P){if(super(P),P.type!==2)throw Error("asyncAppend can only be used in child expressions")}update(P,d){return this.ht=P,super.update(P,d)}commitValue(P,d){d===0&&nl(this.ht);let m=ws(this.ht);xs(m,P)}}),Ua=P=>Fh(P)?P._$litType$.h:P.strings,Zh=Ti(class extends Bi{constructor(P){super(P),this.yt=new WeakMap}render(P){return[P]}update(P,[d]){let m=Wa(this.bt)?Ua(this.bt):null,C=Wa(d)?Ua(d):null;if(m!==null&&(C===null||m!==C)){let H=zo(P).pop(),X=this.yt.get(m);if(X===void 0){let W=document.createDocumentFragment();X=il(ne,W),X.setConnected(!1),this.yt.set(m,X)}on(X,[H]),ws(X,void 0,H)}if(C!==null){if(m===null||m!==C){let H=this.yt.get(C);if(H!==void 0){let X=zo(H).pop();nl(P),ws(P,void 0,X),on(P,[X])}}this.bt=d}else this.bt=void 0;return this.render(d)}});var Jh=Ti(class extends Bi{constructor(P){if(super(P),P.type!==1||P.name!=="class"||P.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(P){return" "+Object.keys(P).filter(d=>P[d]).join(" ")+" "}update(P,[d]){if(this.gt===void 0){this.gt=new Set,P.strings!==void 0&&(this.wt=new Set(P.strings.join(" ").split(/\s/).filter(C=>C!=="")));for(let C in d)d[C]&&!this.wt?.has(C)&&this.gt.add(C);return this.render(d)}let m=P.element.classList;for(let C of this.gt)C in d||(m.remove(C),this.gt.delete(C));for(let C in d){let H=!!d[C];H===this.gt.has(C)||this.wt?.has(C)||(H?(m.add(C),this.gt.add(C)):(m.remove(C),this.gt.delete(C)))}return Fe}}),Vh={},tc=Ti(class extends Bi{constructor(){super(...arguments),this._t=Vh}render(P,d){return d()}update(P,[d,m]){if(Array.isArray(d)){if(Array.isArray(this._t)&&this._t.length===d.length&&d.every((C,H)=>C===this._t[H]))return Fe}else if(this._t===d)return Fe;return this._t=Array.isArray(d)?Array.from(d):d,this.render(d,m)}});var ec=Ti(class extends Bi{constructor(){super(...arguments),this.key=ne}render(P,d){return this.key=P,d}update(P,[d,m]){return d!==this.key&&(on(P),this.key=d),m}}),ic=Ti(class extends Bi{constructor(P){if(super(P),P.type!==3&&P.type!==1&&P.type!==4)throw Error("The `live` directive is not allowed on child or event bindings");if(!sl(P))throw Error("`live` bindings can only contain a single expression")}render(P){return P}update(P,[d]){if(d===Fe||d===ne)return d;let m=P.element,C=P.name;if(P.type===3){if(d===m[C])return Fe}else if(P.type===4){if(!!d===m.hasAttribute(C))return Fe}else if(P.type===1&&m.getAttribute(C)===d+"")return Fe;return on(P),d}});var Ro=new WeakMap,sc=Ti(class extends rn{render(P){return ne}update(P,[d]){let m=d!==this.ct;return m&&this.ct!==void 0&&this.St(void 0),(m||this.$t!==this.Tt)&&(this.ct=d,this.xt=P.options?.host,this.St(this.Tt=P.element)),ne}St(P){if(this.isConnected||(P=void 0),typeof this.ct=="function"){let d=this.xt??globalThis,m=Ro.get(d);m===void 0&&(m=new WeakMap,Ro.set(d,m)),m.get(this.ct)!==void 0&&this.ct.call(this.xt,void 0),m.set(this.ct,P),P!==void 0&&this.ct.call(this.xt,P)}else this.ct.value=P}get $t(){return typeof this.ct=="function"?Ro.get(this.xt??globalThis)?.get(this.ct):this.ct?.value}disconnected(){this.$t===this.Tt&&this.St(void 0)}reconnected(){this.St(this.Tt)}}),ja=(P,d,m)=>{let C=new Map;for(let H=d;H<=m;H++)C.set(P[H],H);return C},nc=Ti(class extends Bi{constructor(P){if(super(P),P.type!==2)throw Error("repeat() can only be used in text expressions")}Et(P,d,m){let C;m===void 0?m=d:d!==void 0&&(C=d);let H=[],X=[],W=0;for(let at of P)H[W]=C?C(at,W):W,X[W]=m(at,W),W++;return{values:X,keys:H}}render(P,d,m){return this.Et(P,d,m).values}update(P,[d,m,C]){let H=zo(P),{values:X,keys:W}=this.Et(d,m,C);if(!Array.isArray(H))return this.Ct=W,X;let at=this.Ct??=[],q=[],Rt,Ot,ft=0,xt=H.length-1,jt=0,Jt=X.length-1;for(;ft<=xt&&jt<=Jt;)if(H[ft]===null)ft++;else if(H[xt]===null)xt--;else if(at[ft]===W[jt])q[jt]=xs(H[ft],X[jt]),ft++,jt++;else if(at[xt]===W[Jt])q[Jt]=xs(H[xt],X[Jt]),xt--,Jt--;else if(at[ft]===W[Jt])q[Jt]=xs(H[ft],X[Jt]),ws(P,q[Jt+1],H[ft]),ft++,Jt--;else if(at[xt]===W[jt])q[jt]=xs(H[xt],X[jt]),ws(P,H[ft],H[xt]),xt--,jt++;else if(Rt===void 0&&(Rt=ja(W,jt,Jt),Ot=ja(at,ft,xt)),Rt.has(at[ft]))if(Rt.has(at[xt])){let ae=Ot.get(W[jt]),Ae=ae!==void 0?H[ae]:null;if(Ae===null){let ue=ws(P,H[ft]);xs(ue,X[jt]),q[jt]=ue}else q[jt]=xs(Ae,X[jt]),ws(P,H[ft],Ae),H[ae]=null;jt++}else Ao(H[xt]),xt--;else Ao(H[ft]),ft++;for(;jt<=Jt;){let ae=ws(P,q[Jt+1]);xs(ae,X[jt]),q[jt++]=ae}for(;ft<=xt;){let ae=H[ft++];ae!==null&&Ao(ae)}return this.Ct=W,on(P,q),Fe}}),rl="important",Yh=" !"+rl,oc=Ti(class extends Bi{constructor(P){if(super(P),P.type!==1||P.name!=="style"||P.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(P){return Object.keys(P).reduce((d,m)=>{let C=P[m];return C==null?d:d+`${m=m.includes("-")?m:m.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${C};`},"")}update(P,[d]){let{style:m}=P.element;if(this.Pt===void 0)return this.Pt=new Set(Object.keys(d)),this.render(d);for(let C of this.Pt)d[C]==null&&(this.Pt.delete(C),C.includes("-")?m.removeProperty(C):m[C]=null);for(let C in d){let H=d[C];if(H!=null){this.Pt.add(C);let X=typeof H=="string"&&H.endsWith(Yh);C.includes("-")||X?m.setProperty(C,X?H.slice(0,-11):H,X?rl:""):m[C]=H}}return Fe}}),rc=Ti(class extends Bi{constructor(P){if(super(P),P.type!==2)throw Error("templateContent can only be used in child bindings")}render(P){return this.At===P?Fe:(this.At=P,document.importNode(P.content,!0))}}),Ns=class extends Bi{constructor(d){if(super(d),this.bt=ne,d.type!==2)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(d){if(d===ne||d==null)return this.kt=void 0,this.bt=d;if(d===Fe)return d;if(typeof d!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(d===this.bt)return this.kt;this.bt=d;let m=[d];return m.raw=m,this.kt={_$litType$:this.constructor.resultType,strings:m,values:[]}}};Ns.directiveName="unsafeHTML",Ns.resultType=1;var $n=Ti(Ns);var an=class extends Ns{};an.directiveName="unsafeSVG",an.resultType=2;var ac=Ti(an),Va=P=>!$h(P)&&typeof P.then=="function",Ya=1073741823;var Lo=class extends rn{constructor(){super(...arguments),this.Mt=Ya,this.Ut=[],this.dt=new zn(this),this.ft=new Ln}render(...d){return d.find(m=>!Va(m))??Fe}update(d,m){let C=this.Ut,H=C.length;this.Ut=m;let X=this.dt,W=this.ft;this.isConnected||this.disconnected();for(let at=0;at<m.length&&!(at>this.Mt);at++){let q=m[at];if(!Va(q))return this.Mt=at,q;at<H&&q===C[at]||(this.Mt=Ya,H=0,Promise.resolve(q).then(async Rt=>{for(;W.get();)await W.get();let Ot=X.deref();if(Ot!==void 0){let ft=Ot.Ut.indexOf(q);ft>-1&&ft<Ot.Mt&&(Ot.Mt=ft,Ot.setValue(Rt))}}))}return Fe}disconnected(){this.dt.disconnect(),this.ft.pause()}reconnected(){this.dt.reconnect(this),this.ft.resume()}},lc=Ti(Lo);var qh=Symbol.for(""),Xh=P=>{if(P?.r===qh)return P?._$litStatic$};var qa=new Map,al=P=>(d,...m)=>{let C=m.length,H,X,W=[],at=[],q,Rt=0,Ot=!1;for(;Rt<C;){for(q=d[Rt];Rt<C&&(X=m[Rt],(H=Xh(X))!==void 0);)q+=H+d[++Rt],Ot=!0;Rt!==C&&at.push(X),W.push(q),Rt++}if(Rt===C&&W.push(d[C]),Ot){let ft=W.join("$$lit$$");(d=qa.get(ft))===void 0&&(W.raw=W,qa.set(ft,d=W)),m=at}return P(d,...m)},hc=al(re),cc=al(zh);window.litDisableBundleWarning||console.warn("Lit has been loaded from a bundle that combines all core features into a single file. To reduce transfer size and parsing cost, consider using the `lit` npm package directly in your project.");(function(P,d){typeof exports=="object"&&typeof module=="object"?module.exports=d():typeof define=="function"&&define.amd?define([],d):typeof exports=="object"?exports.GridStack=d():P.GridStack=d()})(self,()=>(()=>{"use strict";var P={d:(St,r)=>{for(var c in r)P.o(r,c)&&!P.o(St,c)&&Object.defineProperty(St,c,{enumerable:!0,get:r[c]})},o:(St,r)=>Object.prototype.hasOwnProperty.call(St,r)},d={};P.d(d,{GridStack:()=>Bt});class m{static getElements(r,c=document){if(typeof r=="string"){let y="getElementById"in c?c:void 0;if(y&&!isNaN(+r[0])){let D=y.getElementById(r);return D?[D]:[]}let v=c.querySelectorAll(r);return v.length||r[0]==="."||r[0]==="#"||(v=c.querySelectorAll("."+r),v.length||(v=c.querySelectorAll("#"+r))),Array.from(v)}return[r]}static getElement(r,c=document){if(typeof r=="string"){let y="getElementById"in c?c:void 0;if(!r.length)return null;if(y&&r[0]==="#")return y.getElementById(r.substring(1));if(r[0]==="#"||r[0]==="."||r[0]==="[")return c.querySelector(r);if(y&&!isNaN(+r[0]))return y.getElementById(r);let v=c.querySelector(r);return y&&!v&&(v=y.getElementById(r)),v||(v=c.querySelector("."+r)),v}return r}static shouldSizeToContent(r,c=!1){return r?.grid&&(c?r.sizeToContent===!0||r.grid.opts.sizeToContent===!0&&r.sizeToContent===void 0:!!r.sizeToContent||r.grid.opts.sizeToContent&&r.sizeToContent!==!1)}static isIntercepted(r,c){return!(r.y>=c.y+c.h||r.y+r.h<=c.y||r.x+r.w<=c.x||r.x>=c.x+c.w)}static isTouching(r,c){return m.isIntercepted(r,{x:c.x-.5,y:c.y-.5,w:c.w+1,h:c.h+1})}static areaIntercept(r,c){let y=r.x>c.x?r.x:c.x,v=r.x+r.w<c.x+c.w?r.x+r.w:c.x+c.w;if(v<=y)return 0;let D=r.y>c.y?r.y:c.y,F=r.y+r.h<c.y+c.h?r.y+r.h:c.y+c.h;return F<=D?0:(v-y)*(F-D)}static area(r){return r.w*r.h}static sort(r,c=1){return r.sort((v,D)=>{let F=c*((v.y??1e4)-(D.y??1e4));return F===0?c*((v.x??1e4)-(D.x??1e4)):F})}static find(r,c){return c?r.find(y=>y.id===c):void 0}static createStylesheet(r,c,y){let v=document.createElement("style"),D=y?.nonce;return D&&(v.nonce=D),v.setAttribute("type","text/css"),v.setAttribute("gs-style-id",r),v.styleSheet?v.styleSheet.cssText="":v.appendChild(document.createTextNode("")),c?c.insertBefore(v,c.firstChild):(c=document.getElementsByTagName("head")[0]).appendChild(v),v.sheet}static removeStylesheet(r,c){let y=(c||document).querySelector("STYLE[gs-style-id="+r+"]");y&&y.parentNode&&y.remove()}static addCSSRule(r,c,y){typeof r.addRule=="function"?r.addRule(c,y):typeof r.insertRule=="function"&&r.insertRule(`${c}{${y}}`)}static toBool(r){return typeof r=="boolean"?r:typeof r=="string"?!((r=r.toLowerCase())===""||r==="no"||r==="false"||r==="0"):!!r}static toNumber(r){return r===null||r.length===0?void 0:Number(r)}static parseHeight(r){let c,y="px";if(typeof r=="string")if(r==="auto"||r==="")c=0;else{let v=r.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%|cm|mm)?$/);if(!v)throw new Error(`Invalid height val = ${r}`);y=v[2]||"px",c=parseFloat(v[1])}else c=r;return{h:c,unit:y}}static defaults(r,...c){return c.forEach(y=>{for(let v in y){if(!y.hasOwnProperty(v))return;r[v]===null||r[v]===void 0?r[v]=y[v]:typeof y[v]=="object"&&typeof r[v]=="object"&&this.defaults(r[v],y[v])}}),r}static same(r,c){if(typeof r!="object")return r==c;if(typeof r!=typeof c||Object.keys(r).length!==Object.keys(c).length)return!1;for(let y in r)if(r[y]!==c[y])return!1;return!0}static copyPos(r,c,y=!1){return c.x!==void 0&&(r.x=c.x),c.y!==void 0&&(r.y=c.y),c.w!==void 0&&(r.w=c.w),c.h!==void 0&&(r.h=c.h),y&&(c.minW&&(r.minW=c.minW),c.minH&&(r.minH=c.minH),c.maxW&&(r.maxW=c.maxW),c.maxH&&(r.maxH=c.maxH)),r}static samePos(r,c){return r&&c&&r.x===c.x&&r.y===c.y&&(r.w||1)===(c.w||1)&&(r.h||1)===(c.h||1)}static sanitizeMinMax(r){r.minW||delete r.minW,r.minH||delete r.minH,r.maxW||delete r.maxW,r.maxH||delete r.maxH}static removeInternalAndSame(r,c){if(typeof r=="object"&&typeof c=="object")for(let y in r){let v=r[y],D=c[y];y[0]==="_"||v===D?delete r[y]:v&&typeof v=="object"&&D!==void 0&&(m.removeInternalAndSame(v,D),Object.keys(v).length||delete r[y])}}static removeInternalForSave(r,c=!0){for(let y in r)y[0]!=="_"&&r[y]!==null&&r[y]!==void 0||delete r[y];delete r.grid,c&&delete r.el,r.autoPosition||delete r.autoPosition,r.noResize||delete r.noResize,r.noMove||delete r.noMove,r.locked||delete r.locked,r.w!==1&&r.w!==r.minW||delete r.w,r.h!==1&&r.h!==r.minH||delete r.h}static throttle(r,c){let y=!1;return(...v)=>{y||(y=!0,setTimeout(()=>{r(...v),y=!1},c))}}static removePositioningStyles(r){let c=r.style;c.position&&c.removeProperty("position"),c.left&&c.removeProperty("left"),c.top&&c.removeProperty("top"),c.width&&c.removeProperty("width"),c.height&&c.removeProperty("height")}static getScrollElement(r){if(!r)return document.scrollingElement||document.documentElement;let c=getComputedStyle(r);return/(auto|scroll)/.test(c.overflow+c.overflowY)?r:this.getScrollElement(r.parentElement)}static updateScrollPosition(r,c,y){let v=r.getBoundingClientRect(),D=window.innerHeight||document.documentElement.clientHeight;if(v.top<0||v.bottom>D){let F=v.bottom-D,Y=v.top,nt=this.getScrollElement(r);if(nt!==null){let V=nt.scrollTop;v.top<0&&y<0?r.offsetHeight>D?nt.scrollTop+=y:nt.scrollTop+=Math.abs(Y)>Math.abs(y)?y:Y:y>0&&(r.offsetHeight>D?nt.scrollTop+=y:nt.scrollTop+=F>y?y:F),c.top+=nt.scrollTop-V}}}static updateScrollResize(r,c,y){let v=this.getScrollElement(c),D=v.clientHeight,F=v===this.getScrollElement()?0:v.getBoundingClientRect().top,Y=r.clientY-F,nt=Y>D-y;Y<y?v.scrollBy({behavior:"smooth",top:Y-y}):nt&&v.scrollBy({behavior:"smooth",top:y-(D-Y)})}static clone(r){return r==null||typeof r!="object"?r:r instanceof Array?[...r]:{...r}}static cloneDeep(r){let c=["parentGrid","el","grid","subGrid","engine"],y=m.clone(r);for(let v in y)y.hasOwnProperty(v)&&typeof y[v]=="object"&&v.substring(0,2)!=="__"&&!c.find(D=>D===v)&&(y[v]=m.cloneDeep(r[v]));return y}static cloneNode(r){let c=r.cloneNode(!0);return c.removeAttribute("id"),c}static appendTo(r,c){let y;y=typeof c=="string"?m.getElement(c):c,y&&y.appendChild(r)}static addElStyles(r,c){if(c instanceof Object)for(let y in c)c.hasOwnProperty(y)&&(Array.isArray(c[y])?c[y].forEach(v=>{r.style[y]=v}):r.style[y]=c[y])}static initEvent(r,c){let y={type:c.type},v={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:c.target?c.target:r.target};return["altKey","ctrlKey","metaKey","shiftKey"].forEach(D=>y[D]=r[D]),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(D=>y[D]=r[D]),{...y,...v}}static simulateMouseEvent(r,c,y){let v=document.createEvent("MouseEvents");v.initMouseEvent(c,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,r.target),(y||r.target).dispatchEvent(v)}static getValuesFromTransformedElement(r){let c=document.createElement("div");m.addElStyles(c,{opacity:"0",position:"fixed",top:"0px",left:"0px",width:"1px",height:"1px",zIndex:"-999999"}),r.appendChild(c);let y=c.getBoundingClientRect();return r.removeChild(c),c.remove(),{xScale:1/y.width,yScale:1/y.height,xOffset:y.left,yOffset:y.top}}static swap(r,c,y){if(!r)return;let v=r[c];r[c]=r[y],r[y]=v}static canBeRotated(r){return!(!r||r.w===r.h||r.locked||r.noResize||r.grid?.opts.disableResize||r.minW&&r.minW===r.maxW||r.minH&&r.minH===r.maxH)}}class C{constructor(r={}){this.addedNodes=[],this.removedNodes=[],this.column=r.column||12,this.maxRow=r.maxRow,this._float=r.float,this.nodes=r.nodes||[],this.onChange=r.onChange}batchUpdate(r=!0,c=!0){return!!this.batchMode===r||(this.batchMode=r,r?(this._prevFloat=this._float,this._float=!0,this.cleanNodes(),this.saveInitial()):(this._float=this._prevFloat,delete this._prevFloat,c&&this._packNodes(),this._notify())),this}_useEntireRowArea(r,c){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!r._moving||r._skipDown||c.y<=r.y)}_fixCollisions(r,c=r,y,v={}){if(this.sortNodes(-1),!(y=y||this.collide(r,c)))return!1;if(r._moving&&!v.nested&&!this.float&&this.swap(r,y))return!0;let D=c;!this._loading&&this._useEntireRowArea(r,c)&&(D={x:0,w:this.column,y:c.y,h:c.h},y=this.collide(r,D,v.skip));let F=!1,Y={nested:!0,pack:!1};for(;y=y||this.collide(r,D,v.skip);){let nt;if(y.locked||this._loading||r._moving&&!r._skipDown&&c.y>r.y&&!this.float&&(!this.collide(y,{...y,y:r.y},r)||!this.collide(y,{...y,y:c.y-y.h},r))?(r._skipDown=r._skipDown||c.y>r.y,nt=this.moveNode(r,{...c,y:y.y+y.h,...Y}),(y.locked||this._loading)&&nt?m.copyPos(c,r):!y.locked&&nt&&v.pack&&(this._packNodes(),c.y=y.y+y.h,m.copyPos(r,c)),F=F||nt):nt=this.moveNode(y,{...y,y:c.y+c.h,skip:r,...Y}),!nt)return F;y=void 0}return F}collide(r,c=r,y){let v=r._id,D=y?._id;return this.nodes.find(F=>F._id!==v&&F._id!==D&&m.isIntercepted(F,c))}collideAll(r,c=r,y){let v=r._id,D=y?._id;return this.nodes.filter(F=>F._id!==v&&F._id!==D&&m.isIntercepted(F,c))}directionCollideCoverage(r,c,y){if(!c.rect||!r._rect)return;let v,D=r._rect,F={...c.rect};F.y>D.y?(F.h+=F.y-D.y,F.y=D.y):F.h+=D.y-F.y,F.x>D.x?(F.w+=F.x-D.x,F.x=D.x):F.w+=D.x-F.x;let Y=.5;for(let nt of y){if(nt.locked||!nt._rect)break;let V=nt._rect,it=Number.MAX_VALUE,kt=Number.MAX_VALUE;D.y<V.y?it=(F.y+F.h-V.y)/V.h:D.y+D.h>V.y+V.h&&(it=(V.y+V.h-F.y)/V.h),D.x<V.x?kt=(F.x+F.w-V.x)/V.w:D.x+D.w>V.x+V.w&&(kt=(V.x+V.w-F.x)/V.w);let Et=Math.min(kt,it);Et>Y&&(Y=Et,v=nt)}return c.collide=v,v}cacheRects(r,c,y,v,D,F){return this.nodes.forEach(Y=>Y._rect={y:Y.y*c+y,x:Y.x*r+F,w:Y.w*r-F-v,h:Y.h*c-y-D}),this}swap(r,c){if(!c||c.locked||!r||r.locked)return!1;function y(){let D=c.x,F=c.y;return c.x=r.x,c.y=r.y,r.h!=c.h?(r.x=D,r.y=c.y+c.h):r.w!=c.w?(r.x=c.x+c.w,r.y=F):(r.x=D,r.y=F),r._dirty=c._dirty=!0,!0}let v;if(r.w===c.w&&r.h===c.h&&(r.x===c.x||r.y===c.y)&&(v=m.isTouching(r,c)))return y();if(v!==!1){if(r.w===c.w&&r.x===c.x&&(v||(v=m.isTouching(r,c)))){if(c.y<r.y){let D=r;r=c,c=D}return y()}if(v!==!1){if(r.h===c.h&&r.y===c.y&&(v||(v=m.isTouching(r,c)))){if(c.x<r.x){let D=r;r=c,c=D}return y()}return!1}}}isAreaEmpty(r,c,y,v){let D={x:r||0,y:c||0,w:y||1,h:v||1};return!this.collide(D)}compact(r="compact",c=!0){if(this.nodes.length===0)return this;c&&this.sortNodes();let y=this.batchMode;y||this.batchUpdate();let v=this._inColumnResize;v||(this._inColumnResize=!0);let D=this.nodes;return this.nodes=[],D.forEach((F,Y,nt)=>{let V;F.locked||(F.autoPosition=!0,r==="list"&&Y&&(V=nt[Y-1])),this.addNode(F,!1,V)}),v||delete this._inColumnResize,y||this.batchUpdate(!1),this}set float(r){this._float!==r&&(this._float=r||!1,r||this._packNodes()._notify())}get float(){return this._float||!1}sortNodes(r=1){return this.nodes=m.sort(this.nodes,r),this}_packNodes(){return this.batchMode||(this.sortNodes(),this.float?this.nodes.forEach(r=>{if(r._updating||r._orig===void 0||r.y===r._orig.y)return;let c=r.y;for(;c>r._orig.y;)--c,this.collide(r,{x:r.x,y:c,w:r.w,h:r.h})||(r._dirty=!0,r.y=c)}):this.nodes.forEach((r,c)=>{if(!r.locked)for(;r.y>0;){let y=c===0?0:r.y-1;if(c!==0&&this.collide(r,{x:r.x,y,w:r.w,h:r.h}))break;r._dirty=r.y!==y,r.y=y}})),this}prepareNode(r,c){r._id=r._id??C._idSeq++,r.x!==void 0&&r.y!==void 0&&r.x!==null&&r.y!==null||(r.autoPosition=!0);let y={x:0,y:0,w:1,h:1};return m.defaults(r,y),r.autoPosition||delete r.autoPosition,r.noResize||delete r.noResize,r.noMove||delete r.noMove,m.sanitizeMinMax(r),typeof r.x=="string"&&(r.x=Number(r.x)),typeof r.y=="string"&&(r.y=Number(r.y)),typeof r.w=="string"&&(r.w=Number(r.w)),typeof r.h=="string"&&(r.h=Number(r.h)),isNaN(r.x)&&(r.x=y.x,r.autoPosition=!0),isNaN(r.y)&&(r.y=y.y,r.autoPosition=!0),isNaN(r.w)&&(r.w=y.w),isNaN(r.h)&&(r.h=y.h),this.nodeBoundFix(r,c),r}nodeBoundFix(r,c){let y=r._orig||m.copyPos({},r);if(r.maxW&&(r.w=Math.min(r.w,r.maxW)),r.maxH&&(r.h=Math.min(r.h,r.maxH)),r.minW&&r.minW<=this.column&&(r.w=Math.max(r.w,r.minW)),r.minH&&(r.h=Math.max(r.h,r.minH)),(r.x||0)+(r.w||1)>this.column&&this.column<12&&!this._inColumnResize&&r._id&&this.findCacheLayout(r,12)===-1){let v={...r};v.autoPosition||v.x===void 0?(delete v.x,delete v.y):v.x=Math.min(11,v.x),v.w=Math.min(12,v.w||1),this.cacheOneLayout(v,12)}return r.w>this.column?r.w=this.column:r.w<1&&(r.w=1),this.maxRow&&r.h>this.maxRow?r.h=this.maxRow:r.h<1&&(r.h=1),r.x<0&&(r.x=0),r.y<0&&(r.y=0),r.x+r.w>this.column&&(c?r.w=this.column-r.x:r.x=this.column-r.w),this.maxRow&&r.y+r.h>this.maxRow&&(c?r.h=this.maxRow-r.y:r.y=this.maxRow-r.h),m.samePos(r,y)||(r._dirty=!0),this}getDirtyNodes(r){return r?this.nodes.filter(c=>c._dirty&&!m.samePos(c,c._orig)):this.nodes.filter(c=>c._dirty)}_notify(r){if(this.batchMode||!this.onChange)return this;let c=(r||[]).concat(this.getDirtyNodes());return this.onChange(c),this}cleanNodes(){return this.batchMode||this.nodes.forEach(r=>{delete r._dirty,delete r._lastTried}),this}saveInitial(){return this.nodes.forEach(r=>{r._orig=m.copyPos({},r),delete r._dirty}),this._hasLocked=this.nodes.some(r=>r.locked),this}restoreInitial(){return this.nodes.forEach(r=>{m.samePos(r,r._orig)||(m.copyPos(r,r._orig),r._dirty=!0)}),this._notify(),this}findEmptyPosition(r,c=this.nodes,y=this.column,v){let D=!1;for(let F=v?v.y*y+(v.x+v.w):0;!D;++F){let Y=F%y,nt=Math.floor(F/y);if(Y+r.w>y)continue;let V={x:Y,y:nt,w:r.w,h:r.h};c.find(it=>m.isIntercepted(V,it))||(r.x===Y&&r.y===nt||(r._dirty=!0),r.x=Y,r.y=nt,delete r.autoPosition,D=!0)}return D}addNode(r,c=!1,y){let v;return this.nodes.find(D=>D._id===r._id)||(this._inColumnResize?this.nodeBoundFix(r):this.prepareNode(r),delete r._temporaryRemoved,delete r._removeDOM,r.autoPosition&&this.findEmptyPosition(r,this.nodes,this.column,y)&&(delete r.autoPosition,v=!0),this.nodes.push(r),c&&this.addedNodes.push(r),v||this._fixCollisions(r),this.batchMode||this._packNodes()._notify(),r)}removeNode(r,c=!0,y=!1){return this.nodes.find(v=>v._id===r._id)?(y&&this.removedNodes.push(r),c&&(r._removeDOM=!0),this.nodes=this.nodes.filter(v=>v._id!==r._id),r._isAboutToRemove||this._packNodes(),this._notify([r]),this):this}removeAll(r=!0,c=!0){if(delete this._layouts,!this.nodes.length)return this;r&&this.nodes.forEach(v=>v._removeDOM=!0);let y=this.nodes;return this.removedNodes=c?y:[],this.nodes=[],this._notify(y)}moveNodeCheck(r,c){if(!this.changedPosConstrain(r,c))return!1;if(c.pack=!0,!this.maxRow)return this.moveNode(r,c);let y,v=new C({column:this.column,float:this.float,nodes:this.nodes.map(F=>F._id===r._id?(y={...F},y):{...F})});if(!y)return!1;let D=v.moveNode(y,c)&&v.getRow()<=Math.max(this.getRow(),this.maxRow);if(!D&&!c.resizing&&c.collide){let F=c.collide.el.gridstackNode;if(this.swap(r,F))return this._notify(),!0}return!!D&&(v.nodes.filter(F=>F._dirty).forEach(F=>{let Y=this.nodes.find(nt=>nt._id===F._id);Y&&(m.copyPos(Y,F),Y._dirty=!0)}),this._notify(),!0)}willItFit(r){if(delete r._willFitPos,!this.maxRow)return!0;let c=new C({column:this.column,float:this.float,nodes:this.nodes.map(v=>({...v}))}),y={...r};return this.cleanupNode(y),delete y.el,delete y._id,delete y.content,delete y.grid,c.addNode(y),c.getRow()<=this.maxRow&&(r._willFitPos=m.copyPos({},y),!0)}changedPosConstrain(r,c){return c.w=c.w||r.w,c.h=c.h||r.h,r.x!==c.x||r.y!==c.y||(r.maxW&&(c.w=Math.min(c.w,r.maxW)),r.maxH&&(c.h=Math.min(c.h,r.maxH)),r.minW&&(c.w=Math.max(c.w,r.minW)),r.minH&&(c.h=Math.max(c.h,r.minH)),r.w!==c.w||r.h!==c.h)}moveNode(r,c){if(!r||!c)return!1;let y;c.pack!==void 0||this.batchMode||(y=c.pack=!0),typeof c.x!="number"&&(c.x=r.x),typeof c.y!="number"&&(c.y=r.y),typeof c.w!="number"&&(c.w=r.w),typeof c.h!="number"&&(c.h=r.h);let v=r.w!==c.w||r.h!==c.h,D=m.copyPos({},r,!0);if(m.copyPos(D,c),this.nodeBoundFix(D,v),m.copyPos(c,D),!c.forceCollide&&m.samePos(r,c))return!1;let F=m.copyPos({},r),Y=this.collideAll(r,D,c.skip),nt=!0;if(Y.length){let V=r._moving&&!c.nested,it=V?this.directionCollideCoverage(r,c,Y):Y[0];if(V&&it&&r.grid?.opts?.subGridDynamic&&!r.grid._isTemp){let kt=m.areaIntercept(c.rect,it._rect),Et=m.area(c.rect),te=m.area(it._rect);kt/(Et<te?Et:te)>.8&&(it.grid.makeSubGrid(it.el,void 0,r),it=void 0)}it?nt=!this._fixCollisions(r,D,it,c):(nt=!1,y&&delete c.pack)}return nt&&(r._dirty=!0,m.copyPos(r,D)),c.pack&&this._packNodes()._notify(),!m.samePos(r,F)}getRow(){return this.nodes.reduce((r,c)=>Math.max(r,c.y+c.h),0)}beginUpdate(r){return r._updating||(r._updating=!0,delete r._skipDown,this.batchMode||this.saveInitial()),this}endUpdate(){let r=this.nodes.find(c=>c._updating);return r&&(delete r._updating,delete r._skipDown),this}save(r=!0,c){let y=this._layouts?.length,v=y&&this.column!==y-1?this._layouts[y-1]:null,D=[];return this.sortNodes(),this.nodes.forEach(F=>{let Y=v?.find(V=>V._id===F._id),nt={...F,...Y||{}};m.removeInternalForSave(nt,!r),c&&c(F,nt),D.push(nt)}),D}layoutsNodesChange(r){return!this._layouts||this._inColumnResize||this._layouts.forEach((c,y)=>{if(!c||y===this.column)return this;if(y<this.column)this._layouts[y]=void 0;else{let v=y/this.column;r.forEach(D=>{if(!D._orig)return;let F=c.find(Y=>Y._id===D._id);F&&(F.y>=0&&D.y!==D._orig.y&&(F.y+=D.y-D._orig.y),D.x!==D._orig.x&&(F.x=Math.round(D.x*v)),D.w!==D._orig.w&&(F.w=Math.round(D.w*v)))})}}),this}columnChanged(r,c,y="moveScale"){if(!this.nodes.length||!c||r===c)return this;if(y==="none")return this;let v=y==="compact"||y==="list";v&&this.sortNodes(1),c<r&&this.cacheLayout(this.nodes,r),this.batchUpdate();let D=[],F=v?this.nodes:m.sort(this.nodes,-1);if(c>r&&this._layouts){let Y=this._layouts[c]||[],nt=this._layouts.length-1;!Y.length&&r!==nt&&this._layouts[nt]?.length&&(r=nt,this._layouts[nt].forEach(V=>{let it=F.find(kt=>kt._id===V._id);it&&(v||V.autoPosition||(it.x=V.x??it.x,it.y=V.y??it.y),it.w=V.w??it.w,V.x!=null&&V.y!==void 0||(it.autoPosition=!0))})),Y.forEach(V=>{let it=F.findIndex(kt=>kt._id===V._id);if(it!==-1){let kt=F[it];if(v)return void(kt.w=V.w);(V.autoPosition||isNaN(V.x)||isNaN(V.y))&&this.findEmptyPosition(V,D),V.autoPosition||(kt.x=V.x??kt.x,kt.y=V.y??kt.y,kt.w=V.w??kt.w,D.push(kt)),F.splice(it,1)}})}if(v)this.compact(y,!1);else{if(F.length)if(typeof y=="function")y(c,r,D,F);else{let Y=v?1:c/r,nt=y==="move"||y==="moveScale",V=y==="scale"||y==="moveScale";F.forEach(it=>{it.x=c===1?0:nt?Math.round(it.x*Y):Math.min(it.x,c-1),it.w=c===1||r===1?1:V?Math.round(it.w*Y)||1:Math.min(it.w,c),D.push(it)}),F=[]}D=m.sort(D,-1),this._inColumnResize=!0,this.nodes=[],D.forEach(Y=>{this.addNode(Y,!1),delete Y._orig})}return this.nodes.forEach(Y=>delete Y._orig),this.batchUpdate(!1,!v),delete this._inColumnResize,this}cacheLayout(r,c,y=!1){let v=[];return r.forEach((D,F)=>{if(D._id===void 0){let Y=D.id?this.nodes.find(nt=>nt.id===D.id):void 0;D._id=Y?._id??C._idSeq++}v[F]={x:D.x,y:D.y,w:D.w,_id:D._id}}),this._layouts=y?[]:this._layouts||[],this._layouts[c]=v,this}cacheOneLayout(r,c){r._id=r._id??C._idSeq++;let y={x:r.x,y:r.y,w:r.w,_id:r._id};(r.autoPosition||r.x===void 0)&&(delete y.x,delete y.y,r.autoPosition&&(y.autoPosition=!0)),this._layouts=this._layouts||[],this._layouts[c]=this._layouts[c]||[];let v=this.findCacheLayout(r,c);return v===-1?this._layouts[c].push(y):this._layouts[c][v]=y,this}findCacheLayout(r,c){return this._layouts?.[c]?.findIndex(y=>y._id===r._id)??-1}removeNodeFromLayoutCache(r){if(this._layouts)for(let c=0;c<this._layouts.length;c++){let y=this.findCacheLayout(r,c);y!==-1&&this._layouts[c].splice(y,1)}}cleanupNode(r){for(let c in r)c[0]==="_"&&c!=="_id"&&delete r[c];return this}}C._idSeq=0;let H={alwaysShowResizeHandle:"mobile",animate:!0,auto:!0,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:!0},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:"grid-stack-item",decline:"grid-stack-non-removable"},resizable:{handles:"se"},rtl:"auto"},X={handle:".grid-stack-item-content",appendTo:"body"};class W{}let at=typeof window<"u"&&typeof document<"u"&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);class q{}function Rt(St,r){if(St.touches.length>1)return;St.cancelable&&St.preventDefault();let c=St.changedTouches[0],y=document.createEvent("MouseEvents");y.initMouseEvent(r,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),St.target.dispatchEvent(y)}function Ot(St,r){St.cancelable&&St.preventDefault();let c=document.createEvent("MouseEvents");c.initMouseEvent(r,!0,!0,window,1,St.screenX,St.screenY,St.clientX,St.clientY,!1,!1,!1,!1,0,null),St.target.dispatchEvent(c)}function ft(St){q.touchHandled||(q.touchHandled=!0,Rt(St,"mousedown"))}function xt(St){q.touchHandled&&Rt(St,"mousemove")}function jt(St){if(!q.touchHandled)return;q.pointerLeaveTimeout&&(window.clearTimeout(q.pointerLeaveTimeout),delete q.pointerLeaveTimeout);let r=!!W.dragElement;Rt(St,"mouseup"),r||Rt(St,"click"),q.touchHandled=!1}function Jt(St){St.pointerType!=="mouse"&&St.target.releasePointerCapture(St.pointerId)}function ae(St){W.dragElement&&St.pointerType!=="mouse"&&Ot(St,"mouseenter")}function Ae(St){W.dragElement&&St.pointerType!=="mouse"&&(q.pointerLeaveTimeout=window.setTimeout(()=>{delete q.pointerLeaveTimeout,Ot(St,"mouseleave")},10))}class ue{constructor(r,c,y){this.host=r,this.dir=c,this.option=y,this.moving=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._keyEvent=this._keyEvent.bind(this),this._init()}_init(){let r=this.el=document.createElement("div");return r.classList.add("ui-resizable-handle"),r.classList.add(`${ue.prefix}${this.dir}`),r.style.zIndex="100",r.style.userSelect="none",this.host.appendChild(this.el),this.el.addEventListener("mousedown",this._mouseDown),at&&(this.el.addEventListener("touchstart",ft),this.el.addEventListener("pointerdown",Jt)),this}destroy(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),at&&(this.el.removeEventListener("touchstart",ft),this.el.removeEventListener("pointerdown",Jt)),this.host.removeChild(this.el),delete this.el,delete this.host,this}_mouseDown(r){this.mouseDownEvent=r,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),at&&(this.el.addEventListener("touchmove",xt),this.el.addEventListener("touchend",jt)),r.stopPropagation(),r.preventDefault()}_mouseMove(r){let c=this.mouseDownEvent;this.moving?this._triggerEvent("move",r):Math.abs(r.x-c.x)+Math.abs(r.y-c.y)>2&&(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent),this._triggerEvent("move",r),document.addEventListener("keydown",this._keyEvent)),r.stopPropagation()}_mouseUp(r){this.moving&&(this._triggerEvent("stop",r),document.removeEventListener("keydown",this._keyEvent)),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),at&&(this.el.removeEventListener("touchmove",xt),this.el.removeEventListener("touchend",jt)),delete this.moving,delete this.mouseDownEvent,r.stopPropagation(),r.preventDefault()}_keyEvent(r){r.key==="Escape"&&(this.host.gridstackNode?.grid?.engine.restoreInitial(),this._mouseUp(this.mouseDownEvent))}_triggerEvent(r,c){return this.option[r]&&this.option[r](c),this}}ue.prefix="ui-resizable-";class _e{constructor(){this._eventRegister={}}get disabled(){return this._disabled}on(r,c){this._eventRegister[r]=c}off(r){delete this._eventRegister[r]}enable(){this._disabled=!1}disable(){this._disabled=!0}destroy(){delete this._eventRegister}triggerEvent(r,c){if(!this.disabled&&this._eventRegister&&this._eventRegister[r])return this._eventRegister[r](c)}}class Oe extends _e{constructor(r,c={}){super(),this.el=r,this.option=c,this.rectScale={x:1,y:1},this._ui=()=>{let y=this.el.parentElement.getBoundingClientRect(),v={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},D=this.temporalRect||v;return{position:{left:(D.left-y.left)*this.rectScale.x,top:(D.top-y.top)*this.rectScale.y},size:{width:D.width*this.rectScale.x,height:D.height*this.rectScale.y}}},this._mouseOver=this._mouseOver.bind(this),this._mouseOut=this._mouseOut.bind(this),this.enable(),this._setupAutoHide(this.option.autoHide),this._setupHandlers()}on(r,c){super.on(r,c)}off(r){super.off(r)}enable(){super.enable(),this.el.classList.remove("ui-resizable-disabled"),this._setupAutoHide(this.option.autoHide)}disable(){super.disable(),this.el.classList.add("ui-resizable-disabled"),this._setupAutoHide(!1)}destroy(){this._removeHandlers(),this._setupAutoHide(!1),delete this.el,super.destroy()}updateOption(r){let c=r.handles&&r.handles!==this.option.handles,y=r.autoHide&&r.autoHide!==this.option.autoHide;return Object.keys(r).forEach(v=>this.option[v]=r[v]),c&&(this._removeHandlers(),this._setupHandlers()),y&&this._setupAutoHide(this.option.autoHide),this}_setupAutoHide(r){return r?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._mouseOver),this.el.addEventListener("mouseout",this._mouseOut)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._mouseOver),this.el.removeEventListener("mouseout",this._mouseOut),W.overResizeElement===this&&delete W.overResizeElement),this}_mouseOver(r){W.overResizeElement||W.dragElement||(W.overResizeElement=this,this.el.classList.remove("ui-resizable-autohide"))}_mouseOut(r){W.overResizeElement===this&&(delete W.overResizeElement,this.el.classList.add("ui-resizable-autohide"))}_setupHandlers(){return this.handlers=this.option.handles.split(",").map(r=>r.trim()).map(r=>new ue(this.el,r,{start:c=>{this._resizeStart(c)},stop:c=>{this._resizeStop(c)},move:c=>{this._resizing(c,r)}})),this}_resizeStart(r){this.sizeToContent=m.shouldSizeToContent(this.el.gridstackNode,!0),this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=m.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=r,this._setupHelper(),this._applyChange();let c=m.initEvent(r,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(c,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",c),this}_resizing(r,c){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(r,c),this._applyChange();let y=m.initEvent(r,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(y,this._ui()),this.triggerEvent("resize",y),this}_resizeStop(r){let c=m.initEvent(r,{type:"resizestop",target:this.el});return this.option.stop&&this.option.stop(c),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",c),this._cleanHelper(),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this}_setupHelper(){this.elOriginStyleVal=Oe._originStyleProp.map(y=>this.el.style[y]),this.parentOriginStylePosition=this.el.parentElement.style.position;let r=this.el.parentElement,c=m.getValuesFromTransformedElement(r);return this.rectScale={x:c.xScale,y:c.yScale},getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this}_cleanHelper(){return Oe._originStyleProp.forEach((r,c)=>{this.el.style[r]=this.elOriginStyleVal[c]||null}),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this}_getChange(r,c){let y=this.startEvent,v={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},D=r.clientX-y.clientX,F=this.sizeToContent?0:r.clientY-y.clientY,Y,nt;c.indexOf("e")>-1?v.width+=D:c.indexOf("w")>-1&&(v.width-=D,v.left+=D,Y=!0),c.indexOf("s")>-1?v.height+=F:c.indexOf("n")>-1&&(v.height-=F,v.top+=F,nt=!0);let V=this._constrainSize(v.width,v.height,Y,nt);return Math.round(v.width)!==Math.round(V.width)&&(c.indexOf("w")>-1&&(v.left+=v.width-V.width),v.width=V.width),Math.round(v.height)!==Math.round(V.height)&&(c.indexOf("n")>-1&&(v.top+=v.height-V.height),v.height=V.height),v}_constrainSize(r,c,y,v){let D=this.option,F=(y?D.maxWidthMoveLeft:D.maxWidth)||Number.MAX_SAFE_INTEGER,Y=D.minWidth/this.rectScale.x||r,nt=(v?D.maxHeightMoveUp:D.maxHeight)||Number.MAX_SAFE_INTEGER,V=D.minHeight/this.rectScale.y||c;return{width:Math.min(F,Math.max(Y,r)),height:Math.min(nt,Math.max(V,c))}}_applyChange(){let r={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){let c=this.el.parentElement,{left:y,top:v}=c.getBoundingClientRect();r={left:y,top:v,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach(c=>{let y=this.temporalRect[c],v=c==="width"||c==="left"?this.rectScale.x:c==="height"||c==="top"?this.rectScale.y:1;this.el.style[c]=(y-r[c])*v+"px"}),this):this}_removeHandlers(){return this.handlers.forEach(r=>r.destroy()),delete this.handlers,this}}Oe._originStyleProp=["width","height","position","left","top","opacity","zIndex"];class Ee extends _e{constructor(r,c={}){super(),this.el=r,this.option=c,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0};let y=c.handle.substring(1),v=r.gridstackNode;this.dragEls=r.classList.contains(y)?[r]:v?.subGrid?[r.querySelector(c.handle)||r]:Array.from(r.querySelectorAll(c.handle)),this.dragEls.length===0&&(this.dragEls=[r]),this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._keyEvent=this._keyEvent.bind(this),this.enable()}on(r,c){super.on(r,c)}off(r){super.off(r)}enable(){this.disabled!==!1&&(super.enable(),this.dragEls.forEach(r=>{r.addEventListener("mousedown",this._mouseDown),at&&(r.addEventListener("touchstart",ft),r.addEventListener("pointerdown",Jt))}),this.el.classList.remove("ui-draggable-disabled"))}disable(r=!1){this.disabled!==!0&&(super.disable(),this.dragEls.forEach(c=>{c.removeEventListener("mousedown",this._mouseDown),at&&(c.removeEventListener("touchstart",ft),c.removeEventListener("pointerdown",Jt))}),r||this.el.classList.add("ui-draggable-disabled"))}destroy(){this.dragTimeout&&window.clearTimeout(this.dragTimeout),delete this.dragTimeout,this.mouseDownEvent&&this._mouseUp(this.mouseDownEvent),this.disable(!0),delete this.el,delete this.helper,delete this.option,super.destroy()}updateOption(r){return Object.keys(r).forEach(c=>this.option[c]=r[c]),this}_mouseDown(r){if(!W.mouseHandled)return r.button!==0||!this.dragEls.find(c=>c===r.target)&&r.target.closest('input,textarea,button,select,option,[contenteditable="true"],.ui-resizable-handle')||this.option.cancel&&r.target.closest(this.option.cancel)||(this.mouseDownEvent=r,delete this.dragging,delete W.dragElement,delete W.dropElement,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),at&&(r.target.addEventListener("touchmove",xt),r.target.addEventListener("touchend",jt)),r.preventDefault(),document.activeElement&&document.activeElement.blur(),W.mouseHandled=!0),!0}_callDrag(r){if(!this.dragging)return;let c=m.initEvent(r,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(c,this.ui()),this.triggerEvent("drag",c)}_mouseMove(r){let c=this.mouseDownEvent;if(this.lastDrag=r,this.dragging)if(this._dragFollow(r),W.pauseDrag){let y=Number.isInteger(W.pauseDrag)?W.pauseDrag:100;this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>this._callDrag(r),y)}else this._callDrag(r);else if(Math.abs(r.x-c.x)+Math.abs(r.y-c.y)>3){this.dragging=!0,W.dragElement=this;let y=this.el.gridstackNode?.grid;y?W.dropElement=y.el.ddElement.ddDroppable:delete W.dropElement,this.helper=this._createHelper(r),this._setupHelperContainmentStyle(),this.dragTransform=m.getValuesFromTransformedElement(this.helperContainment),this.dragOffset=this._getDragOffset(r,this.el,this.helperContainment),this._setupHelperStyle(r);let v=m.initEvent(r,{target:this.el,type:"dragstart"});this.option.start&&this.option.start(v,this.ui()),this.triggerEvent("dragstart",v),document.addEventListener("keydown",this._keyEvent)}return!0}_mouseUp(r){if(document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),at&&(r.target.removeEventListener("touchmove",xt,!0),r.target.removeEventListener("touchend",jt,!0)),this.dragging){delete this.dragging,delete this.el.gridstackNode?._origRotate,document.removeEventListener("keydown",this._keyEvent),W.dropElement?.el===this.el.parentElement&&delete W.dropElement,this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper===this.el?this._removeHelperStyle():this.helper.remove();let c=m.initEvent(r,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(c),this.triggerEvent("dragstop",c),W.dropElement&&W.dropElement.drop(r)}delete this.helper,delete this.mouseDownEvent,delete W.dragElement,delete W.dropElement,delete W.mouseHandled,r.preventDefault()}_keyEvent(r){let c=this.el.gridstackNode;if(!c?.grid)return;let y=c.grid;if(r.key==="Escape")c._origRotate&&(c._orig=c._origRotate,delete c._origRotate),y.engine.restoreInitial(),this._mouseUp(this.mouseDownEvent);else if(r.key==="r"||r.key==="R"){if(!m.canBeRotated(c))return;c._origRotate=c._origRotate||{...c._orig},delete c._moving,y.setAnimation(!1).rotate(c.el,{top:-this.dragOffset.offsetTop,left:-this.dragOffset.offsetLeft}).setAnimation(),c._moving=!0,this.dragOffset=this._getDragOffset(this.lastDrag,c.el,this.helperContainment),this.helper.style.width=this.dragOffset.width+"px",this.helper.style.height=this.dragOffset.height+"px",m.swap(c._orig,"w","h"),delete c._rect,this._mouseMove(this.lastDrag)}}_createHelper(r){let c=this.el;return typeof this.option.helper=="function"?c=this.option.helper(r):this.option.helper==="clone"&&(c=m.cloneNode(this.el)),document.body.contains(c)||m.appendTo(c,this.option.appendTo==="parent"?this.el.parentElement:this.option.appendTo),c===this.el&&(this.dragElementOriginStyle=Ee.originStyleProp.map(y=>this.el.style[y])),c}_setupHelperStyle(r){this.helper.classList.add("ui-draggable-dragging");let c=this.helper.style;return c.pointerEvents="none",c.width=this.dragOffset.width+"px",c.height=this.dragOffset.height+"px",c.willChange="left, top",c.position="fixed",this._dragFollow(r),c.transition="none",setTimeout(()=>{this.helper&&(c.transition=null)},0),this}_removeHelperStyle(){if(this.helper.classList.remove("ui-draggable-dragging"),!this.helper?.gridstackNode?._isAboutToRemove&&this.dragElementOriginStyle){let c=this.helper,y=this.dragElementOriginStyle.transition||null;c.style.transition=this.dragElementOriginStyle.transition="none",Ee.originStyleProp.forEach(v=>c.style[v]=this.dragElementOriginStyle[v]||null),setTimeout(()=>c.style.transition=y,50)}return delete this.dragElementOriginStyle,this}_dragFollow(r){let c=this.helper.style,y=this.dragOffset;c.left=(r.clientX+y.offsetLeft-0)*this.dragTransform.xScale+"px",c.top=(r.clientY+y.offsetTop-0)*this.dragTransform.yScale+"px"}_setupHelperContainmentStyle(){return this.helperContainment=this.helper.parentElement,this.helper.style.position!=="fixed"&&(this.parentOriginStylePosition=this.helperContainment.style.position,getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this}_getDragOffset(r,c,y){let v=0,D=0;y&&(v=this.dragTransform.xOffset,D=this.dragTransform.yOffset);let F=c.getBoundingClientRect();return{left:F.left,top:F.top,offsetLeft:-r.clientX+F.left-v,offsetTop:-r.clientY+F.top-D,width:F.width*this.dragTransform.xScale,height:F.height*this.dragTransform.yScale}}ui(){let r=this.el.parentElement.getBoundingClientRect(),c=this.helper.getBoundingClientRect();return{position:{top:(c.top-r.top)*this.dragTransform.yScale,left:(c.left-r.left)*this.dragTransform.xScale}}}}Ee.originStyleProp=["transition","pointerEvents","position","left","top","minWidth","willChange"];class Ge extends _e{constructor(r,c={}){super(),this.el=r,this.option=c,this._mouseEnter=this._mouseEnter.bind(this),this._mouseLeave=this._mouseLeave.bind(this),this.enable(),this._setupAccept()}on(r,c){super.on(r,c)}off(r){super.off(r)}enable(){this.disabled!==!1&&(super.enable(),this.el.classList.add("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("mouseenter",this._mouseEnter),this.el.addEventListener("mouseleave",this._mouseLeave),at&&(this.el.addEventListener("pointerenter",ae),this.el.addEventListener("pointerleave",Ae)))}disable(r=!1){this.disabled!==!0&&(super.disable(),this.el.classList.remove("ui-droppable"),r||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("mouseenter",this._mouseEnter),this.el.removeEventListener("mouseleave",this._mouseLeave),at&&(this.el.removeEventListener("pointerenter",ae),this.el.removeEventListener("pointerleave",Ae)))}destroy(){this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),super.destroy()}updateOption(r){return Object.keys(r).forEach(c=>this.option[c]=r[c]),this._setupAccept(),this}_mouseEnter(r){if(!W.dragElement||!this._canDrop(W.dragElement.el))return;r.preventDefault(),r.stopPropagation(),W.dropElement&&W.dropElement!==this&&W.dropElement._mouseLeave(r,!0),W.dropElement=this;let c=m.initEvent(r,{target:this.el,type:"dropover"});this.option.over&&this.option.over(c,this._ui(W.dragElement)),this.triggerEvent("dropover",c),this.el.classList.add("ui-droppable-over")}_mouseLeave(r,c=!1){if(!W.dragElement||W.dropElement!==this)return;r.preventDefault(),r.stopPropagation();let y=m.initEvent(r,{target:this.el,type:"dropout"});if(this.option.out&&this.option.out(y,this._ui(W.dragElement)),this.triggerEvent("dropout",y),W.dropElement===this&&(delete W.dropElement,!c)){let v,D=this.el.parentElement;for(;!v&&D;)v=D.ddElement?.ddDroppable,D=D.parentElement;v&&v._mouseEnter(r)}}drop(r){r.preventDefault();let c=m.initEvent(r,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(c,this._ui(W.dragElement)),this.triggerEvent("drop",c)}_canDrop(r){return r&&(!this.accept||this.accept(r))}_setupAccept(){return this.option.accept?(typeof this.option.accept=="string"?this.accept=r=>r.classList.contains(this.option.accept)||r.matches(this.option.accept):this.accept=this.option.accept,this):this}_ui(r){return{draggable:r.el,...r.ui()}}}class De{static init(r){return r.ddElement||(r.ddElement=new De(r)),r.ddElement}constructor(r){this.el=r}on(r,c){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(r)>-1?this.ddDraggable.on(r,c):this.ddDroppable&&["drop","dropover","dropout"].indexOf(r)>-1?this.ddDroppable.on(r,c):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(r)>-1&&this.ddResizable.on(r,c),this}off(r){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(r)>-1?this.ddDraggable.off(r):this.ddDroppable&&["drop","dropover","dropout"].indexOf(r)>-1?this.ddDroppable.off(r):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(r)>-1&&this.ddResizable.off(r),this}setupDraggable(r){return this.ddDraggable?this.ddDraggable.updateOption(r):this.ddDraggable=new Ee(this.el,r),this}cleanDraggable(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this}setupResizable(r){return this.ddResizable?this.ddResizable.updateOption(r):this.ddResizable=new Oe(this.el,r),this}cleanResizable(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this}setupDroppable(r){return this.ddDroppable?this.ddDroppable.updateOption(r):this.ddDroppable=new Ge(this.el,r),this}cleanDroppable(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this}}let ee=new class{resizable(St,r,c,y){return this._getDDElements(St).forEach(v=>{if(r==="disable"||r==="enable")v.ddResizable&&v.ddResizable[r]();else if(r==="destroy")v.ddResizable&&v.cleanResizable();else if(r==="option")v.setupResizable({[c]:y});else{let D=v.el.gridstackNode.grid,F=v.el.getAttribute("gs-resize-handles")||D.opts.resizable.handles||"e,s,se";F==="all"&&(F="n,e,s,w,se,sw,ne,nw");let Y=!D.opts.alwaysShowResizeHandle;v.setupResizable({...D.opts.resizable,handles:F,autoHide:Y,start:r.start,stop:r.stop,resize:r.resize})}}),this}draggable(St,r,c,y){return this._getDDElements(St).forEach(v=>{if(r==="disable"||r==="enable")v.ddDraggable&&v.ddDraggable[r]();else if(r==="destroy")v.ddDraggable&&v.cleanDraggable();else if(r==="option")v.setupDraggable({[c]:y});else{let D=v.el.gridstackNode.grid;v.setupDraggable({...D.opts.draggable,start:r.start,stop:r.stop,drag:r.drag})}}),this}dragIn(St,r){return this._getDDElements(St).forEach(c=>c.setupDraggable(r)),this}droppable(St,r,c,y){return typeof r.accept!="function"||r._accept||(r._accept=r.accept,r.accept=v=>r._accept(v)),this._getDDElements(St).forEach(v=>{r==="disable"||r==="enable"?v.ddDroppable&&v.ddDroppable[r]():r==="destroy"?v.ddDroppable&&v.cleanDroppable():r==="option"?v.setupDroppable({[c]:y}):v.setupDroppable(r)}),this}isDroppable(St){return!(!(St&&St.ddElement&&St.ddElement.ddDroppable)||St.ddElement.ddDroppable.disabled)}isDraggable(St){return!(!(St&&St.ddElement&&St.ddElement.ddDraggable)||St.ddElement.ddDraggable.disabled)}isResizable(St){return!(!(St&&St.ddElement&&St.ddElement.ddResizable)||St.ddElement.ddResizable.disabled)}on(St,r,c){return this._getDDElements(St).forEach(y=>y.on(r,v=>{c(v,W.dragElement?W.dragElement.el:v.target,W.dragElement?W.dragElement.helper:null)})),this}off(St,r){return this._getDDElements(St).forEach(c=>c.off(r)),this}_getDDElements(St,r=!0){let c=m.getElements(St);if(!c.length)return[];let y=c.map(v=>v.ddElement||(r?De.init(v):null));return r||y.filter(v=>v),y}};class Bt{static init(r={},c=".grid-stack"){if(typeof document>"u")return null;let y=Bt.getGridElement(c);return y?(y.gridstack||(y.gridstack=new Bt(y,m.cloneDeep(r))),y.gridstack):(console.error(typeof c=="string"?'GridStack.initAll() no grid was found with selector "'+c+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`:"GridStack.init() no grid element was passed."),null)}static initAll(r={},c=".grid-stack"){let y=[];return typeof document>"u"||(Bt.getGridElements(c).forEach(v=>{v.gridstack||(v.gridstack=new Bt(v,m.cloneDeep(r))),y.push(v.gridstack)}),y.length===0&&console.error('GridStack.initAll() no grid was found with selector "'+c+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`)),y}static addGrid(r,c={}){if(!r)return null;let y=r;if(y.gridstack){let v=y.gridstack;return c&&(v.opts={...v.opts,...c}),c.children!==void 0&&v.load(c.children),v}if(!r.classList.contains("grid-stack")||Bt.addRemoveCB)if(Bt.addRemoveCB)y=Bt.addRemoveCB(r,c,!0,!0);else{let v=document.implementation.createHTMLDocument("");v.body.innerHTML=`<div class="grid-stack ${c.class||""}"></div>`,y=v.body.children[0],r.appendChild(y)}return Bt.init(c,y)}static registerEngine(r){Bt.engineClass=r}get placeholder(){if(!this._placeholder){let r=document.createElement("div");r.className="placeholder-content",this.opts.placeholderText&&(r.innerHTML=this.opts.placeholderText),this._placeholder=document.createElement("div"),this._placeholder.classList.add(this.opts.placeholderClass,H.itemClass,this.opts.itemClass),this.placeholder.appendChild(r)}return this._placeholder}constructor(r,c={}){this.el=r,this.opts=c,this._gsEventHandler={},this._extraDragRow=0,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0},r.gridstack=this,c=c||{},r.classList.contains("grid-stack")||this.el.classList.add("grid-stack"),c.row&&(c.minRow=c.maxRow=c.row,delete c.row);let y=m.toNumber(r.getAttribute("gs-row"));c.column==="auto"&&delete c.column,c.alwaysShowResizeHandle!==void 0&&(c._alwaysShowResizeHandle=c.alwaysShowResizeHandle);let v=c.columnOpts?.breakpoints,D=c;if(D.oneColumnModeDomSort&&(delete D.oneColumnModeDomSort,console.log("warning: Gridstack oneColumnModeDomSort no longer supported. Use GridStackOptions.columnOpts instead.")),D.oneColumnSize||D.disableOneColumnMode===!1){let kt=D.oneColumnSize||768;delete D.oneColumnSize,delete D.disableOneColumnMode,c.columnOpts=c.columnOpts||{},v=c.columnOpts.breakpoints=c.columnOpts.breakpoints||[];let Et=v.find(te=>te.c===1);Et?Et.w=kt:(Et={c:1,w:kt},v.push(Et,{c:12,w:kt+1}))}let F=c.columnOpts;F&&(F.columnWidth||F.breakpoints?.length?F.columnMax=F.columnMax||12:(delete c.columnOpts,v=void 0)),v?.length>1&&v.sort((kt,Et)=>(Et.w||0)-(kt.w||0));let Y={...m.cloneDeep(H),column:m.toNumber(r.getAttribute("gs-column"))||H.column,minRow:y||m.toNumber(r.getAttribute("gs-min-row"))||H.minRow,maxRow:y||m.toNumber(r.getAttribute("gs-max-row"))||H.maxRow,staticGrid:m.toBool(r.getAttribute("gs-static"))||H.staticGrid,draggable:{handle:(c.handleClass?"."+c.handleClass:c.handle?c.handle:"")||H.draggable.handle},removableOptions:{accept:c.itemClass||H.removableOptions.accept,decline:H.removableOptions.decline}};r.getAttribute("gs-animate")&&(Y.animate=m.toBool(r.getAttribute("gs-animate"))),c=m.defaults(c,Y),this._initMargin(),this.checkDynamicColumn(),this.el.classList.add("gs-"+c.column),c.rtl==="auto"&&(c.rtl=r.style.direction==="rtl"),c.rtl&&this.el.classList.add("grid-stack-rtl");let nt=this.el.parentElement?.parentElement,V=nt?.classList.contains(H.itemClass)?nt.gridstackNode:void 0;V&&(V.subGrid=this,this.parentGridItem=V,this.el.classList.add("grid-stack-nested"),V.el.classList.add("grid-stack-sub-grid")),this._isAutoCellHeight=c.cellHeight==="auto",this._isAutoCellHeight||c.cellHeight==="initial"?this.cellHeight(void 0,!1):(typeof c.cellHeight=="number"&&c.cellHeightUnit&&c.cellHeightUnit!==H.cellHeightUnit&&(c.cellHeight=c.cellHeight+c.cellHeightUnit,delete c.cellHeightUnit),this.cellHeight(c.cellHeight,!1)),c.alwaysShowResizeHandle==="mobile"&&(c.alwaysShowResizeHandle=at),this._styleSheetClass="gs-id-"+C._idSeq++,this.el.classList.add(this._styleSheetClass),this._setStaticClass();let it=c.engineClass||Bt.engineClass||C;if(this.engine=new it({column:this.getColumn(),float:c.float,maxRow:c.maxRow,onChange:kt=>{let Et=0;this.engine.nodes.forEach(te=>{Et=Math.max(Et,te.y+te.h)}),kt.forEach(te=>{let Le=te.el;Le&&(te._removeDOM?(Le&&Le.remove(),delete te._removeDOM):this._writePosAttr(Le,te))}),this._updateStyles(!1,Et)}}),this._updateStyles(!1,0),c.auto&&(this.batchUpdate(),this.engine._loading=!0,this.getGridItems().forEach(kt=>this._prepareElement(kt)),delete this.engine._loading,this.batchUpdate(!1)),c.children){let kt=c.children;delete c.children,kt.length&&this.load(kt)}this.setAnimation(),c.subGridDynamic&&!W.pauseDrag&&(W.pauseDrag=!0),c.draggable?.pause!==void 0&&(W.pauseDrag=c.draggable.pause),this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateResizeEvent()}addWidget(r,c){let y,v;if(typeof r=="string"){let Y=document.implementation.createHTMLDocument("");Y.body.innerHTML=r,y=Y.body.children[0]}else if(arguments.length===0||arguments.length===1&&((D=r).el!==void 0||D.x!==void 0||D.y!==void 0||D.w!==void 0||D.h!==void 0||D.content!==void 0))if(v=c=r,v?.el)y=v.el;else if(Bt.addRemoveCB)y=Bt.addRemoveCB(this.el,c,!0,!1);else{let Y=c?.content||"",nt=document.implementation.createHTMLDocument("");nt.body.innerHTML=`<div class="grid-stack-item ${this.opts.itemClass||""}"><div class="grid-stack-item-content">${Y}</div></div>`,y=nt.body.children[0]}else y=r;var D;if(!y)return;if(v=y.gridstackNode,v&&y.parentElement===this.el&&this.engine.nodes.find(Y=>Y._id===v._id))return y;let F=this._readAttr(y);return c=m.cloneDeep(c)||{},m.defaults(c,F),v=this.engine.prepareNode(c),this._writeAttr(y,c),this.el.appendChild(y),this.makeWidget(y,c),y}makeSubGrid(r,c,y,v=!0){let D,F=r.gridstackNode;if(F||(F=this.makeWidget(r).gridstackNode),F.subGrid?.el)return F.subGrid;let Y,nt=this;for(;nt&&!D;)D=nt.opts?.subGridOpts,nt=nt.parentGridItem?.grid;c=m.cloneDeep({...D||{},children:void 0,...c||F.subGridOpts||{}}),F.subGridOpts=c,c.column==="auto"&&(Y=!0,c.column=Math.max(F.w||1,y?.w||1),delete c.columnOpts);let V,it,kt=F.el.querySelector(".grid-stack-item-content");if(v){if(this._removeDD(F.el),it={...F,x:0,y:0},m.removeInternalForSave(it),delete it.subGridOpts,F.content&&(it.content=F.content,delete F.content),Bt.addRemoveCB)V=Bt.addRemoveCB(this.el,it,!0,!1);else{let te=document.implementation.createHTMLDocument("");te.body.innerHTML='<div class="grid-stack-item"></div>',V=te.body.children[0],V.appendChild(kt),te.body.innerHTML='<div class="grid-stack-item-content"></div>',kt=te.body.children[0],F.el.appendChild(kt)}this._prepareDragDropByNode(F)}if(y){let te=Y?c.column:F.w,Le=F.h+y.h,ii=F.el.style;ii.transition="none",this.update(F.el,{w:te,h:Le}),setTimeout(()=>ii.transition=null)}let Et=F.subGrid=Bt.addGrid(kt,c);return y?._moving&&(Et._isTemp=!0),Y&&(Et._autoColumn=!0),v&&Et.addWidget(V,it),y&&(y._moving?window.setTimeout(()=>m.simulateMouseEvent(y._event,"mouseenter",Et.el),0):Et.addWidget(F.el,F)),Et}removeAsSubGrid(r){let c=this.parentGridItem?.grid;c&&(c.batchUpdate(),c.removeWidget(this.parentGridItem.el,!0,!0),this.engine.nodes.forEach(y=>{y.x+=this.parentGridItem.x,y.y+=this.parentGridItem.y,c.addWidget(y.el,y)}),c.batchUpdate(!1),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,r&&window.setTimeout(()=>m.simulateMouseEvent(r._event,"mouseenter",c.el),0))}save(r=!0,c=!1,y=Bt.saveCB){let v=this.engine.save(r,y);if(v.forEach(D=>{if(r&&D.el&&!D.subGrid&&!y){let F=D.el.querySelector(".grid-stack-item-content");D.content=F?F.innerHTML:void 0,D.content||delete D.content}else if(r||y||delete D.content,D.subGrid?.el){let F=D.subGrid.save(r,c,y);D.subGridOpts=c?F:{children:F},delete D.subGrid}delete D.el}),c){let D=m.cloneDeep(this.opts);D.marginBottom===D.marginTop&&D.marginRight===D.marginLeft&&D.marginTop===D.marginRight&&(D.margin=D.marginTop,delete D.marginTop,delete D.marginRight,delete D.marginBottom,delete D.marginLeft),D.rtl===(this.el.style.direction==="rtl")&&(D.rtl="auto"),this._isAutoCellHeight&&(D.cellHeight="auto"),this._autoColumn&&(D.column="auto");let F=D._alwaysShowResizeHandle;return delete D._alwaysShowResizeHandle,F!==void 0?D.alwaysShowResizeHandle=F:delete D.alwaysShowResizeHandle,m.removeInternalAndSame(D,H),D.children=v,D}return v}load(r,c=Bt.addRemoveCB||!0){r=m.cloneDeep(r);let y=this.getColumn();r.forEach(V=>{V.w=V.w||1,V.h=V.h||1}),r=m.sort(r);let v=0;r.forEach(V=>{v=Math.max(v,(V.x||0)+V.w)}),v>y&&(this._ignoreLayoutsNodeChange=!0,this.engine.cacheLayout(r,v,!0));let D=Bt.addRemoveCB;typeof c=="function"&&(Bt.addRemoveCB=c);let F=[];this.batchUpdate();let Y=!this.engine.nodes.length;Y&&this.setAnimation(!1),!Y&&c&&[...this.engine.nodes].forEach(V=>{V.id&&(m.find(r,V.id)||(Bt.addRemoveCB&&Bt.addRemoveCB(this.el,V,!1,!1),F.push(V),this.removeWidget(V.el,!0,!1)))}),this.engine._loading=!0;let nt=[];return this.engine.nodes=this.engine.nodes.filter(V=>!m.find(r,V.id)||(nt.push(V),!1)),r.forEach(V=>{let it=m.find(nt,V.id);if(it){if(m.shouldSizeToContent(it)&&(V.h=it.h),this.engine.nodeBoundFix(V),(V.autoPosition||V.x===void 0||V.y===void 0)&&(V.w=V.w||it.w,V.h=V.h||it.h,this.engine.findEmptyPosition(V)),this.engine.nodes.push(it),m.samePos(it,V)&&this.moveNode(it,{...V,forceCollide:!0}),this.update(it.el,V),V.subGridOpts?.children){let kt=it.el.querySelector(".grid-stack");kt&&kt.gridstack&&kt.gridstack.load(V.subGridOpts.children)}}else c&&this.addWidget(V)}),delete this.engine._loading,this.engine.removedNodes=F,this.batchUpdate(!1),delete this._ignoreLayoutsNodeChange,D?Bt.addRemoveCB=D:delete Bt.addRemoveCB,Y&&this.opts?.animate&&this.setAnimation(this.opts.animate,!0),this}batchUpdate(r=!0){return this.engine.batchUpdate(r),r||(this._updateContainerHeight(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()),this}getCellHeight(r=!1){if(this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!r||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px"))return this.opts.cellHeight;if(this.opts.cellHeightUnit==="rem")return this.opts.cellHeight*parseFloat(getComputedStyle(document.documentElement).fontSize);if(this.opts.cellHeightUnit==="em")return this.opts.cellHeight*parseFloat(getComputedStyle(this.el).fontSize);if(this.opts.cellHeightUnit==="cm")return this.opts.cellHeight*(96/2.54);if(this.opts.cellHeightUnit==="mm")return this.opts.cellHeight*(96/2.54)/10;let c=this.el.querySelector("."+this.opts.itemClass);if(c){let v=m.toNumber(c.getAttribute("gs-h"))||1;return Math.round(c.offsetHeight/v)}let y=parseInt(this.el.getAttribute("gs-current-row"));return y?Math.round(this.el.getBoundingClientRect().height/y):this.opts.cellHeight}cellHeight(r,c=!0){if(c&&r!==void 0&&this._isAutoCellHeight!==(r==="auto")&&(this._isAutoCellHeight=r==="auto",this._updateResizeEvent()),r!=="initial"&&r!=="auto"||(r=void 0),r===void 0){let v=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;r=this.cellWidth()+v}let y=m.parseHeight(r);return this.opts.cellHeightUnit===y.unit&&this.opts.cellHeight===y.h||(this.opts.cellHeightUnit=y.unit,this.opts.cellHeight=y.h,this.resizeToContentCheck(),c&&this._updateStyles(!0)),this}cellWidth(){return this._widthOrContainer()/this.getColumn()}_widthOrContainer(r=!1){return r&&this.opts.columnOpts?.breakpointForWindow?window.innerWidth:this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}checkDynamicColumn(){let r=this.opts.columnOpts;if(!r||!r.columnWidth&&!r.breakpoints?.length)return!1;let c=this.getColumn(),y=c,v=this._widthOrContainer(!0);if(r.columnWidth)y=Math.min(Math.round(v/r.columnWidth)||1,r.columnMax);else{y=r.columnMax;let D=0;for(;D<r.breakpoints.length&&v<=r.breakpoints[D].w;)y=r.breakpoints[D++].c||c}if(y!==c){let D=r.breakpoints?.find(F=>F.c===y);return this.column(y,D?.layout||r.layout),!0}return!1}compact(r="compact",c=!0){return this.engine.compact(r,c),this._triggerChangeEvent(),this}column(r,c="moveScale"){if(!r||r<1||this.opts.column===r)return this;let y=this.getColumn();return this.opts.column=r,this.engine?(this.engine.column=r,this.el.classList.remove("gs-"+y),this.el.classList.add("gs-"+r),this.engine.columnChanged(y,r,c),this._isAutoCellHeight&&this.cellHeight(),this.resizeToContentCheck(!0),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this):this}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(r=>r.matches("."+this.opts.itemClass)&&!r.matches("."+this.opts.placeholderClass))}destroy(r=!0){if(this.el)return this.offAll(),this._updateResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),r?this.el.parentNode.removeChild(this.el):(this.removeAll(r),this.el.classList.remove(this._styleSheetClass),this.el.removeAttribute("gs-current-row")),this._removeStylesheet(),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,delete this.opts,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this}float(r){return this.opts.float!==r&&(this.opts.float=this.engine.float=r,this._triggerChangeEvent()),this}getFloat(){return this.engine.float}getCellFromPixel(r,c=!1){let y,v=this.el.getBoundingClientRect();y=c?{top:v.top+document.documentElement.scrollTop,left:v.left}:{top:this.el.offsetTop,left:this.el.offsetLeft};let D=r.left-y.left,F=r.top-y.top,Y=v.width/this.getColumn(),nt=v.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(D/Y),y:Math.floor(F/nt)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow)}isAreaEmpty(r,c,y,v){return this.engine.isAreaEmpty(r,c,y,v)}makeWidget(r,c){let y=Bt.getElement(r);this._prepareElement(y,!0,c);let v=y.gridstackNode;return this._updateContainerHeight(),v.subGridOpts&&this.makeSubGrid(y,v.subGridOpts,void 0,!1),this.opts.column===1&&(this._ignoreLayoutsNodeChange=!0),this._triggerAddEvent(),this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,y}on(r,c){if(r.indexOf(" ")!==-1)return r.split(" ").forEach(y=>this.on(y,c)),this;if(r==="change"||r==="added"||r==="removed"||r==="enable"||r==="disable"){let y=r==="enable"||r==="disable";this._gsEventHandler[r]=y?v=>c(v):v=>c(v,v.detail),this.el.addEventListener(r,this._gsEventHandler[r])}else r==="drag"||r==="dragstart"||r==="dragstop"||r==="resizestart"||r==="resize"||r==="resizestop"||r==="dropped"||r==="resizecontent"?this._gsEventHandler[r]=c:console.error("GridStack.on("+r+") event not supported");return this}off(r){return r.indexOf(" ")!==-1?(r.split(" ").forEach(c=>this.off(c)),this):(r!=="change"&&r!=="added"&&r!=="removed"&&r!=="enable"&&r!=="disable"||this._gsEventHandler[r]&&this.el.removeEventListener(r,this._gsEventHandler[r]),delete this._gsEventHandler[r],this)}offAll(){return Object.keys(this._gsEventHandler).forEach(r=>this.off(r)),this}removeWidget(r,c=!0,y=!0){return Bt.getElements(r).forEach(v=>{if(v.parentElement&&v.parentElement!==this.el)return;let D=v.gridstackNode;D||(D=this.engine.nodes.find(F=>v===F.el)),D&&(c&&Bt.addRemoveCB&&Bt.addRemoveCB(this.el,D,!1,!1),delete v.gridstackNode,this._removeDD(v),this.engine.removeNode(D,c,y),c&&v.parentElement&&v.remove())}),y&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this}removeAll(r=!0,c=!0){return this.engine.nodes.forEach(y=>{r&&Bt.addRemoveCB&&Bt.addRemoveCB(this.el,y,!1,!1),delete y.el.gridstackNode,this.opts.staticGrid||this._removeDD(y.el)}),this.engine.removeAll(r,c),c&&this._triggerRemoveEvent(),this}setAnimation(r=this.opts.animate,c){return c?setTimeout(()=>{this.opts&&this.setAnimation(r)}):r?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this}hasAnimationCSS(){return this.el.classList.contains("grid-stack-animate")}setStatic(r,c=!0,y=!0){return!!this.opts.staticGrid===r||(r?this.opts.staticGrid=!0:delete this.opts.staticGrid,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach(v=>{this._prepareDragDropByNode(v),v.subGrid&&y&&v.subGrid.setStatic(r,c,y)}),c&&this._setStaticClass()),this}update(r,c){if(arguments.length>2){console.warn("gridstack.ts: `update(el, x, y, w, h)` is deprecated. Use `update(el, {x, w, content, ...})`. It will be removed soon");let y=arguments,v=1;return c={x:y[v++],y:y[v++],w:y[v++],h:y[v++]},this.update(r,c)}return Bt.getElements(r).forEach(y=>{let v=y?.gridstackNode;if(!v)return;let D=m.cloneDeep(c);this.engine.nodeBoundFix(D),delete D.autoPosition,delete D.id;let F,Y=["x","y","w","h"];if(Y.some(it=>D[it]!==void 0&&D[it]!==v[it])&&(F={},Y.forEach(it=>{F[it]=D[it]!==void 0?D[it]:v[it],delete D[it]})),!F&&(D.minW||D.minH||D.maxW||D.maxH)&&(F={}),D.content!==void 0){let it=y.querySelector(".grid-stack-item-content");it&&it.innerHTML!==D.content&&(it.innerHTML=D.content,v.subGrid?.el&&(it.appendChild(v.subGrid.el),v.subGrid.opts.styleInHead||v.subGrid._updateStyles(!0))),delete D.content}let nt=!1,V=!1;for(let it in D)it[0]!=="_"&&v[it]!==D[it]&&(v[it]=D[it],nt=!0,V=V||!this.opts.staticGrid&&(it==="noResize"||it==="noMove"||it==="locked"));if(m.sanitizeMinMax(v),F){let it=F.w!==void 0&&F.w!==v.w;this.moveNode(v,F),this.resizeToContentCheck(it,v),delete v._orig}(F||nt)&&this._writeAttr(y,v),V&&this._prepareDragDropByNode(v)}),this}moveNode(r,c){let y=r._updating;y||this.engine.cleanNodes().beginUpdate(r),this.engine.moveNode(r,c),this._updateContainerHeight(),y||(this._triggerChangeEvent(),this.engine.endUpdate())}resizeToContent(r){if(!r||(r.classList.remove("size-to-content-max"),!r.clientHeight))return;let c=r.gridstackNode;if(!c)return;let y=c.grid;if(!y||r.parentElement!==y.el)return;let v=y.getCellHeight(!0);if(!v)return;let D,F=c.h?c.h*v:r.clientHeight;if(c.resizeToContentParent&&(D=r.querySelector(c.resizeToContentParent)),D||(D=r.querySelector(Bt.resizeToContentParent)),!D)return;let Y=r.clientHeight-D.clientHeight,nt=c.h?c.h*v-Y:D.clientHeight,V;if(c.subGrid)V=c.subGrid.getRow()*c.subGrid.getCellHeight(!0);else{if(c.subGridOpts?.children?.length)return;{let Et=D.firstElementChild;if(!Et)return void console.error(`Error: GridStack.resizeToContent() widget id:${c.id} '${Bt.resizeToContentParent}'.firstElementChild is null, make sure to have a div like container. Skipping sizing.`);V=Et.getBoundingClientRect().height||nt}}if(nt===V)return;F+=V-nt;let it=Math.ceil(F/v),kt=Number.isInteger(c.sizeToContent)?c.sizeToContent:0;kt&&it>kt&&(it=kt,r.classList.add("size-to-content-max")),c.minH&&it<c.minH?it=c.minH:c.maxH&&it>c.maxH&&(it=c.maxH),it!==c.h&&(y._ignoreLayoutsNodeChange=!0,y.moveNode(c,{h:it}),delete y._ignoreLayoutsNodeChange)}resizeToContentCBCheck(r){Bt.resizeToContentCB?Bt.resizeToContentCB(r):this.resizeToContent(r)}rotate(r,c){return Bt.getElements(r).forEach(y=>{let v=y.gridstackNode;if(!m.canBeRotated(v))return;let D={w:v.h,h:v.w,minH:v.minW,minW:v.minH,maxH:v.maxW,maxW:v.maxH};if(c){let Y=c.left>0?Math.floor(c.left/this.cellWidth()):0,nt=c.top>0?Math.floor(c.top/this.opts.cellHeight):0;D.x=v.x+Y-(v.h-(nt+1)),D.y=v.y+nt-Y}Object.keys(D).forEach(Y=>{D[Y]===void 0&&delete D[Y]});let F=v._orig;this.update(y,D),v._orig=F}),this}margin(r){if(!(typeof r=="string"&&r.split(" ").length>1)){let c=m.parseHeight(r);if(this.opts.marginUnit===c.unit&&this.opts.margin===c.h)return}return this.opts.margin=r,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this._updateStyles(!0),this}getMargin(){return this.opts.margin}willItFit(r){if(arguments.length>1){console.warn("gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon");let c=arguments,y=0,v={x:c[y++],y:c[y++],w:c[y++],h:c[y++],autoPosition:c[y++]};return this.willItFit(v)}return this.engine.willItFit(r)}_triggerChangeEvent(){if(this.engine.batchMode)return this;let r=this.engine.getDirtyNodes(!0);return r&&r.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(r),this._triggerEvent("change",r)),this.engine.saveInitial(),this}_triggerAddEvent(){if(this.engine.batchMode)return this;if(this.engine.addedNodes?.length){this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(c=>{delete c._dirty});let r=[...this.engine.addedNodes];this.engine.addedNodes=[],this._triggerEvent("added",r)}return this}_triggerRemoveEvent(){if(this.engine.batchMode)return this;if(this.engine.removedNodes?.length){let r=[...this.engine.removedNodes];this.engine.removedNodes=[],this._triggerEvent("removed",r)}return this}_triggerEvent(r,c){let y=c?new CustomEvent(r,{bubbles:!1,detail:c}):new Event(r);return this.el.dispatchEvent(y),this}_removeStylesheet(){if(this._styles){let r=this.opts.styleInHead?void 0:this.el.parentNode;m.removeStylesheet(this._styleSheetClass,r),delete this._styles}return this}_updateStyles(r=!1,c){if(r&&this._removeStylesheet(),c===void 0&&(c=this.getRow()),this._updateContainerHeight(),this.opts.cellHeight===0)return this;let y=this.opts.cellHeight,v=this.opts.cellHeightUnit,D=`.${this._styleSheetClass} > .${this.opts.itemClass}`;if(!this._styles){let F=this.opts.styleInHead?void 0:this.el.parentNode;if(this._styles=m.createStylesheet(this._styleSheetClass,F,{nonce:this.opts.nonce}),!this._styles)return this;this._styles._max=0,m.addCSSRule(this._styles,D,`height: ${y}${v}`);let Y=this.opts.marginTop+this.opts.marginUnit,nt=this.opts.marginBottom+this.opts.marginUnit,V=this.opts.marginRight+this.opts.marginUnit,it=this.opts.marginLeft+this.opts.marginUnit,kt=`${D} > .grid-stack-item-content`,Et=`.${this._styleSheetClass} > .grid-stack-placeholder > .placeholder-content`;m.addCSSRule(this._styles,kt,`top: ${Y}; right: ${V}; bottom: ${nt}; left: ${it};`),m.addCSSRule(this._styles,Et,`top: ${Y}; right: ${V}; bottom: ${nt}; left: ${it};`),m.addCSSRule(this._styles,`${D} > .ui-resizable-n`,`top: ${Y};`),m.addCSSRule(this._styles,`${D} > .ui-resizable-s`,`bottom: ${nt}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-ne`,`right: ${V}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-e`,`right: ${V}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-se`,`right: ${V}; bottom: ${nt}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-nw`,`left: ${it}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-w`,`left: ${it}`),m.addCSSRule(this._styles,`${D} > .ui-resizable-sw`,`left: ${it}; bottom: ${nt}`)}if((c=c||this._styles._max)>this._styles._max){let F=Y=>y*Y+v;for(let Y=this._styles._max+1;Y<=c;Y++)m.addCSSRule(this._styles,`${D}[gs-y="${Y}"]`,`top: ${F(Y)}`),m.addCSSRule(this._styles,`${D}[gs-h="${Y+1}"]`,`height: ${F(Y+1)}`);this._styles._max=c}return this}_updateContainerHeight(){if(!this.engine||this.engine.batchMode)return this;let r=this.parentGridItem,c=this.getRow()+this._extraDragRow,y=this.opts.cellHeight,v=this.opts.cellHeightUnit;if(!y)return this;if(!r){let D=m.parseHeight(getComputedStyle(this.el).minHeight);if(D.h>0&&D.unit===v){let F=Math.floor(D.h/y);c<F&&(c=F)}}return this.el.setAttribute("gs-current-row",String(c)),this.el.style.removeProperty("min-height"),this.el.style.removeProperty("height"),c&&(this.el.style[r?"minHeight":"height"]=c*y+v),r&&!r.grid.engine.batchMode&&m.shouldSizeToContent(r)&&r.grid.resizeToContentCBCheck(r.el),this}_prepareElement(r,c=!1,y){y=y||this._readAttr(r),r.gridstackNode=y,y.el=r,y.grid=this,y=this.engine.addNode(y,c),this._writeAttr(r,y),r.classList.add(H.itemClass,this.opts.itemClass);let v=m.shouldSizeToContent(y);return v?r.classList.add("size-to-content"):r.classList.remove("size-to-content"),v&&this.resizeToContentCheck(!1,y),this._prepareDragDropByNode(y),this}_writePosAttr(r,c){return c.x!==void 0&&c.x!==null&&r.setAttribute("gs-x",String(c.x)),c.y!==void 0&&c.y!==null&&r.setAttribute("gs-y",String(c.y)),c.w>1?r.setAttribute("gs-w",String(c.w)):r.removeAttribute("gs-w"),c.h>1?r.setAttribute("gs-h",String(c.h)):r.removeAttribute("gs-h"),this}_writeAttr(r,c){if(!c)return this;this._writePosAttr(r,c);let y={autoPosition:"gs-auto-position",noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id"};for(let v in y)c[v]?r.setAttribute(y[v],String(c[v])):r.removeAttribute(y[v]);return this}_readAttr(r,c=!0){let y={};y.x=m.toNumber(r.getAttribute("gs-x")),y.y=m.toNumber(r.getAttribute("gs-y")),y.w=m.toNumber(r.getAttribute("gs-w")),y.h=m.toNumber(r.getAttribute("gs-h")),y.autoPosition=m.toBool(r.getAttribute("gs-auto-position")),y.noResize=m.toBool(r.getAttribute("gs-no-resize")),y.noMove=m.toBool(r.getAttribute("gs-no-move")),y.locked=m.toBool(r.getAttribute("gs-locked")),y.id=r.getAttribute("gs-id"),y.maxW=m.toNumber(r.getAttribute("gs-max-w")),y.minW=m.toNumber(r.getAttribute("gs-min-w")),y.maxH=m.toNumber(r.getAttribute("gs-max-h")),y.minH=m.toNumber(r.getAttribute("gs-min-h")),c&&(y.w===1&&r.removeAttribute("gs-w"),y.h===1&&r.removeAttribute("gs-h"),y.maxW&&r.removeAttribute("gs-max-w"),y.minW&&r.removeAttribute("gs-min-w"),y.maxH&&r.removeAttribute("gs-max-h"),y.minH&&r.removeAttribute("gs-min-h"));for(let v in y){if(!y.hasOwnProperty(v))return;y[v]||y[v]===0||delete y[v]}return y}_setStaticClass(){let r=["grid-stack-static"];return this.opts.staticGrid?(this.el.classList.add(...r),this.el.setAttribute("gs-static","true")):(this.el.classList.remove(...r),this.el.removeAttribute("gs-static")),this}onResize(){if(!this.el?.clientWidth||this.prevWidth===this.el.clientWidth)return;this.prevWidth=this.el.clientWidth,this.batchUpdate();let r=!1;return this._autoColumn&&this.parentGridItem?this.opts.column!==this.parentGridItem.w&&(this.column(this.parentGridItem.w,"none"),r=!0):r=this.checkDynamicColumn(),this._isAutoCellHeight&&this.cellHeight(),this.engine.nodes.forEach(c=>{c.subGrid&&c.subGrid.onResize()}),this._skipInitialResize||this.resizeToContentCheck(r),delete this._skipInitialResize,this.batchUpdate(!1),this}resizeToContentCheck(r=!1,c=void 0){if(this.engine){if(r&&this.hasAnimationCSS())return setTimeout(()=>this.resizeToContentCheck(!1,c),310);if(c)m.shouldSizeToContent(c)&&this.resizeToContentCBCheck(c.el);else if(this.engine.nodes.some(y=>m.shouldSizeToContent(y))){let y=[...this.engine.nodes];this.batchUpdate(),y.forEach(v=>{m.shouldSizeToContent(v)&&this.resizeToContentCBCheck(v.el)}),this.batchUpdate(!1)}this._gsEventHandler.resizecontent&&this._gsEventHandler.resizecontent(null,c?[c]:this.engine.nodes)}}_updateResizeEvent(r=!1){let c=!this.parentGridItem&&(this._isAutoCellHeight||this.opts.sizeToContent||this.opts.columnOpts||this.engine.nodes.find(y=>y.sizeToContent));return r||!c||this.resizeObserver?!r&&c||!this.resizeObserver||(this.resizeObserver.disconnect(),delete this.resizeObserver,delete this._sizeThrottle):(this._sizeThrottle=m.throttle(()=>this.onResize(),this.opts.cellHeightThrottle),this.resizeObserver=new ResizeObserver(()=>this._sizeThrottle()),this.resizeObserver.observe(this.el),this._skipInitialResize=!0),this}static getElement(r=".grid-stack-item"){return m.getElement(r)}static getElements(r=".grid-stack-item"){return m.getElements(r)}static getGridElement(r){return Bt.getElement(r)}static getGridElements(r){return m.getElements(r)}_initMargin(){let r,c=0,y=[];return typeof this.opts.margin=="string"&&(y=this.opts.margin.split(" ")),y.length===2?(this.opts.marginTop=this.opts.marginBottom=y[0],this.opts.marginLeft=this.opts.marginRight=y[1]):y.length===4?(this.opts.marginTop=y[0],this.opts.marginRight=y[1],this.opts.marginBottom=y[2],this.opts.marginLeft=y[3]):(r=m.parseHeight(this.opts.margin),this.opts.marginUnit=r.unit,c=this.opts.margin=r.h),this.opts.marginTop===void 0?this.opts.marginTop=c:(r=m.parseHeight(this.opts.marginTop),this.opts.marginTop=r.h,delete this.opts.margin),this.opts.marginBottom===void 0?this.opts.marginBottom=c:(r=m.parseHeight(this.opts.marginBottom),this.opts.marginBottom=r.h,delete this.opts.margin),this.opts.marginRight===void 0?this.opts.marginRight=c:(r=m.parseHeight(this.opts.marginRight),this.opts.marginRight=r.h,delete this.opts.margin),this.opts.marginLeft===void 0?this.opts.marginLeft=c:(r=m.parseHeight(this.opts.marginLeft),this.opts.marginLeft=r.h,delete this.opts.margin),this.opts.marginUnit=r.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop),this}static getDD(){return ee}static setupDragIn(r,c,y=document){c?.pause!==void 0&&(W.pauseDrag=c.pause),c={...X,...c||{}};let v=typeof r=="string"?m.getElements(r,y):r;v.length&&v?.forEach(D=>{ee.isDraggable(D)||ee.dragIn(D,c)})}movable(r,c){return this.opts.staticGrid||Bt.getElements(r).forEach(y=>{let v=y.gridstackNode;v&&(c?delete v.noMove:v.noMove=!0,this._prepareDragDropByNode(v))}),this}resizable(r,c){return this.opts.staticGrid||Bt.getElements(r).forEach(y=>{let v=y.gridstackNode;v&&(c?delete v.noResize:v.noResize=!0,this._prepareDragDropByNode(v))}),this}disable(r=!0){if(!this.opts.staticGrid)return this.enableMove(!1,r),this.enableResize(!1,r),this._triggerEvent("disable"),this}enable(r=!0){if(!this.opts.staticGrid)return this.enableMove(!0,r),this.enableResize(!0,r),this._triggerEvent("enable"),this}enableMove(r,c=!0){return this.opts.staticGrid||(r?delete this.opts.disableDrag:this.opts.disableDrag=!0,this.engine.nodes.forEach(y=>{this._prepareDragDropByNode(y),y.subGrid&&c&&y.subGrid.enableMove(r,c)})),this}enableResize(r,c=!0){return this.opts.staticGrid||(r?delete this.opts.disableResize:this.opts.disableResize=!0,this.engine.nodes.forEach(y=>{this._prepareDragDropByNode(y),y.subGrid&&c&&y.subGrid.enableResize(r,c)})),this}_removeDD(r){return ee.draggable(r,"destroy").resizable(r,"destroy"),r.gridstackNode&&delete r.gridstackNode._initDD,delete r.ddElement,this}_setupAcceptWidget(){if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return ee.droppable(this.el,"destroy"),this;let r,c,y=(v,D,F)=>{let Y=D.gridstackNode;if(!Y)return;if(F=F||D,!Y.grid?.el){F.style.transform=`scale(${1/this.dragTransform.xScale},${1/this.dragTransform.yScale})`;let Et=F.getBoundingClientRect();F.style.left=Et.x+(this.dragTransform.xScale-1)*(v.clientX-Et.x)/this.dragTransform.xScale+"px",F.style.top=Et.y+(this.dragTransform.yScale-1)*(v.clientY-Et.y)/this.dragTransform.yScale+"px",F.style.transformOrigin="0px 0px"}let nt=this.el.getBoundingClientRect(),{top:V,left:it}=F.getBoundingClientRect();it-=nt.left,V-=nt.top;let kt={position:{top:V*this.dragTransform.xScale,left:it*this.dragTransform.yScale}};if(Y._temporaryRemoved){if(Y.x=Math.max(0,Math.round(it/c)),Y.y=Math.max(0,Math.round(V/r)),delete Y.autoPosition,this.engine.nodeBoundFix(Y),!this.engine.willItFit(Y)){if(Y.autoPosition=!0,!this.engine.willItFit(Y))return void ee.off(D,"drag");Y._willFitPos&&(m.copyPos(Y,Y._willFitPos),delete Y._willFitPos)}this._onStartMoving(F,v,kt,Y,c,r)}else this._dragOrResize(F,v,kt,Y,c,r)};return ee.droppable(this.el,{accept:v=>{let D=v.gridstackNode||this._readAttr(v,!1);if(D?.grid===this)return!0;if(!this.opts.acceptWidgets)return!1;let F=!0;if(typeof this.opts.acceptWidgets=="function")F=this.opts.acceptWidgets(v);else{let Y=this.opts.acceptWidgets===!0?".grid-stack-item":this.opts.acceptWidgets;F=v.matches(Y)}if(F&&D&&this.opts.maxRow){let Y={w:D.w,h:D.h,minW:D.minW,minH:D.minH};F=this.engine.willItFit(Y)}return F}}).on(this.el,"dropover",(v,D,F)=>{let Y=D.gridstackNode;if(Y?.grid===this&&!Y._temporaryRemoved)return!1;Y?.grid&&Y.grid!==this&&!Y._temporaryRemoved&&Y.grid._leave(D,F),c=this.cellWidth(),r=this.getCellHeight(!0),Y||(Y=this._readAttr(D,!1)),Y.grid||(Y._isExternal=!0,D.gridstackNode=Y),F=F||D;let nt=Y.w||Math.round(F.offsetWidth/c)||1,V=Y.h||Math.round(F.offsetHeight/r)||1;return Y.grid&&Y.grid!==this?(D._gridstackNodeOrig||(D._gridstackNodeOrig=Y),D.gridstackNode=Y={...Y,w:nt,h:V,grid:this},delete Y.x,delete Y.y,this.engine.cleanupNode(Y).nodeBoundFix(Y),Y._initDD=Y._isExternal=Y._temporaryRemoved=!0):(Y.w=nt,Y.h=V,Y._temporaryRemoved=!0),Bt._itemRemoving(Y.el,!1),ee.on(D,"drag",y),y(v,D,F),!1}).on(this.el,"dropout",(v,D,F)=>{let Y=D.gridstackNode;return!!Y&&(Y.grid&&Y.grid!==this||(this._leave(D,F),this._isTemp&&this.removeAsSubGrid(Y)),!1)}).on(this.el,"drop",(v,D,F)=>{let Y=D.gridstackNode;if(Y?.grid===this&&!Y._isExternal)return!1;let nt=!!this.placeholder.parentElement;this.placeholder.remove();let V=nt&&this.opts.animate;V&&this.setAnimation(!1);let it=D._gridstackNodeOrig;if(delete D._gridstackNodeOrig,nt&&it?.grid&&it.grid!==this){let Et=it.grid;Et.engine.removeNodeFromLayoutCache(it),Et.engine.removedNodes.push(it),Et._triggerRemoveEvent()._triggerChangeEvent(),Et.parentGridItem&&!Et.engine.nodes.length&&Et.opts.subGridDynamic&&Et.removeAsSubGrid()}if(!Y||(nt&&(this.engine.cleanupNode(Y),Y.grid=this),delete Y.grid?._isTemp,ee.off(D,"drag"),F!==D?(F.remove(),D.gridstackNode=it,nt&&(D=D.cloneNode(!0))):(D.remove(),this._removeDD(D)),!nt))return!1;D.gridstackNode=Y,Y.el=D;let kt=Y.subGrid?.el?.gridstack;return m.copyPos(Y,this._readAttr(this.placeholder)),m.removePositioningStyles(D),this.el.appendChild(D),this._prepareElement(D,!0,Y),kt&&(kt.parentGridItem=Y,kt.opts.styleInHead||kt._updateStyles(!0)),this._updateContainerHeight(),this.engine.addedNodes.push(Y),this._triggerAddEvent(),this._triggerChangeEvent(),this.engine.endUpdate(),this._gsEventHandler.dropped&&this._gsEventHandler.dropped({...v,type:"dropped"},it&&it.grid?it:void 0,Y),V&&this.setAnimation(this.opts.animate,!0),!1}),this}static _itemRemoving(r,c){let y=r?r.gridstackNode:void 0;y?.grid&&!r.classList.contains(y.grid.opts.removableOptions.decline)&&(c?y._isAboutToRemove=!0:delete y._isAboutToRemove,c?r.classList.add("grid-stack-item-removing"):r.classList.remove("grid-stack-item-removing"))}_setupRemoveDrop(){if(typeof this.opts.removable!="string")return this;let r=document.querySelector(this.opts.removable);return r?(this.opts.staticGrid||ee.isDroppable(r)||ee.droppable(r,this.opts.removableOptions).on(r,"dropover",(c,y)=>Bt._itemRemoving(y,!0)).on(r,"dropout",(c,y)=>Bt._itemRemoving(y,!1)),this):this}_prepareDragDropByNode(r){let c=r.el,y=r.noMove||this.opts.disableDrag,v=r.noResize||this.opts.disableResize;if(this.opts.staticGrid||y&&v)return r._initDD&&(this._removeDD(c),delete r._initDD),c.classList.add("ui-draggable-disabled","ui-resizable-disabled"),this;if(!r._initDD){let D,F,Y=(it,kt)=>{this._gsEventHandler[it.type]&&this._gsEventHandler[it.type](it,it.target),D=this.cellWidth(),F=this.getCellHeight(!0),this._onStartMoving(c,it,kt,r,D,F)},nt=(it,kt)=>{this._dragOrResize(c,it,kt,r,D,F)},V=it=>{this.placeholder.remove(),delete r._moving,delete r._event,delete r._lastTried;let kt=r.w!==r._orig.w,Et=it.target;if(Et.gridstackNode&&Et.gridstackNode.grid===this){if(r.el=Et,r._isAboutToRemove){let te=c.gridstackNode.grid;te._gsEventHandler[it.type]&&te._gsEventHandler[it.type](it,Et),te.engine.nodes.push(r),te.removeWidget(c,!0,!0)}else m.removePositioningStyles(Et),r._temporaryRemoved?(m.copyPos(r,r._orig),this._writePosAttr(Et,r),this.engine.addNode(r)):this._writePosAttr(Et,r),this._gsEventHandler[it.type]&&this._gsEventHandler[it.type](it,Et);this._extraDragRow=0,this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate(),it.type==="resizestop"&&(Number.isInteger(r.sizeToContent)&&(r.sizeToContent=r.h),this.resizeToContentCheck(kt,r))}};ee.draggable(c,{start:Y,stop:V,drag:nt}).resizable(c,{start:Y,stop:V,resize:nt}),r._initDD=!0}return ee.draggable(c,y?"disable":"enable").resizable(c,v?"disable":"enable"),this}_onStartMoving(r,c,y,v,D,F){if(this.engine.cleanNodes().beginUpdate(v),this._writePosAttr(this.placeholder,v),this.el.appendChild(this.placeholder),this.placeholder.gridstackNode=v,v.grid?.el)this.dragTransform=m.getValuesFromTransformedElement(r);else if(this.placeholder&&this.placeholder.closest(".grid-stack")){let Y=this.placeholder.closest(".grid-stack");this.dragTransform=m.getValuesFromTransformedElement(Y)}else this.dragTransform={xScale:1,xOffset:0,yScale:1,yOffset:0};if(v.el=this.placeholder,v._lastUiPosition=y.position,v._prevYPix=y.position.top,v._moving=c.type==="dragstart",delete v._lastTried,c.type==="dropover"&&v._temporaryRemoved&&(this.engine.addNode(v),v._moving=!0),this.engine.cacheRects(D,F,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),c.type==="resizestart"){let Y=this.getColumn()-v.x,nt=(this.opts.maxRow||Number.MAX_SAFE_INTEGER)-v.y;ee.resizable(r,"option","minWidth",D*Math.min(v.minW||1,Y)).resizable(r,"option","minHeight",F*Math.min(v.minH||1,nt)).resizable(r,"option","maxWidth",D*Math.min(v.maxW||Number.MAX_SAFE_INTEGER,Y)).resizable(r,"option","maxWidthMoveLeft",D*Math.min(v.maxW||Number.MAX_SAFE_INTEGER,v.x+v.w)).resizable(r,"option","maxHeight",F*Math.min(v.maxH||Number.MAX_SAFE_INTEGER,nt)).resizable(r,"option","maxHeightMoveUp",F*Math.min(v.maxH||Number.MAX_SAFE_INTEGER,v.y+v.h))}}_dragOrResize(r,c,y,v,D,F){let Y,nt={...v._orig},V=this.opts.marginLeft,it=this.opts.marginRight,kt=this.opts.marginTop,Et=this.opts.marginBottom,te=Math.round(.1*F),Le=Math.round(.1*D);if(V=Math.min(V,Le),it=Math.min(it,Le),kt=Math.min(kt,te),Et=Math.min(Et,te),c.type==="drag"){if(v._temporaryRemoved)return;let Re=y.position.top-v._prevYPix;v._prevYPix=y.position.top,this.opts.draggable.scroll!==!1&&m.updateScrollPosition(r,y.position,Re);let We=y.position.left+(y.position.left>v._lastUiPosition.left?-it:V),Ze=y.position.top+(y.position.top>v._lastUiPosition.top?-Et:kt);nt.x=Math.round(We/D),nt.y=Math.round(Ze/F);let He=this._extraDragRow;if(this.engine.collide(v,nt)){let Je=this.getRow(),Ne=Math.max(0,nt.y+v.h-Je);this.opts.maxRow&&Je+Ne>this.opts.maxRow&&(Ne=Math.max(0,this.opts.maxRow-Je)),this._extraDragRow=Ne}else this._extraDragRow=0;if(this._extraDragRow!==He&&this._updateContainerHeight(),v.x===nt.x&&v.y===nt.y)return}else if(c.type==="resize"){if(nt.x<0||(m.updateScrollResize(c,r,F),nt.w=Math.round((y.size.width-V)/D),nt.h=Math.round((y.size.height-kt)/F),v.w===nt.w&&v.h===nt.h)||v._lastTried&&v._lastTried.w===nt.w&&v._lastTried.h===nt.h)return;let Re=y.position.left+V,We=y.position.top+kt;nt.x=Math.round(Re/D),nt.y=Math.round(We/F),Y=!0}v._event=c,v._lastTried=nt;let ii={x:y.position.left+V,y:y.position.top+kt,w:(y.size?y.size.width:v.w*D)-V-it,h:(y.size?y.size.height:v.h*F)-kt-Et};if(this.engine.moveNodeCheck(v,{...nt,cellWidth:D,cellHeight:F,rect:ii,resizing:Y})){v._lastUiPosition=y.position,this.engine.cacheRects(D,F,kt,it,Et,V),delete v._skipDown,Y&&v.subGrid&&v.subGrid.onResize(),this._extraDragRow=0,this._updateContainerHeight();let Re=c.target;this._writePosAttr(Re,v),this._gsEventHandler[c.type]&&this._gsEventHandler[c.type](c,Re)}}_leave(r,c){let y=r.gridstackNode;y&&((c=c||r).style.transform="scale(1)",ee.off(r,"drag"),y._temporaryRemoved||(y._temporaryRemoved=!0,this.engine.removeNode(y),y.el=y._isExternal&&c?c:r,this.opts.removable===!0&&Bt._itemRemoving(r,!0),r._gridstackNodeOrig?(r.gridstackNode=r._gridstackNodeOrig,delete r._gridstackNodeOrig):y._isExternal&&(delete y.el,delete r.gridstackNode,this.engine.restoreInitial())))}commit(){return this.batchUpdate(!1).prototype,this}}return Bt.resizeToContentParent=".grid-stack-item-content",Bt.Utils=m,Bt.Engine=C,Bt.GDRev="10.3.1",d.GridStack})());(function(P,d,m,C){"use strict";function H(S,O,B){return setTimeout(Rt(S,B),O)}function X(S,O,B){return Array.isArray(S)?(W(S,B[O],B),!0):!1}function W(S,O,B){var h;if(S)if(S.forEach)S.forEach(O,B);else if(S.length!==C)for(h=0;h<S.length;)O.call(B,S[h],h,S),h++;else for(h in S)S.hasOwnProperty(h)&&O.call(B,S[h],h,S)}function at(S,O,B){var h="DEPRECATED METHOD: "+O+`
`+B+` AT 
`;return function(){var p=new Error("get-stack-trace"),f=p&&p.stack?p.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",_=P.console&&(P.console.warn||P.console.log);return _&&_.call(P.console,h,f),S.apply(this,arguments)}}function q(S,O,B){var h,p=O.prototype;h=S.prototype=Object.create(p),h.constructor=S,h._super=p,B&&fe(h,B)}function Rt(S,O){return function(){return S.apply(O,arguments)}}function Ot(S,O){return typeof S==rs?S.apply(O&&O[0]||C,O):S}function ft(S,O){return S===C?O:S}function xt(S,O,B){W(Ae(O),function(h){S.addEventListener(h,B,!1)})}function jt(S,O,B){W(Ae(O),function(h){S.removeEventListener(h,B,!1)})}function Jt(S,O){for(;S;){if(S==O)return!0;S=S.parentNode}return!1}function ae(S,O){return S.indexOf(O)>-1}function Ae(S){return S.trim().split(/\s+/g)}function ue(S,O,B){if(S.indexOf&&!B)return S.indexOf(O);for(var h=0;h<S.length;){if(B&&S[h][B]==O||!B&&S[h]===O)return h;h++}return-1}function _e(S){return Array.prototype.slice.call(S,0)}function Oe(S,O,B){for(var h=[],p=[],f=0;f<S.length;){var _=O?S[f][O]:S[f];ue(p,_)<0&&h.push(S[f]),p[f]=_,f++}return B&&(h=O?h.sort(function(L,K){return L[O]>K[O]}):h.sort()),h}function Ee(S,O){for(var B,h,p=O[0].toUpperCase()+O.slice(1),f=0;f<xe.length;){if(B=xe[f],h=B?B+p:O,h in S)return h;f++}return C}function Ge(){return ni++}function De(S){var O=S.ownerDocument||S;return O.defaultView||O.parentWindow||P}function ee(S,O){var B=this;this.manager=S,this.callback=O,this.element=S.element,this.target=S.options.inputTarget,this.domHandler=function(h){Ot(S.options.enable,[S])&&B.handler(h)},this.init()}function Bt(S){var O,B=S.options.inputClass;return new(O=B||(gi?te:Zi?Re:ui?Ze:Et))(S,St)}function St(S,O,B){var h=B.pointers.length,p=B.changedPointers.length,f=O&Ie&&h-p===0,_=O&(be|Ye)&&h-p===0;B.isFirst=!!f,B.isFinal=!!_,f&&(S.session={}),B.eventType=O,r(S,B),S.emit("hammer.input",B),S.recognize(B),S.session.prevInput=B}function r(S,O){var B=S.session,h=O.pointers,p=h.length;B.firstInput||(B.firstInput=v(O)),p>1&&!B.firstMultiple?B.firstMultiple=v(O):p===1&&(B.firstMultiple=!1);var f=B.firstInput,_=B.firstMultiple,L=_?_.center:f.center,K=O.center=D(h);O.timeStamp=Ki(),O.deltaTime=O.timeStamp-f.timeStamp,O.angle=V(L,K),O.distance=nt(L,K),c(B,O),O.offsetDirection=Y(O.deltaX,O.deltaY);var gt=F(O.deltaTime,O.deltaX,O.deltaY);O.overallVelocityX=gt.x,O.overallVelocityY=gt.y,O.overallVelocity=di(gt.x)>di(gt.y)?gt.x:gt.y,O.scale=_?kt(_.pointers,h):1,O.rotation=_?it(_.pointers,h):0,O.maxPointers=B.prevInput?O.pointers.length>B.prevInput.maxPointers?O.pointers.length:B.prevInput.maxPointers:O.pointers.length,y(B,O);var wt=S.element;Jt(O.srcEvent.target,wt)&&(wt=O.srcEvent.target),O.target=wt}function c(S,O){var B=O.center,h=S.offsetDelta||{},p=S.prevDelta||{},f=S.prevInput||{};O.eventType!==Ie&&f.eventType!==be||(p=S.prevDelta={x:f.deltaX||0,y:f.deltaY||0},h=S.offsetDelta={x:B.x,y:B.y}),O.deltaX=p.x+(B.x-h.x),O.deltaY=p.y+(B.y-h.y)}function y(S,O){var B,h,p,f,_=S.lastInterval||O,L=O.timeStamp-_.timeStamp;if(O.eventType!=Ye&&(L>Pi||_.velocity===C)){var K=O.deltaX-_.deltaX,gt=O.deltaY-_.deltaY,wt=F(L,K,gt);h=wt.x,p=wt.y,B=di(wt.x)>di(wt.y)?wt.x:wt.y,f=Y(K,gt),S.lastInterval=O}else B=_.velocity,h=_.velocityX,p=_.velocityY,f=_.direction;O.velocity=B,O.velocityX=h,O.velocityY=p,O.direction=f}function v(S){for(var O=[],B=0;B<S.pointers.length;)O[B]={clientX:ci(S.pointers[B].clientX),clientY:ci(S.pointers[B].clientY)},B++;return{timeStamp:Ki(),pointers:O,center:D(O),deltaX:S.deltaX,deltaY:S.deltaY}}function D(S){var O=S.length;if(O===1)return{x:ci(S[0].clientX),y:ci(S[0].clientY)};for(var B=0,h=0,p=0;O>p;)B+=S[p].clientX,h+=S[p].clientY,p++;return{x:ci(B/O),y:ci(h/O)}}function F(S,O,B){return{x:O/S||0,y:B/S||0}}function Y(S,O){return S===O?ts:di(S)>=di(O)?0>S?ki:mi:0>O?bi:Hi}function nt(S,O,B){B||(B=Ri);var h=O[B[0]]-S[B[0]],p=O[B[1]]-S[B[1]];return Math.sqrt(h*h+p*p)}function V(S,O,B){B||(B=Ri);var h=O[B[0]]-S[B[0]],p=O[B[1]]-S[B[1]];return 180*Math.atan2(p,h)/Math.PI}function it(S,O){return V(O[1],O[0],Oi)+V(S[1],S[0],Oi)}function kt(S,O){return nt(O[0],O[1],Oi)/nt(S[0],S[1],Oi)}function Et(){this.evEl=ge,this.evWin=Ue,this.pressed=!1,ee.apply(this,arguments)}function te(){this.evEl=es,this.evWin=E,ee.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Le(){this.evTarget=z,this.evWin=I,this.started=!1,ee.apply(this,arguments)}function ii(S,O){var B=_e(S.touches),h=_e(S.changedTouches);return O&(be|Ye)&&(B=Oe(B.concat(h),"identifier",!0)),[B,h]}function Re(){this.evTarget=U,this.targetIds={},ee.apply(this,arguments)}function We(S,O){var B=_e(S.touches),h=this.targetIds;if(O&(Ie|Ai)&&B.length===1)return h[B[0].identifier]=!0,[B,B];var p,f,_=_e(S.changedTouches),L=[],K=this.target;if(f=B.filter(function(gt){return Jt(gt.target,K)}),O===Ie)for(p=0;p<f.length;)h[f[p].identifier]=!0,p++;for(p=0;p<_.length;)h[_[p].identifier]&&L.push(_[p]),O&(be|Ye)&&delete h[_[p].identifier],p++;return L.length?[Oe(f.concat(L),"identifier",!0),L]:void 0}function Ze(){ee.apply(this,arguments);var S=Rt(this.handler,this);this.touch=new Re(this.manager,S),this.mouse=new Et(this.manager,S),this.primaryTouch=null,this.lastTouches=[]}function He(S,O){S&Ie?(this.primaryTouch=O.changedPointers[0].identifier,Je.call(this,O)):S&(be|Ye)&&Je.call(this,O)}function Je(S){var O=S.changedPointers[0];if(O.identifier===this.primaryTouch){var B={x:O.clientX,y:O.clientY};this.lastTouches.push(B);var h=this.lastTouches,p=function(){var f=h.indexOf(B);f>-1&&h.splice(f,1)};setTimeout(p,G)}}function Ne(S){for(var O=S.srcEvent.clientX,B=S.srcEvent.clientY,h=0;h<this.lastTouches.length;h++){var p=this.lastTouches[h],f=Math.abs(O-p.x),_=Math.abs(B-p.y);if(rt>=f&&rt>=_)return!0}return!1}function si(S,O){this.manager=S,this.set(O)}function wi(S){if(ae(S,Lt))return Lt;var O=ae(S,It),B=ae(S,_t);return O&&B?Lt:O||B?O?It:_t:ae(S,vt)?vt:lt}function Di(){if(!st)return!1;var S={},O=P.CSS&&P.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(B){S[B]=O?P.CSS.supports("touch-action",B):!0}),S}function ve(S){this.options=fe({},this.defaults,S||{}),this.id=Ge(),this.manager=null,this.options.enable=ft(this.options.enable,!0),this.state=Dt,this.simultaneous={},this.requireFail=[]}function N(S){return S&le?"cancel":S&se?"end":S&Qt?"move":S&Yt?"start":""}function J(S){return S==Hi?"down":S==bi?"up":S==ki?"left":S==mi?"right":""}function et(S,O){var B=O.manager;return B?B.get(S):S}function ot(){ve.apply(this,arguments)}function ut(){ot.apply(this,arguments),this.pX=null,this.pY=null}function dt(){ot.apply(this,arguments)}function yt(){ve.apply(this,arguments),this._timer=null,this._input=null}function Pt(){ot.apply(this,arguments)}function Tt(){ot.apply(this,arguments)}function Ut(){ve.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function zt(S,O){return O=O||{},O.recognizers=ft(O.recognizers,zt.defaults.preset),new ce(S,O)}function ce(S,O){this.options=fe({},zt.defaults,O||{}),this.options.inputTarget=this.options.inputTarget||S,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=S,this.input=Bt(this),this.touchAction=new si(this,this.options.touchAction),oe(this,!0),W(this.options.recognizers,function(B){var h=this.add(new B[0](B[1]));B[2]&&h.recognizeWith(B[2]),B[3]&&h.requireFailure(B[3])},this)}function oe(S,O){var B=S.element;if(B.style){var h;W(S.options.cssProps,function(p,f){h=Ee(B.style,f),O?(S.oldCssProps[h]=B.style[h],B.style[h]=p):B.style[h]=S.oldCssProps[h]||""}),O||(S.oldCssProps={})}}function Ce(S,O){var B=d.createEvent("Event");B.initEvent(S,!0,!0),B.gesture=O,O.target.dispatchEvent(B)}var fe,xe=["","webkit","Moz","MS","ms","o"],Te=d.createElement("div"),rs="function",ci=Math.round,di=Math.abs,Ki=Date.now;fe=typeof Object.assign!="function"?function(S){if(S===C||S===null)throw new TypeError("Cannot convert undefined or null to object");for(var O=Object(S),B=1;B<arguments.length;B++){var h=arguments[B];if(h!==C&&h!==null)for(var p in h)h.hasOwnProperty(p)&&(O[p]=h[p])}return O}:Object.assign;var Be=at(function(S,O,B){for(var h=Object.keys(O),p=0;p<h.length;)(!B||B&&S[h[p]]===C)&&(S[h[p]]=O[h[p]]),p++;return S},"extend","Use `assign`."),Ii=at(function(S,O){return Be(S,O,!0)},"merge","Use `assign`."),ni=1,_i=/mobile|tablet|ip(ad|hone|od)|android/i,ui="ontouchstart"in P,gi=Ee(P,"PointerEvent")!==C,Zi=ui&&_i.test(navigator.userAgent),$e="touch",Ui="pen",Ji="mouse",ji="kinect",Pi=25,Ie=1,Ai=2,be=4,Ye=8,ts=1,ki=2,mi=4,bi=8,Hi=16,pi=ki|mi,yi=bi|Hi,Vi=pi|yi,Ri=["x","y"],Oi=["clientX","clientY"];ee.prototype={handler:function(){},init:function(){this.evEl&&xt(this.element,this.evEl,this.domHandler),this.evTarget&&xt(this.target,this.evTarget,this.domHandler),this.evWin&&xt(De(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&jt(this.element,this.evEl,this.domHandler),this.evTarget&&jt(this.target,this.evTarget,this.domHandler),this.evWin&&jt(De(this.element),this.evWin,this.domHandler)}};var ds={mousedown:Ie,mousemove:Ai,mouseup:be},ge="mousedown",Ue="mousemove mouseup";q(Et,ee,{handler:function(S){var O=ds[S.type];O&Ie&&S.button===0&&(this.pressed=!0),O&Ai&&S.which!==1&&(O=be),this.pressed&&(O&be&&(this.pressed=!1),this.callback(this.manager,O,{pointers:[S],changedPointers:[S],pointerType:Ji,srcEvent:S}))}});var Ni={pointerdown:Ie,pointermove:Ai,pointerup:be,pointercancel:Ye,pointerout:Ye},we={2:$e,3:Ui,4:Ji,5:ji},es="pointerdown",E="pointermove pointerup pointercancel";P.MSPointerEvent&&!P.PointerEvent&&(es="MSPointerDown",E="MSPointerMove MSPointerUp MSPointerCancel"),q(te,ee,{handler:function(S){var O=this.store,B=!1,h=S.type.toLowerCase().replace("ms",""),p=Ni[h],f=we[S.pointerType]||S.pointerType,_=f==$e,L=ue(O,S.pointerId,"pointerId");p&Ie&&(S.button===0||_)?0>L&&(O.push(S),L=O.length-1):p&(be|Ye)&&(B=!0),0>L||(O[L]=S,this.callback(this.manager,p,{pointers:O,changedPointers:[S],pointerType:f,srcEvent:S}),B&&O.splice(L,1))}});var M={touchstart:Ie,touchmove:Ai,touchend:be,touchcancel:Ye},z="touchstart",I="touchstart touchmove touchend touchcancel";q(Le,ee,{handler:function(S){var O=M[S.type];if(O===Ie&&(this.started=!0),this.started){var B=ii.call(this,S,O);O&(be|Ye)&&B[0].length-B[1].length===0&&(this.started=!1),this.callback(this.manager,O,{pointers:B[0],changedPointers:B[1],pointerType:$e,srcEvent:S})}}});var j={touchstart:Ie,touchmove:Ai,touchend:be,touchcancel:Ye},U="touchstart touchmove touchend touchcancel";q(Re,ee,{handler:function(S){var O=j[S.type],B=We.call(this,S,O);B&&this.callback(this.manager,O,{pointers:B[0],changedPointers:B[1],pointerType:$e,srcEvent:S})}});var G=2500,rt=25;q(Ze,ee,{handler:function(S,O,B){var h=B.pointerType==$e,p=B.pointerType==Ji;if(!(p&&B.sourceCapabilities&&B.sourceCapabilities.firesTouchEvents)){if(h)He.call(this,O,B);else if(p&&Ne.call(this,B))return;this.callback(S,O,B)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ct=Ee(Te.style,"touchAction"),st=ct!==C,pt="compute",lt="auto",vt="manipulation",Lt="none",It="pan-x",_t="pan-y",bt=Di();si.prototype={set:function(S){S==pt&&(S=this.compute()),st&&this.manager.element.style&&bt[S]&&(this.manager.element.style[ct]=S),this.actions=S.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var S=[];return W(this.manager.recognizers,function(O){Ot(O.options.enable,[O])&&(S=S.concat(O.getTouchAction()))}),wi(S.join(" "))},preventDefaults:function(S){var O=S.srcEvent,B=S.offsetDirection;if(this.manager.session.prevented)return void O.preventDefault();var h=this.actions,p=ae(h,Lt)&&!bt[Lt],f=ae(h,_t)&&!bt[_t],_=ae(h,It)&&!bt[It];if(p){var L=S.pointers.length===1,K=S.distance<2,gt=S.deltaTime<250;if(L&&K&&gt)return}return _&&f?void 0:p||f&&B&pi||_&&B&yi?this.preventSrc(O):void 0},preventSrc:function(S){this.manager.session.prevented=!0,S.preventDefault()}};var Dt=1,Yt=2,Qt=4,se=8,de=se,le=16,Kt=32;ve.prototype={defaults:{},set:function(S){return fe(this.options,S),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(S){if(X(S,"recognizeWith",this))return this;var O=this.simultaneous;return S=et(S,this),O[S.id]||(O[S.id]=S,S.recognizeWith(this)),this},dropRecognizeWith:function(S){return X(S,"dropRecognizeWith",this)?this:(S=et(S,this),delete this.simultaneous[S.id],this)},requireFailure:function(S){if(X(S,"requireFailure",this))return this;var O=this.requireFail;return S=et(S,this),ue(O,S)===-1&&(O.push(S),S.requireFailure(this)),this},dropRequireFailure:function(S){if(X(S,"dropRequireFailure",this))return this;S=et(S,this);var O=ue(this.requireFail,S);return O>-1&&this.requireFail.splice(O,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(S){return!!this.simultaneous[S.id]},emit:function(S){function O(p){B.manager.emit(p,S)}var B=this,h=this.state;se>h&&O(B.options.event+N(h)),O(B.options.event),S.additionalEvent&&O(S.additionalEvent),h>=se&&O(B.options.event+N(h))},tryEmit:function(S){return this.canEmit()?this.emit(S):void(this.state=Kt)},canEmit:function(){for(var S=0;S<this.requireFail.length;){if(!(this.requireFail[S].state&(Kt|Dt)))return!1;S++}return!0},recognize:function(S){var O=fe({},S);return Ot(this.options.enable,[this,O])?(this.state&(de|le|Kt)&&(this.state=Dt),this.state=this.process(O),void(this.state&(Yt|Qt|se|le)&&this.tryEmit(O))):(this.reset(),void(this.state=Kt))},process:function(S){},getTouchAction:function(){},reset:function(){}},q(ot,ve,{defaults:{pointers:1},attrTest:function(S){var O=this.options.pointers;return O===0||S.pointers.length===O},process:function(S){var O=this.state,B=S.eventType,h=O&(Yt|Qt),p=this.attrTest(S);return h&&(B&Ye||!p)?O|le:h||p?B&be?O|se:O&Yt?O|Qt:Yt:Kt}}),q(ut,ot,{defaults:{event:"pan",threshold:10,pointers:1,direction:Vi},getTouchAction:function(){var S=this.options.direction,O=[];return S&pi&&O.push(_t),S&yi&&O.push(It),O},directionTest:function(S){var O=this.options,B=!0,h=S.distance,p=S.direction,f=S.deltaX,_=S.deltaY;return p&O.direction||(O.direction&pi?(p=f===0?ts:0>f?ki:mi,B=f!=this.pX,h=Math.abs(S.deltaX)):(p=_===0?ts:0>_?bi:Hi,B=_!=this.pY,h=Math.abs(S.deltaY))),S.direction=p,B&&h>O.threshold&&p&O.direction},attrTest:function(S){return ot.prototype.attrTest.call(this,S)&&(this.state&Yt||!(this.state&Yt)&&this.directionTest(S))},emit:function(S){this.pX=S.deltaX,this.pY=S.deltaY;var O=J(S.direction);O&&(S.additionalEvent=this.options.event+O),this._super.emit.call(this,S)}}),q(dt,ot,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Lt]},attrTest:function(S){return this._super.attrTest.call(this,S)&&(Math.abs(S.scale-1)>this.options.threshold||this.state&Yt)},emit:function(S){if(S.scale!==1){var O=S.scale<1?"in":"out";S.additionalEvent=this.options.event+O}this._super.emit.call(this,S)}}),q(yt,ve,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[lt]},process:function(S){var O=this.options,B=S.pointers.length===O.pointers,h=S.distance<O.threshold,p=S.deltaTime>O.time;if(this._input=S,!h||!B||S.eventType&(be|Ye)&&!p)this.reset();else if(S.eventType&Ie)this.reset(),this._timer=H(function(){this.state=de,this.tryEmit()},O.time,this);else if(S.eventType&be)return de;return Kt},reset:function(){clearTimeout(this._timer)},emit:function(S){this.state===de&&(S&&S.eventType&be?this.manager.emit(this.options.event+"up",S):(this._input.timeStamp=Ki(),this.manager.emit(this.options.event,this._input)))}}),q(Pt,ot,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Lt]},attrTest:function(S){return this._super.attrTest.call(this,S)&&(Math.abs(S.rotation)>this.options.threshold||this.state&Yt)}}),q(Tt,ot,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:pi|yi,pointers:1},getTouchAction:function(){return ut.prototype.getTouchAction.call(this)},attrTest:function(S){var O,B=this.options.direction;return B&(pi|yi)?O=S.overallVelocity:B&pi?O=S.overallVelocityX:B&yi&&(O=S.overallVelocityY),this._super.attrTest.call(this,S)&&B&S.offsetDirection&&S.distance>this.options.threshold&&S.maxPointers==this.options.pointers&&di(O)>this.options.velocity&&S.eventType&be},emit:function(S){var O=J(S.offsetDirection);O&&this.manager.emit(this.options.event+O,S),this.manager.emit(this.options.event,S)}}),q(Ut,ve,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vt]},process:function(S){var O=this.options,B=S.pointers.length===O.pointers,h=S.distance<O.threshold,p=S.deltaTime<O.time;if(this.reset(),S.eventType&Ie&&this.count===0)return this.failTimeout();if(h&&p&&B){if(S.eventType!=be)return this.failTimeout();var f=this.pTime?S.timeStamp-this.pTime<O.interval:!0,_=!this.pCenter||nt(this.pCenter,S.center)<O.posThreshold;this.pTime=S.timeStamp,this.pCenter=S.center,_&&f?this.count+=1:this.count=1,this._input=S;var L=this.count%O.taps;if(L===0)return this.hasRequireFailures()?(this._timer=H(function(){this.state=de,this.tryEmit()},O.interval,this),Yt):de}return Kt},failTimeout:function(){return this._timer=H(function(){this.state=Kt},this.options.interval,this),Kt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==de&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),zt.VERSION="2.0.7",zt.defaults={domEvents:!1,touchAction:pt,enable:!0,inputTarget:null,inputClass:null,preset:[[Pt,{enable:!1}],[dt,{enable:!1},["rotate"]],[Tt,{direction:pi}],[ut,{direction:pi},["swipe"]],[Ut],[Ut,{event:"doubletap",taps:2},["tap"]],[yt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Me=1,me=2;ce.prototype={set:function(S){return fe(this.options,S),S.touchAction&&this.touchAction.update(),S.inputTarget&&(this.input.destroy(),this.input.target=S.inputTarget,this.input.init()),this},stop:function(S){this.session.stopped=S?me:Me},recognize:function(S){var O=this.session;if(!O.stopped){this.touchAction.preventDefaults(S);var B,h=this.recognizers,p=O.curRecognizer;(!p||p&&p.state&de)&&(p=O.curRecognizer=null);for(var f=0;f<h.length;)B=h[f],O.stopped===me||p&&B!=p&&!B.canRecognizeWith(p)?B.reset():B.recognize(S),!p&&B.state&(Yt|Qt|se)&&(p=O.curRecognizer=B),f++}},get:function(S){if(S instanceof ve)return S;for(var O=this.recognizers,B=0;B<O.length;B++)if(O[B].options.event==S)return O[B];return null},add:function(S){if(X(S,"add",this))return this;var O=this.get(S.options.event);return O&&this.remove(O),this.recognizers.push(S),S.manager=this,this.touchAction.update(),S},remove:function(S){if(X(S,"remove",this))return this;if(S=this.get(S)){var O=this.recognizers,B=ue(O,S);B!==-1&&(O.splice(B,1),this.touchAction.update())}return this},on:function(S,O){if(S!==C&&O!==C){var B=this.handlers;return W(Ae(S),function(h){B[h]=B[h]||[],B[h].push(O)}),this}},off:function(S,O){if(S!==C){var B=this.handlers;return W(Ae(S),function(h){O?B[h]&&B[h].splice(ue(B[h],O),1):delete B[h]}),this}},emit:function(S,O){this.options.domEvents&&Ce(S,O);var B=this.handlers[S]&&this.handlers[S].slice();if(B&&B.length){O.type=S,O.preventDefault=function(){O.srcEvent.preventDefault()};for(var h=0;h<B.length;)B[h](O),h++}},destroy:function(){this.element&&oe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},fe(zt,{INPUT_START:Ie,INPUT_MOVE:Ai,INPUT_END:be,INPUT_CANCEL:Ye,STATE_POSSIBLE:Dt,STATE_BEGAN:Yt,STATE_CHANGED:Qt,STATE_ENDED:se,STATE_RECOGNIZED:de,STATE_CANCELLED:le,STATE_FAILED:Kt,DIRECTION_NONE:ts,DIRECTION_LEFT:ki,DIRECTION_RIGHT:mi,DIRECTION_UP:bi,DIRECTION_DOWN:Hi,DIRECTION_HORIZONTAL:pi,DIRECTION_VERTICAL:yi,DIRECTION_ALL:Vi,Manager:ce,Input:ee,TouchAction:si,TouchInput:Re,MouseInput:Et,PointerEventInput:te,TouchMouseInput:Ze,SingleTouchInput:Le,Recognizer:ve,AttrRecognizer:ot,Tap:Ut,Pan:ut,Swipe:Tt,Pinch:dt,Rotate:Pt,Press:yt,on:xt,off:jt,each:W,merge:Ii,extend:Be,assign:fe,inherit:q,bindFn:Rt,prefixed:Ee});var Pe=typeof P<"u"?P:typeof self<"u"?self:{};Pe.Hammer=zt,typeof define=="function"&&define.amd?define(function(){return zt}):typeof module<"u"&&module.exports?module.exports=zt:P[m]=zt})(window,document,"Hammer");(function(P,d){typeof exports=="object"&&typeof module<"u"?module.exports=d():typeof define=="function"&&define.amd?define(d):(P=typeof globalThis<"u"?globalThis:P||self).Chart=d()})(void 0,function(){"use strict";var P=Object.freeze({__proto__:null,get Colors(){return lh},get Decimation(){return hh},get Filler(){return mh},get Legend(){return bh},get SubTitle(){return xh},get Title(){return yh},get Tooltip(){return _h}});function d(){}let m=(()=>{let i=0;return()=>i++})();function C(i){return i==null}function H(i){if(Array.isArray&&Array.isArray(i))return!0;let t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function X(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function W(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function at(i,t){return W(i)?i:t}function q(i,t){return i===void 0?t:i}let Rt=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,Ot=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function ft(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function xt(i,t,e,s){let n,o,a;if(H(i))if(o=i.length,s)for(n=o-1;n>=0;n--)t.call(e,i[n],n);else for(n=0;n<o;n++)t.call(e,i[n],n);else if(X(i))for(a=Object.keys(i),o=a.length,n=0;n<o;n++)t.call(e,i[a[n]],a[n])}function jt(i,t){let e,s,n,o;if(!i||!t||i.length!==t.length)return!1;for(e=0,s=i.length;e<s;++e)if(n=i[e],o=t[e],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function Jt(i){if(H(i))return i.map(Jt);if(X(i)){let t=Object.create(null),e=Object.keys(i),s=e.length,n=0;for(;n<s;++n)t[e[n]]=Jt(i[e[n]]);return t}return i}function ae(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Ae(i,t,e,s){if(!ae(i))return;let n=t[i],o=e[i];X(n)&&X(o)?ue(n,o,s):t[i]=Jt(o)}function ue(i,t,e){let s=H(t)?t:[t],n=s.length;if(!X(i))return i;let o=(e=e||{}).merger||Ae,a;for(let l=0;l<n;++l){if(a=s[l],!X(a))continue;let u=Object.keys(a);for(let g=0,x=u.length;g<x;++g)o(u[g],i,a,e)}return i}function _e(i,t){return ue(i,t,{merger:Oe})}function Oe(i,t,e){if(!ae(i))return;let s=t[i],n=e[i];X(s)&&X(n)?_e(s,n):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Jt(n))}let Ee={"":i=>i,x:i=>i.x,y:i=>i.y};function Ge(i){let t=i.split("."),e=[],s="";for(let n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function De(i,t){return(Ee[t]||(Ee[t]=function(s){let n=Ge(s);return o=>{for(let a of n){if(a==="")break;o=o&&o[a]}return o}}(t)))(i)}function ee(i){return i.charAt(0).toUpperCase()+i.slice(1)}let Bt=i=>i!==void 0,St=i=>typeof i=="function",r=(i,t)=>{if(i.size!==t.size)return!1;for(let e of i)if(!t.has(e))return!1;return!0};function c(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}let y=Math.PI,v=2*y,D=v+y,F=Number.POSITIVE_INFINITY,Y=y/180,nt=y/2,V=y/4,it=2*y/3,kt=Math.log10,Et=Math.sign;function te(i,t,e){return Math.abs(i-t)<e}function Le(i){let t=Math.round(i);i=te(i,t,i/1e3)?t:i;let e=Math.pow(10,Math.floor(kt(i))),s=i/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function ii(i){let t=[],e=Math.sqrt(i),s;for(s=1;s<e;s++)i%s==0&&(t.push(s),t.push(i/s));return e===(0|e)&&t.push(e),t.sort((n,o)=>n-o).pop(),t}function Re(i){return!isNaN(parseFloat(i))&&isFinite(i)}function We(i,t){let e=Math.round(i);return e-t<=i&&e+t>=i}function Ze(i,t,e){let s,n,o;for(s=0,n=i.length;s<n;s++)o=i[s][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function He(i){return i*(y/180)}function Je(i){return i*(180/y)}function Ne(i){if(!W(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function si(i,t){let e=t.x-i.x,s=t.y-i.y,n=Math.sqrt(e*e+s*s),o=Math.atan2(s,e);return o<-.5*y&&(o+=v),{angle:o,distance:n}}function wi(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Di(i,t){return(i-t+D)%v-y}function ve(i){return(i%v+v)%v}function N(i,t,e,s){let n=ve(i),o=ve(t),a=ve(e),l=ve(o-n),u=ve(a-n),g=ve(n-o),x=ve(n-a);return n===o||n===a||s&&o===a||l>u&&g<x}function J(i,t,e){return Math.max(t,Math.min(e,i))}function et(i){return J(i,-32768,32767)}function ot(i,t,e,s=1e-6){return i>=Math.min(t,e)-s&&i<=Math.max(t,e)+s}function ut(i,t,e){e=e||(a=>i[a]<t);let s,n=i.length-1,o=0;for(;n-o>1;)s=o+n>>1,e(s)?o=s:n=s;return{lo:o,hi:n}}let dt=(i,t,e,s)=>ut(i,e,s?n=>{let o=i[n][t];return o<e||o===e&&i[n+1][t]===e}:n=>i[n][t]<e),yt=(i,t,e)=>ut(i,e,s=>i[s][t]>=e);function Pt(i,t,e){let s=0,n=i.length;for(;s<n&&i[s]<t;)s++;for(;n>s&&i[n-1]>e;)n--;return s>0||n<i.length?i.slice(s,n):i}let Tt=["push","pop","shift","splice","unshift"];function Ut(i,t){i._chartjs?i._chartjs.listeners.push(t):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Tt.forEach(e=>{let s="_onData"+ee(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...o){let a=n.apply(this,o);return i._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...o)}),a}})}))}function zt(i,t){let e=i._chartjs;if(!e)return;let s=e.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),s.length>0||(Tt.forEach(o=>{delete i[o]}),delete i._chartjs)}function ce(i){let t=new Set(i);return t.size===i.length?i:Array.from(t)}let oe=typeof window>"u"?function(i){return i()}:window.requestAnimationFrame;function Ce(i,t){let e=[],s=!1;return function(...n){e=n,s||(s=!0,oe.call(window,()=>{s=!1,i.apply(t,e)}))}}function fe(i,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(i,t,s)):i.apply(this,s),t}}let xe=i=>i==="start"?"left":i==="end"?"right":"center",Te=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,rs=(i,t,e,s)=>i===(s?"left":"right")?e:i==="center"?(t+e)/2:t;function ci(i,t,e){let s=t.length,n=0,o=s;if(i._sorted){let{iScale:a,_parsed:l}=i,u=a.axis,{min:g,max:x,minDefined:b,maxDefined:w}=a.getUserBounds();b&&(n=J(Math.min(dt(l,u,g).lo,e?s:dt(t,u,a.getPixelForValue(g)).lo),0,s-1)),o=w?J(Math.max(dt(l,a.axis,x,!0).hi+1,e?0:dt(t,u,a.getPixelForValue(x),!0).hi+1),n,s)-n:s-n}return{start:n,count:o}}function di(i){let{xScale:t,yScale:e,_scaleRanges:s}=i,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return i._scaleRanges=n,!0;let o=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,n),o}class Ki{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,n){let o=e.listeners[n],a=e.duration;o.forEach(l=>l({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(s-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=oe.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;let o=s.items,a,l=o.length-1,u=!1;for(;l>=0;--l)a=o[l],a._active?(a._total>s.duration&&(s.duration=a._total),a.tick(t),u=!0):(o[l]=o[o.length-1],o.pop());u&&(n.draw(),this._notify(n,s,t,"progress")),o.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let s=e.items,n=s.length-1;for(;n>=0;--n)s[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Be=new Ki;function Ii(i){return i+.5|0}let ni=(i,t,e)=>Math.max(Math.min(i,e),t);function _i(i){return ni(Ii(2.55*i),0,255)}function ui(i){return ni(Ii(255*i),0,255)}function gi(i){return ni(Ii(i/2.55)/100,0,1)}function Zi(i){return ni(Ii(100*i),0,100)}let $e={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ui=[..."0123456789ABCDEF"],Ji=i=>Ui[15&i],ji=i=>Ui[(240&i)>>4]+Ui[15&i],Pi=i=>(240&i)>>4==(15&i);function Ie(i){var t=(e=>Pi(e.r)&&Pi(e.g)&&Pi(e.b)&&Pi(e.a))(i)?Ji:ji;return i?"#"+t(i.r)+t(i.g)+t(i.b)+((e,s)=>e<255?s(e):"")(i.a,t):void 0}let Ai=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function be(i,t,e){let s=t*Math.min(e,1-e),n=(o,a=(o+i/30)%12)=>e-s*Math.max(Math.min(a-3,9-a,1),-1);return[n(0),n(8),n(4)]}function Ye(i,t,e){let s=(n,o=(n+i/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function ts(i,t,e){let s=be(i,1,.5),n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)s[n]*=1-t-e,s[n]+=t;return s}function ki(i){let t=i.r/255,e=i.g/255,s=i.b/255,n=Math.max(t,e,s),o=Math.min(t,e,s),a=(n+o)/2,l,u,g;return n!==o&&(g=n-o,u=a>.5?g/(2-n-o):g/(n+o),l=function(x,b,w,k,A){return x===A?(b-w)/k+(b<w?6:0):b===A?(w-x)/k+2:(x-b)/k+4}(t,e,s,g,n),l=60*l+.5),[0|l,u||0,a]}function mi(i,t,e,s){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,s)).map(ui)}function bi(i,t,e){return mi(be,i,t,e)}function Hi(i){return(i%360+360)%360}function pi(i){let t=Ai.exec(i),e,s=255;if(!t)return;t[5]!==e&&(s=t[6]?_i(+t[5]):ui(+t[5]));let n=Hi(+t[2]),o=+t[3]/100,a=+t[4]/100;return e=t[1]==="hwb"?function(l,u,g){return mi(ts,l,u,g)}(n,o,a):t[1]==="hsv"?function(l,u,g){return mi(Ye,l,u,g)}(n,o,a):bi(n,o,a),{r:e[0],g:e[1],b:e[2],a:s}}let yi={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Vi={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},Ri;function Oi(i){Ri||(Ri=function(){let e={},s=Object.keys(Vi),n=Object.keys(yi),o,a,l,u,g;for(o=0;o<s.length;o++){for(u=g=s[o],a=0;a<n.length;a++)l=n[a],g=g.replace(l,yi[l]);l=parseInt(Vi[u],16),e[g]=[l>>16&255,l>>8&255,255&l]}return e}(),Ri.transparent=[0,0,0,0]);let t=Ri[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}let ds=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,ge=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,Ue=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Ni(i,t,e){if(i){let s=ki(i);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=bi(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function we(i,t){return i&&Object.assign(t||{},i)}function es(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=ui(i[3]))):(t=we(i,{r:0,g:0,b:0,a:1})).a=ui(t.a),t}function E(i){return i.charAt(0)==="r"?function(t){let e=ds.exec(t),s,n,o,a=255;if(e){if(e[7]!==s){let l=+e[7];a=e[8]?_i(l):ni(255*l,0,255)}return s=+e[1],n=+e[3],o=+e[5],s=255&(e[2]?_i(s):ni(s,0,255)),n=255&(e[4]?_i(n):ni(n,0,255)),o=255&(e[6]?_i(o):ni(o,0,255)),{r:s,g:n,b:o,a}}}(i):pi(i)}class M{constructor(t){if(t instanceof M)return t;let e=typeof t,s;var n,o,a;e==="object"?s=es(t):e==="string"&&(a=(n=t).length,n[0]==="#"&&(a===4||a===5?o={r:255&17*$e[n[1]],g:255&17*$e[n[2]],b:255&17*$e[n[3]],a:a===5?17*$e[n[4]]:255}:a!==7&&a!==9||(o={r:$e[n[1]]<<4|$e[n[2]],g:$e[n[3]]<<4|$e[n[4]],b:$e[n[5]]<<4|$e[n[6]],a:a===9?$e[n[7]]<<4|$e[n[8]]:255})),s=o||Oi(t)||E(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=we(this._rgb);return t&&(t.a=gi(t.a)),t}set rgb(t){this._rgb=es(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${gi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?Ie(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;let e=ki(t),s=e[0],n=Zi(e[1]),o=Zi(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${o}%, ${gi(t.a)})`:`hsl(${s}, ${n}%, ${o}%)`}(this._rgb):void 0}mix(t,e){if(t){let s=this.rgb,n=t.rgb,o,a=e===o?.5:e,l=2*a-1,u=s.a-n.a,g=((l*u==-1?l:(l+u)/(1+l*u))+1)/2;o=1-g,s.r=255&g*s.r+o*n.r+.5,s.g=255&g*s.g+o*n.g+.5,s.b=255&g*s.b+o*n.b+.5,s.a=a*s.a+(1-a)*n.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=function(s,n,o){let a=Ue(gi(s.r)),l=Ue(gi(s.g)),u=Ue(gi(s.b));return{r:ui(ge(a+o*(Ue(gi(n.r))-a))),g:ui(ge(l+o*(Ue(gi(n.g))-l))),b:ui(ge(u+o*(Ue(gi(n.b))-u))),a:s.a+o*(n.a-s.a)}}(this._rgb,t._rgb,e)),this}clone(){return new M(this.rgb)}alpha(t){return this._rgb.a=ui(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){let t=this._rgb,e=Ii(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ni(this._rgb,2,t),this}darken(t){return Ni(this._rgb,2,-t),this}saturate(t){return Ni(this._rgb,1,t),this}desaturate(t){return Ni(this._rgb,1,-t),this}rotate(t){return function(e,s){var n=ki(e);n[0]=Hi(n[0]+s),n=bi(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,t),this}}function z(i){if(i&&typeof i=="object"){let t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function I(i){return z(i)?i:new M(i)}function j(i){return z(i)?i:new M(i).saturate(.5).darken(.1).hexString()}let U=["x","y","borderWidth","radius","tension"],G=["color","borderColor","backgroundColor"],rt=new Map;function ct(i,t,e){return function(s,n){n=n||{};let o=s+JSON.stringify(n),a=rt.get(o);return a||(a=new Intl.NumberFormat(s,n),rt.set(o,a)),a}(t,e).format(i)}let st={values:i=>H(i)?i:""+i,numeric(i,t,e){if(i===0)return"0";let s=this.chart.options.locale,n,o=i;if(e.length>1){let g=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(g<1e-4||g>1e15)&&(n="scientific"),o=function(x,b){let w=b.length>3?b[2].value-b[1].value:b[1].value-b[0].value;return Math.abs(w)>=1&&x!==Math.floor(x)&&(w=x-Math.floor(x)),w}(i,e)}let a=kt(Math.abs(o)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),ct(i,s,u)},logarithmic(i,t,e){if(i===0)return"0";let s=e[t].significand||i/Math.pow(10,Math.floor(kt(i)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?st.numeric.call(this,i,t,e):""}};var pt={formatters:st};let lt=Object.create(null),vt=Object.create(null);function Lt(i,t){if(!t)return i;let e=t.split(".");for(let s=0,n=e.length;s<n;++s){let o=e[s];i=i[o]||(i[o]=Object.create(null))}return i}function It(i,t,e){return typeof t=="string"?ue(Lt(i,t),e):ue(Lt(i,""),t)}class _t{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>j(n.backgroundColor),this.hoverBorderColor=(s,n)=>j(n.borderColor),this.hoverColor=(s,n)=>j(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return It(this,t,e)}get(t){return Lt(this,t)}describe(t,e){return It(vt,t,e)}override(t,e){return It(lt,t,e)}route(t,e,s,n){let o=Lt(this,t),a=Lt(this,s),l="_"+e;Object.defineProperties(o,{[l]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){let u=this[l],g=a[n];return X(u)?Object.assign({},g,u):q(u,g)},set(u){this[l]=u}}})}apply(t){t.forEach(e=>e(this))}}var bt=new _t({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:G},numbers:{type:"number",properties:U}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:pt.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}]);function Dt(){return typeof window<"u"&&typeof document<"u"}function Yt(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Qt(i,t,e){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=i,s}let se=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function de(i,t){return se(i).getPropertyValue(t)}let le=["top","right","bottom","left"];function Kt(i,t,e){let s={};e=e?"-"+e:"";for(let n=0;n<4;n++){let o=le[n];s[o]=parseFloat(i[t+"-"+o+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}let Me=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function me(i,t){if("native"in i)return i;let{canvas:e,currentDevicePixelRatio:s}=t,n=se(e),o=n.boxSizing==="border-box",a=Kt(n,"padding"),l=Kt(n,"border","width"),{x:u,y:g,box:x}=function(T,R){let $=T.touches,tt=$&&$.length?$[0]:T,{offsetX:Z,offsetY:Q}=tt,ht,mt,Ct=!1;if(Me(Z,Q,T.target))ht=Z,mt=Q;else{let At=R.getBoundingClientRect();ht=tt.clientX-At.left,mt=tt.clientY-At.top,Ct=!0}return{x:ht,y:mt,box:Ct}}(i,e),b=a.left+(x&&l.left),w=a.top+(x&&l.top),{width:k,height:A}=t;return o&&(k-=a.width+l.width,A-=a.height+l.height),{x:Math.round((u-b)/k*e.width/s),y:Math.round((g-w)/A*e.height/s)}}let Pe=i=>Math.round(10*i)/10;function S(i,t,e,s){let n=se(i),o=Kt(n,"margin"),a=Qt(n.maxWidth,i,"clientWidth")||F,l=Qt(n.maxHeight,i,"clientHeight")||F,u=function(b,w,k){let A,T;if(w===void 0||k===void 0){let R=Yt(b);if(R){let $=R.getBoundingClientRect(),tt=se(R),Z=Kt(tt,"border","width"),Q=Kt(tt,"padding");w=$.width-Q.width-Z.width,k=$.height-Q.height-Z.height,A=Qt(tt.maxWidth,R,"clientWidth"),T=Qt(tt.maxHeight,R,"clientHeight")}else w=b.clientWidth,k=b.clientHeight}return{width:w,height:k,maxWidth:A||F,maxHeight:T||F}}(i,t,e),{width:g,height:x}=u;if(n.boxSizing==="content-box"){let b=Kt(n,"border","width"),w=Kt(n,"padding");g-=w.width+b.width,x-=w.height+b.height}return g=Math.max(0,g-o.width),x=Math.max(0,s?g/s:x-o.height),g=Pe(Math.min(g,a,u.maxWidth)),x=Pe(Math.min(x,l,u.maxHeight)),g&&!x&&(x=Pe(g/2)),(t!==void 0||e!==void 0)&&s&&u.height&&x>u.height&&(x=u.height,g=Pe(Math.floor(x*s))),{width:g,height:x}}function O(i,t,e){let s=t||1,n=Math.floor(i.height*s),o=Math.floor(i.width*s);i.height=Math.floor(i.height),i.width=Math.floor(i.width);let a=i.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${i.height}px`,a.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==s||a.height!==n||a.width!==o)&&(i.currentDevicePixelRatio=s,a.height=n,a.width=o,i.ctx.setTransform(s,0,0,s,0,0),!0)}let B=function(){let i=!1;try{let t={get passive(){return i=!0,!1}};Dt()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function h(i,t){let e=de(i,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function p(i){return!i||C(i.size)||C(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function f(i,t,e,s,n){let o=t[n];return o||(o=t[n]=i.measureText(n).width,e.push(n)),o>s&&(s=o),s}function _(i,t,e,s){let n=(s=s||{}).data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},o=s.garbageCollect=[],s.font=t),i.save(),i.font=t;let a=0,l=e.length,u,g,x,b,w;for(u=0;u<l;u++)if(b=e[u],b==null||H(b)){if(H(b))for(g=0,x=b.length;g<x;g++)w=b[g],w==null||H(w)||(a=f(i,n,o,a,w))}else a=f(i,n,o,a,b);i.restore();let k=o.length/2;if(k>e.length){for(u=0;u<k;u++)delete n[o[u]];o.splice(0,k)}return a}function L(i,t,e){let s=i.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*s)/s+n}function K(i,t){(t=t||i.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore()}function gt(i,t,e,s){wt(i,t,e,s,null)}function wt(i,t,e,s,n){let o,a,l,u,g,x,b,w,k=t.pointStyle,A=t.rotation,T=t.radius,R=(A||0)*Y;if(k&&typeof k=="object"&&(o=k.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]"))return i.save(),i.translate(e,s),i.rotate(R),i.drawImage(k,-k.width/2,-k.height/2,k.width,k.height),void i.restore();if(!(isNaN(T)||T<=0)){switch(i.beginPath(),k){default:n?i.ellipse(e,s,n/2,T,0,0,v):i.arc(e,s,T,0,v),i.closePath();break;case"triangle":x=n?n/2:T,i.moveTo(e+Math.sin(R)*x,s-Math.cos(R)*T),R+=it,i.lineTo(e+Math.sin(R)*x,s-Math.cos(R)*T),R+=it,i.lineTo(e+Math.sin(R)*x,s-Math.cos(R)*T),i.closePath();break;case"rectRounded":g=.516*T,u=T-g,a=Math.cos(R+V)*u,b=Math.cos(R+V)*(n?n/2-g:u),l=Math.sin(R+V)*u,w=Math.sin(R+V)*(n?n/2-g:u),i.arc(e-b,s-l,g,R-y,R-nt),i.arc(e+w,s-a,g,R-nt,R),i.arc(e+b,s+l,g,R,R+nt),i.arc(e-w,s+a,g,R+nt,R+y),i.closePath();break;case"rect":if(!A){u=Math.SQRT1_2*T,x=n?n/2:u,i.rect(e-x,s-u,2*x,2*u);break}R+=V;case"rectRot":b=Math.cos(R)*(n?n/2:T),a=Math.cos(R)*T,l=Math.sin(R)*T,w=Math.sin(R)*(n?n/2:T),i.moveTo(e-b,s-l),i.lineTo(e+w,s-a),i.lineTo(e+b,s+l),i.lineTo(e-w,s+a),i.closePath();break;case"crossRot":R+=V;case"cross":b=Math.cos(R)*(n?n/2:T),a=Math.cos(R)*T,l=Math.sin(R)*T,w=Math.sin(R)*(n?n/2:T),i.moveTo(e-b,s-l),i.lineTo(e+b,s+l),i.moveTo(e+w,s-a),i.lineTo(e-w,s+a);break;case"star":b=Math.cos(R)*(n?n/2:T),a=Math.cos(R)*T,l=Math.sin(R)*T,w=Math.sin(R)*(n?n/2:T),i.moveTo(e-b,s-l),i.lineTo(e+b,s+l),i.moveTo(e+w,s-a),i.lineTo(e-w,s+a),R+=V,b=Math.cos(R)*(n?n/2:T),a=Math.cos(R)*T,l=Math.sin(R)*T,w=Math.sin(R)*(n?n/2:T),i.moveTo(e-b,s-l),i.lineTo(e+b,s+l),i.moveTo(e+w,s-a),i.lineTo(e-w,s+a);break;case"line":a=n?n/2:Math.cos(R)*T,l=Math.sin(R)*T,i.moveTo(e-a,s-l),i.lineTo(e+a,s+l);break;case"dash":i.moveTo(e,s),i.lineTo(e+Math.cos(R)*(n?n/2:T),s+Math.sin(R)*T);break;case!1:i.closePath()}i.fill(),t.borderWidth>0&&i.stroke()}}function Mt(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function qt(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function Gt(i){i.restore()}function Zt(i,t,e,s,n){if(!t)return i.lineTo(e.x,e.y);if(n==="middle"){let o=(t.x+e.x)/2;i.lineTo(o,t.y),i.lineTo(o,e.y)}else n==="after"!=!!s?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function pe(i,t,e,s){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function he(i,t,e,s,n){if(n.strikethrough||n.underline){let o=i.measureText(s),a=t-o.actualBoundingBoxLeft,l=t+o.actualBoundingBoxRight,u=e-o.actualBoundingBoxAscent,g=e+o.actualBoundingBoxDescent,x=n.strikethrough?(u+g)/2:g;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=n.decorationWidth||2,i.moveTo(a,x),i.lineTo(l,x),i.stroke()}}function oi(i,t){let e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function Qe(i,t,e,s,n,o={}){let a=H(t)?t:[t],l=o.strokeWidth>0&&o.strokeColor!=="",u,g;for(i.save(),i.font=n.string,function(x,b){b.translation&&x.translate(b.translation[0],b.translation[1]),C(b.rotation)||x.rotate(b.rotation),b.color&&(x.fillStyle=b.color),b.textAlign&&(x.textAlign=b.textAlign),b.textBaseline&&(x.textBaseline=b.textBaseline)}(i,o),u=0;u<a.length;++u)g=a[u],o.backdrop&&oi(i,o.backdrop),l&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),C(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(g,e,s,o.maxWidth)),i.fillText(g,e,s,o.maxWidth),he(i,e,s,g,o),s+=Number(n.lineHeight);i.restore()}function xi(i,t){let{x:e,y:s,w:n,h:o,radius:a}=t;i.arc(e+a.topLeft,s+a.topLeft,a.topLeft,1.5*y,y,!0),i.lineTo(e,s+o-a.bottomLeft),i.arc(e+a.bottomLeft,s+o-a.bottomLeft,a.bottomLeft,y,nt,!0),i.lineTo(e+n-a.bottomRight,s+o),i.arc(e+n-a.bottomRight,s+o-a.bottomRight,a.bottomRight,nt,0,!0),i.lineTo(e+n,s+a.topRight),i.arc(e+n-a.topRight,s+a.topRight,a.topRight,0,-nt,!0),i.lineTo(e+a.topLeft,s)}function Ke(i,t=[""],e,s,n=()=>i[0]){let o=e||i;s===void 0&&(s=$s("_fallback",i));let a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:s,_getTarget:n,override:l=>Ke([l,...i],t,o,s)};return new Proxy(a,{deleteProperty:(l,u)=>(delete l[u],delete l._keys,delete i[0][u],!0),get:(l,u)=>je(l,u,()=>function(g,x,b,w){let k;for(let A of x)if(k=$s(fi(A,g),b),k!==void 0)return vi(g,k)?_s(b,w,g,k):k}(u,t,i,l)),getOwnPropertyDescriptor:(l,u)=>Reflect.getOwnPropertyDescriptor(l._scopes[0],u),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(l,u)=>Os(l).includes(u),ownKeys:l=>Os(l),set(l,u,g){let x=l._storage||(l._storage=n());return l[u]=x[u]=g,delete l._keys,!0}})}function ri(i,t,e,s){let n={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:ze(i,s),setContext:o=>ri(i,o,e,s),override:o=>ri(i.override(o),t,e,s)};return new Proxy(n,{deleteProperty:(o,a)=>(delete o[a],delete i[a],!0),get:(o,a,l)=>je(o,a,()=>function(u,g,x){let{_proxy:b,_context:w,_subProxy:k,_descriptors:A}=u,T=b[g];return St(T)&&A.isScriptable(g)&&(T=function(R,$,tt,Z){let{_proxy:Q,_context:ht,_subProxy:mt,_stack:Ct}=tt;if(Ct.has(R))throw new Error("Recursion detected: "+Array.from(Ct).join("->")+"->"+R);Ct.add(R);let At=$(ht,mt||Z);return Ct.delete(R),vi(R,At)&&(At=_s(Q._scopes,Q,R,At)),At}(g,T,u,x)),H(T)&&T.length&&(T=function(R,$,tt,Z){let{_proxy:Q,_context:ht,_subProxy:mt,_descriptors:Ct}=tt;if(ht.index!==void 0&&Z(R))return $[ht.index%$.length];if(X($[0])){let At=$,$t=Q._scopes.filter(Ht=>Ht!==At);$=[];for(let Ht of At){let Xt=_s($t,Q,R,Ht);$.push(ri(Xt,ht,mt&&mt[R],Ct))}}return $}(g,T,u,A.isIndexable)),vi(g,T)&&(T=ri(T,w,k&&k[g],A)),T}(o,a,l)),getOwnPropertyDescriptor:(o,a)=>o._descriptors.allKeys?Reflect.has(i,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,a),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(o,a)=>Reflect.has(i,a),ownKeys:()=>Reflect.ownKeys(i),set:(o,a,l)=>(i[a]=l,delete o[a],!0)})}function ze(i,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=i;return{allKeys:n,scriptable:e,indexable:s,isScriptable:St(e)?e:()=>e,isIndexable:St(s)?s:()=>s}}let fi=(i,t)=>i?i+ee(t):t,vi=(i,t)=>X(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function je(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];let s=e();return i[t]=s,s}function $i(i,t,e){return St(i)?i(t,e):i}let is=(i,t)=>i===!0?t:typeof i=="string"?De(t,i):void 0;function ln(i,t,e,s,n){for(let o of t){let a=is(e,o);if(a){i.add(a);let l=$i(a._fallback,e,n);if(l!==void 0&&l!==e&&l!==s)return l}else if(a===!1&&s!==void 0&&e!==s)return null}return!1}function _s(i,t,e,s){let n=t._rootScopes,o=$i(t._fallback,e,s),a=[...i,...n],l=new Set;l.add(s);let u=ks(l,a,e,o||e,s);return u!==null&&(o===void 0||o===e||(u=ks(l,a,o,u,s),u!==null))&&Ke(Array.from(l),[""],n,o,()=>function(g,x,b){let w=g._getTarget();x in w||(w[x]={});let k=w[x];return H(k)&&X(b)?b:k||{}}(t,e,s))}function ks(i,t,e,s,n){for(;e;)e=ln(i,t,e,s,n);return e}function $s(i,t){for(let e of t){if(!e)continue;let s=e[i];if(s!==void 0)return s}}function Os(i){let t=i._keys;return t||(t=i._keys=function(e){let s=new Set;for(let n of e)for(let o of Object.keys(n).filter(a=>!a.startsWith("_")))s.add(o);return Array.from(s)}(i._scopes)),t}function zs(i,t,e,s){let{iScale:n}=i,{key:o="r"}=this._parsing,a=new Array(s),l,u,g,x;for(l=0,u=s;l<u;++l)g=l+e,x=t[g],a[l]={r:n.parse(De(x,o),g)};return a}let Fs=Number.EPSILON||1e-14,Fi=(i,t)=>t<i.length&&!i[t].skip&&i[t],Ws=i=>i==="x"?"y":"x";function us(i,t,e,s){let n=i.skip?t:i,o=t,a=e.skip?t:e,l=wi(o,n),u=wi(a,o),g=l/(l+u),x=u/(l+u);g=isNaN(g)?0:g,x=isNaN(x)?0:x;let b=s*g,w=s*x;return{previous:{x:o.x-b*(a.x-n.x),y:o.y-b*(a.y-n.y)},next:{x:o.x+w*(a.x-n.x),y:o.y+w*(a.y-n.y)}}}function Ms(i,t="x"){let e=Ws(t),s=i.length,n=Array(s).fill(0),o=Array(s),a,l,u,g=Fi(i,0);for(a=0;a<s;++a)if(l=u,u=g,g=Fi(i,a+1),u){if(g){let x=g[t]-u[t];n[a]=x!==0?(g[e]-u[e])/x:0}o[a]=l?g?Et(n[a-1])!==Et(n[a])?0:(n[a-1]+n[a])/2:n[a-1]:n[a]}(function(x,b,w){let k=x.length,A,T,R,$,tt,Z=Fi(x,0);for(let Q=0;Q<k-1;++Q)tt=Z,Z=Fi(x,Q+1),tt&&Z&&(te(b[Q],0,Fs)?w[Q]=w[Q+1]=0:(A=w[Q]/b[Q],T=w[Q+1]/b[Q],$=Math.pow(A,2)+Math.pow(T,2),$<=9||(R=3/Math.sqrt($),w[Q]=A*R*b[Q],w[Q+1]=T*R*b[Q])))})(i,n,o),function(x,b,w="x"){let k=Ws(w),A=x.length,T,R,$,tt=Fi(x,0);for(let Z=0;Z<A;++Z){if(R=$,$=tt,tt=Fi(x,Z+1),!$)continue;let Q=$[w],ht=$[k];R&&(T=(Q-R[w])/3,$[`cp1${w}`]=Q-T,$[`cp1${k}`]=ht-T*b[Z]),tt&&(T=(tt[w]-Q)/3,$[`cp2${w}`]=Q+T,$[`cp2${k}`]=ht+T*b[Z])}}(i,o,t)}function ti(i,t,e){return Math.max(Math.min(i,e),t)}function Mi(i,t,e,s,n){let o,a,l,u;if(t.spanGaps&&(i=i.filter(g=>!g.skip)),t.cubicInterpolationMode==="monotone")Ms(i,n);else{let g=s?i[i.length-1]:i[0];for(o=0,a=i.length;o<a;++o)l=i[o],u=us(g,l,i[Math.min(o+1,a-(s?0:1))%a],t.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,g=l}t.capBezierPoints&&function(g,x){let b,w,k,A,T,R=Mt(g[0],x);for(b=0,w=g.length;b<w;++b)T=A,A=R,R=b<w-1&&Mt(g[b+1],x),A&&(k=g[b],T&&(k.cp1x=ti(k.cp1x,x.left,x.right),k.cp1y=ti(k.cp1y,x.top,x.bottom)),R&&(k.cp2x=ti(k.cp2x,x.left,x.right),k.cp2y=ti(k.cp2y,x.top,x.bottom)))}(i,e)}let gs=i=>i===0||i===1,Wo=(i,t,e)=>-Math.pow(2,10*(i-=1))*Math.sin((i-t)*v/e),Bo=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*v/e)+1,Ls={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*nt),easeOutSine:i=>Math.sin(i*nt),easeInOutSine:i=>-.5*(Math.cos(y*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>gs(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>gs(i)?i:Wo(i,.075,.3),easeOutElastic:i=>gs(i)?i:Bo(i,.075,.3),easeInOutElastic(i){return gs(i)?i:i<.5?.5*Wo(2*i,.1125,.45):.5+.5*Bo(2*i-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?i*i*((1+(t*=1.525))*i-t)*.5:.5*((i-=2)*i*((1+(t*=1.525))*i+t)+2)},easeInBounce:i=>1-Ls.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?.5*Ls.easeInBounce(2*i):.5*Ls.easeOutBounce(2*i-1)+.5};function ps(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function Uo(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:s==="middle"?e<.5?i.y:t.y:s==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function jo(i,t,e,s){let n={x:i.cp2x,y:i.cp2y},o={x:t.cp1x,y:t.cp1y},a=ps(i,n,e),l=ps(n,o,e),u=ps(o,t,e),g=ps(a,l,e),x=ps(l,u,e);return ps(g,x,e)}let ll=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,hl=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Vo(i,t){let e=(""+i).match(ll);if(!e||e[1]==="normal")return 1.2*t;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100}return t*i}let cl=i=>+i||0;function hn(i,t){let e={},s=X(t),n=s?Object.keys(t):t,o=X(i)?s?a=>q(i[a],i[t[a]]):a=>i[a]:()=>i;for(let a of n)e[a]=cl(o(a));return e}function eo(i){return hn(i,{top:"y",right:"x",bottom:"y",left:"x"})}function fs(i){return hn(i,["topLeft","topRight","bottomLeft","bottomRight"])}function ai(i){let t=eo(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function qe(i,t){i=i||{},t=t||bt.font;let e=q(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=q(i.style,t.style);s&&!(""+s).match(hl)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);let n={family:q(i.family,t.family),lineHeight:Vo(q(i.lineHeight,t.lineHeight),e),size:e,style:s,weight:q(i.weight,t.weight),string:""};return n.string=p(n),n}function Is(i,t,e,s){let n,o,a,l=!0;for(n=0,o=i.length;n<o;++n)if(a=i[n],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),l=!1),e!==void 0&&H(a)&&(a=a[e%a.length],l=!1),a!==void 0))return s&&!l&&(s.cacheable=!1),a}function Yo(i,t,e){let{min:s,max:n}=i,o=Ot(t,(n-s)/2),a=(l,u)=>e&&l===0?0:l+u;return{min:a(s,-Math.abs(o)),max:a(n,o)}}function as(i,t){return Object.assign(Object.create(i),t)}function Ss(i,t,e){return i?function(s,n){return{x:o=>s+s+n-o,setWidth(o){n=o},textAlign:o=>o==="center"?o:o==="right"?"left":"right",xPlus:(o,a)=>o-a,leftForLtr:(o,a)=>o-a}}(t,e):{x:s=>s,setWidth(s){},textAlign:s=>s,xPlus:(s,n)=>s+n,leftForLtr:(s,n)=>s}}function io(i,t){let e,s;t!=="ltr"&&t!=="rtl"||(e=i.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=s)}function so(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function qo(i){return i==="angle"?{between:N,compare:Di,normalize:ve}:{between:ot,compare:(t,e)=>t-e,normalize:t=>t}}function Xo({start:i,end:t,count:e,loop:s,style:n}){return{start:i%e,end:t%e,loop:s&&(t-i+1)%e==0,style:n}}function no(i,t,e){if(!e)return[i];let{property:s,start:n,end:o}=e,a=t.length,{compare:l,between:u,normalize:g}=qo(s),{start:x,end:b,loop:w,style:k}=function(mt,Ct,At){let{property:$t,start:Ht,end:Xt}=At,{between:Vt,normalize:Nt}=qo($t),Wt=Ct.length,Ft,ie,{start:Se,end:ye,loop:hi}=mt;if(hi){for(Se+=Wt,ye+=Wt,Ft=0,ie=Wt;Ft<ie&&Vt(Nt(Ct[Se%Wt][$t]),Ht,Xt);++Ft)Se--,ye--;Se%=Wt,ye%=Wt}return ye<Se&&(ye+=Wt),{start:Se,end:ye,loop:hi,style:mt.style}}(i,t,e),A=[],T,R,$,tt=!1,Z=null,Q=()=>tt||u(n,$,T)&&l(n,$)!==0,ht=()=>!tt||l(o,T)===0||u(o,$,T);for(let mt=x,Ct=x;mt<=b;++mt)R=t[mt%a],R.skip||(T=g(R[s]),T!==$&&(tt=u(T,n,o),Z===null&&Q()&&(Z=l(T,n)===0?mt:Ct),Z!==null&&ht()&&(A.push(Xo({start:Z,end:mt,loop:w,count:a,style:k})),Z=null),Ct=mt,$=T));return Z!==null&&A.push(Xo({start:Z,end:b,loop:w,count:a,style:k})),A}function oo(i,t){let e=[],s=i.segments;for(let n=0;n<s.length;n++){let o=no(s[n],i.points,t);o.length&&e.push(...o)}return e}function Go(i,t){let e=i.points,s=i.options.spanGaps,n=e.length;if(!n)return[];let o=!!i._loop,{start:a,end:l}=function(u,g,x,b){let w=0,k=g-1;if(x&&!b)for(;w<g&&!u[w].skip;)w++;for(;w<g&&u[w].skip;)w++;for(w%=g,x&&(k+=w);k>w&&u[k%g].skip;)k--;return k%=g,{start:w,end:k}}(e,n,o,s);return s===!0?Qo(i,[{start:a,end:l,loop:o}],e,t):Qo(i,function(u,g,x,b){let w=u.length,k=[],A,T=g,R=u[g];for(A=g+1;A<=x;++A){let $=u[A%w];$.skip||$.stop?R.skip||(b=!1,k.push({start:g%w,end:(A-1)%w,loop:b}),g=T=$.stop?A:null):(T=A,R.skip&&(g=A)),R=$}return T!==null&&k.push({start:g%w,end:T%w,loop:b}),k}(e,a,l<a?l+n:l,!!i._fullLoop&&a===0&&l===n-1),e,t)}function Qo(i,t,e,s){return s&&s.setContext&&e?function(n,o,a,l){let u=n._chart.getContext(),g=Ko(n.options),{_datasetIndex:x,options:{spanGaps:b}}=n,w=a.length,k=[],A=g,T=o[0].start,R=T;function $(tt,Z,Q,ht){let mt=b?-1:1;if(tt!==Z){for(tt+=w;a[tt%w].skip;)tt-=mt;for(;a[Z%w].skip;)Z+=mt;tt%w!=Z%w&&(k.push({start:tt%w,end:Z%w,loop:Q,style:ht}),A=ht,T=Z%w)}}for(let tt of o){T=b?T:tt.start;let Z,Q=a[T%w];for(R=T+1;R<=tt.end;R++){let ht=a[R%w];Z=Ko(l.setContext(as(u,{type:"segment",p0:Q,p1:ht,p0DataIndex:(R-1)%w,p1DataIndex:R%w,datasetIndex:x}))),dl(Z,A)&&$(T,R-1,tt.loop,A),Q=ht,A=Z}T<R-1&&$(T,R-1,tt.loop,A)}return k}(i,t,e,s):t}function Ko(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function dl(i,t){if(!t)return!1;let e=[],s=function(n,o){return z(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(i,s)!==JSON.stringify(t,s)}var ul=Object.freeze({__proto__:null,HALF_PI:nt,INFINITY:F,PI:y,PITAU:D,QUARTER_PI:V,RAD_PER_DEG:Y,TAU:v,TWO_THIRDS_PI:it,_addGrace:Yo,_alignPixel:L,_alignStartEnd:Te,_angleBetween:N,_angleDiff:Di,_arrayUnique:ce,_attachContext:ri,_bezierCurveTo:pe,_bezierInterpolation:jo,_boundSegment:no,_boundSegments:oo,_capitalize:ee,_computeSegments:Go,_createResolver:Ke,_decimalPlaces:Ne,_deprecated:function(i,t,e,s){t!==void 0&&console.warn(i+': "'+e+'" is deprecated. Please use "'+s+'" instead')},_descriptors:ze,_elementsEqual:jt,_factorize:ii,_filterBetween:Pt,_getParentNode:Yt,_getStartAndCountOfVisiblePoints:ci,_int16Range:et,_isBetween:ot,_isClickEvent:c,_isDomSupported:Dt,_isPointInArea:Mt,_limitValue:J,_longestText:_,_lookup:ut,_lookupByKey:dt,_measureText:f,_merger:Ae,_mergerIf:Oe,_normalizeAngle:ve,_parseObjectDataRadialScale:zs,_pointInLine:ps,_readValueToProps:hn,_rlookupByKey:yt,_scaleRangesChanged:di,_setMinAndMaxByKey:Ze,_splitKey:Ge,_steppedInterpolation:Uo,_steppedLineTo:Zt,_textX:rs,_toLeftRightCenter:xe,_updateBezierControlPoints:Mi,addRoundedRectPath:xi,almostEquals:te,almostWhole:We,callback:ft,clearCanvas:K,clipArea:qt,clone:Jt,color:I,createContext:as,debounce:fe,defined:Bt,distanceBetweenPoints:wi,drawPoint:gt,drawPointLegend:wt,each:xt,easingEffects:Ls,finiteOrDefault:at,fontString:function(i,t,e){return t+" "+i+"px "+e},formatNumber:ct,getAngleFromPoint:si,getHoverColor:j,getMaximumSize:S,getRelativePosition:me,getRtlAdapter:Ss,getStyle:de,isArray:H,isFinite:W,isFunction:St,isNullOrUndef:C,isNumber:Re,isObject:X,isPatternOrGradient:z,listenArrayEvents:Ut,log10:kt,merge:ue,mergeIf:_e,niceNum:Le,noop:d,overrideTextDirection:io,readUsedSize:h,renderText:Qe,requestAnimFrame:oe,resolve:Is,resolveObjectKey:De,restoreTextDirection:so,retinaScale:O,setsEqual:r,sign:Et,splineCurve:us,splineCurveMonotone:Ms,supportsEventListenerOptions:B,throttled:Ce,toDegrees:Je,toDimension:Ot,toFont:qe,toFontString:p,toLineHeight:Vo,toPadding:ai,toPercentage:Rt,toRadians:He,toTRBL:eo,toTRBLCorners:fs,uid:m,unclipArea:Gt,unlistenArrayEvents:zt,valueOrDefault:q});function gl(i,t,e,s){let{controller:n,data:o,_sorted:a}=i,l=n._cachedMeta.iScale;if(l&&t===l.axis&&t!=="r"&&a&&o.length){let u=l._reversePixels?yt:dt;if(!s)return u(o,t,e);if(n._sharedOptions){let g=o[0],x=typeof g.getRange=="function"&&g.getRange(t);if(x){let b=u(o,t,e-x),w=u(o,t,e+x);return{lo:b.lo,hi:w.hi}}}}return{lo:0,hi:o.length-1}}function Bs(i,t,e,s,n){let o=i.getSortedVisibleDatasetMetas(),a=e[t];for(let l=0,u=o.length;l<u;++l){let{index:g,data:x}=o[l],{lo:b,hi:w}=gl(o[l],t,a,n);for(let k=b;k<=w;++k){let A=x[k];A.skip||s(A,g,k)}}}function ro(i,t,e,s,n){let o=[];return!n&&!i.isPointInArea(t)||Bs(i,e,t,function(a,l,u){(n||Mt(a,i.chartArea,0))&&a.inRange(t.x,t.y,s)&&o.push({element:a,datasetIndex:l,index:u})},!0),o}function pl(i,t,e,s,n,o){let a=[],l=function(g){let x=g.indexOf("x")!==-1,b=g.indexOf("y")!==-1;return function(w,k){let A=x?Math.abs(w.x-k.x):0,T=b?Math.abs(w.y-k.y):0;return Math.sqrt(Math.pow(A,2)+Math.pow(T,2))}}(e),u=Number.POSITIVE_INFINITY;return Bs(i,e,t,function(g,x,b){let w=g.inRange(t.x,t.y,n);if(s&&!w)return;let k=g.getCenterPoint(n);if(!(o||i.isPointInArea(k))&&!w)return;let A=l(t,k);A<u?(a=[{element:g,datasetIndex:x,index:b}],u=A):A===u&&a.push({element:g,datasetIndex:x,index:b})}),a}function ao(i,t,e,s,n,o){return o||i.isPointInArea(t)?e!=="r"||s?pl(i,t,e,s,n,o):function(a,l,u,g){let x=[];return Bs(a,u,l,function(b,w,k){let{startAngle:A,endAngle:T}=b.getProps(["startAngle","endAngle"],g),{angle:R}=si(b,{x:l.x,y:l.y});N(R,A,T)&&x.push({element:b,datasetIndex:w,index:k})}),x}(i,t,e,n):[]}function Zo(i,t,e,s,n){let o=[],a=e==="x"?"inXRange":"inYRange",l=!1;return Bs(i,e,t,(u,g,x)=>{u[a](t[e],n)&&(o.push({element:u,datasetIndex:g,index:x}),l=l||u.inRange(t.x,t.y,n))}),s&&!l?[]:o}var Jo={evaluateInteractionItems:Bs,modes:{index(i,t,e,s){let n=me(t,i),o=e.axis||"x",a=e.includeInvisible||!1,l=e.intersect?ro(i,n,o,s,a):ao(i,n,o,!1,s,a),u=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(g=>{let x=l[0].index,b=g.data[x];b&&!b.skip&&u.push({element:b,datasetIndex:g.index,index:x})}),u):[]},dataset(i,t,e,s){let n=me(t,i),o=e.axis||"xy",a=e.includeInvisible||!1,l=e.intersect?ro(i,n,o,s,a):ao(i,n,o,!1,s,a);if(l.length>0){let u=l[0].datasetIndex,g=i.getDatasetMeta(u).data;l=[];for(let x=0;x<g.length;++x)l.push({element:g[x],datasetIndex:u,index:x})}return l},point:(i,t,e,s)=>ro(i,me(t,i),e.axis||"xy",s,e.includeInvisible||!1),nearest(i,t,e,s){let n=me(t,i),o=e.axis||"xy",a=e.includeInvisible||!1;return ao(i,n,o,e.intersect,s,a)},x:(i,t,e,s)=>Zo(i,me(t,i),"x",e.intersect,s),y:(i,t,e,s)=>Zo(i,me(t,i),"y",e.intersect,s)}};let tr=["left","top","right","bottom"];function Us(i,t){return i.filter(e=>e.pos===t)}function er(i,t){return i.filter(e=>tr.indexOf(e.pos)===-1&&e.box.axis===t)}function js(i,t){return i.sort((e,s)=>{let n=t?s:e,o=t?e:s;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function fl(i,t){let e=function(u){let g={};for(let x of u){let{stack:b,pos:w,stackWeight:k}=x;if(!b||!tr.includes(w))continue;let A=g[b]||(g[b]={count:0,placed:0,weight:0,size:0});A.count++,A.weight+=k}return g}(i),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t,o,a,l;for(o=0,a=i.length;o<a;++o){l=i[o];let{fullSize:u}=l.box,g=e[l.stack],x=g&&l.stackWeight/g.weight;l.horizontal?(l.width=x?x*s:u&&t.availableWidth,l.height=n):(l.width=s,l.height=x?x*n:u&&t.availableHeight)}return e}function ir(i,t,e,s){return Math.max(i[e],t[e])+Math.max(i[s],t[s])}function sr(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function ml(i,t,e,s){let{pos:n,box:o}=e,a=i.maxPadding;if(!X(n)){e.size&&(i[n]-=e.size);let b=s[e.stack]||{size:0,count:1};b.size=Math.max(b.size,e.horizontal?o.height:o.width),e.size=b.size/b.count,i[n]+=e.size}o.getPadding&&sr(a,o.getPadding());let l=Math.max(0,t.outerWidth-ir(a,i,"left","right")),u=Math.max(0,t.outerHeight-ir(a,i,"top","bottom")),g=l!==i.w,x=u!==i.h;return i.w=l,i.h=u,e.horizontal?{same:g,other:x}:{same:x,other:g}}function bl(i,t){let e=t.maxPadding;function s(n){let o={left:0,top:0,right:0,bottom:0};return n.forEach(a=>{o[a]=Math.max(t[a],e[a])}),o}return s(i?["left","right"]:["top","bottom"])}function Vs(i,t,e,s){let n=[],o,a,l,u,g,x;for(o=0,a=i.length,g=0;o<a;++o){l=i[o],u=l.box,u.update(l.width||t.w,l.height||t.h,bl(l.horizontal,t));let{same:b,other:w}=ml(t,e,l,s);g|=b&&n.length,x=x||w,u.fullSize||n.push(l)}return g&&Vs(n,t,e,s)||x}function cn(i,t,e,s,n){i.top=e,i.left=t,i.right=t+s,i.bottom=e+n,i.width=s,i.height=n}function nr(i,t,e,s){let n=e.padding,{x:o,y:a}=t;for(let l of i){let u=l.box,g=s[l.stack]||{count:1,placed:0,weight:1},x=l.stackWeight/g.weight||1;if(l.horizontal){let b=t.w*x,w=g.size||u.height;Bt(g.start)&&(a=g.start),u.fullSize?cn(u,n.left,a,e.outerWidth-n.right-n.left,w):cn(u,t.left+g.placed,a,b,w),g.start=a,g.placed+=b,a=u.bottom}else{let b=t.h*x,w=g.size||u.width;Bt(g.start)&&(o=g.start),u.fullSize?cn(u,o,n.top,w,e.outerHeight-n.bottom-n.top):cn(u,o,t.top+g.placed,w,b),g.start=o,g.placed+=b,o=u.right}}t.x=o,t.y=a}var li={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){let e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,s){if(!i)return;let n=ai(i.options.layout.padding),o=Math.max(t-n.width,0),a=Math.max(e-n.height,0),l=function(T){let R=function(At){let $t=[],Ht,Xt,Vt,Nt,Wt,Ft;for(Ht=0,Xt=(At||[]).length;Ht<Xt;++Ht)Vt=At[Ht],{position:Nt,options:{stack:Wt,stackWeight:Ft=1}}=Vt,$t.push({index:Ht,box:Vt,pos:Nt,horizontal:Vt.isHorizontal(),weight:Vt.weight,stack:Wt&&Nt+Wt,stackWeight:Ft});return $t}(T),$=js(R.filter(At=>At.box.fullSize),!0),tt=js(Us(R,"left"),!0),Z=js(Us(R,"right")),Q=js(Us(R,"top"),!0),ht=js(Us(R,"bottom")),mt=er(R,"x"),Ct=er(R,"y");return{fullSize:$,leftAndTop:tt.concat(Q),rightAndBottom:Z.concat(Ct).concat(ht).concat(mt),chartArea:Us(R,"chartArea"),vertical:tt.concat(Z).concat(Ct),horizontal:Q.concat(ht).concat(mt)}}(i.boxes),u=l.vertical,g=l.horizontal;xt(i.boxes,T=>{typeof T.beforeLayout=="function"&&T.beforeLayout()});let x=u.reduce((T,R)=>R.box.options&&R.box.options.display===!1?T:T+1,0)||1,b=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/x,hBoxMaxHeight:a/2}),w=Object.assign({},n);sr(w,ai(s));let k=Object.assign({maxPadding:w,w:o,h:a,x:n.left,y:n.top},n),A=fl(u.concat(g),b);Vs(l.fullSize,k,b,A),Vs(u,k,b,A),Vs(g,k,b,A)&&Vs(u,k,b,A),function(T){let R=T.maxPadding;function $(tt){let Z=Math.max(R[tt]-T[tt],0);return T[tt]+=Z,Z}T.y+=$("top"),T.x+=$("left"),$("right"),$("bottom")}(k),nr(l.leftAndTop,k,b,A),k.x+=k.w,k.y+=k.h,nr(l.rightAndBottom,k,b,A),i.chartArea={left:k.left,top:k.top,right:k.left+k.w,bottom:k.top+k.h,height:k.h,width:k.w},xt(l.chartArea,T=>{let R=T.box;Object.assign(R,i.chartArea),R.update(k.w,k.h,{left:0,top:0,right:0,bottom:0})})}};class lo{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,n){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):s)}}isAttached(t){return!0}updateConfig(t){}}class or extends lo{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}let dn="$chartjs",yl={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rr=i=>i===null||i==="",ar=!!B&&{passive:!0};function xl(i,t,e){i.canvas.removeEventListener(t,e,ar)}function un(i,t){for(let e of i)if(e===t||e.contains(t))return!0}function vl(i,t,e){let s=i.canvas,n=new MutationObserver(o=>{let a=!1;for(let l of o)a=a||un(l.addedNodes,s),a=a&&!un(l.removedNodes,s);a&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function wl(i,t,e){let s=i.canvas,n=new MutationObserver(o=>{let a=!1;for(let l of o)a=a||un(l.removedNodes,s),a=a&&!un(l.addedNodes,s);a&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}let Ys=new Map,lr=0;function hr(){let i=window.devicePixelRatio;i!==lr&&(lr=i,Ys.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function _l(i,t,e){let s=i.canvas,n=s&&Yt(s);if(!n)return;let o=Ce((l,u)=>{let g=n.clientWidth;e(l,u),g<n.clientWidth&&e()},window),a=new ResizeObserver(l=>{let u=l[0],g=u.contentRect.width,x=u.contentRect.height;g===0&&x===0||o(g,x)});return a.observe(n),function(l,u){Ys.size||window.addEventListener("resize",hr),Ys.set(l,u)}(i,o),a}function ho(i,t,e){e&&e.disconnect(),t==="resize"&&function(s){Ys.delete(s),Ys.size||window.removeEventListener("resize",hr)}(i)}function kl(i,t,e){let s=i.canvas,n=Ce(o=>{i.ctx!==null&&e(function(a,l){let u=yl[a.type]||a.type,{x:g,y:x}=me(a,l);return{type:u,chart:l,native:a,x:g!==void 0?g:null,y:x!==void 0?x:null}}(o,i))},i);return function(o,a,l){o.addEventListener(a,l,ar)}(s,t,n),n}class cr extends lo{acquireContext(t,e){let s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(function(n,o){let a=n.style,l=n.getAttribute("height"),u=n.getAttribute("width");if(n[dn]={initial:{height:l,width:u,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",rr(u)){let g=h(n,"width");g!==void 0&&(n.width=g)}if(rr(l))if(n.style.height==="")n.height=n.width/(o||2);else{let g=h(n,"height");g!==void 0&&(n.height=g)}}(t,e),s):null}releaseContext(t){let e=t.canvas;if(!e[dn])return!1;let s=e[dn].initial;["height","width"].forEach(o=>{let a=s[o];C(a)?e.removeAttribute(o):e.setAttribute(o,a)});let n=s.style||{};return Object.keys(n).forEach(o=>{e.style[o]=n[o]}),e.width=e.width,delete e[dn],!0}addEventListener(t,e,s){this.removeEventListener(t,e);let n=t.$proxies||(t.$proxies={}),o={attach:vl,detach:wl,resize:_l}[e]||kl;n[e]=o(t,e,s)}removeEventListener(t,e){let s=t.$proxies||(t.$proxies={}),n=s[e];n&&(({attach:ho,detach:ho,resize:ho}[e]||xl)(t,e,n),s[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,n){return S(t,e,s,n)}isAttached(t){let e=Yt(t);return!(!e||!e.isConnected)}}function dr(i){return!Dt()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?or:cr}var ur=Object.freeze({__proto__:null,BasePlatform:lo,BasicPlatform:or,DomPlatform:cr,_detectPlatform:dr});let gr="transparent",Ml={boolean:(i,t,e)=>e>.5?t:i,color(i,t,e){let s=I(i||gr),n=s.valid&&I(t||gr);return n&&n.valid?n.mix(s,e).hexString():t},number:(i,t,e)=>i+(t-i)*e};class pr{constructor(t,e,s,n){let o=e[s];n=Is([t.to,n,o,t.from]);let a=Is([t.from,o,n]);this._active=!0,this._fn=t.fn||Ml[t.type||typeof a],this._easing=Ls[t.easing]||Ls.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=a,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);let n=this._target[this._prop],o=s-this._start,a=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Is([t.to,e,n,t.from]),this._from=Is([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,s=this._duration,n=this._prop,o=this._from,a=this._loop,l=this._to,u;if(this._active=o!==l&&(a||e<s),!this._active)return this._target[n]=l,void this._notify(!0);e<0?this._target[n]=o:(u=e/s%2,u=a&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[n]=this._fn(o,l,u))}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){let e=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][e]()}}class co{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!X(t))return;let e=Object.keys(bt.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{let o=t[n];if(!X(o))return;let a={};for(let l of e)a[l]=o[l];(H(o.properties)&&o.properties||[n]).forEach(l=>{l!==n&&s.has(l)||s.set(l,a)})})}_animateOptions(t,e){let s=e.options,n=function(a,l){if(!l)return;let u=a.options;return u?(u.$shared&&(a.options=u=Object.assign({},u,{$shared:!1,$animations:{}})),u):void(a.options=l)}(t,s);if(!n)return[];let o=this._createAnimations(n,s);return s.$shared&&function(a,l){let u=[],g=Object.keys(l);for(let x=0;x<g.length;x++){let b=a[g[x]];b&&b.active()&&u.push(b.wait())}return Promise.all(u)}(t.options.$animations,s).then(()=>{t.options=s},()=>{}),o}_createAnimations(t,e){let s=this._properties,n=[],o=t.$animations||(t.$animations={}),a=Object.keys(e),l=Date.now(),u;for(u=a.length-1;u>=0;--u){let g=a[u];if(g.charAt(0)==="$")continue;if(g==="options"){n.push(...this._animateOptions(t,e));continue}let x=e[g],b=o[g],w=s.get(g);if(b){if(w&&b.active()){b.update(w,x,l);continue}b.cancel()}w&&w.duration?(o[g]=b=new pr(w,t,g,x),n.push(b)):t[g]=x}return n}update(t,e){if(this._properties.size===0)return void Object.assign(t,e);let s=this._createAnimations(t,e);return s.length?(Be.add(this._chart,s),!0):void 0}}function fr(i,t){let e=i&&i.options||{},s=e.reverse,n=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:s?o:n,end:s?n:o}}function mr(i,t){let e=[],s=i._getSortedDatasetMetas(t),n,o;for(n=0,o=s.length;n<o;++n)e.push(s[n].index);return e}function br(i,t,e,s={}){let n=i.keys,o=s.mode==="single",a,l,u,g;if(t!==null){for(a=0,l=n.length;a<l;++a){if(u=+n[a],u===e){if(s.all)continue;break}g=i.values[u],W(g)&&(o||t===0||Et(t)===Et(g))&&(t+=g)}return t}}function yr(i,t){let e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function Sl(i,t,e){let s=i[t]||(i[t]={});return s[e]||(s[e]={})}function xr(i,t,e,s){for(let n of t.getMatchingVisibleMetas(s).reverse()){let o=i[n.index];if(e&&o>0||!e&&o<0)return n.index}return null}function vr(i,t){let{chart:e,_cachedMeta:s}=i,n=e._stacks||(e._stacks={}),{iScale:o,vScale:a,index:l}=s,u=o.axis,g=a.axis,x=function(k,A,T){return`${k.id}.${A.id}.${T.stack||T.type}`}(o,a,s),b=t.length,w;for(let k=0;k<b;++k){let A=t[k],{[u]:T,[g]:R}=A;w=(A._stacks||(A._stacks={}))[g]=Sl(n,x,T),w[l]=R,w._top=xr(w,a,!0,s.type),w._bottom=xr(w,a,!1,s.type),(w._visualValues||(w._visualValues={}))[l]=R}}function uo(i,t){let e=i.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function qs(i,t){let e=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){t=t||i._parsed;for(let n of t){let o=n._stacks;if(!o||o[s]===void 0||o[s][e]===void 0)return;delete o[s][e],o[s]._visualValues!==void 0&&o[s]._visualValues[e]!==void 0&&delete o[s]._visualValues[e]}}}let go=i=>i==="reset"||i==="none",wr=(i,t)=>t?i:Object.assign({},i);class ls{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=yr(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&qs(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,e=this._cachedMeta,s=this.getDataset(),n=(b,w,k,A)=>b==="x"?w:b==="r"?A:k,o=e.xAxisID=q(s.xAxisID,uo(t,"x")),a=e.yAxisID=q(s.yAxisID,uo(t,"y")),l=e.rAxisID=q(s.rAxisID,uo(t,"r")),u=e.indexAxis,g=e.iAxisID=n(u,o,a,l),x=e.vAxisID=n(u,a,o,l);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(l),e.iScale=this.getScaleForId(g),e.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&zt(this._data,this),t._stacked&&qs(t)}_dataCheck(){let t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(X(e))this._data=function(n){let o=Object.keys(n),a=new Array(o.length),l,u,g;for(l=0,u=o.length;l<u;++l)g=o[l],a[l]={x:g,y:n[g]};return a}(e);else if(s!==e){if(s){zt(s,this);let n=this._cachedMeta;qs(n),n._parsed=[]}e&&Object.isExtensible(e)&&Ut(e,this),this._syncList=[],this._data=e}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let e=this._cachedMeta,s=this.getDataset(),n=!1;this._dataCheck();let o=e._stacked;e._stacked=yr(e.vScale,e),e.stack!==s.stack&&(n=!0,qs(e),e.stack=s.stack),this._resyncElements(t),(n||o!==e._stacked)&&vr(this,e._parsed)}configure(){let t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){let{_cachedMeta:s,_data:n}=this,{iScale:o,_stacked:a}=s,l=o.axis,u,g,x,b=t===0&&e===n.length||s._sorted,w=t>0&&s._parsed[t-1];if(this._parsing===!1)s._parsed=n,s._sorted=!0,x=n;else{x=H(n[t])?this.parseArrayData(s,n,t,e):X(n[t])?this.parseObjectData(s,n,t,e):this.parsePrimitiveData(s,n,t,e);let k=()=>g[l]===null||w&&g[l]<w[l];for(u=0;u<e;++u)s._parsed[u+t]=g=x[u],b&&(k()&&(b=!1),w=g);s._sorted=b}a&&vr(this,x)}parsePrimitiveData(t,e,s,n){let{iScale:o,vScale:a}=t,l=o.axis,u=a.axis,g=o.getLabels(),x=o===a,b=new Array(n),w,k,A;for(w=0,k=n;w<k;++w)A=w+s,b[w]={[l]:x||o.parse(g[A],A),[u]:a.parse(e[A],A)};return b}parseArrayData(t,e,s,n){let{xScale:o,yScale:a}=t,l=new Array(n),u,g,x,b;for(u=0,g=n;u<g;++u)x=u+s,b=e[x],l[u]={x:o.parse(b[0],x),y:a.parse(b[1],x)};return l}parseObjectData(t,e,s,n){let{xScale:o,yScale:a}=t,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,g=new Array(n),x,b,w,k;for(x=0,b=n;x<b;++x)w=x+s,k=e[w],g[x]={x:o.parse(De(k,l),w),y:a.parse(De(k,u),w)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){let n=this.chart,o=this._cachedMeta,a=e[t.axis];return br({keys:mr(n,!0),values:e._stacks[t.axis]._visualValues},a,o.index,{mode:s})}updateRangeFromParsed(t,e,s,n){let o=s[e.axis],a=o===null?NaN:o,l=n&&s._stacks[e.axis];n&&l&&(n.values=l,a=br(n,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){let s=this._cachedMeta,n=s._parsed,o=s._sorted&&t===s.iScale,a=n.length,l=this._getOtherScale(t),u=((T,R,$)=>T&&!R.hidden&&R._stacked&&{keys:mr($,!0),values:null})(e,s,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:b}=function(T){let{min:R,max:$,minDefined:tt,maxDefined:Z}=T.getUserBounds();return{min:tt?R:Number.NEGATIVE_INFINITY,max:Z?$:Number.POSITIVE_INFINITY}}(l),w,k;function A(){k=n[w];let T=k[l.axis];return!W(k[t.axis])||x>T||b<T}for(w=0;w<a&&(A()||(this.updateRangeFromParsed(g,t,k,u),!o));++w);if(o){for(w=a-1;w>=0;--w)if(!A()){this.updateRangeFromParsed(g,t,k,u);break}}return g}getAllParsedValues(t){let e=this._cachedMeta._parsed,s=[],n,o,a;for(n=0,o=e.length;n<o;++n)a=e[n][t.axis],W(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){let e=this._cachedMeta,s=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){let e=this._cachedMeta;this.update(t||"default"),e._clip=function(s){let n,o,a,l;return X(s)?(n=s.top,o=s.right,a=s.bottom,l=s.left):n=o=a=l=s,{top:n,right:o,bottom:a,left:l,disabled:s===!1}}(q(this.options.clip,function(s,n,o){if(o===!1)return!1;let a=fr(s,o),l=fr(n,o);return{top:l.end,right:a.end,bottom:l.start,left:a.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,e=this.chart,s=this._cachedMeta,n=s.data||[],o=e.chartArea,a=[],l=this._drawStart||0,u=this._drawCount||n.length-l,g=this.options.drawActiveElementsOnTop,x;for(s.dataset&&s.dataset.draw(t,o,l,u),x=l;x<l+u;++x){let b=n[x];b.hidden||(b.active&&g?a.push(b):b.draw(t,o))}for(x=0;x<a.length;++x)a[x].draw(t,o)}getStyle(t,e){let s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){let n=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=function(l,u,g){return as(l,{active:!1,dataIndex:u,parsed:void 0,raw:void 0,element:g,index:u,mode:"default",type:"data"})}(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=n.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function(a,l){return as(a,{active:!1,dataset:void 0,datasetIndex:l,index:l,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=s,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){let n=e==="active",o=this._cachedDataOpts,a=t+"-"+e,l=o[a],u=this.enableOptionSharing&&Bt(s);if(l)return wr(l,u);let g=this.chart.config,x=g.datasetElementScopeKeys(this._type,t),b=n?[`${t}Hover`,"hover",t,""]:[t,""],w=g.getOptionScopes(this.getDataset(),x),k=Object.keys(bt.elements[t]),A=g.resolveNamedOptions(w,k,()=>this.getContext(s,n,e),b);return A.$shared&&(A.$shared=u,o[a]=Object.freeze(wr(A,u))),A}_resolveAnimations(t,e,s){let n=this.chart,o=this._cachedDataOpts,a=`animation-${e}`,l=o[a];if(l)return l;let u;if(n.options.animation!==!1){let x=this.chart.config,b=x.datasetAnimationScopeKeys(this._type,e),w=x.getOptionScopes(this.getDataset(),b);u=x.createResolver(w,this.getContext(t,s,e))}let g=new co(n,u&&u.animations);return u&&u._cacheable&&(o[a]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||go(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){let s=this.resolveDataElementOptions(t,e),n=this._sharedOptions,o=this.getSharedOptions(s),a=this.includeOptions(e,o)||o!==n;return this.updateSharedOptions(o,e,s),{sharedOptions:o,includeOptions:a}}updateElement(t,e,s,n){go(n)?Object.assign(t,s):this._resolveAnimations(e,n).update(t,s)}updateSharedOptions(t,e,s){t&&!go(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,n){t.active=n;let o=this.getStyle(e,n);this._resolveAnimations(e,s,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let e=this._data,s=this._cachedMeta.data;for(let[l,u,g]of this._syncList)this[l](u,g);this._syncList=[];let n=s.length,o=e.length,a=Math.min(o,n);a&&this.parse(0,a),o>n?this._insertElements(n,o-n,t):o<n&&this._removeElements(o,n-o)}_insertElements(t,e,s=!0){let n=this._cachedMeta,o=n.data,a=t+e,l,u=g=>{for(g.length+=e,l=g.length-1;l>=a;l--)g[l]=g[l-e]};for(u(o),l=t;l<a;++l)o[l]=new this.dataElementType;this._parsing&&u(n._parsed),this.parse(t,e),s&&this.updateElements(o,t,e,"reset")}updateElements(t,e,s,n){}_removeElements(t,e){let s=this._cachedMeta;if(this._parsing){let n=s._parsed.splice(t,e);s._stacked&&qs(s,n)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[e,s,n]=t;this[e](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);let s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class ss{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return Re(this.x)&&Re(this.y)}getProps(t,e){let s=this.$animations;if(!e||!s)return this;let n={};return t.forEach(o=>{n[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),n}}function Cl(i,t){let e=i.options.ticks,s=function(b){let w=b.options.offset,k=b._tickSize(),A=b._length/k+(w?0:1),T=b._maxLength/k;return Math.floor(Math.min(A,T))}(i),n=Math.min(e.maxTicksLimit||s,s),o=e.major.enabled?function(b){let w=[],k,A;for(k=0,A=b.length;k<A;k++)b[k].major&&w.push(k);return w}(t):[],a=o.length,l=o[0],u=o[a-1],g=[];if(a>n)return function(b,w,k,A){let T,R=0,$=k[0];for(A=Math.ceil(A),T=0;T<b.length;T++)T===$&&(w.push(b[T]),R++,$=k[R*A])}(t,g,o,a/n),g;let x=function(b,w,k){let A=function($){let tt=$.length,Z,Q;if(tt<2)return!1;for(Q=$[0],Z=1;Z<tt;++Z)if($[Z]-$[Z-1]!==Q)return!1;return Q}(b),T=w.length/k;if(!A)return Math.max(T,1);let R=ii(A);for(let $=0,tt=R.length-1;$<tt;$++){let Z=R[$];if(Z>T)return Z}return Math.max(T,1)}(o,t,n);if(a>0){let b,w,k=a>1?Math.round((u-l)/(a-1)):null;for(gn(t,g,x,C(k)?0:l-k,l),b=0,w=a-1;b<w;b++)gn(t,g,x,o[b],o[b+1]);return gn(t,g,x,u,C(k)?t.length:u+k),g}return gn(t,g,x),g}function gn(i,t,e,s,n){let o=q(s,0),a=Math.min(q(n,i.length),i.length),l,u,g,x=0;for(e=Math.ceil(e),n&&(l=n-s,e=l/Math.floor(l/e)),g=o;g<0;)x++,g=Math.round(o+x*e);for(u=Math.max(o,0);u<a;u++)u===g&&(t.push(i[u]),x++,g=Math.round(o+x*e))}let _r=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,kr=(i,t)=>Math.min(t||i,i);function Mr(i,t){let e=[],s=i.length/t,n=i.length,o=0;for(;o<n;o+=s)e.push(i[Math.floor(o)]);return e}function Tl(i,t,e){let s=i.ticks.length,n=Math.min(t,s-1),o=i._startPixel,a=i._endPixel,l=1e-6,u,g=i.getPixelForTick(n);if(!(e&&(u=s===1?Math.max(g-o,a-g):t===0?(i.getPixelForTick(1)-g)/2:(g-i.getPixelForTick(n-1))/2,g+=n<t?u:-u,g<o-l||g>a+l)))return g}function Xs(i){return i.drawTicks?i.tickLength:0}function Sr(i,t){if(!i.display)return 0;let e=qe(i.font,t),s=ai(i.padding);return(H(i.text)?i.text.length:1)*e.lineHeight+s.height}function El(i,t,e){let s=xe(i);return(e&&t!=="right"||!e&&t==="right")&&(s=(n=>n==="left"?"right":n==="right"?"left":n)(s)),s}class ms extends ss{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:n}=this;return t=at(t,Number.POSITIVE_INFINITY),e=at(e,Number.NEGATIVE_INFINITY),s=at(s,Number.POSITIVE_INFINITY),n=at(n,Number.NEGATIVE_INFINITY),{min:at(t,s),max:at(e,n),minDefined:W(t),maxDefined:W(e)}}getMinMax(t){let e,{min:s,max:n,minDefined:o,maxDefined:a}=this.getUserBounds();if(o&&a)return{min:s,max:n};let l=this.getMatchingVisibleMetas();for(let u=0,g=l.length;u<g;++u)e=l[u].controller.getMinMax(this,t),o||(s=Math.min(s,e.min)),a||(n=Math.max(n,e.max));return s=a&&s>n?n:s,n=o&&s>n?s:n,{min:at(s,at(n,s)),max:at(n,at(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ft(this.options.beforeUpdate,[this])}update(t,e,s){let{beginAtZero:n,grace:o,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Yo(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let u=l<this.ticks.length;this._convertTicksToLabels(u?Mr(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=Cl(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,s=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,s=!s),this._startPixel=t,this._endPixel=e,this._reversePixels=s,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ft(this.options.afterUpdate,[this])}beforeSetDimensions(){ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ft(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ft(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s],o.label=ft(e.callback,[o.value,s,t],this)}afterTickToLabelConversion(){ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,s=kr(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,o=e.maxRotation,a,l,u,g=n;if(!this._isVisible()||!e.display||n>=o||s<=1||!this.isHorizontal())return void(this.labelRotation=n);let x=this._getLabelSizes(),b=x.widest.width,w=x.highest.height,k=J(this.chart.width-b,0,this.maxWidth);a=t.offset?this.maxWidth/s:k/(s-1),b+6>a&&(a=k/(s-(t.offset?.5:1)),l=this.maxHeight-Xs(t.grid)-e.padding-Sr(t.title,this.chart.options.font),u=Math.sqrt(b*b+w*w),g=Je(Math.min(Math.asin(J((x.highest.height+6)/a,-1,1)),Math.asin(J(l/u,-1,1))-Math.asin(J(w/u,-1,1)))),g=Math.max(n,Math.min(o,g))),this.labelRotation=g}afterCalculateLabelRotation(){ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ft(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:s,title:n,grid:o}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){let u=Sr(n,e.options.font);if(l?(t.width=this.maxWidth,t.height=Xs(o)+u):(t.height=this.maxHeight,t.width=Xs(o)+u),s.display&&this.ticks.length){let{first:g,last:x,widest:b,highest:w}=this._getLabelSizes(),k=2*s.padding,A=He(this.labelRotation),T=Math.cos(A),R=Math.sin(A);if(l){let $=s.mirror?0:R*b.width+T*w.height;t.height=Math.min(this.maxHeight,t.height+$+k)}else{let $=s.mirror?0:T*b.width+R*w.height;t.width=Math.min(this.maxWidth,t.width+$+k)}this._calculatePadding(g,x,R,T)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,n){let{ticks:{align:o,padding:a},position:l}=this.options,u=this.labelRotation!==0,g=l!=="top"&&this.axis==="x";if(this.isHorizontal()){let x=this.getPixelForTick(0)-this.left,b=this.right-this.getPixelForTick(this.ticks.length-1),w=0,k=0;u?g?(w=n*t.width,k=s*e.height):(w=s*t.height,k=n*e.width):o==="start"?k=e.width:o==="end"?w=t.width:o!=="inner"&&(w=t.width/2,k=e.width/2),this.paddingLeft=Math.max((w-x+a)*this.width/(this.width-x),0),this.paddingRight=Math.max((k-b+a)*this.width/(this.width-b),0)}else{let x=e.height/2,b=t.height/2;o==="start"?(x=0,b=t.height):o==="end"&&(x=e.height,b=0),this.paddingTop=x+a,this.paddingBottom=b+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ft(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,s;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,s=t.length;e<s;e++)C(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,s=this.ticks;e<s.length&&(s=Mr(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){let{ctx:n,_longestTextCache:o}=this,a=[],l=[],u=Math.floor(e/kr(e,s)),g,x,b,w,k,A,T,R,$,tt,Z,Q=0,ht=0;for(g=0;g<e;g+=u){if(w=t[g].label,k=this._resolveTickFontOptions(g),n.font=A=k.string,T=o[A]=o[A]||{data:{},gc:[]},R=k.lineHeight,$=tt=0,C(w)||H(w)){if(H(w))for(x=0,b=w.length;x<b;++x)Z=w[x],C(Z)||H(Z)||($=f(n,T.data,T.gc,$,Z),tt+=R)}else $=f(n,T.data,T.gc,$,w),tt=R;a.push($),l.push(tt),Q=Math.max($,Q),ht=Math.max(tt,ht)}(function($t,Ht){xt($t,Xt=>{let Vt=Xt.gc,Nt=Vt.length/2,Wt;if(Nt>Ht){for(Wt=0;Wt<Nt;++Wt)delete Xt.data[Vt[Wt]];Vt.splice(0,Nt)}})})(o,e);let mt=a.indexOf(Q),Ct=l.indexOf(ht),At=$t=>({width:a[$t]||0,height:l[$t]||0});return{first:At(0),last:At(e-1),widest:At(mt),highest:At(Ct),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return et(this._alignToPixels?L(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let s=e[t];return s.$context||(s.$context=function(n,o,a){return as(n,{tick:a,index:o,type:"tick"})}(this.getContext(),t,s))}return this.$context||(this.$context=as(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){let t=this.options.ticks,e=He(this.labelRotation),s=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),a=t.autoSkipPadding||0,l=o?o.widest.width+a:0,u=o?o.highest.height+a:0;return this.isHorizontal()?u*s>l*n?l/s:u/n:u*n<l*s?u/s:l/n}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,s=this.chart,n=this.options,{grid:o,position:a,border:l}=n,u=o.offset,g=this.isHorizontal(),x=this.ticks.length+(u?1:0),b=Xs(o),w=[],k=l.setContext(this.getContext()),A=k.display?k.width:0,T=A/2,R=function(Ft){return L(s,Ft,A)},$,tt,Z,Q,ht,mt,Ct,At,$t,Ht,Xt,Vt;if(a==="top")$=R(this.bottom),mt=this.bottom-b,At=$-T,Ht=R(t.top)+T,Vt=t.bottom;else if(a==="bottom")$=R(this.top),Ht=t.top,Vt=R(t.bottom)-T,mt=$+T,At=this.top+b;else if(a==="left")$=R(this.right),ht=this.right-b,Ct=$-T,$t=R(t.left)+T,Xt=t.right;else if(a==="right")$=R(this.left),$t=t.left,Xt=R(t.right)-T,ht=$+T,Ct=this.left+b;else if(e==="x"){if(a==="center")$=R((t.top+t.bottom)/2+.5);else if(X(a)){let Ft=Object.keys(a)[0],ie=a[Ft];$=R(this.chart.scales[Ft].getPixelForValue(ie))}Ht=t.top,Vt=t.bottom,mt=$+T,At=mt+b}else if(e==="y"){if(a==="center")$=R((t.left+t.right)/2);else if(X(a)){let Ft=Object.keys(a)[0],ie=a[Ft];$=R(this.chart.scales[Ft].getPixelForValue(ie))}ht=$-T,Ct=ht-b,$t=t.left,Xt=t.right}let Nt=q(n.ticks.maxTicksLimit,x),Wt=Math.max(1,Math.ceil(x/Nt));for(tt=0;tt<x;tt+=Wt){let Ft=this.getContext(tt),ie=o.setContext(Ft),Se=l.setContext(Ft),ye=ie.lineWidth,hi=ie.color,zi=Se.dash||[],Li=Se.dashOffset,Wi=ie.tickWidth,qi=ie.tickColor,Xi=ie.tickBorderDash||[],Gi=ie.tickBorderDashOffset;Z=Tl(this,tt,u),Z!==void 0&&(Q=L(s,Z,ye),g?ht=Ct=$t=Xt=Q:mt=At=Ht=Vt=Q,w.push({tx1:ht,ty1:mt,tx2:Ct,ty2:At,x1:$t,y1:Ht,x2:Xt,y2:Vt,width:ye,color:hi,borderDash:zi,borderDashOffset:Li,tickWidth:Wi,tickColor:qi,tickBorderDash:Xi,tickBorderDashOffset:Gi}))}return this._ticksLength=x,this._borderValue=$,w}_computeLabelItems(t){let e=this.axis,s=this.options,{position:n,ticks:o}=s,a=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:g,padding:x,mirror:b}=o,w=Xs(s.grid),k=w+x,A=b?-x:k,T=-He(this.labelRotation),R=[],$,tt,Z,Q,ht,mt,Ct,At,$t,Ht,Xt,Vt,Nt="middle";if(n==="top")mt=this.bottom-A,Ct=this._getXAxisLabelAlignment();else if(n==="bottom")mt=this.top+A,Ct=this._getXAxisLabelAlignment();else if(n==="left"){let Ft=this._getYAxisLabelAlignment(w);Ct=Ft.textAlign,ht=Ft.x}else if(n==="right"){let Ft=this._getYAxisLabelAlignment(w);Ct=Ft.textAlign,ht=Ft.x}else if(e==="x"){if(n==="center")mt=(t.top+t.bottom)/2+k;else if(X(n)){let Ft=Object.keys(n)[0],ie=n[Ft];mt=this.chart.scales[Ft].getPixelForValue(ie)+k}Ct=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")ht=(t.left+t.right)/2-k;else if(X(n)){let Ft=Object.keys(n)[0],ie=n[Ft];ht=this.chart.scales[Ft].getPixelForValue(ie)}Ct=this._getYAxisLabelAlignment(w).textAlign}e==="y"&&(u==="start"?Nt="top":u==="end"&&(Nt="bottom"));let Wt=this._getLabelSizes();for($=0,tt=l.length;$<tt;++$){Z=l[$],Q=Z.label;let Ft=o.setContext(this.getContext($));At=this.getPixelForTick($)+o.labelOffset,$t=this._resolveTickFontOptions($),Ht=$t.lineHeight,Xt=H(Q)?Q.length:1;let ie=Xt/2,Se=Ft.color,ye=Ft.textStrokeColor,hi=Ft.textStrokeWidth,zi,Li=Ct;if(a?(ht=At,Ct==="inner"&&(Li=$===tt-1?this.options.reverse?"left":"right":$===0?this.options.reverse?"right":"left":"center"),Vt=n==="top"?g==="near"||T!==0?-Xt*Ht+Ht/2:g==="center"?-Wt.highest.height/2-ie*Ht+Ht:-Wt.highest.height+Ht/2:g==="near"||T!==0?Ht/2:g==="center"?Wt.highest.height/2-ie*Ht:Wt.highest.height-Xt*Ht,b&&(Vt*=-1),T===0||Ft.showLabelBackdrop||(ht+=Ht/2*Math.sin(T))):(mt=At,Vt=(1-Xt)*Ht/2),Ft.showLabelBackdrop){let Wi=ai(Ft.backdropPadding),qi=Wt.heights[$],Xi=Wt.widths[$],Gi=Vt-Wi.top,Qi=0-Wi.left;switch(Nt){case"middle":Gi-=qi/2;break;case"bottom":Gi-=qi}switch(Ct){case"center":Qi-=Xi/2;break;case"right":Qi-=Xi;break;case"inner":$===tt-1?Qi-=Xi:$>0&&(Qi-=Xi/2)}zi={left:Qi,top:Gi,width:Xi+Wi.width,height:qi+Wi.height,color:Ft.backdropColor}}R.push({label:Q,font:$t,textOffset:Vt,options:{rotation:T,color:Se,strokeColor:ye,strokeWidth:hi,textAlign:Li,textBaseline:Nt,translation:[ht,mt],backdrop:zi}})}return R}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-He(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:s,mirror:n,padding:o}}=this.options,a=t+o,l=this._getLabelSizes().widest.width,u,g;return e==="left"?n?(g=this.right+o,s==="near"?u="left":s==="center"?(u="center",g+=l/2):(u="right",g+=l)):(g=this.right-a,s==="near"?u="right":s==="center"?(u="center",g-=l/2):(u="left",g=this.left)):e==="right"?n?(g=this.left+o,s==="near"?u="right":s==="center"?(u="center",g-=l/2):(u="left",g-=l)):(g=this.left+a,s==="near"?u="left":s==="center"?(u="center",g+=l/2):(u="right",g=this.right)):u="right",{textAlign:u,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;return e==="left"||e==="right"?{top:0,left:this.left,bottom:t.height,right:this.right}:e==="top"||e==="bottom"?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:s,top:n,width:o,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,n,o,a),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let s=this.ticks.findIndex(n=>n.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){let e=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),o,a,l=(u,g,x)=>{x.width&&x.color&&(s.save(),s.lineWidth=x.width,s.strokeStyle=x.color,s.setLineDash(x.borderDash||[]),s.lineDashOffset=x.borderDashOffset,s.beginPath(),s.moveTo(u.x,u.y),s.lineTo(g.x,g.y),s.stroke(),s.restore())};if(e.display)for(o=0,a=n.length;o<a;++o){let u=n[o];e.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),e.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:s,grid:n}}=this,o=s.setContext(this.getContext()),a=s.display?o.width:0;if(!a)return;let l=n.setContext(this.getContext(0)).lineWidth,u=this._borderValue,g,x,b,w;this.isHorizontal()?(g=L(t,this.left,a)-a/2,x=L(t,this.right,l)+l/2,b=w=u):(b=L(t,this.top,a)-a/2,w=L(t,this.bottom,l)+l/2,g=x=u),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(g,b),e.lineTo(x,w),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let e=this.ctx,s=this._computeLabelArea();s&&qt(e,s);let n=this.getLabelItems(t);for(let o of n){let a=o.options,l=o.font;Qe(e,o.label,0,o.textOffset,l,a)}s&&Gt(e)}drawTitle(){let{ctx:t,options:{position:e,title:s,reverse:n}}=this;if(!s.display)return;let o=qe(s.font),a=ai(s.padding),l=s.align,u=o.lineHeight/2;e==="bottom"||e==="center"||X(e)?(u+=a.bottom,H(s.text)&&(u+=o.lineHeight*(s.text.length-1))):u+=a.top;let{titleX:g,titleY:x,maxWidth:b,rotation:w}=function(k,A,T,R){let{top:$,left:tt,bottom:Z,right:Q,chart:ht}=k,{chartArea:mt,scales:Ct}=ht,At,$t,Ht,Xt=0,Vt=Z-$,Nt=Q-tt;if(k.isHorizontal()){if($t=Te(R,tt,Q),X(T)){let Wt=Object.keys(T)[0],Ft=T[Wt];Ht=Ct[Wt].getPixelForValue(Ft)+Vt-A}else Ht=T==="center"?(mt.bottom+mt.top)/2+Vt-A:_r(k,T,A);At=Q-tt}else{if(X(T)){let Wt=Object.keys(T)[0],Ft=T[Wt];$t=Ct[Wt].getPixelForValue(Ft)-Nt+A}else $t=T==="center"?(mt.left+mt.right)/2-Nt+A:_r(k,T,A);Ht=Te(R,Z,$),Xt=T==="left"?-nt:nt}return{titleX:$t,titleY:Ht,maxWidth:At,rotation:Xt}}(this,u,e,l);Qe(t,s.text,0,0,o,{color:s.color,maxWidth:b,rotation:w,textAlign:El(l,e,n),textBaseline:"middle",translation:[g,x]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,s=q(t.grid&&t.grid.z,-1),n=q(t.border&&t.border.z,0);return this._isVisible()&&this.draw===ms.prototype.draw?[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]:[{z:e,draw:o=>{this.draw(o)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[],o,a;for(o=0,a=e.length;o<a;++o){let l=e[o];l[s]!==this.id||t&&l.type!==t||n.push(l)}return n}_resolveTickFontOptions(t){return qe(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class pn{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),s;(function(l){return"id"in l&&"defaults"in l})(e)&&(s=this.register(e));let n=this.items,o=t.id,a=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,function(l,u,g){let x=ue(Object.create(null),[g?bt.get(g):{},bt.get(u),l.defaults]);bt.set(u,x),l.defaultRoutes&&function(b,w){Object.keys(w).forEach(k=>{let A=k.split("."),T=A.pop(),R=[b].concat(A).join("."),$=w[k].split("."),tt=$.pop(),Z=$.join(".");bt.route(R,T,Z,tt)})}(u,l.defaultRoutes),l.descriptors&&bt.describe(u,l.descriptors)}(t,a,s),this.override&&bt.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){let e=this.items,s=t.id,n=this.scope;s in e&&delete e[s],n&&s in bt[n]&&(delete bt[n][s],this.override&&delete lt[s])}}class Dl{constructor(){this.controllers=new pn(ls,"datasets",!0),this.elements=new pn(ss,"elements"),this.plugins=new pn(Object,"plugins"),this.scales=new pn(ms,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(n=>{let o=s||this._getRegistryForType(n);s||o.isForType(n)||o===this.plugins&&n.id?this._exec(t,o,n):xt(n,a=>{let l=s||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,e,s){let n=ee(t);ft(s["before"+n],[],s),e[t](s),ft(s["after"+n],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){let n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var Yi=new Dl;class Pl{constructor(){this._init=[]}notify(t,e,s,n){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let o=n?this._descriptors(t).filter(n):this._descriptors(t),a=this._notify(o,t,e,s);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,s,n){n=n||{};for(let o of t){let a=o.plugin;if(ft(a[s],[e,n,o.options],a)===!1&&n.cancelable)return!1}return!0}invalidate(){C(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let s=t&&t.config,n=q(s.options&&s.options.plugins,{}),o=function(a){let l={},u=[],g=Object.keys(Yi.plugins.items);for(let b=0;b<g.length;b++)u.push(Yi.getPlugin(g[b]));let x=a.plugins||[];for(let b=0;b<x.length;b++){let w=x[b];u.indexOf(w)===-1&&(u.push(w),l[w.id]=!0)}return{plugins:u,localIds:l}}(s);return n!==!1||e?function(a,{plugins:l,localIds:u},g,x){let b=[],w=a.getContext();for(let k of l){let A=k.id,T=Al(g[A],x);T!==null&&b.push({plugin:k,options:Rl(a.config,{plugin:k,local:u[A]},T,w)})}return b}(t,o,n,e):[]}_notifyStateChanges(t){let e=this._oldCache||[],s=this._cache,n=(o,a)=>o.filter(l=>!a.some(u=>l.plugin.id===u.plugin.id));this._notify(n(e,s),t,"stop"),this._notify(n(s,e),t,"start")}}function Al(i,t){return t||i!==!1?i===!0?{}:i:null}function Rl(i,{plugin:t,local:e},s,n){let o=i.pluginScopeKeys(t),a=i.getOptionScopes(s,o);return e&&t.defaults&&a.push(t.defaults),i.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function po(i,t){let e=bt.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Cr(i){if(i==="x"||i==="y"||i==="r")return i}function fo(i,...t){if(Cr(i))return i;for(let s of t){let n=s.axis||((e=s.position)==="top"||e==="bottom"?"x":e==="left"||e==="right"?"y":void 0)||i.length>1&&Cr(i[0].toLowerCase());if(n)return n}var e;throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Tr(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Ol(i,t){let e=lt[i.type]||{scales:{}},s=t.scales||{},n=po(i.type,t),o=Object.create(null);return Object.keys(s).forEach(a=>{let l=s[a];if(!X(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let u=fo(a,l,function(b,w){if(w.data&&w.data.datasets){let k=w.data.datasets.filter(A=>A.xAxisID===b||A.yAxisID===b);if(k.length)return Tr(b,"x",k[0])||Tr(b,"y",k[0])}return{}}(a,i),bt.scales[l.type]),g=function(b,w){return b===w?"_index_":"_value_"}(u,n),x=e.scales||{};o[a]=_e(Object.create(null),[{axis:u},l,x[u],x[g]])}),i.data.datasets.forEach(a=>{let l=a.type||i.type,u=a.indexAxis||po(l,t),g=(lt[l]||{}).scales||{};Object.keys(g).forEach(x=>{let b=function(k,A){let T=k;return k==="_index_"?T=A:k==="_value_"&&(T=A==="x"?"y":"x"),T}(x,u),w=a[b+"AxisID"]||b;o[w]=o[w]||Object.create(null),_e(o[w],[{axis:b},s[w],g[x]])})}),Object.keys(o).forEach(a=>{let l=o[a];_e(l,[bt.scales[l.type],bt.scale])}),o}function Er(i){let t=i.options||(i.options={});t.plugins=q(t.plugins,{}),t.scales=Ol(i,t)}function Dr(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}let Pr=new Map,Ar=new Set;function fn(i,t){let e=Pr.get(i);return e||(e=t(),Pr.set(i,e),Ar.add(e)),e}let Gs=(i,t,e)=>{let s=De(t,e);s!==void 0&&i.add(s)};class zl{constructor(t){this._config=function(e){return(e=e||{}).data=Dr(e.data),Er(e),e}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Dr(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),Er(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return fn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return fn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return fn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id;return fn(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let s=this._scopeCache,n=s.get(t);return n&&!e||(n=new Map,s.set(t,n)),n}getOptionScopes(t,e,s){let{options:n,type:o}=this,a=this._cachedScopes(t,s),l=a.get(e);if(l)return l;let u=new Set;e.forEach(x=>{t&&(u.add(t),x.forEach(b=>Gs(u,t,b))),x.forEach(b=>Gs(u,n,b)),x.forEach(b=>Gs(u,lt[o]||{},b)),x.forEach(b=>Gs(u,bt,b)),x.forEach(b=>Gs(u,vt,b))});let g=Array.from(u);return g.length===0&&g.push(Object.create(null)),Ar.has(e)&&a.set(e,g),g}chartOptionScopes(){let{options:t,type:e}=this;return[t,lt[e]||{},bt.datasets[e]||{},{type:e},bt,vt]}resolveNamedOptions(t,e,s,n=[""]){let o={$shared:!0},{resolver:a,subPrefixes:l}=Rr(this._resolverCache,t,n),u=a;(function(g,x){let{isScriptable:b,isIndexable:w}=ze(g);for(let k of x){let A=b(k),T=w(k),R=(T||A)&&g[k];if(A&&(St(R)||Ll(R))||T&&H(R))return!0}return!1})(a,e)&&(o.$shared=!1,u=ri(a,s=St(s)?s():s,this.createResolver(t,s,l)));for(let g of e)o[g]=u[g];return o}createResolver(t,e,s=[""],n){let{resolver:o}=Rr(this._resolverCache,t,s);return X(e)?ri(o,e,void 0,n):o}}function Rr(i,t,e){let s=i.get(t);s||(s=new Map,i.set(t,s));let n=e.join(),o=s.get(n);return o||(o={resolver:Ke(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,o)),o}let Ll=i=>X(i)&&Object.getOwnPropertyNames(i).some(t=>St(i[t])),Il=["top","bottom","left","right","chartArea"];function Or(i,t){return i==="top"||i==="bottom"||Il.indexOf(i)===-1&&t==="x"}function zr(i,t){return function(e,s){return e[i]===s[i]?e[t]-s[t]:e[i]-s[i]}}function Lr(i){let t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),ft(e&&e.onComplete,[i],t)}function Hl(i){let t=i.chart,e=t.options.animation;ft(e&&e.onProgress,[i],t)}function Ir(i){return Dt()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}let mn={},Hr=i=>{let t=Ir(i);return Object.values(mn).filter(e=>e.canvas===t).pop()};function Nl(i,t,e){let s=Object.keys(i);for(let n of s){let o=+n;if(o>=t){let a=i[n];delete i[n],(e>0||o>t)&&(i[o+e]=a)}}}function bn(i,t,e){return i.options.clip?i[e]:t[e]}class Ve{static defaults=bt;static instances=mn;static overrides=lt;static registry=Yi;static version="4.4.1";static getChart=Hr;static register(...t){Yi.add(...t),Nr()}static unregister(...t){Yi.remove(...t),Nr()}constructor(t,e){let s=this.config=new zl(e),n=Ir(t),o=Hr(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||dr(n)),this.platform.updateConfig(s);let l=this.platform.acquireContext(n,a.aspectRatio),u=l&&l.canvas,g=u&&u.height,x=u&&u.width;this.id=m(),this.ctx=l,this.canvas=u,this.width=x,this.height=g,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Pl,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=fe(b=>this.update(b),a.resizeDelay||0),this._dataChanges=[],mn[this.id]=this,l&&u?(Be.listen(this,"complete",Lr),Be.listen(this,"progress",Hl),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:n,_aspectRatio:o}=this;return C(t)?e&&o?o:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Yi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():O(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return K(this.canvas,this.ctx),this}stop(){return Be.stop(this),this}resize(t,e){Be.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let s=this.options,n=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(n,t,e,o),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,O(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),ft(s.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){xt(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){let t=this.options,e=t.scales,s=this.scales,n=Object.keys(s).reduce((a,l)=>(a[l]=!1,a),{}),o=[];e&&(o=o.concat(Object.keys(e).map(a=>{let l=e[a],u=fo(a,l),g=u==="r",x=u==="x";return{options:l,dposition:g?"chartArea":x?"bottom":"left",dtype:g?"radialLinear":x?"category":"linear"}}))),xt(o,a=>{let l=a.options,u=l.id,g=fo(u,l),x=q(l.type,a.dtype);l.position!==void 0&&Or(l.position,g)===Or(a.dposition)||(l.position=a.dposition),n[u]=!0;let b=null;u in s&&s[u].type===x?b=s[u]:(b=new(Yi.getScale(x))({id:u,type:x,ctx:this.ctx,chart:this}),s[b.id]=b),b.init(l,t)}),xt(n,(a,l)=>{a||delete s[l]}),xt(s,a=>{li.configure(this,a,a.options),li.addBox(this,a)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((n,o)=>n.index-o.index),s>e){for(let n=e;n<s;++n)this._destroyDatasetMeta(n);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(zr("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,n)=>{e.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){let t=[],e=this.data.datasets,s,n;for(this._removeUnreferencedMetasets(),s=0,n=e.length;s<n;s++){let o=e[s],a=this.getDatasetMeta(s),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=l,a.indexAxis=o.indexAxis||po(l,this.options),a.order=o.order||0,a.index=s,a.label=""+o.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{let u=Yi.getController(l),{datasetElementType:g,dataElementType:x}=bt.datasets[l];Object.assign(u,{dataElementType:Yi.getElement(x),datasetElementType:g&&Yi.getElement(g)}),a.controller=new u(this,s),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){xt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let g=0,x=this.data.datasets.length;g<x;g++){let{controller:b}=this.getDatasetMeta(g),w=!n&&o.indexOf(b)===-1;b.buildOrUpdateElements(w),a=Math.max(+b.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),n||xt(o,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(zr("z","_idx"));let{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){xt(this.scales,t=>{li.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);r(e,s)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(let{method:s,start:n,count:o}of e)Nl(t,n,s==="_removeElements"?-o:o)}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,s=o=>new Set(t.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),n=s(0);for(let o=1;o<e;o++)if(!r(n,s(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;li.update(this,this.width,this.height,t);let e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],xt(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,St(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let s=this.getDatasetMeta(t),n={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Be.has(this)?this.attached&&!Be.running(this)&&Be.start(this):(this.draw(),Lr({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:s,height:n}=this._resizeBeforeDraw;this._resize(s,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e=this._sortedMetasets,s=[],n,o;for(n=0,o=e.length;n<o;++n){let a=e[n];t&&!a.visible||s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,s=t._clip,n=!s.disabled,o=function(l,u){let{xScale:g,yScale:x}=l;return g&&x?{left:bn(g,u,"left"),right:bn(g,u,"right"),top:bn(x,u,"top"),bottom:bn(x,u,"bottom")}:u}(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(n&&qt(e,{left:s.left===!1?0:o.left-s.left,right:s.right===!1?this.width:o.right+s.right,top:s.top===!1?0:o.top-s.top,bottom:s.bottom===!1?this.height:o.bottom+s.bottom}),t.controller.draw(),n&&Gt(e),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Mt(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,n){let o=Jo.modes[e];return typeof o=="function"?o(this,t,s,n):[]}getDatasetMeta(t){let e=this.data.datasets[t],s=this._metasets,n=s.filter(o=>o&&o._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=as(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){let n=s?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,n);Bt(e)?(o.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),a.update(o,{visible:s}),this.update(l=>l.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Be.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),K(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete mn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,s=(o,a)=>{e.addEventListener(this,o,a),t[o]=a},n=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};xt(this.options.events,o=>s(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,e=this.platform,s=(u,g)=>{e.addEventListener(this,u,g),t[u]=g},n=(u,g)=>{t[u]&&(e.removeEventListener(this,u,g),delete t[u])},o=(u,g)=>{this.canvas&&this.resize(u,g)},a,l=()=>{n("attach",l),this.attached=!0,this.resize(),s("resize",o),s("detach",a)};a=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),s("attach",l)},e.isAttached(this.canvas)?l():a()}unbindEvents(){xt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},xt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){let n=s?"set":"remove",o,a,l,u;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),l=0,u=t.length;l<u;++l){a=t[l];let g=a&&this.getDatasetMeta(a.datasetIndex).controller;g&&g[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],s=t.map(({datasetIndex:n,index:o})=>{let a=this.getDatasetMeta(n);if(!a)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:a.data[o],index:o}});!jt(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){let n=this.options.hover,o=(u,g)=>u.filter(x=>!g.some(b=>x.datasetIndex===b.datasetIndex&&x.index===b.index)),a=o(e,t),l=s?t:o(t,e);a.length&&this.updateHoverStyle(a,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(t,e){let s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;let o=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(o||s.changed)&&this.render(),this}_handleEvent(t,e,s){let{_active:n=[],options:o}=this,a=e,l=this._getActiveElements(t,n,s,a),u=c(t),g=function(b,w,k,A){return k&&b.type!=="mouseout"?A?w:b:null}(t,this._lastEvent,s,u);s&&(this._lastEvent=null,ft(o.onHover,[t,l,this],this),u&&ft(o.onClick,[t,l,this],this));let x=!jt(l,n);return(x||e)&&(this._active=l,this._updateHoverStyles(l,n,e)),this._lastEvent=g,x}_getActiveElements(t,e,s,n){if(t.type==="mouseout")return[];if(!s)return e;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,n)}}function Nr(){return xt(Ve.instances,i=>i._plugins.invalidate())}function Cs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class mo{static override(t){Object.assign(mo.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Cs()}parse(){return Cs()}format(){return Cs()}add(){return Cs()}diff(){return Cs()}startOf(){return Cs()}endOf(){return Cs()}}var $r={_date:mo};function $l(i){let t=i.iScale,e=function(g,x){if(!g._cache.$bar){let b=g.getMatchingVisibleMetas(x),w=[];for(let k=0,A=b.length;k<A;k++)w=w.concat(b[k].controller.getAllParsedValues(g));g._cache.$bar=ce(w.sort((k,A)=>k-A))}return g._cache.$bar}(t,i.type),s,n,o,a,l=t._length,u=()=>{o!==32767&&o!==-32768&&(Bt(a)&&(l=Math.min(l,Math.abs(o-a)||l)),a=o)};for(s=0,n=e.length;s<n;++s)o=t.getPixelForValue(e[s]),u();for(a=void 0,s=0,n=t.ticks.length;s<n;++s)o=t.getPixelForTick(s),u();return l}function Fr(i,t,e,s){return H(i)?function(n,o,a,l){let u=a.parse(n[0],l),g=a.parse(n[1],l),x=Math.min(u,g),b=Math.max(u,g),w=x,k=b;Math.abs(x)>Math.abs(b)&&(w=b,k=x),o[a.axis]=k,o._custom={barStart:w,barEnd:k,start:u,end:g,min:x,max:b}}(i,t,e,s):t[e.axis]=e.parse(i,s),t}function Wr(i,t,e,s){let n=i.iScale,o=i.vScale,a=n.getLabels(),l=n===o,u=[],g,x,b,w;for(g=e,x=e+s;g<x;++g)w=t[g],b={},b[n.axis]=l||n.parse(a[g],g),u.push(Fr(w,b,o,g));return u}function bo(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function Fl(i,t,e,s){let n=t.borderSkipped,o={};if(!n)return void(i.borderSkipped=o);if(n===!0)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});let{start:a,end:l,reverse:u,top:g,bottom:x}=function(b){let w,k,A,T,R;return b.horizontal?(w=b.base>b.x,k="left",A="right"):(w=b.base<b.y,k="bottom",A="top"),w?(T="end",R="start"):(T="start",R="end"),{start:k,end:A,reverse:w,top:T,bottom:R}}(i);n==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===s?n=g:(e._bottom||0)===s?n=x:(o[Br(x,a,l,u)]=!0,n=g)),o[Br(n,a,l,u)]=!0,i.borderSkipped=o}function Br(i,t,e,s){var n,o,a;return s?(a=e,i=Ur(i=(n=i)===(o=t)?a:n===a?o:n,e,t)):i=Ur(i,t,e),i}function Ur(i,t,e){return i==="start"?t:i==="end"?e:i}function Wl(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class yo extends ls{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:s,color:n}}=t.legend.options;return e.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){let s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let o,a,l=u=>+s[u];if(X(s[t])){let{key:u="value"}=this._parsing;l=g=>+De(s[g],u)}for(o=t,a=t+e;o<a;++o)n._parsed[o]=l(o)}}_getRotation(){return He(this.options.rotation-90)}_getCircumference(){return He(this.options.circumference)}_getRotationExtents(){let t=v,e=-v;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){let n=this.chart.getDatasetMeta(s).controller,o=n._getRotation(),a=n._getCircumference();t=Math.min(t,o),e=Math.max(e,o+a)}return{rotation:t,circumference:e-t}}update(t){let e=this.chart,{chartArea:s}=e,n=this._cachedMeta,o=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),u=Math.min(Rt(this.options.cutout,l),1),g=this._getRingWeight(this.index),{circumference:x,rotation:b}=this._getRotationExtents(),{ratioX:w,ratioY:k,offsetX:A,offsetY:T}=function(ht,mt,Ct){let At=1,$t=1,Ht=0,Xt=0;if(mt<v){let Vt=ht,Nt=Vt+mt,Wt=Math.cos(Vt),Ft=Math.sin(Vt),ie=Math.cos(Nt),Se=Math.sin(Nt),ye=(Xi,Gi,Qi)=>N(Xi,Vt,Nt,!0)?1:Math.max(Gi,Gi*Ct,Qi,Qi*Ct),hi=(Xi,Gi,Qi)=>N(Xi,Vt,Nt,!0)?-1:Math.min(Gi,Gi*Ct,Qi,Qi*Ct),zi=ye(0,Wt,ie),Li=ye(nt,Ft,Se),Wi=hi(y,Wt,ie),qi=hi(y+nt,Ft,Se);At=(zi-Wi)/2,$t=(Li-qi)/2,Ht=-(zi+Wi)/2,Xt=-(Li+qi)/2}return{ratioX:At,ratioY:$t,offsetX:Ht,offsetY:Xt}}(b,x,u),R=(s.width-a)/w,$=(s.height-a)/k,tt=Math.max(Math.min(R,$)/2,0),Z=Ot(this.options.radius,tt),Q=(Z-Math.max(Z*u,0))/this._getVisibleDatasetWeightTotal();this.offsetX=A*Z,this.offsetY=T*Z,n.total=this.calculateTotal(),this.outerRadius=Z-Q*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Q*g,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){let s=this.options,n=this._cachedMeta,o=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*o/v)}updateElements(t,e,s,n){let o=n==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,g=(l.left+l.right)/2,x=(l.top+l.bottom)/2,b=o&&u.animateScale,w=b?0:this.innerRadius,k=b?0:this.outerRadius,{sharedOptions:A,includeOptions:T}=this._getSharedOptions(e,n),R,$=this._getRotation();for(R=0;R<e;++R)$+=this._circumference(R,o);for(R=e;R<e+s;++R){let tt=this._circumference(R,o),Z=t[R],Q={x:g+this.offsetX,y:x+this.offsetY,startAngle:$,endAngle:$+tt,circumference:tt,outerRadius:k,innerRadius:w};T&&(Q.options=A||this.resolveDataElementOptions(R,Z.active?"active":n)),$+=tt,this.updateElement(Z,R,Q,n)}}calculateTotal(){let t=this._cachedMeta,e=t.data,s,n=0;for(s=0;s<e.length;s++){let o=t._parsed[s];o===null||isNaN(o)||!this.chart.getDataVisibility(s)||e[s].hidden||(n+=Math.abs(o))}return n}calculateCircumference(t){let e=this._cachedMeta.total;return e>0&&!isNaN(t)?v*(Math.abs(t)/e):0}getLabelAndValue(t){let e=this._cachedMeta,s=this.chart,n=s.data.labels||[],o=ct(e._parsed[t],s.options.locale);return{label:n[t]||"",value:o}}getMaxBorderWidth(t){let e=0,s=this.chart,n,o,a,l,u;if(!t){for(n=0,o=s.data.datasets.length;n<o;++n)if(s.isDatasetVisible(n)){a=s.getDatasetMeta(n),t=a.data,l=a.controller;break}}if(!t)return 0;for(n=0,o=t.length;n<o;++n)u=l.resolveDataElementOptions(n),u.borderAlign!=="inner"&&(e=Math.max(e,u.borderWidth||0,u.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,n=t.length;s<n;++s){let o=this.resolveDataElementOptions(s);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(q(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class jr extends ls{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:s,color:n}}=t.legend.options;return e.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let e=this._cachedMeta,s=this.chart,n=s.data.labels||[],o=ct(e._parsed[t].r,s.options.locale);return{label:n[t]||"",value:o}}parseObjectData(t,e,s,n){return zs.bind(this)(t,e,s,n)}update(t){let e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){let t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,n)=>{let o=this.getParsed(n).r;!isNaN(o)&&this.chart.getDataVisibility(n)&&(o<e.min&&(e.min=o),o>e.max&&(e.max=o))}),e}_updateRadius(){let t=this.chart,e=t.chartArea,s=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(n/2,0),a=(o-Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,s,n){let o=n==="reset",a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,g=u.xCenter,x=u.yCenter,b=u.getIndexAngle(0)-.5*y,w,k=b,A=360/this.countVisibleElements();for(w=0;w<e;++w)k+=this._computeAngle(w,n,A);for(w=e;w<e+s;w++){let T=t[w],R=k,$=k+this._computeAngle(w,n,A),tt=a.getDataVisibility(w)?u.getDistanceFromCenterForValue(this.getParsed(w).r):0;k=$,o&&(l.animateScale&&(tt=0),l.animateRotate&&(R=$=b));let Z={x:g,y:x,innerRadius:0,outerRadius:tt,startAngle:R,endAngle:$,options:this.resolveDataElementOptions(w,T.active?"active":n)};this.updateElement(T,w,Z,n)}}countVisibleElements(){let t=this._cachedMeta,e=0;return t.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?He(this.resolveDataElementOptions(t,e).angle||s):0}}var Vr=Object.freeze({__proto__:null,BarController:class extends ls{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(i,t,e,s){return Wr(i,t,e,s)}parseArrayData(i,t,e,s){return Wr(i,t,e,s)}parseObjectData(i,t,e,s){let{iScale:n,vScale:o}=i,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=n.axis==="x"?a:l,g=o.axis==="x"?a:l,x=[],b,w,k,A;for(b=e,w=e+s;b<w;++b)A=t[b],k={},k[n.axis]=n.parse(De(A,u),b),x.push(Fr(De(A,g),k,o,b));return x}updateRangeFromParsed(i,t,e,s){super.updateRangeFromParsed(i,t,e,s);let n=e._custom;n&&t===this._cachedMeta.vScale&&(i.min=Math.min(i.min,n.min),i.max=Math.max(i.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(i){let t=this._cachedMeta,{iScale:e,vScale:s}=t,n=this.getParsed(i),o=n._custom,a=bo(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+e.getLabelForValue(n[e.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(i){let t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,i)}updateElements(i,t,e,s){let n=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),g=this._getRuler(),{sharedOptions:x,includeOptions:b}=this._getSharedOptions(t,s);for(let w=t;w<t+e;w++){let k=this.getParsed(w),A=n||C(k[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(w),T=this._calculateBarIndexPixels(w,g),R=(k._stacks||{})[a.axis],$={horizontal:u,base:A.base,enableBorderRadius:!R||bo(k._custom)||o===R._top||o===R._bottom,x:u?A.head:T.center,y:u?T.center:A.head,height:u?T.size:Math.abs(A.size),width:u?Math.abs(A.size):T.size};b&&($.options=x||this.resolveDataElementOptions(w,i[w].active?"active":s));let tt=$.options||i[w].options;Fl($,tt,R,o),Wl($,tt,g.ratio),this.updateElement(i[w],w,$,s)}}_getStacks(i,t){let{iScale:e}=this._cachedMeta,s=e.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),n=e.options.stacked,o=[],a=l=>{let u=l.controller.getParsed(t),g=u&&u[l.vScale.axis];if(C(g)||isNaN(g))return!0};for(let l of s)if((t===void 0||!a(l))&&((n===!1||o.indexOf(l.stack)===-1||n===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===i))break;return o.length||o.push(void 0),o}_getStackCount(i){return this._getStacks(void 0,i).length}_getStackIndex(i,t,e){let s=this._getStacks(i,e),n=t!==void 0?s.indexOf(t):-1;return n===-1?s.length-1:n}_getRuler(){let i=this.options,t=this._cachedMeta,e=t.iScale,s=[],n,o;for(n=0,o=t.data.length;n<o;++n)s.push(e.getPixelForValue(this.getParsed(n)[e.axis],n));let a=i.barThickness;return{min:a||$l(t),pixels:s,start:e._startPixel,end:e._endPixel,stackCount:this._getStackCount(),scale:e,grouped:i.grouped,ratio:a?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(i){let{_cachedMeta:{vScale:t,_stacked:e,index:s},options:{base:n,minBarLength:o}}=this,a=n||0,l=this.getParsed(i),u=l._custom,g=bo(u),x,b,w=l[t.axis],k=0,A=e?this.applyStack(t,l,e):w;A!==w&&(k=A-w,A=w),g&&(w=u.barStart,A=u.barEnd-u.barStart,w!==0&&Et(w)!==Et(u.barEnd)&&(k=0),k+=w);let T=C(n)||g?k:n,R=t.getPixelForValue(T);if(x=this.chart.getDataVisibility(i)?t.getPixelForValue(k+A):R,b=x-R,Math.abs(b)<o){b=function(ht,mt,Ct){return ht!==0?Et(ht):(mt.isHorizontal()?1:-1)*(mt.min>=Ct?1:-1)}(b,t,a)*o,w===a&&(R-=b/2);let $=t.getPixelForDecimal(0),tt=t.getPixelForDecimal(1),Z=Math.min($,tt),Q=Math.max($,tt);R=Math.max(Math.min(R,Q),Z),x=R+b,e&&!g&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(x)-t.getValueForPixel(R))}if(R===t.getPixelForValue(a)){let $=Et(b)*t.getLineWidthForValue(a)/2;R+=$,b-=$}return{size:b,base:R,head:x,center:x+b/2}}_calculateBarIndexPixels(i,t){let e=t.scale,s=this.options,n=s.skipNull,o=q(s.maxBarThickness,1/0),a,l;if(t.grouped){let u=n?this._getStackCount(i):t.stackCount,g=s.barThickness==="flex"?function(b,w,k,A){let T=w.pixels,R=T[b],$=b>0?T[b-1]:null,tt=b<T.length-1?T[b+1]:null,Z=k.categoryPercentage;$===null&&($=R-(tt===null?w.end-w.start:tt-R)),tt===null&&(tt=R+R-$);let Q=R-(R-Math.min($,tt))/2*Z;return{chunk:Math.abs(tt-$)/2*Z/A,ratio:k.barPercentage,start:Q}}(i,t,s,u):function(b,w,k,A){let T=k.barThickness,R,$;return C(T)?(R=w.min*k.categoryPercentage,$=k.barPercentage):(R=T*A,$=1),{chunk:R/A,ratio:$,start:w.pixels[b]-R/2}}(i,t,s,u),x=this._getStackIndex(this.index,this._cachedMeta.stack,n?i:void 0);a=g.start+g.chunk*x+g.chunk/2,l=Math.min(o,g.chunk*g.ratio)}else a=e.getPixelForValue(this.getParsed(i)[e.axis],i),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){let i=this._cachedMeta,t=i.vScale,e=i.data,s=e.length,n=0;for(;n<s;++n)this.getParsed(n)[t.axis]!==null&&e[n].draw(this._ctx)}},BubbleController:class extends ls{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(i,t,e,s){let n=super.parsePrimitiveData(i,t,e,s);for(let o=0;o<n.length;o++)n[o]._custom=this.resolveDataElementOptions(o+e).radius;return n}parseArrayData(i,t,e,s){let n=super.parseArrayData(i,t,e,s);for(let o=0;o<n.length;o++){let a=t[e+o];n[o]._custom=q(a[2],this.resolveDataElementOptions(o+e).radius)}return n}parseObjectData(i,t,e,s){let n=super.parseObjectData(i,t,e,s);for(let o=0;o<n.length;o++){let a=t[e+o];n[o]._custom=q(a&&a.r&&+a.r,this.resolveDataElementOptions(o+e).radius)}return n}getMaxOverflow(){let i=this._cachedMeta.data,t=0;for(let e=i.length-1;e>=0;--e)t=Math.max(t,i[e].size(this.resolveDataElementOptions(e))/2);return t>0&&t}getLabelAndValue(i){let t=this._cachedMeta,e=this.chart.data.labels||[],{xScale:s,yScale:n}=t,o=this.getParsed(i),a=s.getLabelForValue(o.x),l=n.getLabelForValue(o.y),u=o._custom;return{label:e[i]||"",value:"("+a+", "+l+(u?", "+u:"")+")"}}update(i){let t=this._cachedMeta.data;this.updateElements(t,0,t.length,i)}updateElements(i,t,e,s){let n=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(t,s),g=o.axis,x=a.axis;for(let b=t;b<t+e;b++){let w=i[b],k=!n&&this.getParsed(b),A={},T=A[g]=n?o.getPixelForDecimal(.5):o.getPixelForValue(k[g]),R=A[x]=n?a.getBasePixel():a.getPixelForValue(k[x]);A.skip=isNaN(T)||isNaN(R),u&&(A.options=l||this.resolveDataElementOptions(b,w.active?"active":s),n&&(A.options.radius=0)),this.updateElement(w,b,A,s)}}resolveDataElementOptions(i,t){let e=this.getParsed(i),s=super.resolveDataElementOptions(i,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let n=s.radius;return t!=="active"&&(s.radius=0),s.radius+=q(e&&e._custom,n),s}},DoughnutController:yo,LineController:class extends ls{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(i){let t=this._cachedMeta,{dataset:e,data:s=[],_dataset:n}=t,o=this.chart._animationsDisabled,{start:a,count:l}=ci(t,s,o);this._drawStart=a,this._drawCount=l,di(t)&&(a=0,l=s.length),e._chart=this.chart,e._datasetIndex=this.index,e._decimated=!!n._decimated,e.points=s;let u=this.resolveDatasetElementOptions(i);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(e,void 0,{animated:!o,options:u},i),this.updateElements(s,a,l,i)}updateElements(i,t,e,s){let n=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:g,includeOptions:x}=this._getSharedOptions(t,s),b=o.axis,w=a.axis,{spanGaps:k,segment:A}=this.options,T=Re(k)?k:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||n||s==="none",$=t+e,tt=i.length,Z=t>0&&this.getParsed(t-1);for(let Q=0;Q<tt;++Q){let ht=i[Q],mt=R?ht:{};if(Q<t||Q>=$){mt.skip=!0;continue}let Ct=this.getParsed(Q),At=C(Ct[w]),$t=mt[b]=o.getPixelForValue(Ct[b],Q),Ht=mt[w]=n||At?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,Ct,l):Ct[w],Q);mt.skip=isNaN($t)||isNaN(Ht)||At,mt.stop=Q>0&&Math.abs(Ct[b]-Z[b])>T,A&&(mt.parsed=Ct,mt.raw=u.data[Q]),x&&(mt.options=g||this.resolveDataElementOptions(Q,ht.active?"active":s)),R||this.updateElement(ht,Q,mt,s),Z=Ct}}getMaxOverflow(){let i=this._cachedMeta,t=i.dataset,e=t.options&&t.options.borderWidth||0,s=i.data||[];if(!s.length)return e;let n=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(e,n,o)/2}draw(){let i=this._cachedMeta;i.dataset.updateControlPoints(this.chart.chartArea,i.iScale.axis),super.draw()}},PieController:class extends yo{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:jr,RadarController:class extends ls{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(i){let t=this._cachedMeta.vScale,e=this.getParsed(i);return{label:t.getLabels()[i],value:""+t.getLabelForValue(e[t.axis])}}parseObjectData(i,t,e,s){return zs.bind(this)(i,t,e,s)}update(i){let t=this._cachedMeta,e=t.dataset,s=t.data||[],n=t.iScale.getLabels();if(e.points=s,i!=="resize"){let o=this.resolveDatasetElementOptions(i);this.options.showLine||(o.borderWidth=0);let a={_loop:!0,_fullLoop:n.length===s.length,options:o};this.updateElement(e,void 0,a,i)}this.updateElements(s,0,s.length,i)}updateElements(i,t,e,s){let n=this._cachedMeta.rScale,o=s==="reset";for(let a=t;a<t+e;a++){let l=i[a],u=this.resolveDataElementOptions(a,l.active?"active":s),g=n.getPointPositionForValue(a,this.getParsed(a).r),x=o?n.xCenter:g.x,b=o?n.yCenter:g.y,w={x,y:b,angle:g.angle,skip:isNaN(x)||isNaN(b),options:u};this.updateElement(l,a,w,s)}}},ScatterController:class extends ls{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(i){let t=this._cachedMeta,e=this.chart.data.labels||[],{xScale:s,yScale:n}=t,o=this.getParsed(i),a=s.getLabelForValue(o.x),l=n.getLabelForValue(o.y);return{label:e[i]||"",value:"("+a+", "+l+")"}}update(i){let t=this._cachedMeta,{data:e=[]}=t,s=this.chart._animationsDisabled,{start:n,count:o}=ci(t,e,s);if(this._drawStart=n,this._drawCount=o,di(t)&&(n=0,o=e.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=e;let u=this.resolveDatasetElementOptions(i);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:u},i)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(e,n,o,i)}addElements(){let{showLine:i}=this.options;!this.datasetElementType&&i&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(i,t,e,s){let n=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,g=this.resolveDataElementOptions(t,s),x=this.getSharedOptions(g),b=this.includeOptions(s,x),w=o.axis,k=a.axis,{spanGaps:A,segment:T}=this.options,R=Re(A)?A:Number.POSITIVE_INFINITY,$=this.chart._animationsDisabled||n||s==="none",tt=t>0&&this.getParsed(t-1);for(let Z=t;Z<t+e;++Z){let Q=i[Z],ht=this.getParsed(Z),mt=$?Q:{},Ct=C(ht[k]),At=mt[w]=o.getPixelForValue(ht[w],Z),$t=mt[k]=n||Ct?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,ht,l):ht[k],Z);mt.skip=isNaN(At)||isNaN($t)||Ct,mt.stop=Z>0&&Math.abs(ht[w]-tt[w])>R,T&&(mt.parsed=ht,mt.raw=u.data[Z]),b&&(mt.options=x||this.resolveDataElementOptions(Z,Q.active?"active":s)),$||this.updateElement(Q,Z,mt,s),tt=ht}this.updateSharedOptions(x,s,g)}getMaxOverflow(){let i=this._cachedMeta,t=i.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}let e=i.dataset,s=e.options&&e.options.borderWidth||0;if(!t.length)return s;let n=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,n,o)/2}}});function Bl(i,t,e,s){let n=hn(i.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),o=(e-t)/2,a=Math.min(o,s*t/2),l=u=>{let g=(e-Math.min(o,u))*s/2;return J(u,0,Math.min(o,g))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:J(n.innerStart,0,a),innerEnd:J(n.innerEnd,0,a)}}function Hs(i,t,e,s){return{x:e+i*Math.cos(t),y:s+i*Math.sin(t)}}function yn(i,t,e,s,n,o){let{x:a,y:l,startAngle:u,pixelMargin:g,innerRadius:x}=t,b=Math.max(t.outerRadius+s+e-g,0),w=x>0?x+s+e+g:0,k=0,A=n-u;if(s){let Wt=((x>0?x-s:0)+(b>0?b-s:0))/2;k=(A-(Wt!==0?A*Wt/(Wt+s):A))/2}let T=(A-Math.max(.001,A*b-e/y)/b)/2,R=u+T+k,$=n-T-k,{outerStart:tt,outerEnd:Z,innerStart:Q,innerEnd:ht}=Bl(t,w,b,$-R),mt=b-tt,Ct=b-Z,At=R+tt/mt,$t=$-Z/Ct,Ht=w+Q,Xt=w+ht,Vt=R+Q/Ht,Nt=$-ht/Xt;if(i.beginPath(),o){let Wt=(At+$t)/2;if(i.arc(a,l,b,At,Wt),i.arc(a,l,b,Wt,$t),Z>0){let ye=Hs(Ct,$t,a,l);i.arc(ye.x,ye.y,Z,$t,$+nt)}let Ft=Hs(Xt,$,a,l);if(i.lineTo(Ft.x,Ft.y),ht>0){let ye=Hs(Xt,Nt,a,l);i.arc(ye.x,ye.y,ht,$+nt,Nt+Math.PI)}let ie=($-ht/w+(R+Q/w))/2;if(i.arc(a,l,w,$-ht/w,ie,!0),i.arc(a,l,w,ie,R+Q/w,!0),Q>0){let ye=Hs(Ht,Vt,a,l);i.arc(ye.x,ye.y,Q,Vt+Math.PI,R-nt)}let Se=Hs(mt,R,a,l);if(i.lineTo(Se.x,Se.y),tt>0){let ye=Hs(mt,At,a,l);i.arc(ye.x,ye.y,tt,R-nt,At)}}else{i.moveTo(a,l);let Wt=Math.cos(At)*b+a,Ft=Math.sin(At)*b+l;i.lineTo(Wt,Ft);let ie=Math.cos($t)*b+a,Se=Math.sin($t)*b+l;i.lineTo(ie,Se)}i.closePath()}function Ul(i,t,e,s,n){let{fullCircles:o,startAngle:a,circumference:l,options:u}=t,{borderWidth:g,borderJoinStyle:x,borderDash:b,borderDashOffset:w}=u,k=u.borderAlign==="inner";if(!g)return;i.setLineDash(b||[]),i.lineDashOffset=w,k?(i.lineWidth=2*g,i.lineJoin=x||"round"):(i.lineWidth=g,i.lineJoin=x||"bevel");let A=t.endAngle;if(o){yn(i,t,e,s,A,n);for(let T=0;T<o;++T)i.stroke();isNaN(l)||(A=a+(l%v||v))}k&&function(T,R,$){let{startAngle:tt,pixelMargin:Z,x:Q,y:ht,outerRadius:mt,innerRadius:Ct}=R,At=Z/mt;T.beginPath(),T.arc(Q,ht,mt,tt-At,$+At),Ct>Z?(At=Z/Ct,T.arc(Q,ht,Ct,$+At,tt-At,!0)):T.arc(Q,ht,Z,$+nt,tt-nt),T.closePath(),T.clip()}(i,t,A),o||(yn(i,t,e,s,A,n),i.stroke())}function Yr(i,t,e=t){i.lineCap=q(e.borderCapStyle,t.borderCapStyle),i.setLineDash(q(e.borderDash,t.borderDash)),i.lineDashOffset=q(e.borderDashOffset,t.borderDashOffset),i.lineJoin=q(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=q(e.borderWidth,t.borderWidth),i.strokeStyle=q(e.borderColor,t.borderColor)}function jl(i,t,e){i.lineTo(e.x,e.y)}function qr(i,t,e={}){let s=i.length,{start:n=0,end:o=s-1}=e,{start:a,end:l}=t,u=Math.max(n,a),g=Math.min(o,l),x=n<a&&o<a||n>l&&o>l;return{count:s,start:u,loop:t.loop,ilen:g<u&&!x?s+g-u:g-u}}function Vl(i,t,e,s){let{points:n,options:o}=t,{count:a,start:l,loop:u,ilen:g}=qr(n,e,s),x=function(R){return R.stepped?Zt:R.tension||R.cubicInterpolationMode==="monotone"?pe:jl}(o),b,w,k,{move:A=!0,reverse:T}=s||{};for(b=0;b<=g;++b)w=n[(l+(T?g-b:b))%a],w.skip||(A?(i.moveTo(w.x,w.y),A=!1):x(i,k,w,T,o.stepped),k=w);return u&&(w=n[(l+(T?g:0))%a],x(i,k,w,T,o.stepped)),!!u}function Yl(i,t,e,s){let n=t.points,{count:o,start:a,ilen:l}=qr(n,e,s),{move:u=!0,reverse:g}=s||{},x,b,w,k,A,T,R=0,$=0,tt=Q=>(a+(g?l-Q:Q))%o,Z=()=>{k!==A&&(i.lineTo(R,A),i.lineTo(R,k),i.lineTo(R,T))};for(u&&(b=n[tt(0)],i.moveTo(b.x,b.y)),x=0;x<=l;++x){if(b=n[tt(x)],b.skip)continue;let Q=b.x,ht=b.y,mt=0|Q;mt===w?(ht<k?k=ht:ht>A&&(A=ht),R=($*R+Q)/++$):(Z(),i.lineTo(Q,ht),w=mt,$=0,k=A=ht),T=ht}Z()}function xo(i){let t=i.options,e=t.borderDash&&t.borderDash.length;return i._decimated||i._loop||t.tension||t.cubicInterpolationMode==="monotone"||t.stepped||e?Vl:Yl}let ql=typeof Path2D=="function";function Xl(i,t,e,s){ql&&!t.options.segment?function(n,o,a,l){let u=o._path;u||(u=o._path=new Path2D,o.path(u,a,l)&&u.closePath()),Yr(n,o.options),n.stroke(u)}(i,t,e,s):function(n,o,a,l){let{segments:u,options:g}=o,x=xo(o);for(let b of u)Yr(n,g,b.style),n.beginPath(),x(n,o,b,{start:a,end:a+l-1})&&n.closePath(),n.stroke()}(i,t,e,s)}class xn extends ss{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){let s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){let n=s.spanGaps?this._loop:this._fullLoop;Mi(this._points,s,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Go(this,this.options.segment))}first(){let t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){let t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){let s=this.options,n=t[e],o=this.points,a=oo(this,{property:e,start:n,end:n});if(!a.length)return;let l=[],u=function(b){return b.stepped?Uo:b.tension||b.cubicInterpolationMode==="monotone"?jo:ps}(s),g,x;for(g=0,x=a.length;g<x;++g){let{start:b,end:w}=a[g],k=o[b],A=o[w];if(k===A){l.push(k);continue}let T=u(k,A,Math.abs((n-k[e])/(A[e]-k[e])),s.stepped);T[e]=t[e],l.push(T)}return l.length===1?l[0]:l}pathSegment(t,e,s){return xo(this)(t,this,e,s)}path(t,e,s){let n=this.segments,o=xo(this),a=this._loop;e=e||0,s=s||this.points.length-e;for(let l of n)a&=o(t,this,l,{start:e,end:e+s-1});return!!a}draw(t,e,s,n){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),Xl(t,this,s,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Xr(i,t,e,s){let n=i.options,{[e]:o}=i.getProps([e],s);return Math.abs(t-o)<n.radius+n.hitRadius}function Gr(i,t){let{x:e,y:s,base:n,width:o,height:a}=i.getProps(["x","y","base","width","height"],t),l,u,g,x,b;return i.horizontal?(b=a/2,l=Math.min(e,n),u=Math.max(e,n),g=s-b,x=s+b):(b=o/2,l=e-b,u=e+b,g=Math.min(s,n),x=Math.max(s,n)),{left:l,top:g,right:u,bottom:x}}function bs(i,t,e,s){return i?0:J(t,e,s)}function Gl(i){let t=Gr(i),e=t.right-t.left,s=t.bottom-t.top,n=function(a,l,u){let g=a.options.borderWidth,x=a.borderSkipped,b=eo(g);return{t:bs(x.top,b.top,0,u),r:bs(x.right,b.right,0,l),b:bs(x.bottom,b.bottom,0,u),l:bs(x.left,b.left,0,l)}}(i,e/2,s/2),o=function(a,l,u){let{enableBorderRadius:g}=a.getProps(["enableBorderRadius"]),x=a.options.borderRadius,b=fs(x),w=Math.min(l,u),k=a.borderSkipped,A=g||X(x);return{topLeft:bs(!A||k.top||k.left,b.topLeft,0,w),topRight:bs(!A||k.top||k.right,b.topRight,0,w),bottomLeft:bs(!A||k.bottom||k.left,b.bottomLeft,0,w),bottomRight:bs(!A||k.bottom||k.right,b.bottomRight,0,w)}}(i,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:o},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function vo(i,t,e,s){let n=t===null,o=e===null,a=i&&!(n&&o)&&Gr(i,s);return a&&(n||ot(t,a.left,a.right))&&(o||ot(e,a.top,a.bottom))}function Ql(i,t){i.rect(t.x,t.y,t.w,t.h)}function wo(i,t,e={}){let s=i.x!==e.x?-t:0,n=i.y!==e.y?-t:0,o=(i.x+i.w!==e.x+e.w?t:0)-s,a=(i.y+i.h!==e.y+e.h?t:0)-n;return{x:i.x+s,y:i.y+n,w:i.w+o,h:i.h+a,radius:i.radius}}var _o=Object.freeze({__proto__:null,ArcElement:class extends ss{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(i){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,t,e){let s=this.getProps(["x","y"],e),{angle:n,distance:o}=si(s,{x:i,y:t}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:g,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],e),b=(this.options.spacing+this.options.borderWidth)/2,w=q(x,l-a)>=v||N(n,a,l),k=ot(o,u+b,g+b);return w&&k}getCenterPoint(i){let{x:t,y:e,startAngle:s,endAngle:n,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:l,spacing:u}=this.options,g=(s+n)/2,x=(o+a+u+l)/2;return{x:t+Math.cos(g)*x,y:e+Math.sin(g)*x}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){let{options:t,circumference:e}=this,s=(t.offset||0)/4,n=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=e>v?Math.floor(e/v):0,e===0||this.innerRadius<0||this.outerRadius<0)return;i.save();let a=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(a)*s,Math.sin(a)*s);let l=s*(1-Math.sin(Math.min(y,e||0)));i.fillStyle=t.backgroundColor,i.strokeStyle=t.borderColor,function(u,g,x,b,w){let{fullCircles:k,startAngle:A,circumference:T}=g,R=g.endAngle;if(k){yn(u,g,x,b,R,w);for(let $=0;$<k;++$)u.fill();isNaN(T)||(R=A+(T%v||v))}yn(u,g,x,b,R,w),u.fill()}(i,this,l,n,o),Ul(i,this,l,n,o),i.restore()}},BarElement:class extends ss{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){let{inflateAmount:t,options:{borderColor:e,backgroundColor:s}}=this,{inner:n,outer:o}=Gl(this),a=(l=o.radius).topLeft||l.topRight||l.bottomLeft||l.bottomRight?xi:Ql;var l;i.save(),o.w===n.w&&o.h===n.h||(i.beginPath(),a(i,wo(o,t,n)),i.clip(),a(i,wo(n,-t,o)),i.fillStyle=e,i.fill("evenodd")),i.beginPath(),a(i,wo(n,t)),i.fillStyle=s,i.fill(),i.restore()}inRange(i,t,e){return vo(this,i,t,e)}inXRange(i,t){return vo(this,i,null,t)}inYRange(i,t){return vo(this,null,i,t)}getCenterPoint(i){let{x:t,y:e,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],i);return{x:n?(t+s)/2:t,y:n?e:(e+s)/2}}getRange(i){return i==="x"?this.width/2:this.height/2}},LineElement:xn,PointElement:class extends ss{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,t,e){let s=this.options,{x:n,y:o}=this.getProps(["x","y"],e);return Math.pow(i-n,2)+Math.pow(t-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(i,t){return Xr(this,i,"x",t)}inYRange(i,t){return Xr(this,i,"y",t)}getCenterPoint(i){let{x:t,y:e}=this.getProps(["x","y"],i);return{x:t,y:e}}size(i){let t=(i=i||this.options||{}).radius||0;return t=Math.max(t,t&&i.hoverRadius||0),2*(t+(t&&i.borderWidth||0))}draw(i,t){let e=this.options;this.skip||e.radius<.1||!Mt(this,t,this.size(e)/2)||(i.strokeStyle=e.borderColor,i.lineWidth=e.borderWidth,i.fillStyle=e.backgroundColor,gt(i,e,this.x,this.y))}getRange(){let i=this.options||{};return i.radius+i.hitRadius}}});function Kl(i,t,e,s){let n=i.indexOf(t);return n===-1?((o,a,l,u)=>(typeof a=="string"?(l=o.push(a)-1,u.unshift({index:l,label:a})):isNaN(a)&&(l=null),l))(i,t,e,s):n!==i.lastIndexOf(t)?e:n}function Qr(i){let t=this.getLabels();return i>=0&&i<t.length?t[i]:i}function Kr(i,t,{horizontal:e,minRotation:s}){let n=He(s),o=(e?Math.sin(n):Math.cos(n))||.001,a=.75*t*(""+i).length;return Math.min(t/o,a)}class vn extends ms{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return C(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds(),{min:n,max:o}=this,a=u=>n=e?n:u,l=u=>o=s?o:u;if(t){let u=Et(n),g=Et(o);u<0&&g<0?l(0):u>0&&g>0&&a(0)}if(n===o){let u=o===0?1:Math.abs(.05*o);l(o+u),t||a(n-u)}this.min=n,this.max=o}getTickLimit(){let t=this.options.ticks,e,{maxTicksLimit:s,stepSize:n}=t;return n?(e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),s=s||11),s&&(e=Math.min(s,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,s=this.getTickLimit();s=Math.max(2,s);let n=function(o,a){let l=[],{bounds:u,step:g,min:x,max:b,precision:w,count:k,maxTicks:A,maxDigits:T,includeBounds:R}=o,$=g||1,tt=A-1,{min:Z,max:Q}=a,ht=!C(x),mt=!C(b),Ct=!C(k),At=(Q-Z)/(T+1),$t,Ht,Xt,Vt,Nt=Le((Q-Z)/tt/$)*$;if(Nt<1e-14&&!ht&&!mt)return[{value:Z},{value:Q}];Vt=Math.ceil(Q/Nt)-Math.floor(Z/Nt),Vt>tt&&(Nt=Le(Vt*Nt/tt/$)*$),C(w)||($t=Math.pow(10,w),Nt=Math.ceil(Nt*$t)/$t),u==="ticks"?(Ht=Math.floor(Z/Nt)*Nt,Xt=Math.ceil(Q/Nt)*Nt):(Ht=Z,Xt=Q),ht&&mt&&g&&We((b-x)/g,Nt/1e3)?(Vt=Math.round(Math.min((b-x)/Nt,A)),Nt=(b-x)/Vt,Ht=x,Xt=b):Ct?(Ht=ht?x:Ht,Xt=mt?b:Xt,Vt=k-1,Nt=(Xt-Ht)/Vt):(Vt=(Xt-Ht)/Nt,Vt=te(Vt,Math.round(Vt),Nt/1e3)?Math.round(Vt):Math.ceil(Vt));let Wt=Math.max(Ne(Nt),Ne(Ht));$t=Math.pow(10,C(w)?Wt:w),Ht=Math.round(Ht*$t)/$t,Xt=Math.round(Xt*$t)/$t;let Ft=0;for(ht&&(R&&Ht!==x?(l.push({value:x}),Ht<x&&Ft++,te(Math.round((Ht+Ft*Nt)*$t)/$t,x,Kr(x,At,o))&&Ft++):Ht<x&&Ft++);Ft<Vt;++Ft){let ie=Math.round((Ht+Ft*Nt)*$t)/$t;if(mt&&ie>b)break;l.push({value:ie})}return mt&&R&&Xt!==b?l.length&&te(l[l.length-1].value,b,Kr(b,At,o))?l[l.length-1].value=b:l.push({value:b}):mt&&Xt!==b||l.push({value:Xt}),l}({maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},this._range||this);return t.bounds==="ticks"&&Ze(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){let t=this.ticks,e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){let n=(s-e)/Math.max(t.length-1,1)/2;e-=n,s+=n}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return ct(t,this.chart.options.locale,this.options.ticks.format)}}class Zl extends vn{static id="linear";static defaults={ticks:{callback:pt.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=W(t)?t:0,this.max=W(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,s=He(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}let Qs=i=>Math.floor(kt(i)),Ts=(i,t)=>Math.pow(10,Qs(i)+t);function Zr(i){return i/Math.pow(10,Qs(i))===1}function Jr(i,t,e){let s=Math.pow(10,e),n=Math.floor(i/s);return Math.ceil(t/s)-n}function Jl(i,{min:t,max:e}){t=at(i.min,t);let s=[],n=Qs(t),o=function(A,T){let R=Qs(T-A);for(;Jr(A,T,R)>10;)R++;for(;Jr(A,T,R)<10;)R--;return Math.min(R,Qs(A))}(t,e),a=o<0?Math.pow(10,Math.abs(o)):1,l=Math.pow(10,o),u=n>o?Math.pow(10,n):0,g=Math.round((t-u)*a)/a,x=Math.floor((t-u)/l/10)*l*10,b=Math.floor((g-x)/Math.pow(10,o)),w=at(i.min,Math.round((u+x+b*Math.pow(10,o))*a)/a);for(;w<e;)s.push({value:w,major:Zr(w),significand:b}),b>=10?b=b<15?15:20:b++,b>=20&&(o++,b=2,a=o>=0?1:a),w=Math.round((u+x+b*Math.pow(10,o))*a)/a;let k=at(i.max,w);return s.push({value:k,major:Zr(k),significand:b}),s}class th extends ms{static id="logarithmic";static defaults={ticks:{callback:pt.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let s=vn.prototype.parse.apply(this,[t,e]);if(s!==0)return W(s)&&s>0?s:null;this._zero=!0}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=W(t)?Math.max(0,t):null,this.max=W(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!W(this._userMin)&&(this.min=t===Ts(this.min,0)?Ts(this.min,-1):Ts(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),s=this.min,n=this.max,o=l=>s=t?s:l,a=l=>n=e?n:l;s===n&&(s<=0?(o(1),a(10)):(o(Ts(s,-1)),a(Ts(n,1)))),s<=0&&o(Ts(n,-1)),n<=0&&a(Ts(s,1)),this.min=s,this.max=n}buildTicks(){let t=this.options,e=Jl({min:this._userMin,max:this._userMax},this);return t.bounds==="ticks"&&Ze(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return t===void 0?"0":ct(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=kt(t),this._valueRange=kt(this.max)-kt(t)}getPixelForValue(t){return t!==void 0&&t!==0||(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(kt(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ko(i){let t=i.ticks;if(t.display&&i.display){let e=ai(t.backdropPadding);return q(t.font&&t.font.size,bt.font.size)+e.height}return 0}function ta(i,t,e,s,n){return i===s||i===n?{start:t-e/2,end:t+e/2}:i<s||i>n?{start:t-e,end:t}:{start:t,end:t+e}}function eh(i){let t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),s=[],n=[],o=i._pointLabels.length,a=i.options.pointLabels,l=a.centerPointLabels?y/o:0;for(let b=0;b<o;b++){let w=a.setContext(i.getPointLabelContext(b));n[b]=w.padding;let k=i.getPointPosition(b,i.drawingArea+n[b],l),A=qe(w.font),T=(u=i.ctx,g=A,x=H(x=i._pointLabels[b])?x:[x],{w:_(u,g.string,x),h:x.length*g.lineHeight});s[b]=T;let R=ve(i.getIndexAngle(b)+l),$=Math.round(Je(R));ih(e,t,R,ta($,k.x,T.w,0,180),ta($,k.y,T.h,90,270))}var u,g,x;i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=function(b,w,k){let A=[],T=b._pointLabels.length,R=b.options,{centerPointLabels:$,display:tt}=R.pointLabels,Z={extra:ko(R)/2,additionalAngle:$?y/T:0},Q;for(let ht=0;ht<T;ht++){Z.padding=k[ht],Z.size=w[ht];let mt=sh(b,ht,Z);A.push(mt),tt==="auto"&&(mt.visible=nh(mt,Q),mt.visible&&(Q=mt))}return A}(i,s,n)}function ih(i,t,e,s,n){let o=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e)),l=0,u=0;s.start<t.l?(l=(t.l-s.start)/o,i.l=Math.min(i.l,t.l-l)):s.end>t.r&&(l=(s.end-t.r)/o,i.r=Math.max(i.r,t.r+l)),n.start<t.t?(u=(t.t-n.start)/a,i.t=Math.min(i.t,t.t-u)):n.end>t.b&&(u=(n.end-t.b)/a,i.b=Math.max(i.b,t.b+u))}function sh(i,t,e){let s=i.drawingArea,{extra:n,additionalAngle:o,padding:a,size:l}=e,u=i.getPointPosition(t,s+n+a,o),g=Math.round(Je(ve(u.angle+nt))),x=function(k,A,T){return T===90||T===270?k-=A/2:(T>270||T<90)&&(k-=A),k}(u.y,l.h,g),b=function(k){return k===0||k===180?"center":k<180?"left":"right"}(g),w=function(k,A,T){return T==="right"?k-=A:T==="center"&&(k-=A/2),k}(u.x,l.w,b);return{visible:!0,x:u.x,y:x,textAlign:b,left:w,top:x,right:w+l.w,bottom:x+l.h}}function nh(i,t){if(!t)return!0;let{left:e,top:s,right:n,bottom:o}=i;return!(Mt({x:e,y:s},t)||Mt({x:e,y:o},t)||Mt({x:n,y:s},t)||Mt({x:n,y:o},t))}function oh(i,t,e){let{left:s,top:n,right:o,bottom:a}=e,{backdropColor:l}=t;if(!C(l)){let u=fs(t.borderRadius),g=ai(t.backdropPadding);i.fillStyle=l;let x=s-g.left,b=n-g.top,w=o-s+g.width,k=a-n+g.height;Object.values(u).some(A=>A!==0)?(i.beginPath(),xi(i,{x,y:b,w,h:k,radius:u}),i.fill()):i.fillRect(x,b,w,k)}}function ea(i,t,e,s){let{ctx:n}=i;if(e)n.arc(i.xCenter,i.yCenter,t,0,v);else{let o=i.getPointPosition(0,t);n.moveTo(o.x,o.y);for(let a=1;a<s;a++)o=i.getPointPosition(a,t),n.lineTo(o.x,o.y)}}class rh extends vn{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:pt.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=ai(ko(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=W(t)&&!isNaN(t)?t:0,this.max=W(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ko(this.options))}generateTickLabels(t){vn.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{let n=ft(this.options.pointLabels.callback,[e,s],this);return n||n===0?n:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){let t=this.options;t.display&&t.pointLabels.display?eh(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,n))}getIndexAngle(t){return ve(t*(v/(this._pointLabels.length||1))+He(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(C(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(C(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let s=e[t];return function(n,o,a){return as(n,{label:a,index:o,type:"pointLabel"})}(this.getContext(),t,s)}}getPointPosition(t,e,s=0){let n=this.getIndexAngle(t)-nt+s;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:s,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:s,right:n,bottom:o}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let s=this.ctx;s.save(),s.beginPath(),ea(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:s,grid:n,border:o}=e,a=this._pointLabels.length,l,u,g;if(e.pointLabels.display&&function(x,b){let{ctx:w,options:{pointLabels:k}}=x;for(let A=b-1;A>=0;A--){let T=x._pointLabelItems[A];if(!T.visible)continue;let R=k.setContext(x.getPointLabelContext(A));oh(w,R,T);let $=qe(R.font),{x:tt,y:Z,textAlign:Q}=T;Qe(w,x._pointLabels[A],tt,Z+$.lineHeight/2,$,{color:R.color,textAlign:Q,textBaseline:"middle"})}}(this,a),n.display&&this.ticks.forEach((x,b)=>{if(b!==0){u=this.getDistanceFromCenterForValue(x.value);let w=this.getContext(b),k=n.setContext(w),A=o.setContext(w);(function(T,R,$,tt,Z){let Q=T.ctx,ht=R.circular,{color:mt,lineWidth:Ct}=R;!ht&&!tt||!mt||!Ct||$<0||(Q.save(),Q.strokeStyle=mt,Q.lineWidth=Ct,Q.setLineDash(Z.dash),Q.lineDashOffset=Z.dashOffset,Q.beginPath(),ea(T,$,ht,tt),Q.closePath(),Q.stroke(),Q.restore())})(this,k,u,a,A)}}),s.display){for(t.save(),l=a-1;l>=0;l--){let x=s.setContext(this.getPointLabelContext(l)),{color:b,lineWidth:w}=x;w&&b&&(t.lineWidth=w,t.strokeStyle=b,t.setLineDash(x.borderDash),t.lineDashOffset=x.borderDashOffset,u=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),g=this.getPointPosition(l,u),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(g.x,g.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;let n=this.getIndexAngle(0),o,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,u)=>{if(u===0&&!e.reverse)return;let g=s.setContext(this.getContext(u)),x=qe(g.font);if(o=this.getDistanceFromCenterForValue(this.ticks[u].value),g.showLabelBackdrop){t.font=x.string,a=t.measureText(l.label).width,t.fillStyle=g.backdropColor;let b=ai(g.backdropPadding);t.fillRect(-a/2-b.left,-o-x.size/2-b.top,a+b.width,x.size+b.height)}Qe(t,l.label,0,-o,x,{color:g.color,strokeColor:g.textStrokeColor,strokeWidth:g.textStrokeWidth})}),t.restore()}drawTitle(){}}let wn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Si=Object.keys(wn);function ia(i,t){return i-t}function sa(i,t){if(C(t))return null;let e=i._adapter,{parser:s,round:n,isoWeekday:o}=i._parseOpts,a=t;return typeof s=="function"&&(a=s(a)),W(a)||(a=typeof s=="string"?e.parse(a,s):e.parse(a)),a===null?null:(n&&(a=n!=="week"||!Re(o)&&o!==!0?e.startOf(a,n):e.startOf(a,"isoWeek",o)),+a)}function na(i,t,e,s){let n=Si.length;for(let o=Si.indexOf(i);o<n-1;++o){let a=wn[Si[o]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(l*a.size))<=s)return Si[o]}return Si[n-1]}function oa(i,t,e){if(e){if(e.length){let{lo:s,hi:n}=ut(e,t);i[e[s]>=t?e[s]:e[n]]=!0}}else i[t]=!0}function ra(i,t,e){let s=[],n={},o=t.length,a,l;for(a=0;a<o;++a)l=t[a],n[l]=a,s.push({value:l,major:!1});return o!==0&&e?function(u,g,x,b){let w=u._adapter,k=+w.startOf(g[0].value,b),A=g[g.length-1].value,T,R;for(T=k;T<=A;T=+w.add(T,1,b))R=x[T],R>=0&&(g[R].major=!0);return g}(i,s,n,e):s}class Mo extends ms{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){let s=t.time||(t.time={}),n=this._adapter=new $r._date(t.adapters.date);n.init(e),_e(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:sa(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,e=this._adapter,s=t.time.unit||"day",{min:n,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function u(g){a||isNaN(g.min)||(n=Math.min(n,g.min)),l||isNaN(g.max)||(o=Math.max(o,g.max))}a&&l||(u(this._getLabelBounds()),t.bounds==="ticks"&&t.ticks.source==="labels"||u(this.getMinMax(!1))),n=W(n)&&!isNaN(n)?n:+e.startOf(Date.now(),s),o=W(o)&&!isNaN(o)?o:+e.endOf(Date.now(),s)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){let t=this.options,e=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);let o=this.min,a=Pt(n,o,this.max);return this._unit=e.unit||(s.autoSkip?na(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):function(l,u,g,x,b){for(let w=Si.length-1;w>=Si.indexOf(g);w--){let k=Si[w];if(wn[k].common&&l._adapter.diff(b,x,k)>=u-1)return k}return Si[g?Si.indexOf(g):0]}(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&this._unit!=="year"?function(l){for(let u=Si.indexOf(l)+1,g=Si.length;u<g;++u)if(wn[Si[u]].common)return Si[u]}(this._unit):void 0,this.initOffsets(n),t.reverse&&a.reverse(),ra(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,s,n=0,o=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),n=t.length===1?1-e:(this.getDecimalForValue(t[1])-e)/2,s=this.getDecimalForValue(t[t.length-1]),o=t.length===1?s:(s-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;n=J(n,0,a),o=J(o,0,a),this._offsets={start:n,end:o,factor:1/(n+1+o)}}_generate(){let t=this._adapter,e=this.min,s=this.max,n=this.options,o=n.time,a=o.unit||na(o.minUnit,e,s,this._getLabelCapacity(e)),l=q(n.ticks.stepSize,1),u=a==="week"&&o.isoWeekday,g=Re(u)||u===!0,x={},b,w,k=e;if(g&&(k=+t.startOf(k,"isoWeek",u)),k=+t.startOf(k,g?"day":a),t.diff(s,e,a)>1e5*l)throw new Error(e+" and "+s+" are too far apart with stepSize of "+l+" "+a);let A=n.ticks.source==="data"&&this.getDataTimestamps();for(b=k,w=0;b<s;b=+t.add(b,l,a),w++)oa(x,b,A);return b!==s&&n.bounds!=="ticks"&&w!==1||oa(x,b,A),Object.keys(x).sort(ia).map(T=>+T)}getLabelForValue(t){let e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){let s=this.options.time.displayFormats,n=this._unit,o=e||s[n];return this._adapter.format(t,o)}_tickFormatFunction(t,e,s,n){let o=this.options,a=o.ticks.callback;if(a)return ft(a,[t,e,s],this);let l=o.time.displayFormats,u=this._unit,g=this._majorUnit,x=u&&l[u],b=g&&l[g],w=s[e],k=g&&b&&w&&w.major;return this._adapter.format(t,n||(k?b:x))}generateTickLabels(t){let e,s,n;for(e=0,s=t.length;e<s;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){let e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){let e=this.options.ticks,s=this.ctx.measureText(t).width,n=He(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(n),a=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:s*o+l*a,h:s*a+l*o}}_getLabelCapacity(t){let e=this.options.time,s=e.displayFormats,n=s[e.unit]||s.millisecond,o=this._tickFormatFunction(t,0,ra(this,[t],this._majorUnit),n),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t,e,s=this._cache.data||[];if(s.length)return s;let n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,e=n.length;t<e;++t)s=s.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){let t=this._cache.labels||[],e,s;if(t.length)return t;let n=this.getLabels();for(e=0,s=n.length;e<s;++e)t.push(sa(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ce(t.sort(ia))}}function _n(i,t,e){let s,n,o,a,l=0,u=i.length-1;e?(t>=i[l].pos&&t<=i[u].pos&&({lo:l,hi:u}=dt(i,"pos",t)),{pos:s,time:o}=i[l],{pos:n,time:a}=i[u]):(t>=i[l].time&&t<=i[u].time&&({lo:l,hi:u}=dt(i,"time",t)),{time:s,pos:o}=i[l],{time:n,pos:a}=i[u]);let g=n-s;return g?o+(a-o)*(t-s)/g:o}var aa=Object.freeze({__proto__:null,CategoryScale:class extends ms{static id="category";static defaults={ticks:{callback:Qr}};constructor(i){super(i),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(i){let t=this._addedLabels;if(t.length){let e=this.getLabels();for(let{index:s,label:n}of t)e[s]===n&&e.splice(s,1);this._addedLabels=[]}super.init(i)}parse(i,t){if(C(i))return null;let e=this.getLabels();return((s,n)=>s===null?null:J(Math.round(s),0,n))(t=isFinite(t)&&e[t]===i?t:Kl(e,i,q(t,i),this._addedLabels),e.length-1)}determineDataLimits(){let{minDefined:i,maxDefined:t}=this.getUserBounds(),{min:e,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(i||(e=0),t||(s=this.getLabels().length-1)),this.min=e,this.max=s}buildTicks(){let i=this.min,t=this.max,e=this.options.offset,s=[],n=this.getLabels();n=i===0&&t===n.length-1?n:n.slice(i,t+1),this._valueRange=Math.max(n.length-(e?0:1),1),this._startValue=this.min-(e?.5:0);for(let o=i;o<=t;o++)s.push({value:o});return s}getLabelForValue(i){return Qr.call(this,i)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(i){return typeof i!="number"&&(i=this.parse(i)),i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getPixelForTick(i){let t=this.ticks;return i<0||i>t.length-1?null:this.getPixelForValue(t[i].value)}getValueForPixel(i){return Math.round(this._startValue+this.getDecimalForPixel(i)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:Zl,LogarithmicScale:th,RadialLinearScale:rh,TimeScale:Mo,TimeSeriesScale:class extends Mo{static id="timeseries";static defaults=Mo.defaults;constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let i=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(i);this._minPos=_n(t,this.min),this._tableRange=_n(t,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){let{min:t,max:e}=this,s=[],n=[],o,a,l,u,g;for(o=0,a=i.length;o<a;++o)u=i[o],u>=t&&u<=e&&s.push(u);if(s.length<2)return[{time:t,pos:0},{time:e,pos:1}];for(o=0,a=s.length;o<a;++o)g=s[o+1],l=s[o-1],u=s[o],Math.round((g+l)/2)!==u&&n.push({time:u,pos:o/(a-1)});return n}_generate(){let i=this.min,t=this.max,e=super.getDataTimestamps();return e.includes(i)&&e.length||e.splice(0,0,i),e.includes(t)&&e.length!==1||e.push(t),e.sort((s,n)=>s-n)}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;let t=this.getDataTimestamps(),e=this.getLabelTimestamps();return i=t.length&&e.length?this.normalize(t.concat(e)):t.length?t:e,i=this._cache.all=i,i}getDecimalForValue(i){return(_n(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){let t=this._offsets,e=this.getDecimalForPixel(i)/t.factor-t.end;return _n(this._table,e*this._tableRange+this._minPos,!0)}}});let So=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],la=So.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function ha(i){return So[i%So.length]}function ca(i){return la[i%la.length]}function ah(i){let t=0;return(e,s)=>{let n=i.getDatasetMeta(s).controller;n instanceof yo?t=function(o,a){return o.backgroundColor=o.data.map(()=>ha(a++)),a}(e,t):n instanceof jr?t=function(o,a){return o.backgroundColor=o.data.map(()=>ca(a++)),a}(e,t):n&&(t=function(o,a){return o.borderColor=ha(a),o.backgroundColor=ca(a),++a}(e,t))}}function da(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}var lh={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;let{data:{datasets:s},options:n}=i.config,{elements:o}=n;if(!e.forceOverride&&(da(s)||(a=n)&&(a.borderColor||a.backgroundColor)||o&&da(o)))return;var a;let l=ah(i);s.forEach(l)}};function ua(i){if(i._decimated){let t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function ga(i){i.data.datasets.forEach(t=>{ua(t)})}var hh={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled)return void ga(i);let s=i.width;i.data.datasets.forEach((n,o)=>{let{_data:a,indexAxis:l}=n,u=i.getDatasetMeta(o),g=a||n.data;if(Is([l,i.options.indexAxis])==="y"||!u.controller.supportsDecimation)return;let x=i.scales[u.xAxisID];if(x.type!=="linear"&&x.type!=="time"||i.options.parsing)return;let{start:b,count:w}=function(A,T){let R=T.length,$,tt=0,{iScale:Z}=A,{min:Q,max:ht,minDefined:mt,maxDefined:Ct}=Z.getUserBounds();return mt&&(tt=J(dt(T,Z.axis,Q).lo,0,R-1)),$=Ct?J(dt(T,Z.axis,ht).hi+1,tt,R)-tt:R-tt,{start:tt,count:$}}(u,g);if(w<=(e.threshold||4*s))return void ua(n);let k;switch(C(a)&&(n._data=g,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(A){this._data=A}})),e.algorithm){case"lttb":k=function(A,T,R,$,tt){let Z=tt.samples||$;if(Z>=R)return A.slice(T,T+R);let Q=[],ht=(R-2)/(Z-2),mt=0,Ct=T+R-1,At,$t,Ht,Xt,Vt,Nt=T;for(Q[mt++]=A[Nt],At=0;At<Z-2;At++){let Wt,Ft=0,ie=0,Se=Math.floor((At+1)*ht)+1+T,ye=Math.min(Math.floor((At+2)*ht)+1,R)+T,hi=ye-Se;for(Wt=Se;Wt<ye;Wt++)Ft+=A[Wt].x,ie+=A[Wt].y;Ft/=hi,ie/=hi;let zi=Math.floor(At*ht)+1+T,Li=Math.min(Math.floor((At+1)*ht)+1,R)+T,{x:Wi,y:qi}=A[Nt];for(Ht=Xt=-1,Wt=zi;Wt<Li;Wt++)Xt=.5*Math.abs((Wi-Ft)*(A[Wt].y-qi)-(Wi-A[Wt].x)*(ie-qi)),Xt>Ht&&(Ht=Xt,$t=A[Wt],Vt=Wt);Q[mt++]=$t,Nt=Vt}return Q[mt++]=A[Ct],Q}(g,b,w,s,e);break;case"min-max":k=function(A,T,R,$){let tt,Z,Q,ht,mt,Ct,At,$t,Ht,Xt,Vt=0,Nt=0,Wt=[],Ft=T+R-1,ie=A[T].x,Se=A[Ft].x-ie;for(tt=T;tt<T+R;++tt){Z=A[tt],Q=(Z.x-ie)/Se*$,ht=Z.y;let ye=0|Q;if(ye===mt)ht<Ht?(Ht=ht,Ct=tt):ht>Xt&&(Xt=ht,At=tt),Vt=(Nt*Vt+Z.x)/++Nt;else{let hi=tt-1;if(!C(Ct)&&!C(At)){let zi=Math.min(Ct,At),Li=Math.max(Ct,At);zi!==$t&&zi!==hi&&Wt.push({...A[zi],x:Vt}),Li!==$t&&Li!==hi&&Wt.push({...A[Li],x:Vt})}tt>0&&hi!==$t&&Wt.push(A[hi]),Wt.push(Z),mt=ye,Nt=0,Ht=Xt=ht,Ct=At=$t=tt}}return Wt}(g,b,w,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}n._decimated=k})},destroy(i){ga(i)}};function Co(i,t,e,s){if(s)return;let n=t[i],o=e[i];return i==="angle"&&(n=ve(n),o=ve(o)),{property:i,start:n,end:o}}function To(i,t,e){for(;t>i;t--){let s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function pa(i,t,e,s){return i&&t?s(i[e],t[e]):i?i[e]:t?t[e]:0}function fa(i,t){let e=[],s=!1;return H(i)?(s=!0,e=i):e=function(n,o){let{x:a=null,y:l=null}=n||{},u=o.points,g=[];return o.segments.forEach(({start:x,end:b})=>{b=To(x,b,u);let w=u[x],k=u[b];l!==null?(g.push({x:w.x,y:l}),g.push({x:k.x,y:l})):a!==null&&(g.push({x:a,y:w.y}),g.push({x:a,y:k.y}))}),g}(i,t),e.length?new xn({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function ma(i){return i&&i.fill!==!1}function ch(i,t,e){let s=i[t].fill,n=[t],o;if(!e)return s;for(;s!==!1&&n.indexOf(s)===-1;){if(!W(s))return s;if(o=i[s],!o)return!1;if(o.visible)return s;n.push(s),s=o.fill}return!1}function dh(i,t,e){let s=function(o){let a=o.options,l=a.fill,u=q(l&&l.target,l);return u===void 0&&(u=!!a.backgroundColor),u===!1||u===null?!1:u===!0?"origin":u}(i);if(X(s))return!isNaN(s.value)&&s;let n=parseFloat(s);return W(n)&&Math.floor(n)===n?function(o,a,l,u){return o!=="-"&&o!=="+"||(l=a+l),l===a||l<0||l>=u?!1:l}(s[0],t,n,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function uh(i,t,e){let s=[];for(let n=0;n<e.length;n++){let o=e[n],{first:a,last:l,point:u}=gh(o,t,"x");if(!(!u||a&&l)){if(a)s.unshift(u);else if(i.push(u),!l)break}}i.push(...s)}function gh(i,t,e){let s=i.interpolate(t,e);if(!s)return{};let n=s[e],o=i.segments,a=i.points,l=!1,u=!1;for(let g=0;g<o.length;g++){let x=o[g],b=a[x.start][e],w=a[x.end][e];if(ot(n,b,w)){l=n===b,u=n===w;break}}return{first:l,last:u,point:s}}class ba{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){let{x:n,y:o,radius:a}=this;return e=e||{start:0,end:v},t.arc(n,o,a,e.end,e.start,!0),!s.bounds}interpolate(t){let{x:e,y:s,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:s+Math.sin(o)*n,angle:o}}}function ph(i){let{chart:t,fill:e,line:s}=i;if(W(e))return function(o,a){let l=o.getDatasetMeta(a);return l&&o.isDatasetVisible(a)?l.dataset:null}(t,e);if(e==="stack")return function(o){let{scale:a,index:l,line:u}=o,g=[],x=u.segments,b=u.points,w=function(k,A){let T=[],R=k.getMatchingVisibleMetas("line");for(let $=0;$<R.length;$++){let tt=R[$];if(tt.index===A)break;tt.hidden||T.unshift(tt.dataset)}return T}(a,l);w.push(fa({x:null,y:a.bottom},u));for(let k=0;k<x.length;k++){let A=x[k];for(let T=A.start;T<=A.end;T++)uh(g,b[T],w)}return new xn({points:g,options:{}})}(i);if(e==="shape")return!0;let n=function(o){return(o.scale||{}).getPointPositionForValue?function(l){let{scale:u,fill:g}=l,x=u.options,b=u.getLabels().length,w=x.reverse?u.max:u.min,k=function(T,R,$){let tt;return tt=T==="start"?$:T==="end"?R.options.reverse?R.min:R.max:X(T)?T.value:R.getBaseValue(),tt}(g,u,w),A=[];if(x.grid.circular){let T=u.getPointPositionForValue(0,w);return new ba({x:T.x,y:T.y,radius:u.getDistanceFromCenterForValue(k)})}for(let T=0;T<b;++T)A.push(u.getPointPositionForValue(T,k));return A}(o):function(l){let{scale:u={},fill:g}=l,x=function(b,w){let k=null;return b==="start"?k=w.bottom:b==="end"?k=w.top:X(b)?k=w.getPixelForValue(b.value):w.getBasePixel&&(k=w.getBasePixel()),k}(g,u);if(W(x)){let b=u.isHorizontal();return{x:b?x:null,y:b?null:x}}return null}(o)}(i);return n instanceof ba?n:fa(n,s)}function Eo(i,t,e){let s=ph(t),{line:n,scale:o,axis:a}=t,l=n.options,u=l.fill,g=l.backgroundColor,{above:x=g,below:b=g}=u||{};s&&n.points.length&&(qt(i,e),function(w,k){let{line:A,target:T,above:R,below:$,area:tt,scale:Z}=k,Q=A._loop?"angle":k.axis;w.save(),Q==="x"&&$!==R&&(ya(w,T,tt.top),xa(w,{line:A,target:T,color:R,scale:Z,property:Q}),w.restore(),w.save(),ya(w,T,tt.bottom)),xa(w,{line:A,target:T,color:$,scale:Z,property:Q}),w.restore()}(i,{line:n,target:s,above:x,below:b,area:e,scale:o,axis:a}),Gt(i))}function ya(i,t,e){let{segments:s,points:n}=t,o=!0,a=!1;i.beginPath();for(let l of s){let{start:u,end:g}=l,x=n[u],b=n[To(u,g,n)];o?(i.moveTo(x.x,x.y),o=!1):(i.lineTo(x.x,e),i.lineTo(x.x,x.y)),a=!!t.pathSegment(i,l,{move:a}),a?i.closePath():i.lineTo(b.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function xa(i,t){let{line:e,target:s,property:n,color:o,scale:a}=t,l=function(u,g,x){let b=u.segments,w=u.points,k=g.points,A=[];for(let T of b){let{start:R,end:$}=T;$=To(R,$,w);let tt=Co(x,w[R],w[$],T.loop);if(!g.segments){A.push({source:T,target:tt,start:w[R],end:w[$]});continue}let Z=oo(g,tt);for(let Q of Z){let ht=Co(x,k[Q.start],k[Q.end],Q.loop),mt=no(T,w,ht);for(let Ct of mt)A.push({source:Ct,target:Q,start:{[x]:pa(tt,ht,"start",Math.max)},end:{[x]:pa(tt,ht,"end",Math.min)}})}}return A}(e,s,n);for(let{source:u,target:g,start:x,end:b}of l){let{style:{backgroundColor:w=o}={}}=u,k=s!==!0;i.save(),i.fillStyle=w,fh(i,a,k&&Co(n,x,b)),i.beginPath();let A=!!e.pathSegment(i,u),T;if(k){A?i.closePath():va(i,s,b,n);let R=!!s.pathSegment(i,g,{move:A,reverse:!0});T=A&&R,T||va(i,s,x,n)}i.closePath(),i.fill(T?"evenodd":"nonzero"),i.restore()}}function fh(i,t,e){let{top:s,bottom:n}=t.chart.chartArea,{property:o,start:a,end:l}=e||{};o==="x"&&(i.beginPath(),i.rect(a,s,l-a,n-s),i.clip())}function va(i,t,e,s){let n=t.interpolate(e,s);n&&i.lineTo(n.x,n.y)}var mh={id:"filler",afterDatasetsUpdate(i,t,e){let s=(i.data.datasets||[]).length,n=[],o,a,l,u;for(a=0;a<s;++a)o=i.getDatasetMeta(a),l=o.dataset,u=null,l&&l.options&&l instanceof xn&&(u={visible:i.isDatasetVisible(a),index:a,fill:dh(l,a,s),chart:i,axis:o.controller.options.indexAxis,scale:o.vScale,line:l}),o.$filler=u,n.push(u);for(a=0;a<s;++a)u=n[a],u&&u.fill!==!1&&(u.fill=ch(n,a,e.propagate))},beforeDraw(i,t,e){let s=e.drawTime==="beforeDraw",n=i.getSortedVisibleDatasetMetas(),o=i.chartArea;for(let a=n.length-1;a>=0;--a){let l=n[a].$filler;l&&(l.line.updateControlPoints(o,l.axis),s&&l.fill&&Eo(i.ctx,l,o))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let s=i.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){let o=s[n].$filler;ma(o)&&Eo(i.ctx,o,i.chartArea)}},beforeDatasetDraw(i,t,e){let s=t.meta.$filler;ma(s)&&e.drawTime==="beforeDatasetDraw"&&Eo(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};let wa=(i,t)=>{let{boxHeight:e=t,boxWidth:s=t}=i;return i.usePointStyle&&(e=Math.min(e,t),s=i.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}};class _a extends ss{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=ft(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);let s=t.labels,n=qe(s.font),o=n.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=wa(s,o),g,x;e.font=n.string,this.isHorizontal()?(g=this.maxWidth,x=this._fitRows(a,o,l,u)+10):(x=this.maxHeight,g=this._fitCols(a,n,l,u)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(x,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,n){let{ctx:o,maxWidth:a,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],g=this.lineWidths=[0],x=n+l,b=t;o.textAlign="left",o.textBaseline="middle";let w=-1,k=-x;return this.legendItems.forEach((A,T)=>{let R=s+e/2+o.measureText(A.text).width;(T===0||g[g.length-1]+R+2*l>a)&&(b+=x,g[g.length-(T>0?0:1)]=0,k+=x,w++),u[T]={left:0,top:k,row:w,width:R,height:n},g[g.length-1]+=R+l}),b}_fitCols(t,e,s,n){let{ctx:o,maxHeight:a,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],g=this.columnSizes=[],x=a-t,b=l,w=0,k=0,A=0,T=0;return this.legendItems.forEach((R,$)=>{let{itemWidth:tt,itemHeight:Z}=function(Q,ht,mt,Ct,At){let $t=function(Xt,Vt,Nt,Wt){let Ft=Xt.text;return Ft&&typeof Ft!="string"&&(Ft=Ft.reduce((ie,Se)=>ie.length>Se.length?ie:Se)),Vt+Nt.size/2+Wt.measureText(Ft).width}(Ct,Q,ht,mt),Ht=function(Xt,Vt,Nt){let Wt=Xt;return typeof Vt.text!="string"&&(Wt=ka(Vt,Nt)),Wt}(At,Ct,ht.lineHeight);return{itemWidth:$t,itemHeight:Ht}}(s,e,o,R,n);$>0&&k+Z+2*l>x&&(b+=w+l,g.push({width:w,height:k}),A+=w+l,T++,w=k=0),u[$]={left:A,top:k,col:T,width:tt,height:Z},w=Math.max(w,tt),k+=Z+l}),b+=w,g.push({width:w,height:k}),b}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:n},rtl:o}}=this,a=Ss(o,this.left,this.width);if(this.isHorizontal()){let l=0,u=Te(s,this.left+n,this.right-this.lineWidths[l]);for(let g of e)l!==g.row&&(l=g.row,u=Te(s,this.left+n,this.right-this.lineWidths[l])),g.top+=this.top+t+n,g.left=a.leftForLtr(a.x(u),g.width),u+=g.width+n}else{let l=0,u=Te(s,this.top+t+n,this.bottom-this.columnSizes[l].height);for(let g of e)g.col!==l&&(l=g.col,u=Te(s,this.top+t+n,this.bottom-this.columnSizes[l].height)),g.top=u,g.left+=this.left+n,g.left=a.leftForLtr(a.x(g.left),g.width),u+=g.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;qt(t,this),this._draw(),Gt(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:s,ctx:n}=this,{align:o,labels:a}=t,l=bt.color,u=Ss(t.rtl,this.left,this.width),g=qe(a.font),{padding:x}=a,b=g.size,w=b/2,k;this.drawTitle(),n.textAlign=u.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=g.string;let{boxWidth:A,boxHeight:T,itemHeight:R}=wa(a,b),$=this.isHorizontal(),tt=this._computeTitleHeight();k=$?{x:Te(o,this.left+x,this.right-s[0]),y:this.top+x+tt,line:0}:{x:this.left+x,y:Te(o,this.top+tt+x,this.bottom-e[0].height),line:0},io(this.ctx,t.textDirection);let Z=R+x;this.legendItems.forEach((Q,ht)=>{n.strokeStyle=Q.fontColor,n.fillStyle=Q.fontColor;let mt=n.measureText(Q.text).width,Ct=u.textAlign(Q.textAlign||(Q.textAlign=a.textAlign)),At=A+w+mt,$t=k.x,Ht=k.y;if(u.setWidth(this.width),$?ht>0&&$t+At+x>this.right&&(Ht=k.y+=Z,k.line++,$t=k.x=Te(o,this.left+x,this.right-s[k.line])):ht>0&&Ht+Z>this.bottom&&($t=k.x=$t+e[k.line].width+x,k.line++,Ht=k.y=Te(o,this.top+tt+x,this.bottom-e[k.line].height)),function(Xt,Vt,Nt){if(isNaN(A)||A<=0||isNaN(T)||T<0)return;n.save();let Wt=q(Nt.lineWidth,1);if(n.fillStyle=q(Nt.fillStyle,l),n.lineCap=q(Nt.lineCap,"butt"),n.lineDashOffset=q(Nt.lineDashOffset,0),n.lineJoin=q(Nt.lineJoin,"miter"),n.lineWidth=Wt,n.strokeStyle=q(Nt.strokeStyle,l),n.setLineDash(q(Nt.lineDash,[])),a.usePointStyle){let Ft={radius:T*Math.SQRT2/2,pointStyle:Nt.pointStyle,rotation:Nt.rotation,borderWidth:Wt},ie=u.xPlus(Xt,A/2);wt(n,Ft,ie,Vt+w,a.pointStyleWidth&&A)}else{let Ft=Vt+Math.max((b-T)/2,0),ie=u.leftForLtr(Xt,A),Se=fs(Nt.borderRadius);n.beginPath(),Object.values(Se).some(ye=>ye!==0)?xi(n,{x:ie,y:Ft,w:A,h:T,radius:Se}):n.rect(ie,Ft,A,T),n.fill(),Wt!==0&&n.stroke()}n.restore()}(u.x($t),Ht,Q),$t=rs(Ct,$t+A+w,$?$t+At:this.right,t.rtl),function(Xt,Vt,Nt){Qe(n,Nt.text,Xt,Vt+R/2,g,{strikethrough:Nt.hidden,textAlign:u.textAlign(Nt.textAlign)})}(u.x($t),Ht,Q),$)k.x+=At+x;else if(typeof Q.text!="string"){let Xt=g.lineHeight;k.y+=ka(Q,Xt)+x}else k.y+=Z}),so(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,s=qe(e.font),n=ai(e.padding);if(!e.display)return;let o=Ss(t.rtl,this.left,this.width),a=this.ctx,l=e.position,u=s.size/2,g=n.top+u,x,b=this.left,w=this.width;if(this.isHorizontal())w=Math.max(...this.lineWidths),x=this.top+g,b=Te(t.align,b,this.right-w);else{let A=this.columnSizes.reduce((T,R)=>Math.max(T,R.height),0);x=g+Te(t.align,this.top,this.bottom-A-t.labels.padding-this._computeTitleHeight())}let k=Te(l,b,b+w);a.textAlign=o.textAlign(xe(l)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=s.string,Qe(a,e.text,k,x,s)}_computeTitleHeight(){let t=this.options.title,e=qe(t.font),s=ai(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,n,o;if(ot(t,this.left,this.right)&&ot(e,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(n=o[s],ot(t,n.left,n.left+n.width)&&ot(e,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){let e=this.options;if(!function(a,l){return!!((a==="mousemove"||a==="mouseout")&&(l.onHover||l.onLeave)||l.onClick&&(a==="click"||a==="mouseup"))}(t.type,e))return;let s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let a=this._hoveredItem,l=(o=s,(n=a)!==null&&o!==null&&n.datasetIndex===o.datasetIndex&&n.index===o.index);a&&!l&&ft(e.onLeave,[t,a,this],this),this._hoveredItem=s,s&&!l&&ft(e.onHover,[t,s,this],this)}else s&&ft(e.onClick,[t,s,this],this);var n,o}}function ka(i,t){return t*(i.text?i.text.length:0)}var bh={id:"legend",_element:_a,start(i,t,e){let s=i.legend=new _a({ctx:i.ctx,options:e,chart:i});li.configure(i,s,e),li.addBox(i,s)},stop(i){li.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){let s=i.legend;li.configure(i,s,e),s.options=e},afterUpdate(i){let t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){let s=t.datasetIndex,n=e.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){let t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:n,color:o,useBorderRadius:a,borderRadius:l}}=i.legend.options;return i._getSortedDatasetMetas().map(u=>{let g=u.controller.getStyle(e?0:void 0),x=ai(g.borderWidth);return{text:t[u.index].label,fillStyle:g.backgroundColor,fontColor:o,hidden:!u.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:g.borderColor,pointStyle:s||g.pointStyle,rotation:g.rotation,textAlign:n||g.textAlign,borderRadius:a&&(l||g.borderRadius),datasetIndex:u.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Do extends ss{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let s=this.options;if(this.left=0,this.top=0,!s.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;let n=H(s.text)?s.text.length:1;this._padding=ai(s.padding);let o=n*qe(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:s,bottom:n,right:o,options:a}=this,l=a.align,u,g,x,b=0;return this.isHorizontal()?(g=Te(l,s,o),x=e+t,u=o-s):(a.position==="left"?(g=s+t,x=Te(l,n,e),b=-.5*y):(g=o-t,x=Te(l,e,n),b=.5*y),u=n-e),{titleX:g,titleY:x,maxWidth:u,rotation:b}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let s=qe(e.font),n=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(n);Qe(t,e.text,0,0,s,{color:e.color,maxWidth:l,rotation:u,textAlign:xe(e.align),textBaseline:"middle",translation:[o,a]})}}var yh={id:"title",_element:Do,start(i,t,e){(function(s,n){let o=new Do({ctx:s.ctx,options:n,chart:s});li.configure(s,o,n),li.addBox(s,o),s.titleBlock=o})(i,e)},stop(i){let t=i.titleBlock;li.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){let s=i.titleBlock;li.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};let kn=new WeakMap;var xh={id:"subtitle",start(i,t,e){let s=new Do({ctx:i.ctx,options:e,chart:i});li.configure(i,s,e),li.addBox(i,s),kn.set(i,s)},stop(i){li.removeBox(i,kn.get(i)),kn.delete(i)},beforeUpdate(i,t,e){let s=kn.get(i);li.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};let Ks={average(i){if(!i.length)return!1;let t,e,s=0,n=0,o=0;for(t=0,e=i.length;t<e;++t){let a=i[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();s+=l.x,n+=l.y,++o}}return{x:s/o,y:n/o}},nearest(i,t){if(!i.length)return!1;let e,s,n,o=t.x,a=t.y,l=Number.POSITIVE_INFINITY;for(e=0,s=i.length;e<s;++e){let u=i[e].element;if(u&&u.hasValue()){let g=wi(t,u.getCenterPoint());g<l&&(l=g,n=u)}}if(n){let u=n.tooltipPosition();o=u.x,a=u.y}return{x:o,y:a}}};function ns(i,t){return t&&(H(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function hs(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function vh(i,t){let{element:e,datasetIndex:s,index:n}=t,o=i.getDatasetMeta(s).controller,{label:a,value:l}=o.getLabelAndValue(n);return{chart:i,label:a,parsed:o.getParsed(n),raw:i.data.datasets[s].data[n],formattedValue:l,dataset:o.getDataset(),dataIndex:n,datasetIndex:s,element:e}}function Ma(i,t){let e=i.chart.ctx,{body:s,footer:n,title:o}=i,{boxWidth:a,boxHeight:l}=t,u=qe(t.bodyFont),g=qe(t.titleFont),x=qe(t.footerFont),b=o.length,w=n.length,k=s.length,A=ai(t.padding),T=A.height,R=0,$=s.reduce((Q,ht)=>Q+ht.before.length+ht.lines.length+ht.after.length,0);$+=i.beforeBody.length+i.afterBody.length,b&&(T+=b*g.lineHeight+(b-1)*t.titleSpacing+t.titleMarginBottom),$&&(T+=k*(t.displayColors?Math.max(l,u.lineHeight):u.lineHeight)+($-k)*u.lineHeight+($-1)*t.bodySpacing),w&&(T+=t.footerMarginTop+w*x.lineHeight+(w-1)*t.footerSpacing);let tt=0,Z=function(Q){R=Math.max(R,e.measureText(Q).width+tt)};return e.save(),e.font=g.string,xt(i.title,Z),e.font=u.string,xt(i.beforeBody.concat(i.afterBody),Z),tt=t.displayColors?a+2+t.boxPadding:0,xt(s,Q=>{xt(Q.before,Z),xt(Q.lines,Z),xt(Q.after,Z)}),tt=0,e.font=x.string,xt(i.footer,Z),e.restore(),R+=A.width,{width:R,height:T}}function wh(i,t,e,s){let{x:n,width:o}=e,{width:a,chartArea:{left:l,right:u}}=i,g="center";return s==="center"?g=n<=(l+u)/2?"left":"right":n<=o/2?g="left":n>=a-o/2&&(g="right"),function(x,b,w,k){let{x:A,width:T}=k,R=w.caretSize+w.caretPadding;return x==="left"&&A+T+R>b.width||x==="right"&&A-T-R<0||void 0}(g,i,t,e)&&(g="center"),g}function Sa(i,t,e){let s=e.yAlign||t.yAlign||function(n,o){let{y:a,height:l}=o;return a<l/2?"top":a>n.height-l/2?"bottom":"center"}(i,e);return{xAlign:e.xAlign||t.xAlign||wh(i,t,e,s),yAlign:s}}function Ca(i,t,e,s){let{caretSize:n,caretPadding:o,cornerRadius:a}=i,{xAlign:l,yAlign:u}=e,g=n+o,{topLeft:x,topRight:b,bottomLeft:w,bottomRight:k}=fs(a),A=function(R,$){let{x:tt,width:Z}=R;return $==="right"?tt-=Z:$==="center"&&(tt-=Z/2),tt}(t,l),T=function(R,$,tt){let{y:Z,height:Q}=R;return $==="top"?Z+=tt:Z-=$==="bottom"?Q+tt:Q/2,Z}(t,u,g);return u==="center"?l==="left"?A+=g:l==="right"&&(A-=g):l==="left"?A-=Math.max(x,w)+n:l==="right"&&(A+=Math.max(b,k)+n),{x:J(A,0,s.width-t.width),y:J(T,0,s.height-t.height)}}function Mn(i,t,e){let s=ai(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-s.right:i.x+s.left}function Ta(i){return ns([],hs(i))}function Ea(i,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}let Da={beforeTitle:d,title(i){if(i.length>0){let t=i[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:d,beforeBody:d,beforeLabel:d,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");let e=i.formattedValue;return C(e)||(t+=e),t},labelColor(i){let t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){let t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:d,afterBody:d,beforeFooter:d,footer:d,afterFooter:d};function Ci(i,t,e,s){let n=i[t].call(e,s);return n===void 0?Da[t].call(e,s):n}class Pa extends ss{static positioners=Ks;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let e=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&e.options.animation&&s.animations,o=new co(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,s=this._tooltipItems,as(t,{tooltip:e,tooltipItems:s,type:"tooltip"})));var t,e,s}getTitle(t,e){let{callbacks:s}=e,n=Ci(s,"beforeTitle",this,t),o=Ci(s,"title",this,t),a=Ci(s,"afterTitle",this,t),l=[];return l=ns(l,hs(n)),l=ns(l,hs(o)),l=ns(l,hs(a)),l}getBeforeBody(t,e){return Ta(Ci(e.callbacks,"beforeBody",this,t))}getBody(t,e){let{callbacks:s}=e,n=[];return xt(t,o=>{let a={before:[],lines:[],after:[]},l=Ea(s,o);ns(a.before,hs(Ci(l,"beforeLabel",this,o))),ns(a.lines,Ci(l,"label",this,o)),ns(a.after,hs(Ci(l,"afterLabel",this,o))),n.push(a)}),n}getAfterBody(t,e){return Ta(Ci(e.callbacks,"afterBody",this,t))}getFooter(t,e){let{callbacks:s}=e,n=Ci(s,"beforeFooter",this,t),o=Ci(s,"footer",this,t),a=Ci(s,"afterFooter",this,t),l=[];return l=ns(l,hs(n)),l=ns(l,hs(o)),l=ns(l,hs(a)),l}_createItems(t){let e=this._active,s=this.chart.data,n=[],o=[],a=[],l,u,g=[];for(l=0,u=e.length;l<u;++l)g.push(vh(this.chart,e[l]));return t.filter&&(g=g.filter((x,b,w)=>t.filter(x,b,w,s))),t.itemSort&&(g=g.sort((x,b)=>t.itemSort(x,b,s))),xt(g,x=>{let b=Ea(t.callbacks,x);n.push(Ci(b,"labelColor",this,x)),o.push(Ci(b,"labelPointStyle",this,x)),a.push(Ci(b,"labelTextColor",this,x))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=g,g}update(t,e){let s=this.options.setContext(this.getContext()),n=this._active,o,a=[];if(n.length){let l=Ks[s.position].call(this,n,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);let u=this._size=Ma(this,s),g=Object.assign({},l,u),x=Sa(this.chart,s,g),b=Ca(s,g,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,o={opacity:1,x:b.x,y:b.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}else this.opacity!==0&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,n){let o=this.getCaretPosition(t,s,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,s){let{xAlign:n,yAlign:o}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:u,topRight:g,bottomLeft:x,bottomRight:b}=fs(l),{x:w,y:k}=t,{width:A,height:T}=e,R,$,tt,Z,Q,ht;return o==="center"?(Q=k+T/2,n==="left"?(R=w,$=R-a,Z=Q+a,ht=Q-a):(R=w+A,$=R+a,Z=Q-a,ht=Q+a),tt=R):($=n==="left"?w+Math.max(u,x)+a:n==="right"?w+A-Math.max(g,b)-a:this.caretX,o==="top"?(Z=k,Q=Z-a,R=$-a,tt=$+a):(Z=k+T,Q=Z+a,R=$+a,tt=$-a),ht=Z),{x1:R,x2:$,x3:tt,y1:Z,y2:Q,y3:ht}}drawTitle(t,e,s){let n=this.title,o=n.length,a,l,u;if(o){let g=Ss(s.rtl,this.x,this.width);for(t.x=Mn(this,s.titleAlign,s),e.textAlign=g.textAlign(s.titleAlign),e.textBaseline="middle",a=qe(s.titleFont),l=s.titleSpacing,e.fillStyle=s.titleColor,e.font=a.string,u=0;u<o;++u)e.fillText(n[u],g.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,u+1===o&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,e,s,n,o){let a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:u,boxWidth:g}=o,x=qe(o.bodyFont),b=Mn(this,"left",o),w=n.x(b),k=u<x.lineHeight?(x.lineHeight-u)/2:0,A=e.y+k;if(o.usePointStyle){let T={radius:Math.min(g,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},R=n.leftForLtr(w,g)+g/2,$=A+u/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,gt(t,T,R,$),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,gt(t,T,R,$)}else{t.lineWidth=X(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let T=n.leftForLtr(w,g),R=n.leftForLtr(n.xPlus(w,1),g-2),$=fs(a.borderRadius);Object.values($).some(tt=>tt!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,xi(t,{x:T,y:A,w:g,h:u,radius:$}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),xi(t,{x:R,y:A+1,w:g-2,h:u-2,radius:$}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(T,A,g,u),t.strokeRect(T,A,g,u),t.fillStyle=a.backgroundColor,t.fillRect(R,A+1,g-2,u-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){let{body:n}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:u,boxWidth:g,boxPadding:x}=s,b=qe(s.bodyFont),w=b.lineHeight,k=0,A=Ss(s.rtl,this.x,this.width),T=function(At){e.fillText(At,A.x(t.x+k),t.y+w/2),t.y+=w+o},R=A.textAlign(a),$,tt,Z,Q,ht,mt,Ct;for(e.textAlign=a,e.textBaseline="middle",e.font=b.string,t.x=Mn(this,R,s),e.fillStyle=s.bodyColor,xt(this.beforeBody,T),k=l&&R!=="right"?a==="center"?g/2+x:g+2+x:0,Q=0,mt=n.length;Q<mt;++Q){for($=n[Q],tt=this.labelTextColors[Q],e.fillStyle=tt,xt($.before,T),Z=$.lines,l&&Z.length&&(this._drawColorBox(e,t,Q,A,s),w=Math.max(b.lineHeight,u)),ht=0,Ct=Z.length;ht<Ct;++ht)T(Z[ht]),w=b.lineHeight;xt($.after,T)}k=0,w=b.lineHeight,xt(this.afterBody,T),t.y-=o}drawFooter(t,e,s){let n=this.footer,o=n.length,a,l;if(o){let u=Ss(s.rtl,this.x,this.width);for(t.x=Mn(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=u.textAlign(s.footerAlign),e.textBaseline="middle",a=qe(s.footerFont),e.fillStyle=s.footerColor,e.font=a.string,l=0;l<o;++l)e.fillText(n[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,e,s,n){let{xAlign:o,yAlign:a}=this,{x:l,y:u}=t,{width:g,height:x}=s,{topLeft:b,topRight:w,bottomLeft:k,bottomRight:A}=fs(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(l+b,u),a==="top"&&this.drawCaret(t,e,s,n),e.lineTo(l+g-w,u),e.quadraticCurveTo(l+g,u,l+g,u+w),a==="center"&&o==="right"&&this.drawCaret(t,e,s,n),e.lineTo(l+g,u+x-A),e.quadraticCurveTo(l+g,u+x,l+g-A,u+x),a==="bottom"&&this.drawCaret(t,e,s,n),e.lineTo(l+k,u+x),e.quadraticCurveTo(l,u+x,l,u+x-k),a==="center"&&o==="left"&&this.drawCaret(t,e,s,n),e.lineTo(l,u+b),e.quadraticCurveTo(l,u,l+b,u),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){let e=this.chart,s=this.$animations,n=s&&s.x,o=s&&s.y;if(n||o){let a=Ks[t.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=Ma(this,t),u=Object.assign({},a,this._size),g=Sa(e,t,u),x=Ca(t,u,g,e);n._to===x.x&&o._to===x.y||(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(t){let e=this.options.setContext(this.getContext()),s=this.opacity;if(!s)return;this._updateAnimationTarget(e);let n={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;let a=ai(e.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(o,t,n,e),io(t,e.textDirection),o.y+=a.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),so(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){let s=this._active,n=t.map(({datasetIndex:l,index:u})=>{let g=this.chart.getDatasetMeta(l);if(!g)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:g.data[u],index:u}}),o=!jt(s,n),a=this._positionChanged(n,e);(o||a)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let n=this.options,o=this._active||[],a=this._getActiveElements(t,o,e,s),l=this._positionChanged(a,t),u=e||!jt(a,o)||l;return u&&(this._active=a,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),u}_getActiveElements(t,e,s,n){let o=this.options;if(t.type==="mouseout")return[];if(!n)return e.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,s);return o.reverse&&a.reverse(),a}_positionChanged(t,e){let{caretX:s,caretY:n,options:o}=this,a=Ks[o.position].call(this,t,e);return a!==!1&&(s!==a.x||n!==a.y)}}var _h={id:"tooltip",_element:Pa,positioners:Ks,afterInit(i,t,e){e&&(i.tooltip=new Pa({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){let t=i.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){let e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Da},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};return Ve.register(Vr,aa,_o,P),Ve.helpers={...ul},Ve._adapters=$r,Ve.Animation=pr,Ve.Animations=co,Ve.animator=Be,Ve.controllers=Yi.controllers.items,Ve.DatasetController=ls,Ve.Element=ss,Ve.elements=_o,Ve.Interaction=Jo,Ve.layouts=li,Ve.platforms=ur,Ve.Scale=ms,Ve.Ticks=pt,Object.assign(Ve,Vr,aa,_o,P,ur),Ve.Chart=Ve,typeof window<"u"&&(window.Chart=Ve),Ve});(function(P,d){typeof exports=="object"&&typeof module<"u"?d(ys("chart.js")):typeof define=="function"&&define.amd?define(["chart.js"],d):d((P=typeof globalThis<"u"?globalThis:P||self).Chart)})(void 0,function(P){"use strict";function d(h){if(h===null||h===!0||h===!1)return NaN;var p=Number(h);return isNaN(p)?p:p<0?Math.ceil(p):Math.floor(p)}function m(h,p){if(p.length<h)throw new TypeError(h+" argument"+(h>1?"s":"")+" required, but only "+p.length+" present")}function C(h){m(1,arguments);var p=Object.prototype.toString.call(h);return h instanceof Date||typeof h=="object"&&p==="[object Date]"?new Date(h.getTime()):typeof h=="number"||p==="[object Number]"?new Date(h):(typeof h!="string"&&p!=="[object String]"||typeof console>"u"||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function H(h,p){m(2,arguments);var f=C(h),_=d(p);return isNaN(_)?new Date(NaN):(_&&f.setDate(f.getDate()+_),f)}function X(h,p){m(2,arguments);var f=C(h),_=d(p);if(isNaN(_))return new Date(NaN);if(!_)return f;var L=f.getDate(),K=new Date(f.getTime());K.setMonth(f.getMonth()+_+1,0);var gt=K.getDate();return L>=gt?K:(f.setFullYear(K.getFullYear(),K.getMonth(),L),f)}function W(h,p){m(2,arguments);var f=C(h).getTime(),_=d(p);return new Date(f+_)}var at=36e5;function q(h,p){m(1,arguments);var f=p||{},_=f.locale,L=_&&_.options&&_.options.weekStartsOn,K=L==null?0:d(L),gt=f.weekStartsOn==null?K:d(f.weekStartsOn);if(!(gt>=0&&gt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var wt=C(h),Mt=wt.getDay(),qt=(Mt<gt?7:0)+Mt-gt;return wt.setDate(wt.getDate()-qt),wt.setHours(0,0,0,0),wt}function Rt(h){var p=new Date(Date.UTC(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()));return p.setUTCFullYear(h.getFullYear()),h.getTime()-p.getTime()}function Ot(h){m(1,arguments);var p=C(h);return p.setHours(0,0,0,0),p}var ft=864e5;function xt(h,p){m(2,arguments);var f=Ot(h),_=Ot(p),L=f.getTime()-Rt(f),K=_.getTime()-Rt(_);return Math.round((L-K)/ft)}function jt(h,p){m(2,arguments);var f=C(h),_=C(p),L=f.getTime()-_.getTime();return L<0?-1:L>0?1:L}function Jt(h){m(1,arguments);var p=C(h);return!isNaN(p)}function ae(h,p){m(2,arguments);var f=C(h),_=C(p),L=f.getFullYear()-_.getFullYear(),K=f.getMonth()-_.getMonth();return 12*L+K}function Ae(h,p){m(2,arguments);var f=C(h),_=C(p);return f.getFullYear()-_.getFullYear()}function ue(h,p){var f=h.getFullYear()-p.getFullYear()||h.getMonth()-p.getMonth()||h.getDate()-p.getDate()||h.getHours()-p.getHours()||h.getMinutes()-p.getMinutes()||h.getSeconds()-p.getSeconds()||h.getMilliseconds()-p.getMilliseconds();return f<0?-1:f>0?1:f}function _e(h,p){m(2,arguments);var f=C(h),_=C(p),L=ue(f,_),K=Math.abs(xt(f,_));f.setDate(f.getDate()-L*K);var gt=ue(f,_)===-L,wt=L*(K-gt);return wt===0?0:wt}function Oe(h,p){m(2,arguments);var f=C(h),_=C(p);return f.getTime()-_.getTime()}var Ee=36e5;function Ge(h){m(1,arguments);var p=C(h);return p.setHours(23,59,59,999),p}function De(h){m(1,arguments);var p=C(h),f=p.getMonth();return p.setFullYear(p.getFullYear(),f+1,0),p.setHours(23,59,59,999),p}function ee(h){m(1,arguments);var p=C(h);return Ge(p).getTime()===De(p).getTime()}function Bt(h,p){m(2,arguments);var f,_=C(h),L=C(p),K=jt(_,L),gt=Math.abs(ae(_,L));if(gt<1)f=0;else{_.getMonth()===1&&_.getDate()>27&&_.setDate(30),_.setMonth(_.getMonth()-K*gt);var wt=jt(_,L)===-K;ee(C(h))&&gt===1&&jt(h,L)===1&&(wt=!1),f=K*(gt-wt)}return f===0?0:f}var St={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function r(h){return function(p){var f=p||{},_=f.width?String(f.width):h.defaultWidth;return h.formats[_]||h.formats[h.defaultWidth]}}var c={date:r({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:r({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:r({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},y={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function v(h){return function(p,f){var _,L=f||{};if((L.context?String(L.context):"standalone")==="formatting"&&h.formattingValues){var K=h.defaultFormattingWidth||h.defaultWidth,gt=L.width?String(L.width):K;_=h.formattingValues[gt]||h.formattingValues[K]}else{var wt=h.defaultWidth,Mt=L.width?String(L.width):h.defaultWidth;_=h.values[Mt]||h.values[wt]}return _[h.argumentCallback?h.argumentCallback(p):p]}}function D(h){return function(p,f){var _=String(p),L=f||{},K=L.width,gt=K&&h.matchPatterns[K]||h.matchPatterns[h.defaultMatchWidth],wt=_.match(gt);if(!wt)return null;var Mt,qt=wt[0],Gt=K&&h.parsePatterns[K]||h.parsePatterns[h.defaultParseWidth];return Mt=Object.prototype.toString.call(Gt)==="[object Array]"?function(Zt,pe){for(var he=0;he<Zt.length;he++)if(pe(Zt[he]))return he}(Gt,function(Zt){return Zt.test(qt)}):function(Zt,pe){for(var he in Zt)if(Zt.hasOwnProperty(he)&&pe(Zt[he]))return he}(Gt,function(Zt){return Zt.test(qt)}),Mt=h.valueCallback?h.valueCallback(Mt):Mt,{value:Mt=L.valueCallback?L.valueCallback(Mt):Mt,rest:_.slice(qt.length)}}}var F,Y={code:"en-US",formatDistance:function(h,p,f){var _;return f=f||{},_=typeof St[h]=="string"?St[h]:p===1?St[h].one:St[h].other.replace("{{count}}",p),f.addSuffix?f.comparison>0?"in "+_:_+" ago":_},formatLong:c,formatRelative:function(h,p,f,_){return y[h]},localize:{ordinalNumber:function(h,p){var f=Number(h),_=f%100;if(_>20||_<10)switch(_%10){case 1:return f+"st";case 2:return f+"nd";case 3:return f+"rd"}return f+"th"},era:v({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:v({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(h){return Number(h)-1}}),month:v({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:v({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:v({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(F={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(h){return parseInt(h,10)}},function(h,p){var f=String(h),_=p||{},L=f.match(F.matchPattern);if(!L)return null;var K=L[0],gt=f.match(F.parsePattern);if(!gt)return null;var wt=F.valueCallback?F.valueCallback(gt[0]):gt[0];return{value:wt=_.valueCallback?_.valueCallback(wt):wt,rest:f.slice(K.length)}}),era:D({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:D({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(h){return h+1}}),month:D({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:D({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:D({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function nt(h,p){m(2,arguments);var f=d(p);return W(h,-f)}function V(h,p){for(var f=h<0?"-":"",_=Math.abs(h).toString();_.length<p;)_="0"+_;return f+_}var it={y:function(h,p){var f=h.getUTCFullYear(),_=f>0?f:1-f;return V(p==="yy"?_%100:_,p.length)},M:function(h,p){var f=h.getUTCMonth();return p==="M"?String(f+1):V(f+1,2)},d:function(h,p){return V(h.getUTCDate(),p.length)},a:function(h,p){var f=h.getUTCHours()/12>=1?"pm":"am";switch(p){case"a":case"aa":return f.toUpperCase();case"aaa":return f;case"aaaaa":return f[0];default:return f==="am"?"a.m.":"p.m."}},h:function(h,p){return V(h.getUTCHours()%12||12,p.length)},H:function(h,p){return V(h.getUTCHours(),p.length)},m:function(h,p){return V(h.getUTCMinutes(),p.length)},s:function(h,p){return V(h.getUTCSeconds(),p.length)},S:function(h,p){var f=p.length,_=h.getUTCMilliseconds();return V(Math.floor(_*Math.pow(10,f-3)),p.length)}},kt=864e5;function Et(h){m(1,arguments);var p=1,f=C(h),_=f.getUTCDay(),L=(_<p?7:0)+_-p;return f.setUTCDate(f.getUTCDate()-L),f.setUTCHours(0,0,0,0),f}function te(h){m(1,arguments);var p=C(h),f=p.getUTCFullYear(),_=new Date(0);_.setUTCFullYear(f+1,0,4),_.setUTCHours(0,0,0,0);var L=Et(_),K=new Date(0);K.setUTCFullYear(f,0,4),K.setUTCHours(0,0,0,0);var gt=Et(K);return p.getTime()>=L.getTime()?f+1:p.getTime()>=gt.getTime()?f:f-1}function Le(h){m(1,arguments);var p=te(h),f=new Date(0);f.setUTCFullYear(p,0,4),f.setUTCHours(0,0,0,0);var _=Et(f);return _}var ii=6048e5;function Re(h){m(1,arguments);var p=C(h),f=Et(p).getTime()-Le(p).getTime();return Math.round(f/ii)+1}function We(h,p){m(1,arguments);var f=p||{},_=f.locale,L=_&&_.options&&_.options.weekStartsOn,K=L==null?0:d(L),gt=f.weekStartsOn==null?K:d(f.weekStartsOn);if(!(gt>=0&&gt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var wt=C(h),Mt=wt.getUTCDay(),qt=(Mt<gt?7:0)+Mt-gt;return wt.setUTCDate(wt.getUTCDate()-qt),wt.setUTCHours(0,0,0,0),wt}function Ze(h,p){m(1,arguments);var f=C(h,p),_=f.getUTCFullYear(),L=p||{},K=L.locale,gt=K&&K.options&&K.options.firstWeekContainsDate,wt=gt==null?1:d(gt),Mt=L.firstWeekContainsDate==null?wt:d(L.firstWeekContainsDate);if(!(Mt>=1&&Mt<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var qt=new Date(0);qt.setUTCFullYear(_+1,0,Mt),qt.setUTCHours(0,0,0,0);var Gt=We(qt,p),Zt=new Date(0);Zt.setUTCFullYear(_,0,Mt),Zt.setUTCHours(0,0,0,0);var pe=We(Zt,p);return f.getTime()>=Gt.getTime()?_+1:f.getTime()>=pe.getTime()?_:_-1}function He(h,p){m(1,arguments);var f=p||{},_=f.locale,L=_&&_.options&&_.options.firstWeekContainsDate,K=L==null?1:d(L),gt=f.firstWeekContainsDate==null?K:d(f.firstWeekContainsDate),wt=Ze(h,p),Mt=new Date(0);Mt.setUTCFullYear(wt,0,gt),Mt.setUTCHours(0,0,0,0);var qt=We(Mt,p);return qt}var Je=6048e5;function Ne(h,p){m(1,arguments);var f=C(h),_=We(f,p).getTime()-He(f,p).getTime();return Math.round(_/Je)+1}var si="midnight",wi="noon",Di="morning",ve="afternoon",N="evening",J="night",et={G:function(h,p,f){var _=h.getUTCFullYear()>0?1:0;switch(p){case"G":case"GG":case"GGG":return f.era(_,{width:"abbreviated"});case"GGGGG":return f.era(_,{width:"narrow"});default:return f.era(_,{width:"wide"})}},y:function(h,p,f){if(p==="yo"){var _=h.getUTCFullYear(),L=_>0?_:1-_;return f.ordinalNumber(L,{unit:"year"})}return it.y(h,p)},Y:function(h,p,f,_){var L=Ze(h,_),K=L>0?L:1-L;return p==="YY"?V(K%100,2):p==="Yo"?f.ordinalNumber(K,{unit:"year"}):V(K,p.length)},R:function(h,p){return V(te(h),p.length)},u:function(h,p){return V(h.getUTCFullYear(),p.length)},Q:function(h,p,f){var _=Math.ceil((h.getUTCMonth()+1)/3);switch(p){case"Q":return String(_);case"QQ":return V(_,2);case"Qo":return f.ordinalNumber(_,{unit:"quarter"});case"QQQ":return f.quarter(_,{width:"abbreviated",context:"formatting"});case"QQQQQ":return f.quarter(_,{width:"narrow",context:"formatting"});default:return f.quarter(_,{width:"wide",context:"formatting"})}},q:function(h,p,f){var _=Math.ceil((h.getUTCMonth()+1)/3);switch(p){case"q":return String(_);case"qq":return V(_,2);case"qo":return f.ordinalNumber(_,{unit:"quarter"});case"qqq":return f.quarter(_,{width:"abbreviated",context:"standalone"});case"qqqqq":return f.quarter(_,{width:"narrow",context:"standalone"});default:return f.quarter(_,{width:"wide",context:"standalone"})}},M:function(h,p,f){var _=h.getUTCMonth();switch(p){case"M":case"MM":return it.M(h,p);case"Mo":return f.ordinalNumber(_+1,{unit:"month"});case"MMM":return f.month(_,{width:"abbreviated",context:"formatting"});case"MMMMM":return f.month(_,{width:"narrow",context:"formatting"});default:return f.month(_,{width:"wide",context:"formatting"})}},L:function(h,p,f){var _=h.getUTCMonth();switch(p){case"L":return String(_+1);case"LL":return V(_+1,2);case"Lo":return f.ordinalNumber(_+1,{unit:"month"});case"LLL":return f.month(_,{width:"abbreviated",context:"standalone"});case"LLLLL":return f.month(_,{width:"narrow",context:"standalone"});default:return f.month(_,{width:"wide",context:"standalone"})}},w:function(h,p,f,_){var L=Ne(h,_);return p==="wo"?f.ordinalNumber(L,{unit:"week"}):V(L,p.length)},I:function(h,p,f){var _=Re(h);return p==="Io"?f.ordinalNumber(_,{unit:"week"}):V(_,p.length)},d:function(h,p,f){return p==="do"?f.ordinalNumber(h.getUTCDate(),{unit:"date"}):it.d(h,p)},D:function(h,p,f){var _=function(L){m(1,arguments);var K=C(L),gt=K.getTime();K.setUTCMonth(0,1),K.setUTCHours(0,0,0,0);var wt=K.getTime(),Mt=gt-wt;return Math.floor(Mt/kt)+1}(h);return p==="Do"?f.ordinalNumber(_,{unit:"dayOfYear"}):V(_,p.length)},E:function(h,p,f){var _=h.getUTCDay();switch(p){case"E":case"EE":case"EEE":return f.day(_,{width:"abbreviated",context:"formatting"});case"EEEEE":return f.day(_,{width:"narrow",context:"formatting"});case"EEEEEE":return f.day(_,{width:"short",context:"formatting"});default:return f.day(_,{width:"wide",context:"formatting"})}},e:function(h,p,f,_){var L=h.getUTCDay(),K=(L-_.weekStartsOn+8)%7||7;switch(p){case"e":return String(K);case"ee":return V(K,2);case"eo":return f.ordinalNumber(K,{unit:"day"});case"eee":return f.day(L,{width:"abbreviated",context:"formatting"});case"eeeee":return f.day(L,{width:"narrow",context:"formatting"});case"eeeeee":return f.day(L,{width:"short",context:"formatting"});default:return f.day(L,{width:"wide",context:"formatting"})}},c:function(h,p,f,_){var L=h.getUTCDay(),K=(L-_.weekStartsOn+8)%7||7;switch(p){case"c":return String(K);case"cc":return V(K,p.length);case"co":return f.ordinalNumber(K,{unit:"day"});case"ccc":return f.day(L,{width:"abbreviated",context:"standalone"});case"ccccc":return f.day(L,{width:"narrow",context:"standalone"});case"cccccc":return f.day(L,{width:"short",context:"standalone"});default:return f.day(L,{width:"wide",context:"standalone"})}},i:function(h,p,f){var _=h.getUTCDay(),L=_===0?7:_;switch(p){case"i":return String(L);case"ii":return V(L,p.length);case"io":return f.ordinalNumber(L,{unit:"day"});case"iii":return f.day(_,{width:"abbreviated",context:"formatting"});case"iiiii":return f.day(_,{width:"narrow",context:"formatting"});case"iiiiii":return f.day(_,{width:"short",context:"formatting"});default:return f.day(_,{width:"wide",context:"formatting"})}},a:function(h,p,f){var _=h.getUTCHours()/12>=1?"pm":"am";switch(p){case"a":case"aa":return f.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"aaa":return f.dayPeriod(_,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return f.dayPeriod(_,{width:"narrow",context:"formatting"});default:return f.dayPeriod(_,{width:"wide",context:"formatting"})}},b:function(h,p,f){var _,L=h.getUTCHours();switch(_=L===12?wi:L===0?si:L/12>=1?"pm":"am",p){case"b":case"bb":return f.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"bbb":return f.dayPeriod(_,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return f.dayPeriod(_,{width:"narrow",context:"formatting"});default:return f.dayPeriod(_,{width:"wide",context:"formatting"})}},B:function(h,p,f){var _,L=h.getUTCHours();switch(_=L>=17?N:L>=12?ve:L>=4?Di:J,p){case"B":case"BB":case"BBB":return f.dayPeriod(_,{width:"abbreviated",context:"formatting"});case"BBBBB":return f.dayPeriod(_,{width:"narrow",context:"formatting"});default:return f.dayPeriod(_,{width:"wide",context:"formatting"})}},h:function(h,p,f){if(p==="ho"){var _=h.getUTCHours()%12;return _===0&&(_=12),f.ordinalNumber(_,{unit:"hour"})}return it.h(h,p)},H:function(h,p,f){return p==="Ho"?f.ordinalNumber(h.getUTCHours(),{unit:"hour"}):it.H(h,p)},K:function(h,p,f){var _=h.getUTCHours()%12;return p==="Ko"?f.ordinalNumber(_,{unit:"hour"}):V(_,p.length)},k:function(h,p,f){var _=h.getUTCHours();return _===0&&(_=24),p==="ko"?f.ordinalNumber(_,{unit:"hour"}):V(_,p.length)},m:function(h,p,f){return p==="mo"?f.ordinalNumber(h.getUTCMinutes(),{unit:"minute"}):it.m(h,p)},s:function(h,p,f){return p==="so"?f.ordinalNumber(h.getUTCSeconds(),{unit:"second"}):it.s(h,p)},S:function(h,p){return it.S(h,p)},X:function(h,p,f,_){var L=(_._originalDate||h).getTimezoneOffset();if(L===0)return"Z";switch(p){case"X":return ut(L);case"XXXX":case"XX":return dt(L);default:return dt(L,":")}},x:function(h,p,f,_){var L=(_._originalDate||h).getTimezoneOffset();switch(p){case"x":return ut(L);case"xxxx":case"xx":return dt(L);default:return dt(L,":")}},O:function(h,p,f,_){var L=(_._originalDate||h).getTimezoneOffset();switch(p){case"O":case"OO":case"OOO":return"GMT"+ot(L,":");default:return"GMT"+dt(L,":")}},z:function(h,p,f,_){var L=(_._originalDate||h).getTimezoneOffset();switch(p){case"z":case"zz":case"zzz":return"GMT"+ot(L,":");default:return"GMT"+dt(L,":")}},t:function(h,p,f,_){var L=_._originalDate||h;return V(Math.floor(L.getTime()/1e3),p.length)},T:function(h,p,f,_){return V((_._originalDate||h).getTime(),p.length)}};function ot(h,p){var f=h>0?"-":"+",_=Math.abs(h),L=Math.floor(_/60),K=_%60;if(K===0)return f+String(L);var gt=p||"";return f+String(L)+gt+V(K,2)}function ut(h,p){return h%60==0?(h>0?"-":"+")+V(Math.abs(h)/60,2):dt(h,p)}function dt(h,p){var f=p||"",_=h>0?"-":"+",L=Math.abs(h);return _+V(Math.floor(L/60),2)+f+V(L%60,2)}var yt=et;function Pt(h,p){switch(h){case"P":return p.date({width:"short"});case"PP":return p.date({width:"medium"});case"PPP":return p.date({width:"long"});default:return p.date({width:"full"})}}function Tt(h,p){switch(h){case"p":return p.time({width:"short"});case"pp":return p.time({width:"medium"});case"ppp":return p.time({width:"long"});default:return p.time({width:"full"})}}var Ut={p:Tt,P:function(h,p){var f,_=h.match(/(P+)(p+)?/),L=_[1],K=_[2];if(!K)return Pt(h,p);switch(L){case"P":f=p.dateTime({width:"short"});break;case"PP":f=p.dateTime({width:"medium"});break;case"PPP":f=p.dateTime({width:"long"});break;default:f=p.dateTime({width:"full"})}return f.replace("{{date}}",Pt(L,p)).replace("{{time}}",Tt(K,p))}},zt=Ut,ce=["D","DD"],oe=["YY","YYYY"];function Ce(h){return ce.indexOf(h)!==-1}function fe(h){return oe.indexOf(h)!==-1}function xe(h,p,f){if(h==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(p,"`) for formatting years to the input `").concat(f,"`; see: https://git.io/fxCyr"));if(h==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(p,"`) for formatting years to the input `").concat(f,"`; see: https://git.io/fxCyr"));if(h==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(p,"`) for formatting days of the month to the input `").concat(f,"`; see: https://git.io/fxCyr"));if(h==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(p,"`) for formatting days of the month to the input `").concat(f,"`; see: https://git.io/fxCyr"))}var Te=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rs=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ci=/^'([^]*?)'?$/,di=/''/g,Ki=/[a-zA-Z]/;function Be(h){return h.match(ci)[1].replace(di,"'")}function Ii(h,p){if(h==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var f in p=p||{})p.hasOwnProperty(f)&&(h[f]=p[f]);return h}function ni(h,p,f){m(2,arguments);var _=f||{},L=_.locale,K=L&&L.options&&L.options.weekStartsOn,gt=K==null?0:d(K),wt=_.weekStartsOn==null?gt:d(_.weekStartsOn);if(!(wt>=0&&wt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var Mt=C(h),qt=d(p),Gt=Mt.getUTCDay(),Zt=qt%7,pe=(Zt+7)%7,he=(pe<wt?7:0)+qt-Gt;return Mt.setUTCDate(Mt.getUTCDate()+he),Mt}var _i=/^(1[0-2]|0?\d)/,ui=/^(3[0-1]|[0-2]?\d)/,gi=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Zi=/^(5[0-3]|[0-4]?\d)/,$e=/^(2[0-3]|[0-1]?\d)/,Ui=/^(2[0-4]|[0-1]?\d)/,Ji=/^(1[0-1]|0?\d)/,ji=/^(1[0-2]|0?\d)/,Pi=/^[0-5]?\d/,Ie=/^[0-5]?\d/,Ai=/^\d/,be=/^\d{1,2}/,Ye=/^\d{1,3}/,ts=/^\d{1,4}/,ki=/^-?\d+/,mi=/^-?\d/,bi=/^-?\d{1,2}/,Hi=/^-?\d{1,3}/,pi=/^-?\d{1,4}/,yi=/^([+-])(\d{2})(\d{2})?|Z/,Vi=/^([+-])(\d{2})(\d{2})|Z/,Ri=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Oi=/^([+-])(\d{2}):(\d{2})|Z/,ds=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function ge(h,p,f){var _=p.match(h);if(!_)return null;var L=parseInt(_[0],10);return{value:f?f(L):L,rest:p.slice(_[0].length)}}function Ue(h,p){var f=p.match(h);return f?f[0]==="Z"?{value:0,rest:p.slice(1)}:{value:(f[1]==="+"?1:-1)*(36e5*(f[2]?parseInt(f[2],10):0)+6e4*(f[3]?parseInt(f[3],10):0)+1e3*(f[5]?parseInt(f[5],10):0)),rest:p.slice(f[0].length)}:null}function Ni(h,p){return ge(ki,h,p)}function we(h,p,f){switch(h){case 1:return ge(Ai,p,f);case 2:return ge(be,p,f);case 3:return ge(Ye,p,f);case 4:return ge(ts,p,f);default:return ge(new RegExp("^\\d{1,"+h+"}"),p,f)}}function es(h,p,f){switch(h){case 1:return ge(mi,p,f);case 2:return ge(bi,p,f);case 3:return ge(Hi,p,f);case 4:return ge(pi,p,f);default:return ge(new RegExp("^-?\\d{1,"+h+"}"),p,f)}}function E(h){switch(h){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function M(h,p){var f,_=p>0,L=_?p:1-p;if(L<=50)f=h||100;else{var K=L+50;f=h+100*Math.floor(K/100)-(h>=K%100?100:0)}return _?f:1-f}var z=[31,28,31,30,31,30,31,31,30,31,30,31],I=[31,29,31,30,31,30,31,31,30,31,30,31];function j(h){return h%400==0||h%4==0&&h%100!=0}var U={G:{priority:140,parse:function(h,p,f,_){switch(p){case"G":case"GG":case"GGG":return f.era(h,{width:"abbreviated"})||f.era(h,{width:"narrow"});case"GGGGG":return f.era(h,{width:"narrow"});default:return f.era(h,{width:"wide"})||f.era(h,{width:"abbreviated"})||f.era(h,{width:"narrow"})}},set:function(h,p,f,_){return p.era=f,h.setUTCFullYear(f,0,1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(h,p,f,_){var L=function(K){return{year:K,isTwoDigitYear:p==="yy"}};switch(p){case"y":return we(4,h,L);case"yo":return f.ordinalNumber(h,{unit:"year",valueCallback:L});default:return we(p.length,h,L)}},validate:function(h,p,f){return p.isTwoDigitYear||p.year>0},set:function(h,p,f,_){var L=h.getUTCFullYear();if(f.isTwoDigitYear){var K=M(f.year,L);return h.setUTCFullYear(K,0,1),h.setUTCHours(0,0,0,0),h}var gt="era"in p&&p.era!==1?1-f.year:f.year;return h.setUTCFullYear(gt,0,1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(h,p,f,_){var L=function(K){return{year:K,isTwoDigitYear:p==="YY"}};switch(p){case"Y":return we(4,h,L);case"Yo":return f.ordinalNumber(h,{unit:"year",valueCallback:L});default:return we(p.length,h,L)}},validate:function(h,p,f){return p.isTwoDigitYear||p.year>0},set:function(h,p,f,_){var L=Ze(h,_);if(f.isTwoDigitYear){var K=M(f.year,L);return h.setUTCFullYear(K,0,_.firstWeekContainsDate),h.setUTCHours(0,0,0,0),We(h,_)}var gt="era"in p&&p.era!==1?1-f.year:f.year;return h.setUTCFullYear(gt,0,_.firstWeekContainsDate),h.setUTCHours(0,0,0,0),We(h,_)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(h,p,f,_){return es(p==="R"?4:p.length,h)},set:function(h,p,f,_){var L=new Date(0);return L.setUTCFullYear(f,0,4),L.setUTCHours(0,0,0,0),Et(L)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(h,p,f,_){return es(p==="u"?4:p.length,h)},set:function(h,p,f,_){return h.setUTCFullYear(f,0,1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(h,p,f,_){switch(p){case"Q":case"QQ":return we(p.length,h);case"Qo":return f.ordinalNumber(h,{unit:"quarter"});case"QQQ":return f.quarter(h,{width:"abbreviated",context:"formatting"})||f.quarter(h,{width:"narrow",context:"formatting"});case"QQQQQ":return f.quarter(h,{width:"narrow",context:"formatting"});default:return f.quarter(h,{width:"wide",context:"formatting"})||f.quarter(h,{width:"abbreviated",context:"formatting"})||f.quarter(h,{width:"narrow",context:"formatting"})}},validate:function(h,p,f){return p>=1&&p<=4},set:function(h,p,f,_){return h.setUTCMonth(3*(f-1),1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(h,p,f,_){switch(p){case"q":case"qq":return we(p.length,h);case"qo":return f.ordinalNumber(h,{unit:"quarter"});case"qqq":return f.quarter(h,{width:"abbreviated",context:"standalone"})||f.quarter(h,{width:"narrow",context:"standalone"});case"qqqqq":return f.quarter(h,{width:"narrow",context:"standalone"});default:return f.quarter(h,{width:"wide",context:"standalone"})||f.quarter(h,{width:"abbreviated",context:"standalone"})||f.quarter(h,{width:"narrow",context:"standalone"})}},validate:function(h,p,f){return p>=1&&p<=4},set:function(h,p,f,_){return h.setUTCMonth(3*(f-1),1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(h,p,f,_){var L=function(K){return K-1};switch(p){case"M":return ge(_i,h,L);case"MM":return we(2,h,L);case"Mo":return f.ordinalNumber(h,{unit:"month",valueCallback:L});case"MMM":return f.month(h,{width:"abbreviated",context:"formatting"})||f.month(h,{width:"narrow",context:"formatting"});case"MMMMM":return f.month(h,{width:"narrow",context:"formatting"});default:return f.month(h,{width:"wide",context:"formatting"})||f.month(h,{width:"abbreviated",context:"formatting"})||f.month(h,{width:"narrow",context:"formatting"})}},validate:function(h,p,f){return p>=0&&p<=11},set:function(h,p,f,_){return h.setUTCMonth(f,1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(h,p,f,_){var L=function(K){return K-1};switch(p){case"L":return ge(_i,h,L);case"LL":return we(2,h,L);case"Lo":return f.ordinalNumber(h,{unit:"month",valueCallback:L});case"LLL":return f.month(h,{width:"abbreviated",context:"standalone"})||f.month(h,{width:"narrow",context:"standalone"});case"LLLLL":return f.month(h,{width:"narrow",context:"standalone"});default:return f.month(h,{width:"wide",context:"standalone"})||f.month(h,{width:"abbreviated",context:"standalone"})||f.month(h,{width:"narrow",context:"standalone"})}},validate:function(h,p,f){return p>=0&&p<=11},set:function(h,p,f,_){return h.setUTCMonth(f,1),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(h,p,f,_){switch(p){case"w":return ge(Zi,h);case"wo":return f.ordinalNumber(h,{unit:"week"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=1&&p<=53},set:function(h,p,f,_){return We(function(L,K,gt){m(2,arguments);var wt=C(L),Mt=d(K),qt=Ne(wt,gt)-Mt;return wt.setUTCDate(wt.getUTCDate()-7*qt),wt}(h,f,_),_)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(h,p,f,_){switch(p){case"I":return ge(Zi,h);case"Io":return f.ordinalNumber(h,{unit:"week"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=1&&p<=53},set:function(h,p,f,_){return Et(function(L,K){m(2,arguments);var gt=C(L),wt=d(K),Mt=Re(gt)-wt;return gt.setUTCDate(gt.getUTCDate()-7*Mt),gt}(h,f,_),_)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(h,p,f,_){switch(p){case"d":return ge(ui,h);case"do":return f.ordinalNumber(h,{unit:"date"});default:return we(p.length,h)}},validate:function(h,p,f){var _=j(h.getUTCFullYear()),L=h.getUTCMonth();return _?p>=1&&p<=I[L]:p>=1&&p<=z[L]},set:function(h,p,f,_){return h.setUTCDate(f),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(h,p,f,_){switch(p){case"D":case"DD":return ge(gi,h);case"Do":return f.ordinalNumber(h,{unit:"date"});default:return we(p.length,h)}},validate:function(h,p,f){return j(h.getUTCFullYear())?p>=1&&p<=366:p>=1&&p<=365},set:function(h,p,f,_){return h.setUTCMonth(0,f),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(h,p,f,_){switch(p){case"E":case"EE":case"EEE":return f.day(h,{width:"abbreviated",context:"formatting"})||f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"});case"EEEEE":return f.day(h,{width:"narrow",context:"formatting"});case"EEEEEE":return f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"});default:return f.day(h,{width:"wide",context:"formatting"})||f.day(h,{width:"abbreviated",context:"formatting"})||f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"})}},validate:function(h,p,f){return p>=0&&p<=6},set:function(h,p,f,_){return(h=ni(h,f,_)).setUTCHours(0,0,0,0),h},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(h,p,f,_){var L=function(K){var gt=7*Math.floor((K-1)/7);return(K+_.weekStartsOn+6)%7+gt};switch(p){case"e":case"ee":return we(p.length,h,L);case"eo":return f.ordinalNumber(h,{unit:"day",valueCallback:L});case"eee":return f.day(h,{width:"abbreviated",context:"formatting"})||f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"});case"eeeee":return f.day(h,{width:"narrow",context:"formatting"});case"eeeeee":return f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"});default:return f.day(h,{width:"wide",context:"formatting"})||f.day(h,{width:"abbreviated",context:"formatting"})||f.day(h,{width:"short",context:"formatting"})||f.day(h,{width:"narrow",context:"formatting"})}},validate:function(h,p,f){return p>=0&&p<=6},set:function(h,p,f,_){return(h=ni(h,f,_)).setUTCHours(0,0,0,0),h},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(h,p,f,_){var L=function(K){var gt=7*Math.floor((K-1)/7);return(K+_.weekStartsOn+6)%7+gt};switch(p){case"c":case"cc":return we(p.length,h,L);case"co":return f.ordinalNumber(h,{unit:"day",valueCallback:L});case"ccc":return f.day(h,{width:"abbreviated",context:"standalone"})||f.day(h,{width:"short",context:"standalone"})||f.day(h,{width:"narrow",context:"standalone"});case"ccccc":return f.day(h,{width:"narrow",context:"standalone"});case"cccccc":return f.day(h,{width:"short",context:"standalone"})||f.day(h,{width:"narrow",context:"standalone"});default:return f.day(h,{width:"wide",context:"standalone"})||f.day(h,{width:"abbreviated",context:"standalone"})||f.day(h,{width:"short",context:"standalone"})||f.day(h,{width:"narrow",context:"standalone"})}},validate:function(h,p,f){return p>=0&&p<=6},set:function(h,p,f,_){return(h=ni(h,f,_)).setUTCHours(0,0,0,0),h},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(h,p,f,_){var L=function(K){return K===0?7:K};switch(p){case"i":case"ii":return we(p.length,h);case"io":return f.ordinalNumber(h,{unit:"day"});case"iii":return f.day(h,{width:"abbreviated",context:"formatting",valueCallback:L})||f.day(h,{width:"short",context:"formatting",valueCallback:L})||f.day(h,{width:"narrow",context:"formatting",valueCallback:L});case"iiiii":return f.day(h,{width:"narrow",context:"formatting",valueCallback:L});case"iiiiii":return f.day(h,{width:"short",context:"formatting",valueCallback:L})||f.day(h,{width:"narrow",context:"formatting",valueCallback:L});default:return f.day(h,{width:"wide",context:"formatting",valueCallback:L})||f.day(h,{width:"abbreviated",context:"formatting",valueCallback:L})||f.day(h,{width:"short",context:"formatting",valueCallback:L})||f.day(h,{width:"narrow",context:"formatting",valueCallback:L})}},validate:function(h,p,f){return p>=1&&p<=7},set:function(h,p,f,_){return h=function(L,K){m(2,arguments);var gt=d(K);gt%7==0&&(gt-=7);var wt=1,Mt=C(L),qt=Mt.getUTCDay(),Gt=((gt%7+7)%7<wt?7:0)+gt-qt;return Mt.setUTCDate(Mt.getUTCDate()+Gt),Mt}(h,f,_),h.setUTCHours(0,0,0,0),h},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(h,p,f,_){switch(p){case"a":case"aa":case"aaa":return f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"});case"aaaaa":return f.dayPeriod(h,{width:"narrow",context:"formatting"});default:return f.dayPeriod(h,{width:"wide",context:"formatting"})||f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"})}},set:function(h,p,f,_){return h.setUTCHours(E(f),0,0,0),h},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(h,p,f,_){switch(p){case"b":case"bb":case"bbb":return f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"});case"bbbbb":return f.dayPeriod(h,{width:"narrow",context:"formatting"});default:return f.dayPeriod(h,{width:"wide",context:"formatting"})||f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"})}},set:function(h,p,f,_){return h.setUTCHours(E(f),0,0,0),h},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(h,p,f,_){switch(p){case"B":case"BB":case"BBB":return f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"});case"BBBBB":return f.dayPeriod(h,{width:"narrow",context:"formatting"});default:return f.dayPeriod(h,{width:"wide",context:"formatting"})||f.dayPeriod(h,{width:"abbreviated",context:"formatting"})||f.dayPeriod(h,{width:"narrow",context:"formatting"})}},set:function(h,p,f,_){return h.setUTCHours(E(f),0,0,0),h},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(h,p,f,_){switch(p){case"h":return ge(ji,h);case"ho":return f.ordinalNumber(h,{unit:"hour"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=1&&p<=12},set:function(h,p,f,_){var L=h.getUTCHours()>=12;return L&&f<12?h.setUTCHours(f+12,0,0,0):L||f!==12?h.setUTCHours(f,0,0,0):h.setUTCHours(0,0,0,0),h},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(h,p,f,_){switch(p){case"H":return ge($e,h);case"Ho":return f.ordinalNumber(h,{unit:"hour"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=0&&p<=23},set:function(h,p,f,_){return h.setUTCHours(f,0,0,0),h},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(h,p,f,_){switch(p){case"K":return ge(Ji,h);case"Ko":return f.ordinalNumber(h,{unit:"hour"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=0&&p<=11},set:function(h,p,f,_){return h.getUTCHours()>=12&&f<12?h.setUTCHours(f+12,0,0,0):h.setUTCHours(f,0,0,0),h},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(h,p,f,_){switch(p){case"k":return ge(Ui,h);case"ko":return f.ordinalNumber(h,{unit:"hour"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=1&&p<=24},set:function(h,p,f,_){var L=f<=24?f%24:f;return h.setUTCHours(L,0,0,0),h},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(h,p,f,_){switch(p){case"m":return ge(Pi,h);case"mo":return f.ordinalNumber(h,{unit:"minute"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=0&&p<=59},set:function(h,p,f,_){return h.setUTCMinutes(f,0,0),h},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(h,p,f,_){switch(p){case"s":return ge(Ie,h);case"so":return f.ordinalNumber(h,{unit:"second"});default:return we(p.length,h)}},validate:function(h,p,f){return p>=0&&p<=59},set:function(h,p,f,_){return h.setUTCSeconds(f,0),h},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(h,p,f,_){return we(p.length,h,function(L){return Math.floor(L*Math.pow(10,3-p.length))})},set:function(h,p,f,_){return h.setUTCMilliseconds(f),h},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(h,p,f,_){switch(p){case"X":return Ue(yi,h);case"XX":return Ue(Vi,h);case"XXXX":return Ue(Ri,h);case"XXXXX":return Ue(ds,h);default:return Ue(Oi,h)}},set:function(h,p,f,_){return p.timestampIsSet?h:new Date(h.getTime()-f)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(h,p,f,_){switch(p){case"x":return Ue(yi,h);case"xx":return Ue(Vi,h);case"xxxx":return Ue(Ri,h);case"xxxxx":return Ue(ds,h);default:return Ue(Oi,h)}},set:function(h,p,f,_){return p.timestampIsSet?h:new Date(h.getTime()-f)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(h,p,f,_){return Ni(h)},set:function(h,p,f,_){return[new Date(1e3*f),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(h,p,f,_){return Ni(h)},set:function(h,p,f,_){return[new Date(f),{timestampIsSet:!0}]},incompatibleTokens:"*"}},G=U,rt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ct=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,st=/^'([^]*?)'?$/,pt=/''/g,lt=/\S/,vt=/[a-zA-Z]/;function Lt(h,p){if(p.timestampIsSet)return h;var f=new Date(0);return f.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),f.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),f}function It(h){return h.match(st)[1].replace(pt,"'")}var _t=36e5,bt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Dt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Yt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Qt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function se(h){var p,f={},_=h.split(bt.dateTimeDelimiter);if(_.length>2)return f;if(/:/.test(_[0])?(f.date=null,p=_[0]):(f.date=_[0],p=_[1],bt.timeZoneDelimiter.test(f.date)&&(f.date=h.split(bt.timeZoneDelimiter)[0],p=h.substr(f.date.length,h.length))),p){var L=bt.timezone.exec(p);L?(f.time=p.replace(L[1],""),f.timezone=L[1]):f.time=p}return f}function de(h,p){var f=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+p)+"})|(\\d{2}|[+-]\\d{"+(2+p)+"})$)"),_=h.match(f);if(!_)return{year:null};var L=_[1]&&parseInt(_[1]),K=_[2]&&parseInt(_[2]);return{year:K==null?L:100*K,restDateString:h.slice((_[1]||_[2]).length)}}function le(h,p){if(p===null)return null;var f=h.match(Dt);if(!f)return null;var _=!!f[4],L=Kt(f[1]),K=Kt(f[2])-1,gt=Kt(f[3]),wt=Kt(f[4]),Mt=Kt(f[5])-1;if(_)return function(Gt,Zt,pe){return Zt>=1&&Zt<=53&&pe>=0&&pe<=6}(0,wt,Mt)?function(Gt,Zt,pe){var he=new Date(0);he.setUTCFullYear(Gt,0,4);var oi=he.getUTCDay()||7,Qe=7*(Zt-1)+pe+1-oi;return he.setUTCDate(he.getUTCDate()+Qe),he}(p,wt,Mt):new Date(NaN);var qt=new Date(0);return function(Gt,Zt,pe){return Zt>=0&&Zt<=11&&pe>=1&&pe<=(S[Zt]||(O(Gt)?29:28))}(p,K,gt)&&function(Gt,Zt){return Zt>=1&&Zt<=(O(Gt)?366:365)}(p,L)?(qt.setUTCFullYear(p,K,Math.max(L,gt)),qt):new Date(NaN)}function Kt(h){return h?parseInt(h):1}function Me(h){var p=h.match(Yt);if(!p)return null;var f=me(p[1]),_=me(p[2]),L=me(p[3]);return function(K,gt,wt){return K===24?gt===0&&wt===0:wt>=0&&wt<60&&gt>=0&&gt<60&&K>=0&&K<25}(f,_,L)?f*_t+6e4*_+1e3*L:NaN}function me(h){return h&&parseFloat(h.replace(",","."))||0}function Pe(h){if(h==="Z")return 0;var p=h.match(Qt);if(!p)return 0;var f=p[1]==="+"?-1:1,_=parseInt(p[2]),L=p[3]&&parseInt(p[3])||0;return function(K,gt){return gt>=0&&gt<=59}(0,L)?f*(_*_t+6e4*L):NaN}var S=[31,null,31,30,31,30,31,31,30,31,30,31];function O(h){return h%400==0||h%4==0&&h%100}let B={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};P._adapters._date.override({_id:"date-fns",formats:function(){return B},parse:function(h,p){if(h==null)return null;let f=typeof h;return f==="number"||h instanceof Date?h=C(h):f==="string"&&(h=typeof p=="string"?function(_,L,K,gt){m(3,arguments);var wt=String(_),Mt=String(L),qt=gt||{},Gt=qt.locale||Y;if(!Gt.match)throw new RangeError("locale must contain match property");var Zt=Gt.options&&Gt.options.firstWeekContainsDate,pe=Zt==null?1:d(Zt),he=qt.firstWeekContainsDate==null?pe:d(qt.firstWeekContainsDate);if(!(he>=1&&he<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var oi=Gt.options&&Gt.options.weekStartsOn,Qe=oi==null?0:d(oi),xi=qt.weekStartsOn==null?Qe:d(qt.weekStartsOn);if(!(xi>=0&&xi<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(Mt==="")return wt===""?C(K):new Date(NaN);var Ke,ri={firstWeekContainsDate:he,weekStartsOn:xi,locale:Gt},ze=[{priority:10,subPriority:-1,set:Lt,index:0}],fi=Mt.match(ct).map(function(ti){var Mi=ti[0];return Mi==="p"||Mi==="P"?(0,zt[Mi])(ti,Gt.formatLong,ri):ti}).join("").match(rt),vi=[];for(Ke=0;Ke<fi.length;Ke++){var je=fi[Ke];!qt.useAdditionalWeekYearTokens&&fe(je)&&xe(je,Mt,_),!qt.useAdditionalDayOfYearTokens&&Ce(je)&&xe(je,Mt,_);var $i=je[0],is=G[$i];if(is){var ln=is.incompatibleTokens;if(Array.isArray(ln)){for(var _s=void 0,ks=0;ks<vi.length;ks++){var $s=vi[ks].token;if(ln.indexOf($s)!==-1||$s===$i){_s=vi[ks];break}}if(_s)throw new RangeError("The format string mustn't contain `".concat(_s.fullToken,"` and `").concat(je,"` at the same time"))}else if(is.incompatibleTokens==="*"&&vi.length)throw new RangeError("The format string mustn't contain `".concat(je,"` and any other token at the same time"));vi.push({token:$i,fullToken:je});var Os=is.parse(wt,je,Gt.match,ri);if(!Os)return new Date(NaN);ze.push({priority:is.priority,subPriority:is.subPriority||0,set:is.set,validate:is.validate,value:Os.value,index:ze.length}),wt=Os.rest}else{if($i.match(vt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$i+"`");if(je==="''"?je="'":$i==="'"&&(je=It(je)),wt.indexOf(je)!==0)return new Date(NaN);wt=wt.slice(je.length)}}if(wt.length>0&&lt.test(wt))return new Date(NaN);var zs=ze.map(function(ti){return ti.priority}).sort(function(ti,Mi){return Mi-ti}).filter(function(ti,Mi,gs){return gs.indexOf(ti)===Mi}).map(function(ti){return ze.filter(function(Mi){return Mi.priority===ti}).sort(function(Mi,gs){return gs.subPriority-Mi.subPriority})}).map(function(ti){return ti[0]}),Fs=C(K);if(isNaN(Fs))return new Date(NaN);var Fi=nt(Fs,Rt(Fs)),Ws={};for(Ke=0;Ke<zs.length;Ke++){var us=zs[Ke];if(us.validate&&!us.validate(Fi,us.value,ri))return new Date(NaN);var Ms=us.set(Fi,Ws,us.value,ri);Ms[0]?(Fi=Ms[0],Ii(Ws,Ms[1])):Fi=Ms}return Fi}(h,p,new Date,this.options):function(_,L){m(1,arguments);var K=L||{},gt=K.additionalDigits==null?2:d(K.additionalDigits);if(gt!==2&&gt!==1&&gt!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(typeof _!="string"&&Object.prototype.toString.call(_)!=="[object String]")return new Date(NaN);var wt,Mt=se(_);if(Mt.date){var qt=de(Mt.date,gt);wt=le(qt.restDateString,qt.year)}if(isNaN(wt)||!wt)return new Date(NaN);var Gt,Zt=wt.getTime(),pe=0;if(Mt.time&&(pe=Me(Mt.time),isNaN(pe)||pe===null))return new Date(NaN);if(!Mt.timezone){var he=new Date(Zt+pe),oi=new Date(0);return oi.setFullYear(he.getUTCFullYear(),he.getUTCMonth(),he.getUTCDate()),oi.setHours(he.getUTCHours(),he.getUTCMinutes(),he.getUTCSeconds(),he.getUTCMilliseconds()),oi}return Gt=Pe(Mt.timezone),isNaN(Gt)?new Date(NaN):new Date(Zt+pe+Gt)}(h,this.options)),Jt(h)?h.getTime():null},format:function(h,p){return function(f,_,L){m(2,arguments);var K=String(_),gt=L||{},wt=gt.locale||Y,Mt=wt.options&&wt.options.firstWeekContainsDate,qt=Mt==null?1:d(Mt),Gt=gt.firstWeekContainsDate==null?qt:d(gt.firstWeekContainsDate);if(!(Gt>=1&&Gt<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Zt=wt.options&&wt.options.weekStartsOn,pe=Zt==null?0:d(Zt),he=gt.weekStartsOn==null?pe:d(gt.weekStartsOn);if(!(he>=0&&he<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!wt.localize)throw new RangeError("locale must contain localize property");if(!wt.formatLong)throw new RangeError("locale must contain formatLong property");var oi=C(f);if(!Jt(oi))throw new RangeError("Invalid time value");var Qe=Rt(oi),xi=nt(oi,Qe),Ke={firstWeekContainsDate:Gt,weekStartsOn:he,locale:wt,_originalDate:oi},ri=K.match(rs).map(function(ze){var fi=ze[0];return fi==="p"||fi==="P"?(0,zt[fi])(ze,wt.formatLong,Ke):ze}).join("").match(Te).map(function(ze){if(ze==="''")return"'";var fi=ze[0];if(fi==="'")return Be(ze);var vi=yt[fi];if(vi)return!gt.useAdditionalWeekYearTokens&&fe(ze)&&xe(ze,_,f),!gt.useAdditionalDayOfYearTokens&&Ce(ze)&&xe(ze,_,f),vi(xi,ze,wt.localize,Ke);if(fi.match(Ki))throw new RangeError("Format string contains an unescaped latin alphabet character `"+fi+"`");return ze}).join("");return ri}(h,p,this.options)},add:function(h,p,f){switch(f){case"millisecond":return W(h,p);case"second":return function(_,L){m(2,arguments);var K=d(L);return W(_,1e3*K)}(h,p);case"minute":return function(_,L){m(2,arguments);var K=d(L);return W(_,6e4*K)}(h,p);case"hour":return function(_,L){m(2,arguments);var K=d(L);return W(_,K*at)}(h,p);case"day":return H(h,p);case"week":return function(_,L){m(2,arguments);var K=d(L),gt=7*K;return H(_,gt)}(h,p);case"month":return X(h,p);case"quarter":return function(_,L){m(2,arguments);var K=d(L),gt=3*K;return X(_,gt)}(h,p);case"year":return function(_,L){m(2,arguments);var K=d(L);return X(_,12*K)}(h,p);default:return h}},diff:function(h,p,f){switch(f){case"millisecond":return Oe(h,p);case"second":return function(_,L){m(2,arguments);var K=Oe(_,L)/1e3;return K>0?Math.floor(K):Math.ceil(K)}(h,p);case"minute":return function(_,L){m(2,arguments);var K=Oe(_,L)/6e4;return K>0?Math.floor(K):Math.ceil(K)}(h,p);case"hour":return function(_,L){m(2,arguments);var K=Oe(_,L)/Ee;return K>0?Math.floor(K):Math.ceil(K)}(h,p);case"day":return _e(h,p);case"week":return function(_,L){m(2,arguments);var K=_e(_,L)/7;return K>0?Math.floor(K):Math.ceil(K)}(h,p);case"month":return Bt(h,p);case"quarter":return function(_,L){m(2,arguments);var K=Bt(_,L)/3;return K>0?Math.floor(K):Math.ceil(K)}(h,p);case"year":return function(_,L){m(2,arguments);var K=C(_),gt=C(L),wt=jt(K,gt),Mt=Math.abs(Ae(K,gt));K.setFullYear("1584"),gt.setFullYear("1584");var qt=jt(K,gt)===-wt,Gt=wt*(Mt-qt);return Gt===0?0:Gt}(h,p);default:return 0}},startOf:function(h,p,f){switch(p){case"second":return function(_){m(1,arguments);var L=C(_);return L.setMilliseconds(0),L}(h);case"minute":return function(_){m(1,arguments);var L=C(_);return L.setSeconds(0,0),L}(h);case"hour":return function(_){m(1,arguments);var L=C(_);return L.setMinutes(0,0,0),L}(h);case"day":return Ot(h);case"week":return q(h);case"isoWeek":return q(h,{weekStartsOn:+f});case"month":return function(_){m(1,arguments);var L=C(_);return L.setDate(1),L.setHours(0,0,0,0),L}(h);case"quarter":return function(_){m(1,arguments);var L=C(_),K=L.getMonth(),gt=K-K%3;return L.setMonth(gt,1),L.setHours(0,0,0,0),L}(h);case"year":return function(_){m(1,arguments);var L=C(_),K=new Date(0);return K.setFullYear(L.getFullYear(),0,1),K.setHours(0,0,0,0),K}(h);default:return h}},endOf:function(h,p){switch(p){case"second":return function(f){m(1,arguments);var _=C(f);return _.setMilliseconds(999),_}(h);case"minute":return function(f){m(1,arguments);var _=C(f);return _.setSeconds(59,999),_}(h);case"hour":return function(f){m(1,arguments);var _=C(f);return _.setMinutes(59,59,999),_}(h);case"day":return Ge(h);case"week":return function(f,_){m(1,arguments);var L=_||{},K=L.locale,gt=K&&K.options&&K.options.weekStartsOn,wt=gt==null?0:d(gt),Mt=L.weekStartsOn==null?wt:d(L.weekStartsOn);if(!(Mt>=0&&Mt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var qt=C(f),Gt=qt.getDay(),Zt=6+(Gt<Mt?-7:0)-(Gt-Mt);return qt.setDate(qt.getDate()+Zt),qt.setHours(23,59,59,999),qt}(h);case"month":return De(h);case"quarter":return function(f){m(1,arguments);var _=C(f),L=_.getMonth(),K=L-L%3+3;return _.setMonth(K,0),_.setHours(23,59,59,999),_}(h);case"year":return function(f){m(1,arguments);var _=C(f),L=_.getFullYear();return _.setFullYear(L+1,0,0),_.setHours(23,59,59,999),_}(h);default:return h}}})});(function(P,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(ys("chart.js"),ys("hammerjs"),ys("chart.js/helpers")):typeof define=="function"&&define.amd?define(["chart.js","hammerjs","chart.js/helpers"],d):(P=typeof globalThis<"u"?globalThis:P||self).ChartZoom=d(P.Chart,P.Hammer,P.Chart.helpers)})(void 0,function(P,d,m){"use strict";function C(N){return N&&typeof N=="object"&&"default"in N?N:{default:N}}var H=C(d);let X=N=>N&&N.enabled&&N.modifierKey,W=(N,J)=>N&&J[N+"Key"],at=(N,J)=>N&&!J[N+"Key"];function q(N,J,et){return N===void 0||(typeof N=="string"?N.indexOf(J)!==-1:typeof N=="function"&&N({chart:et}).indexOf(J)!==-1)}function Rt(N,J){return typeof N=="function"&&(N=N({chart:J})),typeof N=="string"?{x:N.indexOf("x")!==-1,y:N.indexOf("y")!==-1}:{x:!1,y:!1}}function Ot(N,J,et){let{mode:ot="xy",scaleMode:ut,overScaleMode:dt}=N||{},yt=function({x:zt,y:ce},oe){let Ce=oe.scales,fe=Object.keys(Ce);for(let xe=0;xe<fe.length;xe++){let Te=Ce[fe[xe]];if(ce>=Te.top&&ce<=Te.bottom&&zt>=Te.left&&zt<=Te.right)return Te}return null}(J,et),Pt=Rt(ot,et),Tt=Rt(ut,et);if(dt){let zt=Rt(dt,et);for(let ce of["x","y"])zt[ce]&&(Tt[ce]=Pt[ce],Pt[ce]=!1)}if(yt&&Tt[yt.axis])return[yt];let Ut=[];return m.each(et.scales,function(zt){Pt[zt.axis]&&Ut.push(zt)}),Ut}let ft=new WeakMap;function xt(N){let J=ft.get(N);return J||(J={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{}},ft.set(N,J)),J}function jt(N,J,et){let ot=N.max-N.min,ut=ot*(J-1),dt=N.isHorizontal()?et.x:et.y,yt=Math.max(0,Math.min(1,(N.getValueForPixel(dt)-N.min)/ot||0));return{min:ut*yt,max:ut*(1-yt)}}function Jt(N,J,et,ot,ut){let dt=et[ot];if(dt==="original"){let yt=N.originalScaleLimits[J.id][ot];dt=m.valueOrDefault(yt.options,yt.scale)}return m.valueOrDefault(dt,ut)}function ae(N,{min:J,max:et},ot,ut=!1){let dt=xt(N.chart),{id:yt,axis:Pt,options:Tt}=N,Ut=ot&&(ot[yt]||ot[Pt])||{},{minRange:zt=0}=Ut,ce=Jt(dt,N,Ut,"min",-1/0),oe=Jt(dt,N,Ut,"max",1/0),Ce=ut?Math.max(et-J,zt):N.max-N.min,fe=(Ce-et+J)/2;return et+=fe,(J-=fe)<ce?(J=ce,et=Math.min(ce+Ce,oe)):et>oe&&(et=oe,J=Math.max(oe-Ce,ce)),Tt.min=J,Tt.max=et,dt.updatedScaleLimits[N.id]={min:J,max:et},N.parse(J)!==N.min||N.parse(et)!==N.max}let Ae=N=>N===0||isNaN(N)?0:N<0?Math.min(Math.round(N),-1):Math.max(Math.round(N),1),ue={second:500,minute:3e4,hour:18e5,day:432e5,week:3024e5,month:1296e6,quarter:5184e6,year:157248e5};function _e(N,J,et,ot=!1){let{min:ut,max:dt,options:yt}=N,Pt=yt.time&&yt.time.round,Tt=ue[Pt]||0,Ut=N.getValueForPixel(N.getPixelForValue(ut+Tt)-J),zt=N.getValueForPixel(N.getPixelForValue(dt+Tt)-J),{min:ce=-1/0,max:oe=1/0}=ot&&et&&et[N.axis]||{};return!!(isNaN(Ut)||isNaN(zt)||Ut<ce||zt>oe)||ae(N,{min:Ut,max:zt},et,ot)}function Oe(N,J,et){return _e(N,J,et,!0)}let Ee={category:function(N,J,et,ot){let ut=jt(N,J,et);return N.min===N.max&&J<1&&function(dt){let yt=dt.getLabels().length-1;dt.min>0&&(dt.min-=1),dt.max<yt&&(dt.max+=1)}(N),ae(N,{min:N.min+Ae(ut.min),max:N.max-Ae(ut.max)},ot,!0)},default:function(N,J,et,ot){let ut=jt(N,J,et);return ae(N,{min:N.min+ut.min,max:N.max-ut.max},ot,!0)}},Ge={default:function(N,J,et,ot){ae(N,function(ut,dt,yt){let Pt=ut.getValueForPixel(dt),Tt=ut.getValueForPixel(yt);return{min:Math.min(Pt,Tt),max:Math.max(Pt,Tt)}}(N,J,et),ot,!0)}},De={category:function(N,J,et){let ot=N.getLabels().length-1,{min:ut,max:dt}=N,yt=Math.max(dt-ut,1),Pt=Math.round(function(zt){return zt.isHorizontal()?zt.width:zt.height}(N)/Math.max(yt,10)),Tt=Math.round(Math.abs(J/Pt)),Ut;return J<-Pt?(dt=Math.min(dt+Tt,ot),ut=yt===1?dt:dt-yt,Ut=dt===ot):J>Pt&&(ut=Math.max(0,ut-Tt),dt=yt===1?ut:ut+yt,Ut=ut===0),ae(N,{min:ut,max:dt},et)||Ut},default:_e,logarithmic:Oe,timeseries:Oe};function ee(N,J){m.each(N,(et,ot)=>{J[ot]||delete N[ot]})}function Bt(N,J){let{scales:et}=N,{originalScaleLimits:ot,updatedScaleLimits:ut}=J;return m.each(et,function(dt){(function(yt,Pt,Tt){let{id:Ut,options:{min:zt,max:ce}}=yt;if(!Pt[Ut]||!Tt[Ut])return!0;let oe=Tt[Ut];return oe.min!==zt||oe.max!==ce})(dt,ot,ut)&&(ot[dt.id]={min:{scale:dt.min,options:dt.options.min},max:{scale:dt.max,options:dt.options.max}})}),ee(ot,et),ee(ut,et),ot}function St(N,J,et,ot){let ut=Ee[N.type]||Ee.default;m.callback(ut,[N,J,et,ot])}function r(N,J,et,ot,ut){let dt=Ge[N.type]||Ge.default;m.callback(dt,[N,J,et,ot,ut])}function c(N){let J=N.chartArea;return{x:(J.left+J.right)/2,y:(J.top+J.bottom)/2}}function y(N,J,et="none"){let{x:ot=1,y:ut=1,focalPoint:dt=c(N)}=typeof J=="number"?{x:J,y:J}:J,yt=xt(N),{options:{limits:Pt,zoom:Tt}}=yt;Bt(N,yt);let Ut=ot!==1,zt=ut!==1,ce=Ot(Tt,dt,N);m.each(ce||N.scales,function(oe){oe.isHorizontal()&&Ut?St(oe,ot,dt,Pt):!oe.isHorizontal()&&zt&&St(oe,ut,dt,Pt)}),N.update(et),m.callback(Tt.onZoom,[{chart:N}])}function v(N,J,et,ot="none"){let ut=xt(N),{options:{limits:dt,zoom:yt}}=ut,{mode:Pt="xy"}=yt;Bt(N,ut);let Tt=q(Pt,"x",N),Ut=q(Pt,"y",N);m.each(N.scales,function(zt){zt.isHorizontal()&&Tt?r(zt,J.x,et.x,dt):!zt.isHorizontal()&&Ut&&r(zt,J.y,et.y,dt)}),N.update(ot),m.callback(yt.onZoom,[{chart:N}])}function D(N){let J=xt(N),et=1,ot=1;return m.each(N.scales,function(ut){let dt=function(yt,Pt){let Tt=yt.originalScaleLimits[Pt];if(!Tt)return;let{min:Ut,max:zt}=Tt;return m.valueOrDefault(zt.options,zt.scale)-m.valueOrDefault(Ut.options,Ut.scale)}(J,ut.id);if(dt){let yt=Math.round(dt/(ut.max-ut.min)*100)/100;et=Math.min(et,yt),ot=Math.max(ot,yt)}}),et<1?et:ot}function F(N,J,et,ot){let{panDelta:ut}=ot,dt=ut[N.id]||0;m.sign(dt)===m.sign(J)&&(J+=dt);let yt=De[N.type]||De.default;m.callback(yt,[N,J,et])?ut[N.id]=0:ut[N.id]=J}function Y(N,J,et,ot="none"){let{x:ut=0,y:dt=0}=typeof J=="number"?{x:J,y:J}:J,yt=xt(N),{options:{pan:Pt,limits:Tt}}=yt,{onPan:Ut}=Pt||{};Bt(N,yt);let zt=ut!==0,ce=dt!==0;m.each(et||N.scales,function(oe){oe.isHorizontal()&&zt?F(oe,ut,Tt,yt):!oe.isHorizontal()&&ce&&F(oe,dt,Tt,yt)}),N.update(ot),m.callback(Ut,[{chart:N}])}function nt(N){let J=xt(N);Bt(N,J);let et={};for(let ot of Object.keys(N.scales)){let{min:ut,max:dt}=J.originalScaleLimits[ot]||{min:{},max:{}};et[ot]={min:ut.scale,max:dt.scale}}return et}function V(N,J){let{handlers:et}=xt(N),ot=et[J];ot&&ot.target&&(ot.target.removeEventListener(J,ot),delete et[J])}function it(N,J,et,ot){let{handlers:ut,options:dt}=xt(N),yt=ut[et];yt&&yt.target===J||(V(N,et),ut[et]=Pt=>ot(N,Pt,dt),ut[et].target=J,J.addEventListener(et,ut[et]))}function kt(N,J){let et=xt(N);et.dragStart&&(et.dragging=!0,et.dragEnd=J,N.update("none"))}function Et(N,J){let et=xt(N);et.dragStart&&J.key==="Escape"&&(V(N,"keydown"),et.dragging=!1,et.dragStart=et.dragEnd=null,N.update("none"))}function te(N,J,et){let{onZoomStart:ot,onZoomRejected:ut}=et;if(ot){let dt=m.getRelativePosition(J,N);if(m.callback(ot,[{chart:N,event:J,point:dt}])===!1)return m.callback(ut,[{chart:N,event:J}]),!1}}function Le(N,J){let et=xt(N),{pan:ot,zoom:ut={}}=et.options;if(J.button!==0||W(X(ot),J)||at(X(ut.drag),J))return m.callback(ut.onZoomRejected,[{chart:N,event:J}]);te(N,J,ut)!==!1&&(et.dragStart=J,it(N,N.canvas,"mousemove",kt),it(N,window.document,"keydown",Et))}function ii(N,J,et,ot){let ut=q(J,"x",N),dt=q(J,"y",N),{top:yt,left:Pt,right:Tt,bottom:Ut,width:zt,height:ce}=N.chartArea,oe=m.getRelativePosition(et,N),Ce=m.getRelativePosition(ot,N);ut&&(Pt=Math.min(oe.x,Ce.x),Tt=Math.max(oe.x,Ce.x)),dt&&(yt=Math.min(oe.y,Ce.y),Ut=Math.max(oe.y,Ce.y));let fe=Tt-Pt,xe=Ut-yt;return{left:Pt,top:yt,right:Tt,bottom:Ut,width:fe,height:xe,zoomX:ut&&fe?1+(zt-fe)/zt:1,zoomY:dt&&xe?1+(ce-xe)/ce:1}}function Re(N,J){let et=xt(N);if(!et.dragStart)return;V(N,"mousemove");let{mode:ot,onZoomComplete:ut,drag:{threshold:dt=0}}=et.options.zoom,yt=ii(N,ot,et.dragStart,J),Pt=q(ot,"x",N)?yt.width:0,Tt=q(ot,"y",N)?yt.height:0,Ut=Math.sqrt(Pt*Pt+Tt*Tt);if(et.dragStart=et.dragEnd=null,Ut<=dt)return et.dragging=!1,void N.update("none");v(N,{x:yt.left,y:yt.top},{x:yt.right,y:yt.bottom},"zoom"),setTimeout(()=>et.dragging=!1,500),m.callback(ut,[{chart:N}])}function We(N,J){let{handlers:{onZoomComplete:et},options:{zoom:ot}}=xt(N);if(!function(yt,Pt,Tt){if(at(X(Tt.wheel),Pt))m.callback(Tt.onZoomRejected,[{chart:yt,event:Pt}]);else if(te(yt,Pt,Tt)!==!1&&(Pt.cancelable&&Pt.preventDefault(),Pt.deltaY!==void 0))return!0}(N,J,ot))return;let ut=J.target.getBoundingClientRect(),dt=1+(J.deltaY>=0?-ot.wheel.speed:ot.wheel.speed);y(N,{x:dt,y:dt,focalPoint:{x:J.clientX-ut.left,y:J.clientY-ut.top}}),et&&et()}function Ze(N,J,et,ot){et&&(xt(N).handlers[J]=function(ut,dt){let yt;return function(){return clearTimeout(yt),yt=setTimeout(ut,dt),dt}}(()=>m.callback(et,[{chart:N}]),ot))}function He(N,J){return function(et,ot){let{pan:ut,zoom:dt={}}=J.options;if(!ut||!ut.enabled)return!1;let yt=ot&&ot.srcEvent;return!yt||!(!J.panning&&ot.pointerType==="mouse"&&(at(X(ut),yt)||W(X(dt.drag),yt)))||(m.callback(ut.onPanRejected,[{chart:N,event:ot}]),!1)}}function Je(N,J,et){if(J.scale){let{center:ot,pointers:ut}=et,dt=1/J.scale*et.scale,yt=et.target.getBoundingClientRect(),Pt=function(Ut,zt){let ce=Math.abs(Ut.clientX-zt.clientX),oe=Math.abs(Ut.clientY-zt.clientY),Ce=ce/oe,fe,xe;return Ce>.3&&Ce<1.7?fe=xe=!0:ce>oe?fe=!0:xe=!0,{x:fe,y:xe}}(ut[0],ut[1]),Tt=J.options.zoom.mode;y(N,{x:Pt.x&&q(Tt,"x",N)?dt:1,y:Pt.y&&q(Tt,"y",N)?dt:1,focalPoint:{x:ot.x-yt.left,y:ot.y-yt.top}}),J.scale=et.scale}}function Ne(N,J,et){let ot=J.delta;ot&&(J.panning=!0,Y(N,{x:et.deltaX-ot.x,y:et.deltaY-ot.y},J.panScales),J.delta={x:et.deltaX,y:et.deltaY})}let si=new WeakMap;function wi(N,J){let et=xt(N),ot=N.canvas,{pan:ut,zoom:dt}=J,yt=new H.default.Manager(ot);dt&&dt.pinch.enabled&&(yt.add(new H.default.Pinch),yt.on("pinchstart",()=>function(Pt,Tt){Tt.options.zoom.pinch.enabled&&(Tt.scale=1)}(0,et)),yt.on("pinch",Pt=>Je(N,et,Pt)),yt.on("pinchend",Pt=>function(Tt,Ut,zt){Ut.scale&&(Je(Tt,Ut,zt),Ut.scale=null,m.callback(Ut.options.zoom.onZoomComplete,[{chart:Tt}]))}(N,et,Pt))),ut&&ut.enabled&&(yt.add(new H.default.Pan({threshold:ut.threshold,enable:He(N,et)})),yt.on("panstart",Pt=>function(Tt,Ut,zt){let{enabled:ce,onPanStart:oe,onPanRejected:Ce}=Ut.options.pan;if(!ce)return;let fe=zt.target.getBoundingClientRect(),xe={x:zt.center.x-fe.left,y:zt.center.y-fe.top};if(m.callback(oe,[{chart:Tt,event:zt,point:xe}])===!1)return m.callback(Ce,[{chart:Tt,event:zt}]);Ut.panScales=Ot(Ut.options.pan,xe,Tt),Ut.delta={x:0,y:0},clearTimeout(Ut.panEndTimeout),Ne(Tt,Ut,zt)}(N,et,Pt)),yt.on("panmove",Pt=>Ne(N,et,Pt)),yt.on("panend",()=>function(Pt,Tt){Tt.delta=null,Tt.panning&&(Tt.panEndTimeout=setTimeout(()=>Tt.panning=!1,500),m.callback(Tt.options.pan.onPanComplete,[{chart:Pt}]))}(N,et))),si.set(N,yt)}function Di(N,J,et){let ot=et.zoom.drag,{dragStart:ut,dragEnd:dt}=xt(N);if(ot.drawTime!==J||!dt)return;let{left:yt,top:Pt,width:Tt,height:Ut}=ii(N,et.zoom.mode,ut,dt),zt=N.ctx;zt.save(),zt.beginPath(),zt.fillStyle=ot.backgroundColor||"rgba(225,225,225,0.3)",zt.fillRect(yt,Pt,Tt,Ut),ot.borderWidth>0&&(zt.lineWidth=ot.borderWidth,zt.strokeStyle=ot.borderColor||"rgba(225,225,225)",zt.strokeRect(yt,Pt,Tt,Ut)),zt.restore()}var ve={id:"zoom",version:"2.0.1",defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(N,J,et){xt(N).options=et,Object.prototype.hasOwnProperty.call(et.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(et.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(et.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),H.default&&wi(N,et),N.pan=(ot,ut,dt)=>Y(N,ot,ut,dt),N.zoom=(ot,ut)=>y(N,ot,ut),N.zoomRect=(ot,ut,dt)=>v(N,ot,ut,dt),N.zoomScale=(ot,ut,dt)=>function(yt,Pt,Tt,Ut="none"){Bt(yt,xt(yt)),ae(yt.scales[Pt],Tt,void 0,!0),yt.update(Ut)}(N,ot,ut,dt),N.resetZoom=ot=>function(ut,dt="default"){let yt=xt(ut),Pt=Bt(ut,yt);m.each(ut.scales,function(Tt){let Ut=Tt.options;Pt[Tt.id]?(Ut.min=Pt[Tt.id].min.options,Ut.max=Pt[Tt.id].max.options):(delete Ut.min,delete Ut.max)}),ut.update(dt),m.callback(yt.options.zoom.onZoomComplete,[{chart:ut}])}(N,ot),N.getZoomLevel=()=>D(N),N.getInitialScaleBounds=()=>nt(N),N.isZoomedOrPanned=()=>function(ot){let ut=nt(ot);for(let dt of Object.keys(ot.scales)){let{min:yt,max:Pt}=ut[dt];if(yt!==void 0&&ot.scales[dt].min!==yt||Pt!==void 0&&ot.scales[dt].max!==Pt)return!0}return!1}(N)},beforeEvent(N){let J=xt(N);if(J.panning||J.dragging)return!1},beforeUpdate:function(N,J,et){xt(N).options=et,function(ot,ut){let dt=ot.canvas,{wheel:yt,drag:Pt,onZoomComplete:Tt}=ut.zoom;yt.enabled?(it(ot,dt,"wheel",We),Ze(ot,"onZoomComplete",Tt,250)):V(ot,"wheel"),Pt.enabled?(it(ot,dt,"mousedown",Le),it(ot,dt.ownerDocument,"mouseup",Re)):(V(ot,"mousedown"),V(ot,"mousemove"),V(ot,"mouseup"),V(ot,"keydown"))}(N,et)},beforeDatasetsDraw(N,J,et){Di(N,"beforeDatasetsDraw",et)},afterDatasetsDraw(N,J,et){Di(N,"afterDatasetsDraw",et)},beforeDraw(N,J,et){Di(N,"beforeDraw",et)},afterDraw(N,J,et){Di(N,"afterDraw",et)},stop:function(N){(function(J){V(J,"mousedown"),V(J,"mousemove"),V(J,"mouseup"),V(J,"wheel"),V(J,"click"),V(J,"keydown")})(N),H.default&&function(J){let et=si.get(J);et&&(et.remove("pinchstart"),et.remove("pinch"),et.remove("pinchend"),et.remove("panstart"),et.remove("pan"),et.remove("panend"),et.destroy(),si.delete(J))}(N),function(J){ft.delete(J)}(N)},panFunctions:De,zoomFunctions:Ee,zoomRectFunctions:Ge};return P.Chart.register(ve),ve});(function(P,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(ys("chart.js"),ys("chart.js/helpers")):typeof define=="function"&&define.amd?define(["chart.js","chart.js/helpers"],d):(P=typeof globalThis<"u"?globalThis:P||self)["chartjs-plugin-annotation"]=d(P.Chart,P.Chart.helpers)})(void 0,function(P,d){"use strict";let m={modes:{point:(E,M)=>H(E,M,{intersect:!0}),nearest:(E,M,z)=>function(I,j,U){let G=Number.POSITIVE_INFINITY;return H(I,j,U).reduce((rt,ct)=>{let st=ct.getCenterPoint(),pt=function(vt,Lt,It){return It==="x"?{x:vt.x,y:Lt.y}:It==="y"?{x:Lt.x,y:vt.y}:Lt}(j,st,U.axis),lt=d.distanceBetweenPoints(j,pt);return lt<G?(rt=[ct],G=lt):lt===G&&rt.push(ct),rt},[]).sort((rt,ct)=>rt._index-ct._index).slice(0,1)}(E,M,z),x:(E,M,z)=>H(E,M,{intersect:z.intersect,axis:"x"}),y:(E,M,z)=>H(E,M,{intersect:z.intersect,axis:"y"})}};function C(E,M,z){return(m.modes[z.mode]||m.modes.nearest)(E,M,z)}function H(E,M,z){return E.visibleElements.filter(I=>z.intersect?I.inRange(M.x,M.y):function(j,U,G){return G!=="x"&&G!=="y"?j.inRange(U.x,U.y,"x",!0)||j.inRange(U.x,U.y,"y",!0):j.inRange(U.x,U.y,G,!0)}(I,M,z.axis))}let X=(E,M)=>M>E||E.length>M.length&&E.slice(0,M.length)===M,W=.001,at=(E,M,z)=>Math.min(z,Math.max(M,E));function q(E,M,z){for(let I of Object.keys(E))E[I]=at(E[I],M,z);return E}function Rt(E,{x:M,y:z,x2:I,y2:j},U,G){let rt=G/2,ct=E.x>=M-rt-W&&E.x<=I+rt+W,st=E.y>=z-rt-W&&E.y<=j+rt+W;return U==="x"?ct:(U==="y"||ct)&&st}function Ot(E,M){let{centerX:z,centerY:I}=E.getProps(["centerX","centerY"],M);return{x:z,y:I}}let ft=E=>typeof E=="string"&&E.endsWith("%"),xt=E=>parseFloat(E)/100,jt=E=>at(xt(E),0,1),Jt=(E,M)=>({x:E,y:M,x2:E,y2:M,width:0,height:0}),ae={box:E=>Jt(E.centerX,E.centerY),ellipse:E=>({centerX:E.centerX,centerY:E.centerX,radius:0,width:0,height:0}),label:E=>Jt(E.centerX,E.centerY),line:E=>Jt(E.x,E.y),point:E=>({centerX:E.centerX,centerY:E.centerY,radius:0,width:0,height:0}),polygon:E=>Jt(E.centerX,E.centerY)};function Ae(E,M){return M==="start"?0:M==="end"?E:ft(M)?jt(M)*E:E/2}function ue(E,M,z=!0){return typeof M=="number"?M:ft(M)?(z?jt(M):xt(M))*E:E}function _e(E,M="center"){return d.isObject(E)?{x:d.valueOrDefault(E.x,M),y:d.valueOrDefault(E.y,M)}:{x:E=d.valueOrDefault(E,M),y:E}}function Oe(E){return E&&(d.defined(E.xValue)||d.defined(E.yValue))}function Ee(E,M,z){let I=z.init;if(I)return I===!0?De(M,z):function(j,U,G){let rt=d.callback(G.init,[{chart:j,properties:U,options:G}]);if(rt===!0)return De(U,G);if(d.isObject(rt))return rt}(E,M,z)}function Ge(E,M,z){let I=!1;return M.forEach(j=>{d.isFunction(E[j])?(I=!0,z[j]=E[j]):d.defined(z[j])&&delete z[j]}),I}function De(E,M){let z=M.type||"line";return ae[z](E)}let ee=new Map,Bt=E=>isNaN(E)||E<=0,St=E=>E.reduce(function(M,z){return M+=z.string},"");function r(E){if(E&&typeof E=="object"){let M=E.toString();return M==="[object HTMLImageElement]"||M==="[object HTMLCanvasElement]"}}function c(E,{x:M,y:z},I){I&&(E.translate(M,z),E.rotate(d.toRadians(I)),E.translate(-M,-z))}function y(E,M){if(M&&M.borderWidth)return E.lineCap=M.borderCapStyle,E.setLineDash(M.borderDash),E.lineDashOffset=M.borderDashOffset,E.lineJoin=M.borderJoinStyle,E.lineWidth=M.borderWidth,E.strokeStyle=M.borderColor,!0}function v(E,M){E.shadowColor=M.backgroundShadowColor,E.shadowBlur=M.shadowBlur,E.shadowOffsetX=M.shadowOffsetX,E.shadowOffsetY=M.shadowOffsetY}function D(E,M){let z=M.content;if(r(z))return{width:ue(z.width,M.width),height:ue(z.height,M.height)};let I=M.font,j=d.isArray(I)?I.map(ct=>d.toFont(ct)):[d.toFont(I)],U=M.textStrokeWidth,G=d.isArray(z)?z:[z],rt=G.join()+St(j)+U+(E._measureText?"-spriting":"");return ee.has(rt)||ee.set(rt,function(ct,st,pt,lt){ct.save();let vt=st.length,Lt=0,It=lt;for(let _t=0;_t<vt;_t++){let bt=pt[Math.min(_t,pt.length-1)];ct.font=bt.string;let Dt=st[_t];Lt=Math.max(Lt,ct.measureText(Dt).width+lt),It+=bt.lineHeight}return ct.restore(),{width:Lt,height:It}}(E,G,j,U)),ee.get(rt)}function F(E,M,z){let{x:I,y:j,width:U,height:G}=M;E.save(),v(E,z);let rt=y(E,z);E.fillStyle=z.backgroundColor,E.beginPath(),d.addRoundedRectPath(E,{x:I,y:j,w:U,h:G,radius:q(d.toTRBLCorners(z.borderRadius),0,Math.min(U,G)/2)}),E.closePath(),E.fill(),rt&&(E.shadowColor=z.borderShadowColor,E.stroke()),E.restore()}function Y(E,M,z){let I=z.content;if(r(I))return E.save(),E.globalAlpha=function(lt,vt){let Lt=d.isNumber(lt)?lt:vt;return d.isNumber(Lt)?at(Lt,0,1):1}(z.opacity,I.style.opacity),E.drawImage(I,M.x,M.y,M.width,M.height),void E.restore();let j=d.isArray(I)?I:[I],U=z.font,G=d.isArray(U)?U.map(lt=>d.toFont(lt)):[d.toFont(U)],rt=z.color,ct=d.isArray(rt)?rt:[rt],st=function(lt,vt){let{x:Lt,width:It}=lt,_t=vt.textAlign;return _t==="center"?Lt+It/2:_t==="end"||_t==="right"?Lt+It:Lt}(M,z),pt=M.y+z.textStrokeWidth/2;E.save(),E.textBaseline="middle",E.textAlign=z.textAlign,function(lt,vt){if(vt.textStrokeWidth>0)return lt.lineJoin="round",lt.miterLimit=2,lt.lineWidth=vt.textStrokeWidth,lt.strokeStyle=vt.textStrokeColor,!0}(E,z)&&function(lt,{x:vt,y:Lt},It,_t){lt.beginPath();let bt=0;It.forEach(function(Dt,Yt){let Qt=_t[Math.min(Yt,_t.length-1)],se=Qt.lineHeight;lt.font=Qt.string,lt.strokeText(Dt,vt,Lt+se/2+bt),bt+=se}),lt.stroke()}(E,{x:st,y:pt},j,G),function(lt,{x:vt,y:Lt},It,{fonts:_t,colors:bt}){let Dt=0;It.forEach(function(Yt,Qt){let se=bt[Math.min(Qt,bt.length-1)],de=_t[Math.min(Qt,_t.length-1)],le=de.lineHeight;lt.beginPath(),lt.font=de.string,lt.fillStyle=se,lt.fillText(Yt,vt,Lt+le/2+Dt),Dt+=le,lt.fill()})}(E,{x:st,y:pt},j,{fonts:G,colors:ct}),E.restore()}function nt(E,M,z,I){let{radius:j,options:U}=M,G=U.pointStyle,rt=U.rotation,ct=(rt||0)*d.RAD_PER_DEG;if(r(G))return E.save(),E.translate(z,I),E.rotate(ct),E.drawImage(G,-G.width/2,-G.height/2,G.width,G.height),void E.restore();Bt(j)||function(st,{x:pt,y:lt,radius:vt,rotation:Lt,style:It,rad:_t}){let bt,Dt,Yt,Qt;switch(st.beginPath(),It){default:st.arc(pt,lt,vt,0,d.TAU),st.closePath();break;case"triangle":st.moveTo(pt+Math.sin(_t)*vt,lt-Math.cos(_t)*vt),_t+=d.TWO_THIRDS_PI,st.lineTo(pt+Math.sin(_t)*vt,lt-Math.cos(_t)*vt),_t+=d.TWO_THIRDS_PI,st.lineTo(pt+Math.sin(_t)*vt,lt-Math.cos(_t)*vt),st.closePath();break;case"rectRounded":Qt=.516*vt,Yt=vt-Qt,bt=Math.cos(_t+d.QUARTER_PI)*Yt,Dt=Math.sin(_t+d.QUARTER_PI)*Yt,st.arc(pt-bt,lt-Dt,Qt,_t-d.PI,_t-d.HALF_PI),st.arc(pt+Dt,lt-bt,Qt,_t-d.HALF_PI,_t),st.arc(pt+bt,lt+Dt,Qt,_t,_t+d.HALF_PI),st.arc(pt-Dt,lt+bt,Qt,_t+d.HALF_PI,_t+d.PI),st.closePath();break;case"rect":if(!Lt){Yt=Math.SQRT1_2*vt,st.rect(pt-Yt,lt-Yt,2*Yt,2*Yt);break}_t+=d.QUARTER_PI;case"rectRot":bt=Math.cos(_t)*vt,Dt=Math.sin(_t)*vt,st.moveTo(pt-bt,lt-Dt),st.lineTo(pt+Dt,lt-bt),st.lineTo(pt+bt,lt+Dt),st.lineTo(pt-Dt,lt+bt),st.closePath();break;case"crossRot":_t+=d.QUARTER_PI;case"cross":bt=Math.cos(_t)*vt,Dt=Math.sin(_t)*vt,st.moveTo(pt-bt,lt-Dt),st.lineTo(pt+bt,lt+Dt),st.moveTo(pt+Dt,lt-bt),st.lineTo(pt-Dt,lt+bt);break;case"star":bt=Math.cos(_t)*vt,Dt=Math.sin(_t)*vt,st.moveTo(pt-bt,lt-Dt),st.lineTo(pt+bt,lt+Dt),st.moveTo(pt+Dt,lt-bt),st.lineTo(pt-Dt,lt+bt),_t+=d.QUARTER_PI,bt=Math.cos(_t)*vt,Dt=Math.sin(_t)*vt,st.moveTo(pt-bt,lt-Dt),st.lineTo(pt+bt,lt+Dt),st.moveTo(pt+Dt,lt-bt),st.lineTo(pt-Dt,lt+bt);break;case"line":bt=Math.cos(_t)*vt,Dt=Math.sin(_t)*vt,st.moveTo(pt-bt,lt-Dt),st.lineTo(pt+bt,lt+Dt);break;case"dash":st.moveTo(pt,lt),st.lineTo(pt+Math.cos(_t)*vt,lt+Math.sin(_t)*vt)}st.fill()}(E,{x:z,y:I,radius:j,rotation:rt,style:G,rad:ct})}let V={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function it(E,M,z){return M=typeof M=="number"?M:E.parse(M),d.isFinite(M)?E.getPixelForValue(M):z}function kt(E,M,z){let I=M[z];if(I||z==="scaleID")return I;let j=z.charAt(0),U=Object.values(E).filter(G=>G.axis&&G.axis===j);return U.length?U[0].id:j}function Et(E,M){if(E){let z=E.options.reverse;return{start:it(E,M.min,z?M.end:M.start),end:it(E,M.max,z?M.start:M.end)}}}function te(E,M){let{chartArea:z,scales:I}=E,j=I[kt(I,M,"xScaleID")],U=I[kt(I,M,"yScaleID")],G=z.width/2,rt=z.height/2;return j&&(G=it(j,M.xValue,j.left+j.width/2)),U&&(rt=it(U,M.yValue,U.top+U.height/2)),{x:G,y:rt}}function Le(E,M){let z=E.scales,I=z[kt(z,M,"xScaleID")],j=z[kt(z,M,"yScaleID")];if(!I&&!j)return{};let{left:U,right:G}=I||E.chartArea,{top:rt,bottom:ct}=j||E.chartArea,st=Ze(I,{min:M.xMin,max:M.xMax,start:U,end:G});U=st.start,G=st.end;let pt=Ze(j,{min:M.yMin,max:M.yMax,start:ct,end:rt});return rt=pt.start,ct=pt.end,{x:U,y:rt,x2:G,y2:ct,width:G-U,height:ct-rt,centerX:U+(G-U)/2,centerY:rt+(ct-rt)/2}}function ii(E,M){if(!Oe(M)){let z=Le(E,M),I=M.radius;I&&!isNaN(I)||(I=Math.min(z.width,z.height)/2,M.radius=I);let j=2*I,U=z.centerX+M.xAdjust,G=z.centerY+M.yAdjust;return{x:U-I,y:G-I,x2:U+I,y2:G+I,centerX:U,centerY:G,width:j,height:j,radius:I}}return function(z,I){let j=te(z,I),U=2*I.radius;return{x:j.x-I.radius+I.xAdjust,y:j.y-I.radius+I.yAdjust,x2:j.x+I.radius+I.xAdjust,y2:j.y+I.radius+I.yAdjust,centerX:j.x+I.xAdjust,centerY:j.y+I.yAdjust,radius:I.radius,width:U,height:U}}(E,M)}function Re(E,M){let{scales:z,chartArea:I}=E,j=z[M.scaleID],U={x:I.left,y:I.top,x2:I.right,y2:I.bottom};return j?function(G,rt,ct){let st=it(G,ct.value,NaN),pt=it(G,ct.endValue,st);G.isHorizontal()?(rt.x=st,rt.x2=pt):(rt.y=st,rt.y2=pt)}(j,U,M):function(G,rt,ct){for(let st of Object.keys(V)){let pt=G[kt(G,ct,st)];if(pt){let{min:lt,max:vt,start:Lt,end:It,startProp:_t,endProp:bt}=V[st],Dt=Et(pt,{min:ct[lt],max:ct[vt],start:pt[Lt],end:pt[It]});rt[_t]=Dt.start,rt[bt]=Dt.end}}}(z,U,M),U}function We(E,M){let z=Le(E,M);return z.initProperties=Ee(E,z,M),z.elements=[{type:"label",optionScope:"label",properties:Je(E,z,M),initProperties:z.initProperties}],z}function Ze(E,M){let z=Et(E,M)||M;return{start:Math.min(z.start,z.end),end:Math.max(z.start,z.end)}}function He(E,M){let{start:z,end:I,borderWidth:j}=E,{position:U,padding:{start:G,end:rt},adjust:ct}=M;return z+j/2+ct+Ae(I-j-z-G-rt-M.size,U)}function Je(E,M,z){let I=z.label;I.backgroundColor="transparent",I.callout.display=!1;let j=_e(I.position),U=d.toPadding(I.padding),G=D(E.ctx,I),rt=function({properties:lt,options:vt},Lt,It,_t){let{x:bt,x2:Dt,width:Yt}=lt;return He({start:bt,end:Dt,size:Yt,borderWidth:vt.borderWidth},{position:It.x,padding:{start:_t.left,end:_t.right},adjust:vt.label.xAdjust,size:Lt.width})}({properties:M,options:z},G,j,U),ct=function({properties:lt,options:vt},Lt,It,_t){let{y:bt,y2:Dt,height:Yt}=lt;return He({start:bt,end:Dt,size:Yt,borderWidth:vt.borderWidth},{position:It.y,padding:{start:_t.top,end:_t.bottom},adjust:vt.label.yAdjust,size:Lt.height})}({properties:M,options:z},G,j,U),st=G.width+U.width,pt=G.height+U.height;return{x:rt,y:ct,x2:rt+st,y2:ct+pt,width:st,height:pt,centerX:rt+st/2,centerY:ct+pt/2,rotation:I.rotation}}function Ne(E,M,z){let I=Math.cos(z),j=Math.sin(z),U=M.x,G=M.y;return{x:U+I*(E.x-U)-j*(E.y-G),y:G+j*(E.x-U)+I*(E.y-G)}}let si=["enter","leave"],wi=si.concat("click");function Di(E,M,z){if(E.listened)switch(M.type){case"mousemove":case"mouseout":return function(I,j,U){if(!I.moveListened)return;let G;G=j.type==="mousemove"?C(I,j,U.interaction):[];let rt=I.hovered;I.hovered=G;let ct={state:I,event:j},st=ve(ct,"leave",rt,G);return ve(ct,"enter",G,rt)||st}(E,M,z);case"click":return function(I,j,U){let G=I.listeners,rt=C(I,j,U.interaction),ct;for(let st of rt)ct=N(st.options.click||G.click,st,j)||ct;return ct}(E,M,z)}}function ve({state:E,event:M},z,I,j){let U;for(let G of I)j.indexOf(G)<0&&(U=N(G.options[z]||E.listeners[z],G,M)||U);return U}function N(E,M,z){return d.callback(E,[M.$context,z])===!0}let J=["afterDraw","beforeDraw"];function et(E,M,z){if(E.hooked){let I=M.options[z]||E.hooks[z];return d.callback(I,[M.$context])}}function ot(E,M,z){let I=function(U,G,rt){let ct=G.axis,st=G.id,pt=ct+"ScaleID",lt={min:d.valueOrDefault(G.min,Number.NEGATIVE_INFINITY),max:d.valueOrDefault(G.max,Number.POSITIVE_INFINITY)};for(let vt of rt)vt.scaleID===st?Pt(vt,G,["value","endValue"],lt):kt(U,vt,pt)===st&&Pt(vt,G,[ct+"Min",ct+"Max",ct+"Value"],lt);return lt}(E.scales,M,z),j=ut(M,I,"min","suggestedMin");j=ut(M,I,"max","suggestedMax")||j,j&&d.isFunction(M.handleTickRangeOptions)&&M.handleTickRangeOptions()}function ut(E,M,z,I){if(d.isFinite(M[z])&&!function(j,U,G){return d.defined(j[U])||d.defined(j[G])}(E.options,z,I)){let j=E[z]!==M[z];return E[z]=M[z],j}}function dt(E,M){for(let z of["scaleID","xScaleID","yScaleID"]){let I=kt(M,E,z);I&&!M[I]&&yt(E,z)&&console.warn(`No scale found with id '${I}' for annotation '${E.id}'`)}}function yt(E,M){if(M==="scaleID")return!0;let z=M.charAt(0);for(let I of["Min","Max","Value"])if(d.defined(E[z+I]))return!0;return!1}function Pt(E,M,z,I){for(let j of z){let U=E[j];if(d.defined(U)){let G=M.parse(U);I.min=Math.min(I.min,G),I.max=Math.max(I.max,G)}}}class Tt extends P.Element{inRange(M,z,I,j){let{x:U,y:G}=Ne({x:M,y:z},this.getCenterPoint(j),d.toRadians(-this.options.rotation));return Rt({x:U,y:G},this.getProps(["x","y","x2","y2"],j),I,this.options.borderWidth)}getCenterPoint(M){return Ot(this,M)}draw(M){M.save(),c(M,this.getCenterPoint(),this.options.rotation),F(M,this,this.options),M.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(M,z){return We(M,z)}}Tt.id="boxAnnotation",Tt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},Tt.defaultRoutes={borderColor:"color",backgroundColor:"color"},Tt.descriptors={label:{_fallback:!0}};let Ut=["left","bottom","top","right"];class zt extends P.Element{inRange(M,z,I,j){let{x:U,y:G}=Ne({x:M,y:z},this.getCenterPoint(j),d.toRadians(-this.rotation));return Rt({x:U,y:G},this.getProps(["x","y","x2","y2"],j),I,this.options.borderWidth)}getCenterPoint(M){return Ot(this,M)}draw(M){let z=this.options,I=!d.defined(this._visible)||this._visible;z.display&&z.content&&I&&(M.save(),c(M,this.getCenterPoint(),this.rotation),function(j,U){let{pointX:G,pointY:rt,options:ct}=U,st=ct.callout,pt=st&&st.display&&function(Dt,Yt){let Qt=Yt.position;return Ut.includes(Qt)?Qt:function(se,de){let{x:le,y:Kt,x2:Me,y2:me,width:Pe,height:S,pointX:O,pointY:B,centerX:h,centerY:p,rotation:f}=se,_={x:h,y:p},L=de.start,K=ue(Pe,L),gt=ue(S,L),wt=[le,le+K,le+K,Me],Mt=[Kt+gt,me,Kt,me],qt=[];for(let Gt=0;Gt<4;Gt++){let Zt=Ne({x:wt[Gt],y:Mt[Gt]},_,d.toRadians(f));qt.push({position:Ut[Gt],distance:d.distanceBetweenPoints(Zt,{x:O,y:B})})}return qt.sort((Gt,Zt)=>Gt.distance-Zt.distance)[0].position}(Dt,Yt)}(U,st);if(!pt||function(Dt,Yt,Qt){let{pointX:se,pointY:de}=Dt,le=Yt.margin,Kt=se,Me=de;return Qt==="left"?Kt+=le:Qt==="right"?Kt-=le:Qt==="top"?Me+=le:Qt==="bottom"&&(Me-=le),Dt.inRange(Kt,Me)}(U,st,pt))return;if(j.save(),j.beginPath(),!y(j,st))return j.restore();let{separatorStart:vt,separatorEnd:Lt}=function(Dt,Yt){let{x:Qt,y:se,x2:de,y2:le}=Dt,Kt=function(Pe,S){let{width:O,height:B,options:h}=Pe,p=h.callout.margin+h.borderWidth/2;return S==="right"?O+p:S==="bottom"?B+p:-p}(Dt,Yt),Me,me;return Yt==="left"||Yt==="right"?(Me={x:Qt+Kt,y:se},me={x:Me.x,y:le}):(Me={x:Qt,y:se+Kt},me={x:de,y:Me.y}),{separatorStart:Me,separatorEnd:me}}(U,pt),{sideStart:It,sideEnd:_t}=function(Dt,Yt,Qt){let{y:se,width:de,height:le,options:Kt}=Dt,Me=Kt.callout.start,me=function(O,B){let h=B.side;return O==="left"||O==="top"?-h:h}(Yt,Kt.callout),Pe,S;return Yt==="left"||Yt==="right"?(Pe={x:Qt.x,y:se+ue(le,Me)},S={x:Pe.x+me,y:Pe.y}):(Pe={x:Qt.x+ue(de,Me),y:Qt.y},S={x:Pe.x,y:Pe.y+me}),{sideStart:Pe,sideEnd:S}}(U,pt,vt);(st.margin>0||ct.borderWidth===0)&&(j.moveTo(vt.x,vt.y),j.lineTo(Lt.x,Lt.y)),j.moveTo(It.x,It.y),j.lineTo(_t.x,_t.y);let bt=Ne({x:G,y:rt},U.getCenterPoint(),d.toRadians(-U.rotation));j.lineTo(bt.x,bt.y),j.stroke(),j.restore()}(M,this),F(M,this,z),Y(M,function({x:j,y:U,width:G,height:rt,options:ct}){let st=ct.borderWidth/2,pt=d.toPadding(ct.padding);return{x:j+pt.left+st,y:U+pt.top+st,width:G-pt.left-pt.right-ct.borderWidth,height:rt-pt.top-pt.bottom-ct.borderWidth}}(this),z),M.restore())}resolveElementProperties(M,z){let I;if(Oe(z))I=te(M,z);else{let{centerX:G,centerY:rt}=Le(M,z);I={x:G,y:rt}}let j=d.toPadding(z.padding),U=function(G,rt,ct,st){let pt=rt.width+st.width+ct.borderWidth,lt=rt.height+st.height+ct.borderWidth,vt=_e(ct.position,"center"),Lt=ce(G.x,pt,ct.xAdjust,vt.x),It=ce(G.y,lt,ct.yAdjust,vt.y);return{x:Lt,y:It,x2:Lt+pt,y2:It+lt,width:pt,height:lt,centerX:Lt+pt/2,centerY:It+lt/2}}(I,D(M.ctx,z),z,j);return{initProperties:Ee(M,U,z),pointX:I.x,pointY:I.y,...U,rotation:z.rotation}}}function ce(E,M,z=0,I){return E-Ae(M,I)+z}zt.id="labelAnnotation",zt.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},zt.defaultRoutes={borderColor:"color"};let oe=(E,M,z)=>({x:E.x+z*(M.x-E.x),y:E.y+z*(M.y-E.y)}),Ce=(E,M,z)=>oe(M,z,Math.abs((E-M.y)/(z.y-M.y))).x,fe=(E,M,z)=>oe(M,z,Math.abs((E-M.x)/(z.x-M.x))).y,xe=E=>E*E,Te=(E,M,{x:z,y:I,x2:j,y2:U},G)=>G==="y"?{start:Math.min(I,U),end:Math.max(I,U),value:M}:{start:Math.min(z,j),end:Math.max(z,j),value:E},rs=(E,M,z,I)=>(1-I)*(1-I)*E+2*(1-I)*I*M+I*I*z,ci=(E,M,z,I)=>({x:rs(E.x,M.x,z.x,I),y:rs(E.y,M.y,z.y,I)}),di=(E,M,z,I)=>2*(1-I)*(M-E)+2*I*(z-M),Ki=(E,M,z,I)=>-Math.atan2(di(E.x,M.x,z.x,I),di(E.y,M.y,z.y,I))+.5*d.PI;class Be extends P.Element{inRange(M,z,I,j){let U=this.options.borderWidth/2;if(I!=="x"&&I!=="y"){let G={mouseX:M,mouseY:z},{path:rt,ctx:ct}=this;if(rt){y(ct,this.options);let{chart:st}=this.$context,pt=M*st.currentDevicePixelRatio,lt=z*st.currentDevicePixelRatio,vt=ct.isPointInStroke(rt,pt,lt)||_i(this,G,j);return ct.restore(),vt}return function(st,{mouseX:pt,mouseY:lt},vt=W,Lt){let{x:It,y:_t,x2:bt,y2:Dt}=st.getProps(["x","y","x2","y2"],Lt),Yt=bt-It,Qt=Dt-_t,se=xe(Yt)+xe(Qt),de=se===0?-1:((pt-It)*Yt+(lt-_t)*Qt)/se,le,Kt;return de<0?(le=It,Kt=_t):de>1?(le=bt,Kt=Dt):(le=It+de*Yt,Kt=_t+de*Qt),xe(pt-le)+xe(lt-Kt)<=vt}(this,G,xe(U),j)||_i(this,G,j)}return function(G,{mouseX:rt,mouseY:ct},st,{hBorderWidth:pt,useFinalPosition:lt}){let vt=Te(rt,ct,G.getProps(["x","y","x2","y2"],lt),st);return vt.value>=vt.start-pt&&vt.value<=vt.end+pt||_i(G,{mouseX:rt,mouseY:ct},lt,st)}(this,{mouseX:M,mouseY:z},I,{hBorderWidth:U,useFinalPosition:j})}getCenterPoint(M){return Ot(this,M)}draw(M){let{x:z,y:I,x2:j,y2:U,cp:G,options:rt}=this;if(M.save(),!y(M,rt))return M.restore();v(M,rt);let ct=Math.sqrt(Math.pow(j-z,2)+Math.pow(U-I,2));if(rt.curve&&G)return function(It,_t,bt,Dt){let{x:Yt,y:Qt,x2:se,y2:de,options:le}=_t,{startOpts:Kt,endOpts:Me,startAdjust:me,endAdjust:Pe}=Zi(_t),S={x:Yt,y:Qt},O={x:se,y:de},B=Ki(S,bt,O,0),h=Ki(S,bt,O,1)-d.PI,p=ci(S,bt,O,me/Dt),f=ci(S,bt,O,1-Pe/Dt),_=new Path2D;It.beginPath(),_.moveTo(p.x,p.y),_.quadraticCurveTo(bt.x,bt.y,f.x,f.y),It.shadowColor=le.borderShadowColor,It.stroke(_),_t.path=_,_t.ctx=It,Ji(It,p,{angle:B,adjust:me},Kt),Ji(It,f,{angle:h,adjust:Pe},Me)}(M,this,G,ct),M.restore();let{startOpts:st,endOpts:pt,startAdjust:lt,endAdjust:vt}=Zi(this),Lt=Math.atan2(U-I,j-z);M.translate(z,I),M.rotate(Lt),M.beginPath(),M.moveTo(0+lt,0),M.lineTo(ct-vt,0),M.shadowColor=rt.borderShadowColor,M.stroke(),Ui(M,0,lt,st),Ui(M,ct,-vt,pt),M.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(M,z){let I=Re(M,z),{x:j,y:U,x2:G,y2:rt}=I,ct=function({x:lt,y:vt,x2:Lt,y2:It},{top:_t,right:bt,bottom:Dt,left:Yt}){return!(lt<Yt&&Lt<Yt||lt>bt&&Lt>bt||vt<_t&&It<_t||vt>Dt&&It>Dt)}(I,M.chartArea),st=ct?function(lt,vt,Lt){let{x:It,y:_t}=ni(lt,vt,Lt),{x:bt,y:Dt}=ni(vt,lt,Lt);return{x:It,y:_t,x2:bt,y2:Dt,width:Math.abs(bt-It),height:Math.abs(Dt-_t)}}({x:j,y:U},{x:G,y:rt},M.chartArea):{x:j,y:U,x2:G,y2:rt,width:Math.abs(G-j),height:Math.abs(rt-U)};if(st.centerX=(G+j)/2,st.centerY=(rt+U)/2,st.initProperties=Ee(M,st,z),z.curve){let lt={x:st.x,y:st.y},vt={x:st.x2,y:st.y2};st.cp=function(Lt,It,_t){let{x:bt,y:Dt,x2:Yt,y2:Qt,centerX:se,centerY:de}=Lt,le=Math.atan2(Qt-Dt,Yt-bt),Kt=_e(It.controlPoint,0);return Ne({x:se+ue(_t,Kt.x,!1),y:de+ue(_t,Kt.y,!1)},{x:se,y:de},le)}(st,z,d.distanceBetweenPoints(lt,vt))}let pt=function(lt,vt,Lt){let It=Lt.borderWidth,_t=d.toPadding(Lt.padding),bt=D(lt.ctx,Lt),Dt=bt.width+_t.width+It,Yt=bt.height+_t.height+It;return function(Qt,se,de,le){let{width:Kt,height:Me,padding:me}=de,{xAdjust:Pe,yAdjust:S}=se,O={x:Qt.x,y:Qt.y},B={x:Qt.x2,y:Qt.y2},h=se.rotation==="auto"?function(Mt){let{x:qt,y:Gt,x2:Zt,y2:pe}=Mt,he=Math.atan2(pe-Gt,Zt-qt);return he>d.PI/2?he-d.PI:he<d.PI/-2?he+d.PI:he}(Qt):d.toRadians(se.rotation),p=function(Mt,qt,Gt){let Zt=Math.cos(Gt),pe=Math.sin(Gt);return{w:Math.abs(Mt*Zt)+Math.abs(qt*pe),h:Math.abs(Mt*pe)+Math.abs(qt*Zt)}}(Kt,Me,h),f=function(Mt,qt,Gt,Zt){let pe,he=function(oi,Qe){let{x:xi,x2:Ke,y:ri,y2:ze}=oi,fi=Math.min(ri,ze)-Qe.top,vi=Math.min(xi,Ke)-Qe.left,je=Qe.bottom-Math.max(ri,ze),$i=Qe.right-Math.max(xi,Ke);return{x:Math.min(vi,$i),y:Math.min(fi,je),dx:vi<=$i?1:-1,dy:fi<=je?1:-1}}(Mt,Zt);return pe=qt.position==="start"?ui({w:Mt.x2-Mt.x,h:Mt.y2-Mt.y},Gt,qt,he):qt.position==="end"?1-ui({w:Mt.x-Mt.x2,h:Mt.y-Mt.y2},Gt,qt,he):Ae(1,qt.position),pe}(Qt,se,{labelSize:p,padding:me},le),_=Qt.cp?ci(O,Qt.cp,B,f):oe(O,B,f),L={size:p.w,min:le.left,max:le.right,padding:me.left},K={size:p.h,min:le.top,max:le.bottom,padding:me.top},gt=gi(_.x,L)+Pe,wt=gi(_.y,K)+S;return{x:gt-Kt/2,y:wt-Me/2,x2:gt+Kt/2,y2:wt+Me/2,centerX:gt,centerY:wt,pointX:_.x,pointY:_.y,width:Kt,height:Me,rotation:d.toDegrees(h)}}(vt,Lt,{width:Dt,height:Yt,padding:_t},lt.chartArea)}(M,st,z.label);return pt._visible=ct,st.elements=[{type:"label",optionScope:"label",properties:pt,initProperties:st.initProperties}],st}}Be.id="lineAnnotation";let Ii={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};function ni({x:E,y:M},z,{top:I,right:j,bottom:U,left:G}){return E<G&&(M=fe(G,{x:E,y:M},z),E=G),E>j&&(M=fe(j,{x:E,y:M},z),E=j),M<I&&(E=Ce(I,{x:E,y:M},z),M=I),M>U&&(E=Ce(U,{x:E,y:M},z),M=U),{x:E,y:M}}function _i(E,{mouseX:M,mouseY:z},I,j){let U=E.label;return U.options.display&&U.inRange(M,z,j,I)}function ui(E,M,z,I){let{labelSize:j,padding:U}=M,G=E.w*I.dx,rt=E.h*I.dy,ct=G>0&&(j.w/2+U.left-I.x)/G,st=rt>0&&(j.h/2+U.top-I.y)/rt;return at(Math.max(ct,st),0,.25)}function gi(E,M){let{size:z,min:I,max:j,padding:U}=M,G=z/2;return z>j-I?(j+I)/2:(I>=E-U-G&&(E=I+U+G),j<=E+U+G&&(E=j-U-G),E)}function Zi(E){let M=E.options,z=M.arrowHeads&&M.arrowHeads.start,I=M.arrowHeads&&M.arrowHeads.end;return{startOpts:z,endOpts:I,startAdjust:$e(E,z),endAdjust:$e(E,I)}}function $e(E,M){if(!M||!M.display)return 0;let{length:z,width:I}=M,j=E.options.borderWidth/2,U={x:z,y:I+j};return Math.abs(Ce(0,U,{x:0,y:j}))}function Ui(E,M,z,I){if(!I||!I.display)return;let{length:j,width:U,fill:G,backgroundColor:rt,borderColor:ct}=I,st=Math.abs(M-j)+z;E.beginPath(),v(E,I),y(E,I),E.moveTo(st,-U),E.lineTo(M+z,0),E.lineTo(st,U),G===!0?(E.fillStyle=rt||ct,E.closePath(),E.fill(),E.shadowColor="transparent"):E.shadowColor=I.borderShadowColor,E.stroke()}function Ji(E,{x:M,y:z},{angle:I,adjust:j},U){U&&U.display&&(E.save(),E.translate(M,z),E.rotate(I),Ui(E,0,-j,U),E.restore())}Be.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Ii),fill:!1,length:12,start:Object.assign({},Ii),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},zt.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},Be.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}},Be.defaultRoutes={borderColor:"color"};class ji extends P.Element{inRange(M,z,I,j){let U=this.options.rotation,G=this.options.borderWidth;if(I!=="x"&&I!=="y")return function(It,_t,bt,Dt){let{width:Yt,height:Qt,centerX:se,centerY:de}=_t,le=Yt/2,Kt=Qt/2;if(le<=0||Kt<=0)return!1;let Me=d.toRadians(bt||0),me=Dt/2||0,Pe=Math.cos(Me),S=Math.sin(Me),O=Math.pow(Pe*(It.x-se)+S*(It.y-de),2),B=Math.pow(S*(It.x-se)-Pe*(It.y-de),2);return O/Math.pow(le+me,2)+B/Math.pow(Kt+me,2)<=1.0001}({x:M,y:z},this.getProps(["width","height","centerX","centerY"],j),U,G);let{x:rt,y:ct,x2:st,y2:pt}=this.getProps(["x","y","x2","y2"],j),lt=G/2,vt=I==="y"?{start:ct,end:pt}:{start:rt,end:st},Lt=Ne({x:M,y:z},this.getCenterPoint(j),d.toRadians(-U));return Lt[I]>=vt.start-lt-W&&Lt[I]<=vt.end+lt+W}getCenterPoint(M){return Ot(this,M)}draw(M){let{width:z,height:I,centerX:j,centerY:U,options:G}=this;M.save(),c(M,this.getCenterPoint(),G.rotation),v(M,this.options),M.beginPath(),M.fillStyle=G.backgroundColor;let rt=y(M,G);M.ellipse(j,U,I/2,z/2,d.PI/2,0,2*d.PI),M.fill(),rt&&(M.shadowColor=G.borderShadowColor,M.stroke()),M.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(M,z){return We(M,z)}}ji.id="ellipseAnnotation",ji.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:Object.assign({},Tt.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},ji.defaultRoutes={borderColor:"color",backgroundColor:"color"},ji.descriptors={label:{_fallback:!0}};class Pi extends P.Element{inRange(M,z,I,j){let{x:U,y:G,x2:rt,y2:ct,width:st}=this.getProps(["x","y","x2","y2","width"],j),pt=this.options.borderWidth;if(I!=="x"&&I!=="y")return function(Lt,It,_t,bt){if(!Lt||!It||_t<=0)return!1;let Dt=bt/2;return Math.pow(Lt.x-It.x,2)+Math.pow(Lt.y-It.y,2)<=Math.pow(_t+Dt,2)}({x:M,y:z},this.getCenterPoint(j),st/2,pt);let lt=pt/2,vt=I==="y"?{start:G,end:ct,value:z}:{start:U,end:rt,value:M};return vt.value>=vt.start-lt&&vt.value<=vt.end+lt}getCenterPoint(M){return Ot(this,M)}draw(M){let z=this.options,I=z.borderWidth;if(z.radius<.1)return;M.save(),M.fillStyle=z.backgroundColor,v(M,z);let j=y(M,z);nt(M,this,this.centerX,this.centerY),j&&!r(z.pointStyle)&&(M.shadowColor=z.borderShadowColor,M.stroke()),M.restore(),z.borderWidth=I}resolveElementProperties(M,z){let I=ii(M,z);return I.initProperties=Ee(M,I,z),I}}Pi.id="pointAnnotation",Pi.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},Pi.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Ie extends P.Element{inRange(M,z,I,j){if(I!=="x"&&I!=="y")return this.options.radius>=.1&&this.elements.length>1&&function(st,pt,lt,vt){let Lt=!1,It=st[st.length-1].getProps(["bX","bY"],vt);for(let _t of st){let bt=_t.getProps(["bX","bY"],vt);bt.bY>lt!=It.bY>lt&&pt<(It.bX-bt.bX)*(lt-bt.bY)/(It.bY-bt.bY)+bt.bX&&(Lt=!Lt),It=bt}return Lt}(this.elements,M,z,j);let U=Ne({x:M,y:z},this.getCenterPoint(j),d.toRadians(-this.options.rotation)),G=this.elements.map(st=>I==="y"?st.bY:st.bX),rt=Math.min(...G),ct=Math.max(...G);return U[I]>=rt&&U[I]<=ct}getCenterPoint(M){return Ot(this,M)}draw(M){let{elements:z,options:I}=this;M.save(),M.beginPath(),M.fillStyle=I.backgroundColor,v(M,I);let j=y(M,I),U=!0;for(let G of z)U?(M.moveTo(G.x,G.y),U=!1):M.lineTo(G.x,G.y);M.closePath(),M.fill(),j&&(M.shadowColor=I.borderShadowColor,M.stroke()),M.restore()}resolveElementProperties(M,z){let I=ii(M,z),{sides:j,rotation:U}=z,G=[],rt=2*d.PI/j,ct=U*d.RAD_PER_DEG;for(let st=0;st<j;st++,ct+=rt){let pt=Ai(I,z,ct);pt.initProperties=Ee(M,I,z),G.push(pt)}return I.elements=G,I}}function Ai({centerX:E,centerY:M},{radius:z,borderWidth:I},j){let U=I/2,G=Math.sin(j),rt=Math.cos(j),ct={x:E+G*z,y:M-rt*z};return{type:"point",optionScope:"point",properties:{x:ct.x,y:ct.y,centerX:ct.x,centerY:ct.y,bX:E+G*(z+U),bY:M-rt*(z+U)}}}Ie.id="polygonAnnotation",Ie.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},Ie.defaultRoutes={borderColor:"color",backgroundColor:"color"};let be={box:Tt,ellipse:ji,label:zt,line:Be,point:Pi,polygon:Ie};Object.keys(be).forEach(E=>{P.defaults.describe(`elements.${be[E].id}`,{_fallback:"plugins.annotation.common"})});let Ye={update:Object.assign},ts=wi.concat(J),ki=(E,M)=>d.isObject(M)?Oi(E,M):E,mi=E=>E==="color"||E==="font";function bi(E="line"){return be[E]?E:(console.warn(`Unknown annotation type: '${E}', defaulting to 'line'`),"line")}function Hi(E,M,z,I){let j=function(rt,ct,st){return st==="reset"||st==="none"||st==="resize"?Ye:new P.Animations(rt,ct)}(E,z.animations,I),U=M.annotations,G=function(rt,ct){let st=ct.length,pt=rt.length;if(pt<st){let lt=st-pt;rt.splice(pt,0,...new Array(lt))}else pt>st&&rt.splice(st,pt-st);return rt}(M.elements,U);for(let rt=0;rt<U.length;rt++){let ct=U[rt],st=Vi(G,rt,ct.type),pt=ct.setContext(ds(E,st,ct)),lt=st.resolveElementProperties(E,pt);lt.skip=pi(lt),"elements"in lt&&(yi(st,lt.elements,pt,j),delete lt.elements),d.defined(st.x)||Object.assign(st,lt),Object.assign(st,lt.initProperties),lt.options=Ri(pt),j.update(st,lt)}}function pi(E){return isNaN(E.x)||isNaN(E.y)}function yi(E,M,z,I){let j=E.elements||(E.elements=[]);j.length=M.length;for(let U=0;U<M.length;U++){let G=M[U],rt=G.properties,ct=Vi(j,U,G.type,G.initProperties),st=z[G.optionScope].override(G);rt.options=Ri(st),I.update(ct,rt)}}function Vi(E,M,z,I){let j=be[bi(z)],U=E[M];return U&&U instanceof j||(U=E[M]=new j,Object.assign(U,I)),U}function Ri(E){let M=be[bi(E.type)],z={};z.id=E.id,z.type=E.type,z.drawTime=E.drawTime,Object.assign(z,Oi(E,M.defaults),Oi(E,M.defaultRoutes));for(let I of ts)z[I]=E[I];return z}function Oi(E,M){let z={};for(let I of Object.keys(M)){let j=M[I],U=E[I];mi(I)&&d.isArray(U)?z[I]=U.map(G=>ki(G,j)):z[I]=ki(U,j)}return z}function ds(E,M,z){return M.$context||(M.$context=Object.assign(Object.create(E.getContext()),{element:M,id:z.id,type:"annotation"}))}let ge=new Map,Ue=wi.concat(J);var Ni={id:"annotation",version:"3.0.1",beforeRegister(){(function(E,M,z,I=!0){let j=z.split("."),U=0;for(let G of M.split(".")){let rt=j[U++];if(parseInt(G,10)<parseInt(rt,10))break;if(X(rt,G)){if(I)throw new Error(`${E} v${z} is not supported. v${M} or newer is required.`);return!1}}})("chart.js","4.0",P.Chart.version)},afterRegister(){P.Chart.register(be)},afterUnregister(){P.Chart.unregister(be)},beforeInit(E){ge.set(E,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(E,M,z){let I=ge.get(E).annotations=[],j=z.annotations;d.isObject(j)?Object.keys(j).forEach(U=>{let G=j[U];d.isObject(G)&&(G.id=U,I.push(G))}):d.isArray(j)&&I.push(...j),function(U,G){for(let rt of U)dt(rt,G)}(I,E.scales)},afterDataLimits(E,M){let z=ge.get(E);ot(E,M.scale,z.annotations.filter(I=>I.display&&I.adjustScaleRange))},afterUpdate(E,M,z){let I=ge.get(E);(function(j,U,G){U.listened=Ge(G,wi,U.listeners),U.moveListened=!1,U._getElements=C,si.forEach(rt=>{d.isFunction(G[rt])&&(U.moveListened=!0)}),U.listened&&U.moveListened||U.annotations.forEach(rt=>{!U.listened&&d.isFunction(rt.click)&&(U.listened=!0),U.moveListened||si.forEach(ct=>{d.isFunction(rt[ct])&&(U.listened=!0,U.moveListened=!0)})})})(0,I,z),Hi(E,I,z,M.mode),I.visibleElements=I.elements.filter(j=>!j.skip&&j.options.display),function(j,U,G){let rt=U.visibleElements;U.hooked=Ge(G,J,U.hooks),U.hooked||rt.forEach(ct=>{U.hooked||J.forEach(st=>{d.isFunction(ct.options[st])&&(U.hooked=!0)})})}(0,I,z)},beforeDatasetsDraw(E,M,z){we(E,"beforeDatasetsDraw",z.clip)},afterDatasetsDraw(E,M,z){we(E,"afterDatasetsDraw",z.clip)},beforeDraw(E,M,z){we(E,"beforeDraw",z.clip)},afterDraw(E,M,z){we(E,"afterDraw",z.clip)},beforeEvent(E,M,z){Di(ge.get(E),M.event,z)&&(M.changed=!0)},afterDestroy(E){ge.delete(E)},_getState:E=>ge.get(E),defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:E=>!Ue.includes(E)&&E!=="init",annotations:{_allKeys:!1,_fallback:(E,M)=>`elements.${be[bi(M.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:mi,_fallback:!0},_indexable:mi}},additionalOptionScopes:[""]};function we(E,M,z){let{ctx:I,chartArea:j}=E,U=ge.get(E);z&&d.clipArea(I,j);let G=function(rt,ct){let st=[];for(let pt of rt)if(pt.options.drawTime===ct&&st.push({element:pt,main:!0}),pt.elements&&pt.elements.length)for(let lt of pt.elements)lt.options.display&&lt.options.drawTime===ct&&st.push({element:lt});return st}(U.visibleElements,M).sort((rt,ct)=>rt.element.options.z-ct.element.options.z);for(let rt of G)es(I,j,U,rt);z&&d.unclipArea(I)}function es(E,M,z,I){let j=I.element;I.main?(et(z,j,"beforeDraw"),j.draw(E,M),et(z,j,"afterDraw")):j.draw(E,M)}return P.Chart.register(Ni),Ni});(function(P,d){typeof exports=="object"&&typeof module<"u"?d(exports,ys("chart.js"),ys("chart.js/helpers")):typeof define=="function"&&define.amd?define(["exports","chart.js","chart.js/helpers"],d):d((P=typeof globalThis<"u"?globalThis:P||self).ChartGauge={},P.Chart,P.Chart.helpers)})(void 0,function(P,d,m){"use strict";let C={needle:{radius:"10%",width:"15%",length:"80%"},valueLabel:{display:!0,font:void 0,formatter:Math.round,color:()=>"#FFF",backgroundColor:d.Chart.defaults.backgroundColor,borderColor:d.Chart.defaults.borderColor,borderWidth:0,borderRadius:5,padding:{top:5,right:5,bottom:5,left:5},offsetX:0,offsetY:0},animation:{animateRotate:!0,animateScale:!1},cutout:"50%",rotation:-90,circumference:180,value:0,minValue:0};class H extends d.DoughnutController{constructor(W,at){super(W,at),this.center=new d.ArcElement({}),this.values=[],this.valuePercent=0,this.previous=0,this.current=0}_updateMeta(){let W=this._cachedMeta,at=W._parsed;if(this.values=[],this.valuePercent=0,at.length===0)return W;let q=this.options,{value:Rt=0,minValue:Ot=0}=q,ft=at.length>0?at[at.length-1]:Ot+1;at.reduce((jt,Jt)=>(this.values.push(Jt-jt),Jt),Ot);let xt=ft-Ot;return this.valuePercent=Rt/xt,W}_getTranslation(){let W=this._cachedMeta.data[0];return W==null?{dx:0,dy:0}:{dx:W.x,dy:W.y}}_getAngle(W){let at=this.options,{rotation:q,circumference:Rt}=at;return m.toRadians(q+Rt*W)}_getSize(W){return m.toPercentage(W,this.outerRadius)*this.outerRadius}drawNeedle(){let W=this.options,{ctx:at}=this.chart,{needle:q}=W,{radius:Rt,width:Ot,length:ft}=q,{color:xt}=q,jt=this._getSize(Rt),Jt=this._getSize(Ot),ae=this._getSize(ft),{dx:Ae,dy:ue}=this._getTranslation(),_e=this._getAngle(this.center.endAngle);at.save(),at.translate(Ae,ue),at.rotate(_e),at.fillStyle=xt,at.beginPath(),at.ellipse(0,0,jt,jt,0,0,2*Math.PI),at.fill(),at.beginPath(),at.moveTo(-Jt/2,0),at.lineTo(0,-ae),at.lineTo(Jt/2,0),at.fill(),at.restore()}drawValueLabel(){let W=this.options,{valueLabel:at}=W;if(!at.display)return;let{ctx:q}=this.chart,{color:Rt,formatter:Ot,backgroundColor:ft,borderColor:xt,borderWidth:jt,borderRadius:Jt,padding:ae,offsetX:Ae,offsetY:ue}=at,_e=m.toFont(at.font),{value:Oe}=W,Ee=(Ot?Ot(Oe):Oe).toString();q.save(),q.textBaseline="middle",q.textAlign="center",q.font=_e.string;let{width:Ge}=q.measureText(Ee),{lineHeight:De}=_e,ee=1*De,Bt=-(ae.left+Ge/2)-jt,St=-(ae.top+ee/2)-jt,r=ae.left+Ge+ae.right+2*jt,c=ae.top+ee+ae.bottom+2*jt,{dx:y,dy:v}=this._getTranslation();y+=this._getSize(Ae),v+=this._getSize(ue),q.translate(y,v),q.fillStyle=ft,q.beginPath(),m.addRoundedRectPath(q,{x:Bt,y:St,w:r,h:c,radius:m.toTRBLCorners(Jt)}),q.closePath(),q.fill(),jt&&(q.strokeStyle=xt,q.lineWidth=jt,q.stroke()),m.renderText(q,Ee,0,.075*ee,_e,{textAlign:"center",textBaseline:"middle",color:Rt}),q.restore()}update(W){let at=W==="reset",q=this._updateMeta();at?(this.previous=0,this.current=0):(this.previous=this.current||0,this.current=this.valuePercent);let Rt=q._parsed;q._parsed=this.values,super.update(W),q._parsed=Rt}updateElements(W,at,q,Rt){let Ot=this._cachedMeta,ft=Ot._parsed;if(Ot._parsed=this.values,super.updateElements(W,at,q,Rt),Ot._parsed=ft,W.length===0)return;let xt=W[0];super.updateElement(this.center,void 0,{x:xt.x,y:xt.y,startAngle:this.previous,endAngle:this.current,circumference:0,outerRadius:100,innerRadius:0,options:{}},Rt)}draw(){super.draw(),this.values.length!==0&&(this.drawNeedle(),this.drawValueLabel())}}H.id="gauge",H.version="3.0.0",H.defaults=C,H.descriptors={_scriptable:X=>X!=="formatter"},H.overrides={aspectRatio:!1,layout:{padding:{top:10,bottom:80}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},d.Chart.register(H),d.Chart.register(d.ArcElement),P.GaugeController=H,Object.defineProperty(P,"__esModule",{value:!0})});var ei=class{static CACHE={};static accessToken(){return new URLSearchParams(window.location.search).get("access_token")}static async fetchGridLayout(d){try{let m=await fetch(new Request(`./grid-layout.json?name=${encodeURIComponent(d)}&access_token=${this.accessToken()}`),{cache:"no-store"});if(!m.ok)throw new Error(`DatastoreHelper.fetchGridLayout() - HTTP error, status = ${m.status}`);let C=await m.text(),H=JSON.parse(C);if(H.status===!1)throw new Error(`Dashboard "${d}" does not exist.`);return H}catch(m){console.error(m),alert(m.message)}}static async saveGridLayout(d,m){try{let C=await fetch(new Request(`./grid-layout.json?name=${encodeURIComponent(d)}&access_token=${this.accessToken()}`),{method:"PUT",body:JSON.stringify(m),cache:"no-store"});if(!C.ok)throw new Error(`DatastoreHelper.saveGridLayout() - HTTP error, status = ${C.status}`);let H=await C.text(),X=JSON.parse(H);if(X.status===!1)throw new Error(`Dashboard "${d}" does not exist.`);return alert(`Dashboard "${d}" successfully saved!`),X}catch(C){console.error(C),alert(C.message)}}static async fetchMonitoredDevices(){return this.fetchAndCache("monitored-devices.json")}static async fetchSupportedAttributes(){return this.fetchAndCache("supported-attributes.json")}static async fetchAndCache(d){return this.CACHE[d]!==void 0?this.CACHE[d]:(this.CACHE[d]=fetch(new Request(`./${d}?access_token=${this.accessToken()}`),{cache:"no-store"}).then(m=>{if(!m.ok)throw new Error(`DatastoreHelper.fetchAndCache(${d}) - HTTP error, status = ${m.status}`);return m.text()}).then(m=>JSON.parse(m)).catch(m=>{console.error(m),alert(m.message),reject(m)}),this.CACHE[d])}static async fetchDeviceData(d,m,C,H){let X={attr1:[],attr2:[]};try{let W=await fetch(new Request(`/local/wt_${d}_${H}.csv`),{cache:"no-store"});if(W.status==404)return X;if(!W.ok)throw new Error(`DatastoreHelper.fetchDeviceData() - HTTP error, status = ${W.status}`);let at=(await W.text()).split(`
`),q=at.shift().split(","),Rt=m=q.indexOf(m),Ot=C==null?0:q.indexOf(C);return at.forEach(ft=>{let xt=ft.split(",");X.attr1.push({x:parseInt(xt[0]*1e3),y:parseInt(xt[Rt])}),Ot!==0&&X.attr2.push({x:parseInt(xt[0]*1e3),y:parseInt(xt[Ot])})}),X}catch(W){console.error(W),alert(W.message)}}static async fetchAttributeData(d,m,C){let H={};for(let X of m){let W=await this.fetchDeviceData(X,d,void 0,C);H[`dev_${X}`]=W.attr1}return H}static async fetchHubInfo(){try{let d=await fetch(new Request(`./hub-info.json?access_token=${this.accessToken()}`),{cache:"no-store"});if(!d.ok)throw new Error(`DatastoreHelper.fetchHubInfo() - HTTP error, status = ${d.status}`);let m=await d.text();return JSON.parse(m)}catch(d){console.error(d),alert(d.message)}}};var Fn=class extends ke{static styles=Xe`
        :host {
            display: block;
            height: calc(100vh - 10px);
        }
    `;constructor(){if(super(),this.menuElm=void 0,this.gridElm=void 0,this.dialogElm=void 0,this.params=new URLSearchParams(window.location.search),this.name=this.params.get("name"),this.name===null)throw alert("Query parameter [name] is missing!"),new Error("Query parameter [name] is missing!");this.mobileView=window.innerWidth<768,window.addEventListener("resize",()=>{let d=window.innerWidth<768;this.mobileView!=d&&(this.mobileView=d,this.applyMobileView())})}render(){return re`
            <dashboard-grid name=${this.name}></dashboard-grid>
            <dashboard-menu
                @add=${this.showAddDialog}
                @compact=${this.compactPanels}
                @changeRefreshInterval=${this.changeRefreshInterval}
                @save=${this.saveDashboard}
            ></dashboard-menu>
            <dashboard-add-dialog @done=${this.addDashboardPanel}></dashboard-add-dialog>
        `}connectedCallback(){super.connectedCallback(),document.body.classList.remove("spinner")}async firstUpdated(){this.menuElm=this.renderRoot.querySelector("dashboard-menu"),this.gridElm=this.renderRoot.querySelector("dashboard-grid"),this.dialogElm=this.renderRoot.querySelector("dashboard-add-dialog");let d=await ei.fetchGridLayout(this.params.get("name")),m=d.refresh?parseInt(d.refresh):0,C=d.theme==="dark"?"dark":"light";d.panels.length===0&&(this.menuElm.open=!0),await this.gridElm.updateComplete,this.gridElm.init(d.panels),this.gridElm.setRefreshInterval(m),this.menuElm.refreshInterval=`${m}`,this.menuElm.setTheme(C),this.applyMobileView()}applyMobileView(){this.gridElm.applyMobileView(this.mobileView),this.menuElm.applyMobileView(this.mobileView)}async saveDashboard(){let d={refresh:this.menuElm.refreshInterval,theme:this.menuElm.theme,panels:this.gridElm.getPanelsConfig()};console.info("Saving dashboard to Hubitat",this.name,d),await ei.saveGridLayout(this.name,d)}showAddDialog(){this.dialogElm.setAttribute("open",!0)}compactPanels(){this.gridElm.compact()}addDashboardPanel(d){this.gridElm.addPanel(d.detail)}changeRefreshInterval(d){let m=parseInt(d.detail);this.gridElm.setRefreshInterval(m)}};var Wn=class extends ke{static styles=Xe`
        :host {
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
        }
        nav {
            box-sizing: border-box;
            position: absolute;
            top: 0;
            left: -15em;
            width: 15em;
            height: 100%;
            padding: 1em;
            background-color: var(--bg-color-darker);
            color: var(--text-color);
            box-shadow: 0 0 1em var(--shadow-color);
            border-right: 1px var(--border-color) solid;
            animation: hideme .3s;
        }
        :host([open]) nav {
            left: 0;
            animation: showme .3s;
        }
        @keyframes hideme {
            from { left: 0 }
            to { left: -15em }
        }
        @keyframes showme {
            from { left: -15em }
            to { left: 0px }
        }
        hr {
            border: 0;
            border-top: 1px var(--separator-color) solid;
            margin: 1em 0;
        }
        button {
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            border-radius: 5px;
            margin-bottom: 5px;
            padding: .5em 1em;
            cursor: pointer;
            display: block;
            width: 100%;
            text-align: left;
            box-shadow: 0 0 0.3em var(--shadow-color);
        }
        button:hover {
            background-color: var(--Blue);
            color: var(--Base3);
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-size: .85rem;
        }
        select {
            display: block;
            width: 100%;
            margin-bottom: 5px;
            padding: .5em;
            background-color: var(--bg-color-darker);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            border-radius: 5px;
        }
        select:focus, button:focus {
            outline: 1px var(--Blue) solid;
            border-color: var(--Blue)
        }
    `;static properties={open:{type:Boolean,reflect:!0},refreshInterval:{type:String,state:!0},startX:{type:Number,state:!0},mobileView:{type:Boolean,state:!0}};constructor(){super(),this.open=!1,this.refreshInterval="0";let d=new URLSearchParams(window.location.search);this.theme=d.get("theme")==="dark"?"dark":"light"}render(){return re`
            <nav>
                ${this.mobileView?ne:re`
                    <button @click=${this.addTile} title="Add a new dashboard tile"><b>+</b> Add dashboard tile</button>
                    <button @click=${this.compactTiles} title="Re-order dashboard tiles to fill any empty space">⋮⋮⋮ Compact space</button>
                    <hr>
                `}
                <label for="refreshInterval">Auto-refresh</label>
                <select id="refreshInterval" .value=${this.refreshInterval} @change=${this.changeRefreshInterval}>
                    <option value="0">no refresh</option>
                    <option value="5">every 5 minutes</option>
                    <option value="10">every 10 minutes</option>
                    <option value="30">every 30 minutes</option>
                    <option value="60">every hour</option>
                </select>
                <label for="theme">Theme</label>
                <select id="theme" .value=${this.theme} @change=${this.changeTheme}>
                    <option value="light">light</option>
                    <option value="dark">dark</option>
                </select>
                ${this.mobileView?ne:re`
                    <hr>
                    <button @click=${this.saveDashboard} title="Save current dashboard layout">✓ Save dashboard</button>
                `}
            </nav>
        `}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",d=>d.key==="`"&&(this.open=!this.open)),window.addEventListener("touchstart",d=>this.touchStart(d)),window.addEventListener("touchend",d=>this.touchEnd(d))}applyMobileView(d){this.mobileView=d}addTile(){this.dispatchEvent(new CustomEvent("add"))}compactTiles(){this.dispatchEvent(new CustomEvent("compact"))}saveDashboard(){this.dispatchEvent(new CustomEvent("save",{detail:{refresh:this.refresh}}))}changeRefreshInterval(d){this.refreshInterval=d.target.value,this.dispatchEvent(new CustomEvent("changeRefreshInterval",{detail:this.refreshInterval}))}changeTheme(d){this.setTheme(d.target.value)}setTheme(d){this.theme=d,this.dispatchEvent(new CustomEvent("changeTheme",{detail:this.theme})),document.documentElement.setAttribute("data-theme",this.theme);let m=new URLSearchParams(window.location.search);document.querySelector('meta[name="theme-color"]').setAttribute("content",d=="dark"?"#002b36":"#eee8d5"),document.querySelector('link[rel="manifest"]').setAttribute("href",`./app.webmanifest?access_token=${m.get("access_token")}&name=${encodeURIComponent(m.get("name"))}&theme=${d}`)}touchStart(d){this.startX=d.changedTouches[0].clientX}touchEnd(d){if(this.startX==null)return;let m=d.changedTouches[0].clientX,C=m-this.startX;if(!this.open&&this.startX<30&&C>50){this.open=!0;return}this.open&&m<30&&C<-50&&(this.open=!1)}};var Bn=class P extends ke{static styles=Xe`
        :host {
            display: none;
            position: fixed;
            width: 100%; height: 100%;
            top: 0; left: 0;
            background-color: rgba(0, 0, 0, 0.3);
            font-size: 0.84rem;
        }
        :host([open="true"]) {
            display: block;
        }
        .spinner:after {
            position: absolute;
            top: calc(50% - 0.5em);
            left: 0.5em;
            content: ' ';
            display: block;
            width: 1em;
            height: 1em;
            border-radius: 50%;
            border: 1px solid var(--text-color-darker);
            border-color: var(--text-color-darker) transparent var(--text-color-darker) transparent;
            animation: spinner 1.2s linear infinite;
        }

        @keyframes spinner {
            0% { transform: rotate(0deg) }
            100% { transform: rotate(360deg) }
        }
        article {
            box-sizing: border-box;
            display: block;
            position: absolute;
            top: -50%;
            left: 50%;
            transform: translate(-50%, -50%);
            min-width: 300px;
            background-color: var(--bg-color-darker);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            box-shadow: 0 0 1em var(--shadow-color);
            border-radius: 5px;
            padding: 0;
        }
        :host([open="true"]) article {
            animation: showme .5s;
            animation-fill-mode: forwards;
        }
        @keyframes showme {
            to { top: 50% }
        }
        header {
            text-align: center;
            font-weight: bold;
            padding: 1em;
        }
        section.modal-body {
            max-height: 70vh;
            overflow-y: auto;
            padding: 0 1em;
        }
        section.modal-body section {
            margin-bottom: 1em;
        }
        footer {
            padding: 1em;
            text-align: right;
        }
        footer button {
            padding: .5em 1em;
            cursor: pointer;
            margin-left: 1em;
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            border-radius: 5px;
            box-shadow: 0 0 0.3em var(--shadow-color);
        }
        footer button:hover {
            background-color: var(--Blue);
            color: var(--Base3);
        }
        label { display: block; margin-bottom: .3em }
        select {
            display: block;
        }
        input, select {
            box-sizing: border-box;
            display: block;
            width: 100%;
            background-color: var(--bg-color-darker);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            border-radius: 5px;
            padding: .5em;
            margin: 0;
        }
        input[type="checkbox"] {
            appearance: none;
            display: inline-block;
            margin: 0;
            background-color: var(--bg-color);
            border: 1px var(--border-color) solid;
            font: inherit;
            width: 1.15em;
            height: 1.15em;
            transform: translate(0, 3px);
            cursor: pointer;
        }
        input[type="checkbox"]:checked {
            background-color: var(--Blue)
        }
        input[type="checkbox"]:checked::before {
            content: "";
            display: block;
            width: calc(100% - 4px);
            height: calc(100% - 4px);
            margin: 2px;
            background-color: var(--Base3);
            clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
        }
        input:focus, select:focus, button:focus {
            outline: 1px var(--Blue) solid;
            border-color: var(--Blue)
        }
        input:user-invalid, select:user-invalid {
            border-color: var(--Red) !important;
        }
        aside {
            display: block;
            position: relative;
            background-color: var(--bg-color);
            color: var(--text-color-darker);
            border: 1px var(--border-color) solid;
            padding: .5em .5em .5em 2.3em;
        }
    `;static panels={"device-panel":"Device","attribute-panel":"Attribute","text-panel":"Text","iframe-panel":"Iframe","hub-info-panel":"Hub Info"};static properties={open:{type:Boolean,reflect:!0},title:{type:String,title:!0},type:{type:String,state:!0}};constructor(){super(),this.title="",this.type=void 0}render(){return setTimeout(()=>this.renderRoot.querySelector(".panel-config")?.addEventListener("suggestTitle",d=>this.suggestTitle(d)),0),re`
            <article role="dialog" aria-modal="true" aria-labelledby="d-title">
                <form @submit=${this.submit}>
                    <header id="d-title">Add dashboard tile</header>
                    <section class="modal-body">
                        <section>
                            <label for="title">Title title:</label>
                            <input type="text" id="title" .value=${this.title} autocomplete="off" @change=${d=>this.title=d.target.value} placeholder="[optional]">
                        </section>
                        <section>
                            <label for="type">Tile type:</label>
                            <select id="type" .value=${this.type} @change=${d=>this.type=d.target.value} required="true">
                                <option value=""></option>
                                ${Object.entries(P.panels).map(([d,m])=>re`
                                    <option value="${d}" .selected=${this.type===d}>${m}</option>
                                `)}
                            </select>
                        </section>
                        <section>
                            ${this.type?this.renderPanelConfig():ne}
                        </section>
                    </section>
                    <footer>
                        <button type="reset" @click=${this.close}>Cancel</button>
                        <button type="submit">Add tile</button>
                    </footer>
                </form>
            </article>
        `}renderPanelConfig(){return $n(`<${this.type}-config class="panel-config"></${this.type}-config>`)}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",d=>d.key==="Escape"&&this.close())}suggestTitle(d){this.title==""&&(this.title=d.detail)}updated(d){d.size==0||d.open===!0||setTimeout(()=>this.renderRoot.querySelector("#title").focus(),0)}resetForm(){this.title="",this.type=void 0}close(){this.resetForm(),this.open=!1}submit(d){d.preventDefault();let m=this.renderRoot.querySelector(".panel-config").decorateConfig({title:this.title,type:this.type});console.info("Adding panel with config",m),this.close(),this.resetForm(),this.dispatchEvent(new CustomEvent("done",{detail:m}))}};var Un=class extends ke{static styles=Xe`
        .grid-stack{position:relative}.grid-stack-rtl{direction:ltr}.grid-stack-rtl>.grid-stack-item{direction:rtl}.grid-stack-placeholder>.placeholder-content{background-color:rgba(0,0,0,.1);margin:0;position:absolute;width:auto;z-index:0!important}.grid-stack>.grid-stack-item{position:absolute;padding:0}.grid-stack>.grid-stack-item>.grid-stack-item-content{margin:0;position:absolute;width:auto;overflow-x:hidden;overflow-y:auto}.grid-stack>.grid-stack-item.size-to-content:not(.size-to-content-max)>.grid-stack-item-content{overflow-y:hidden}.grid-stack-item>.ui-resizable-handle{position:absolute;font-size:.1px;display:block;-ms-touch-action:none;touch-action:none}.grid-stack-item.ui-resizable-autohide>.ui-resizable-handle,.grid-stack-item.ui-resizable-disabled>.ui-resizable-handle{display:none}.grid-stack-item>.ui-resizable-ne,.grid-stack-item>.ui-resizable-nw,.grid-stack-item>.ui-resizable-se,.grid-stack-item>.ui-resizable-sw{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="%23666" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 20 20"><path d="m10 3 2 2H8l2-2v14l-2-2h4l-2 2"/></svg>');background-repeat:no-repeat;background-position:center}.grid-stack-item>.ui-resizable-ne{transform:translate(0,10px) rotate(45deg)}.grid-stack-item>.ui-resizable-sw{transform:rotate(45deg)}.grid-stack-item>.ui-resizable-nw{transform:translate(0,10px) rotate(-45deg)}.grid-stack-item>.ui-resizable-se{transform:rotate(-45deg)}.grid-stack-item>.ui-resizable-nw{cursor:nw-resize;width:20px;height:20px;top:0}.grid-stack-item>.ui-resizable-n{cursor:n-resize;height:10px;top:0;left:25px;right:25px}.grid-stack-item>.ui-resizable-ne{cursor:ne-resize;width:20px;height:20px;top:0}.grid-stack-item>.ui-resizable-e{cursor:e-resize;width:10px;top:15px;bottom:15px}.grid-stack-item>.ui-resizable-se{cursor:se-resize;width:20px;height:20px}.grid-stack-item>.ui-resizable-s{cursor:s-resize;height:10px;left:25px;bottom:0;right:25px}.grid-stack-item>.ui-resizable-sw{cursor:sw-resize;width:20px;height:20px}.grid-stack-item>.ui-resizable-w{cursor:w-resize;width:10px;top:15px;bottom:15px}.grid-stack-item.ui-draggable-dragging>.ui-resizable-handle{display:none!important}.grid-stack-item.ui-draggable-dragging{will-change:left,top;cursor:move}.grid-stack-item.ui-resizable-resizing{will-change:width,height}.ui-draggable-dragging,.ui-resizable-resizing{z-index:10000}.ui-draggable-dragging>.grid-stack-item-content,.ui-resizable-resizing>.grid-stack-item-content{box-shadow:1px 4px 6px rgba(0,0,0,.2);opacity:.8}.grid-stack-animate,.grid-stack-animate .grid-stack-item{transition:left .3s,top .3s,height .3s,width .3s}.grid-stack-animate .grid-stack-item.grid-stack-placeholder,.grid-stack-animate .grid-stack-item.ui-draggable-dragging,.grid-stack-animate .grid-stack-item.ui-resizable-resizing{transition:left 0s,top 0s,height 0s,width 0s}.grid-stack>.grid-stack-item[gs-y="0"]{top:0}.grid-stack>.grid-stack-item[gs-x="0"]{left:0}.gs-12>.grid-stack-item{width:8.333%}.gs-12>.grid-stack-item[gs-x="1"]{left:8.333%}.gs-12>.grid-stack-item[gs-w="2"]{width:16.667%}.gs-12>.grid-stack-item[gs-x="2"]{left:16.667%}.gs-12>.grid-stack-item[gs-w="3"]{width:25%}.gs-12>.grid-stack-item[gs-x="3"]{left:25%}.gs-12>.grid-stack-item[gs-w="4"]{width:33.333%}.gs-12>.grid-stack-item[gs-x="4"]{left:33.333%}.gs-12>.grid-stack-item[gs-w="5"]{width:41.667%}.gs-12>.grid-stack-item[gs-x="5"]{left:41.667%}.gs-12>.grid-stack-item[gs-w="6"]{width:50%}.gs-12>.grid-stack-item[gs-x="6"]{left:50%}.gs-12>.grid-stack-item[gs-w="7"]{width:58.333%}.gs-12>.grid-stack-item[gs-x="7"]{left:58.333%}.gs-12>.grid-stack-item[gs-w="8"]{width:66.667%}.gs-12>.grid-stack-item[gs-x="8"]{left:66.667%}.gs-12>.grid-stack-item[gs-w="9"]{width:75%}.gs-12>.grid-stack-item[gs-x="9"]{left:75%}.gs-12>.grid-stack-item[gs-w="10"]{width:83.333%}.gs-12>.grid-stack-item[gs-x="10"]{left:83.333%}.gs-12>.grid-stack-item[gs-w="11"]{width:91.667%}.gs-12>.grid-stack-item[gs-x="11"]{left:91.667%}.gs-12>.grid-stack-item[gs-w="12"]{width:100%}.gs-1>.grid-stack-item{width:100%}
        .gs-2>.grid-stack-item{width:50%}.gs-2>.grid-stack-item[gs-x="1"]{left:50%}.gs-2>.grid-stack-item[gs-w="2"]{width:100%}.gs-3>.grid-stack-item{width:33.333%}.gs-3>.grid-stack-item[gs-x="1"]{left:33.333%}.gs-3>.grid-stack-item[gs-w="2"]{width:66.667%}.gs-3>.grid-stack-item[gs-x="2"]{left:66.667%}.gs-3>.grid-stack-item[gs-w="3"]{width:100%}.gs-4>.grid-stack-item{width:25%}.gs-4>.grid-stack-item[gs-x="1"]{left:25%}.gs-4>.grid-stack-item[gs-w="2"]{width:50%}.gs-4>.grid-stack-item[gs-x="2"]{left:50%}.gs-4>.grid-stack-item[gs-w="3"]{width:75%}.gs-4>.grid-stack-item[gs-x="3"]{left:75%}.gs-4>.grid-stack-item[gs-w="4"]{width:100%}.gs-5>.grid-stack-item{width:20%}.gs-5>.grid-stack-item[gs-x="1"]{left:20%}.gs-5>.grid-stack-item[gs-w="2"]{width:40%}.gs-5>.grid-stack-item[gs-x="2"]{left:40%}.gs-5>.grid-stack-item[gs-w="3"]{width:60%}.gs-5>.grid-stack-item[gs-x="3"]{left:60%}.gs-5>.grid-stack-item[gs-w="4"]{width:80%}.gs-5>.grid-stack-item[gs-x="4"]{left:80%}.gs-5>.grid-stack-item[gs-w="5"]{width:100%}.gs-6>.grid-stack-item{width:16.667%}.gs-6>.grid-stack-item[gs-x="1"]{left:16.667%}.gs-6>.grid-stack-item[gs-w="2"]{width:33.333%}.gs-6>.grid-stack-item[gs-x="2"]{left:33.333%}.gs-6>.grid-stack-item[gs-w="3"]{width:50%}.gs-6>.grid-stack-item[gs-x="3"]{left:50%}.gs-6>.grid-stack-item[gs-w="4"]{width:66.667%}.gs-6>.grid-stack-item[gs-x="4"]{left:66.667%}.gs-6>.grid-stack-item[gs-w="5"]{width:83.333%}.gs-6>.grid-stack-item[gs-x="5"]{left:83.333%}.gs-6>.grid-stack-item[gs-w="6"]{width:100%}.gs-7>.grid-stack-item{width:14.286%}.gs-7>.grid-stack-item[gs-x="1"]{left:14.286%}.gs-7>.grid-stack-item[gs-w="2"]{width:28.571%}.gs-7>.grid-stack-item[gs-x="2"]{left:28.571%}.gs-7>.grid-stack-item[gs-w="3"]{width:42.857%}.gs-7>.grid-stack-item[gs-x="3"]{left:42.857%}.gs-7>.grid-stack-item[gs-w="4"]{width:57.143%}.gs-7>.grid-stack-item[gs-x="4"]{left:57.143%}.gs-7>.grid-stack-item[gs-w="5"]{width:71.429%}.gs-7>.grid-stack-item[gs-x="5"]{left:71.429%}.gs-7>.grid-stack-item[gs-w="6"]{width:85.714%}.gs-7>.grid-stack-item[gs-x="6"]{left:85.714%}.gs-7>.grid-stack-item[gs-w="7"]{width:100%}.gs-8>.grid-stack-item{width:12.5%}.gs-8>.grid-stack-item[gs-x="1"]{left:12.5%}.gs-8>.grid-stack-item[gs-w="2"]{width:25%}.gs-8>.grid-stack-item[gs-x="2"]{left:25%}.gs-8>.grid-stack-item[gs-w="3"]{width:37.5%}.gs-8>.grid-stack-item[gs-x="3"]{left:37.5%}.gs-8>.grid-stack-item[gs-w="4"]{width:50%}.gs-8>.grid-stack-item[gs-x="4"]{left:50%}.gs-8>.grid-stack-item[gs-w="5"]{width:62.5%}.gs-8>.grid-stack-item[gs-x="5"]{left:62.5%}.gs-8>.grid-stack-item[gs-w="6"]{width:75%}.gs-8>.grid-stack-item[gs-x="6"]{left:75%}.gs-8>.grid-stack-item[gs-w="7"]{width:87.5%}.gs-8>.grid-stack-item[gs-x="7"]{left:87.5%}.gs-8>.grid-stack-item[gs-w="8"]{width:100%}.gs-9>.grid-stack-item{width:11.111%}.gs-9>.grid-stack-item[gs-x="1"]{left:11.111%}.gs-9>.grid-stack-item[gs-w="2"]{width:22.222%}.gs-9>.grid-stack-item[gs-x="2"]{left:22.222%}.gs-9>.grid-stack-item[gs-w="3"]{width:33.333%}.gs-9>.grid-stack-item[gs-x="3"]{left:33.333%}.gs-9>.grid-stack-item[gs-w="4"]{width:44.444%}.gs-9>.grid-stack-item[gs-x="4"]{left:44.444%}.gs-9>.grid-stack-item[gs-w="5"]{width:55.556%}.gs-9>.grid-stack-item[gs-x="5"]{left:55.556%}.gs-9>.grid-stack-item[gs-w="6"]{width:66.667%}.gs-9>.grid-stack-item[gs-x="6"]{left:66.667%}.gs-9>.grid-stack-item[gs-w="7"]{width:77.778%}.gs-9>.grid-stack-item[gs-x="7"]{left:77.778%}.gs-9>.grid-stack-item[gs-w="8"]{width:88.889%}.gs-9>.grid-stack-item[gs-x="8"]{left:88.889%}.gs-9>.grid-stack-item[gs-w="9"]{width:100%}.gs-10>.grid-stack-item{width:10%}.gs-10>.grid-stack-item[gs-x="1"]{left:10%}.gs-10>.grid-stack-item[gs-w="2"]{width:20%}.gs-10>.grid-stack-item[gs-x="2"]{left:20%}.gs-10>.grid-stack-item[gs-w="3"]{width:30%}.gs-10>.grid-stack-item[gs-x="3"]{left:30%}.gs-10>.grid-stack-item[gs-w="4"]{width:40%}.gs-10>.grid-stack-item[gs-x="4"]{left:40%}.gs-10>.grid-stack-item[gs-w="5"]{width:50%}.gs-10>.grid-stack-item[gs-x="5"]{left:50%}.gs-10>.grid-stack-item[gs-w="6"]{width:60%}.gs-10>.grid-stack-item[gs-x="6"]{left:60%}.gs-10>.grid-stack-item[gs-w="7"]{width:70%}.gs-10>.grid-stack-item[gs-x="7"]{left:70%}.gs-10>.grid-stack-item[gs-w="8"]{width:80%}.gs-10>.grid-stack-item[gs-x="8"]{left:80%}.gs-10>.grid-stack-item[gs-w="9"]{width:90%}.gs-10>.grid-stack-item[gs-x="9"]{left:90%}.gs-10>.grid-stack-item[gs-w="10"]{width:100%}.gs-11>.grid-stack-item{width:9.091%}.gs-11>.grid-stack-item[gs-x="1"]{left:9.091%}.gs-11>.grid-stack-item[gs-w="2"]{width:18.182%}.gs-11>.grid-stack-item[gs-x="2"]{left:18.182%}.gs-11>.grid-stack-item[gs-w="3"]{width:27.273%}.gs-11>.grid-stack-item[gs-x="3"]{left:27.273%}.gs-11>.grid-stack-item[gs-w="4"]{width:36.364%}.gs-11>.grid-stack-item[gs-x="4"]{left:36.364%}.gs-11>.grid-stack-item[gs-w="5"]{width:45.455%}.gs-11>.grid-stack-item[gs-x="5"]{left:45.455%}.gs-11>.grid-stack-item[gs-w="6"]{width:54.545%}.gs-11>.grid-stack-item[gs-x="6"]{left:54.545%}.gs-11>.grid-stack-item[gs-w="7"]{width:63.636%}.gs-11>.grid-stack-item[gs-x="7"]{left:63.636%}.gs-11>.grid-stack-item[gs-w="8"]{width:72.727%}.gs-11>.grid-stack-item[gs-x="8"]{left:72.727%}.gs-11>.grid-stack-item[gs-w="9"]{width:81.818%}.gs-11>.grid-stack-item[gs-x="9"]{left:81.818%}.gs-11>.grid-stack-item[gs-w="10"]{width:90.909%}.gs-11>.grid-stack-item[gs-x="10"]{left:90.909%}.gs-11>.grid-stack-item[gs-w="11"]{width:100%}

        .grid-stack { min-height: 100% }
        .grid-stack-item-content {
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            border-radius: 5px;
            box-shadow: 0 0 0.3em var(--shadow-color);
        }
        .panel-container {
            width: 100%;
            height: 100%;
            position: relative;
            background-color: var(--bg-color-darker);
        }
        .panel-title {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translate(-50%, 0);
            background-color: transparent;
            text-align: center;
            padding: 0.2em 1em;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            user-select: none;
        }
        .grid-stack:not([mobile-view]) .panel-container:hover .panel-title {
            cursor: move;
            background-color: var(--bg-color);
            box-shadow: 0 0 0.3em var(--shadow-color);
            border: 1px var(--border-color) solid;
            border-radius: 0 0 5px 5px;
            border-top: 0;
        }
        .grid-stack-item-removing .panel-container {
            background-color: rgba(255, 0, 0, 0.3);
        }
        .spinner:after {
            position: absolute;
            top: calc(50% - 32px);
            left: calc(50% - 32px);
            content: ' ';
            display: block;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            border: 1px solid var(--text-color-darker);
            border-color: var(--text-color-darker) transparent var(--text-color-darker) transparent;
            animation: spinner 1.2s linear infinite;
        }
        @keyframes spinner {
            0% { transform: rotate(0deg) }
            100% { transform: rotate(360deg) }
        }
    `;static properties={name:{type:String,reflect:!0},mobileView:{type:Boolean,state:!0}};applyMobileView(d){this.mobileView=d,this.renderRoot.querySelectorAll(".panel").forEach(m=>m.mobileView=this.mobileView),this.grid.enableResize(!this.mobileView),this.grid.enableMove(!this.mobileView)}render(){return re`
            <div class="grid-stack spinner" mobile-view=${this.mobileView?"true":ne}></div>
        `}firstUpdated(){this.grid=GridStack.init({sizeToContent:!1,margin:5,float:!0,cellHeight:206,column:8,columnOpts:{layout:"move",columnMax:8,breakpointForWindow:!0,breakpoints:[{w:420,c:1},{w:800,c:2},{w:1024,c:4},{w:1366,c:6}]},handle:".panel-title",removable:!0,alwaysShowResizeHandle:!1},this.renderRoot.querySelector(".grid-stack"))}async init(d){d.length===0?this.addPanel({type:"text-panel",title:"Quick Instructions",message:`
                    <b>\u{1F60E} Welcome to your new dashboard!</b>
                    <ul>
                        <li>Press the backtick key (<b>\`</b>) on your keyboard to show or hide the left menu.
                        <li>Click the <b>Add dashboard tile</b> button to add new tiles to your dashboard.
                        <li>Rearrange tiles by dragging their titles.
                        <li>Resize tiles by dragging the bottom-right corner.
                        <li>Remove tiles by dragging them outside the dashboard grid.
                        <li>Tiles cannot be edited; remove and add them again if needed.
                        <li>Remember to click the <b>Save dashboard</b> button when you're happy with the layout (no auto-save).
                    </ul>
                    For more information, refer to the <a href="https://dan-danache.github.io/hubitat/watchtower-app/" target="_blank">official documentation</a>.
                    <br><br>
                    Enjoy customizing your dashboard!
                `},2,2,1,0):(this.grid.batchUpdate(!0),d.forEach(m=>{this.addPanel(m.config,m.w,m.h,m.x,m.y)}),this.grid.batchUpdate(!1)),this.renderRoot.querySelector(".grid-stack").classList.remove("spinner")}setRefreshInterval(d){this.interval&&clearInterval(this.interval),d!=0&&(this.interval=setInterval(()=>{this.renderRoot.querySelectorAll(".panel").forEach(m=>m.refresh())},d*60*1e3),console.info(`Setting auto-refresh timer for ${d} minutes`))}addPanel(d,m=2,C=1,H=void 0,X=void 0){let W=`
            <div class="panel-container">
                <${d.type} config='${JSON.stringify(d).replace(/'/g,"&apos;")}' class="panel empty spinner"></${d.type}>
                <div class="panel-title">${d.title||"&nbsp"}</div>
            </div>
        `;this.grid.addWidget({w:m,h:C,x:H,y:X,config:d,content:W})}compact(){this.grid.compact()}getPanelsConfig(){return this.grid.engine.nodes.map(d=>{let m=d.el.querySelector(".panel");return{w:d.w,h:d.h,x:d.x,y:d.y,config:m.decorateConfig(d.config)}})}};var jn=class P extends ke{static styles=Xe`
        ul {
            margin: 0;
            padding: 0;
            list-style: none;
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 1px var(--border-color) solid;
            border-bottom: 0;
            box-shadow: 0 0 0.3em var(--shadow-color);
            border-radius: 5px 5px 0 0;
            display: flex;
            user-select: none;
        }
        ul li {
            list-style-type: none;
            display: inline-block;
            margin: 0;
            padding: .4em 0;
            border-right: 1px var(--border-color) solid;
            cursor: pointer;
            width: 2.85em;
            text-align: center;
        }
        ul li:first-child { border-radius: 5px 0 0 0 }
        ul li:last-child { border: 0; border-radius: 0 5px 0 0 }
        ul li:hover {
            background-color: var(--bg-color-darker);
        }
        ul li[data-selected] {
            background-color: var(--Blue);
            color: var(--Base3);
        }
        .ui-resizable-handle { opacity:0 }
    `;static precisions={"5m":"View data with 5 minutes precision","1h":"View data with 1 hour precision","1d":"View data with 1 day precision","1w":"View data with 1 week precision"};static properties={precision:{type:Object,state:!0}};render(){return re`
            <nav><ul>
                ${Object.entries(P.precisions).map(([d,m])=>re`<li @click=${this.selectPrecision} data-selected=${this.precision==d?"true":ne} inert=${this.precision==d?"true":ne} title="${m}">${d}</li>`)}
            </ul></nav>
        `}selectPrecision(d){this.precision=d.target.textContent,this.dispatchEvent(new CustomEvent("change",{detail:this.precision}))}};var os=class P{static colors(){let d=getComputedStyle(document.documentElement);return{BgColor:d.getPropertyValue("--bg-color"),BgColorDarker:d.getPropertyValue("--bg-color-darker"),TextColor:d.getPropertyValue("--text-color"),TextColorDarker:d.getPropertyValue("--text-color-darker"),BorderColor:d.getPropertyValue("--border-color"),Yellow:d.getPropertyValue("--Yellow"),Orange:d.getPropertyValue("--Orange"),Red:d.getPropertyValue("--Red"),Magenta:d.getPropertyValue("--Magenta"),Violet:d.getPropertyValue("--Violet"),Blue:d.getPropertyValue("--Blue"),Cyan:d.getPropertyValue("--Cyan"),Green:d.getPropertyValue("--Green"),Gray:d.getPropertyValue("--Gray")}}static{let d=getComputedStyle(document.documentElement);P.chartColors=[d.getPropertyValue("--Red"),d.getPropertyValue("--Blue")]}};var Ei=class P{static defaultConfig(d){let m=os.colors();return{type:"line",options:{parsing:!1,normalized:!0,responsive:!0,maintainAspectRatio:!1,onResize:C=>P.updateChartType(C),animation:{duration:0,onComplete:({initial:C,chart:H})=>C?P.updateChartType(H):void 0},layout:{padding:{top:20,bottom:3}},stacked:!1,pointStyle:!1,scales:{x:{type:"time",time:{minUnit:"minute",displayFormats:{minute:"d LLL HH:mm",hour:"d LLL HH:mm",day:"d LLL"},tooltipFormat:"d LLL HH:mm"},title:{display:!1},ticks:{color:m.TextColorDarker,maxRotation:0,autoSkipPadding:15},grid:{color:m.TextColorDarker+"44"}}},interaction:{mode:"nearest",axis:"x",intersect:!1},plugins:{legend:{display:!1},tooltip:{itemSort:(C,H)=>H.raw.y-C.raw.y,callbacks:{label:C=>` ${C.dataset.label}: ${C.parsed.y}${C.dataset.unit}`},backgroundColor:m.BgColorDarker,titleColor:m.TextColor,bodyColor:m.TextColorDarker,borderColor:m.BorderColor,borderWidth:1},decimation:{enabled:!0,algorithm:"lttb"},zoom:{pan:{enabled:d!==!0,mode:"x"},zoom:{wheel:{enabled:!0},pinch:{enabled:d!==!0},mode:"x",onZoomComplete:({chart:C})=>P.updateChartType(C)},limits:{x:{min:"original",max:"original"}}}}},plugins:[P.crosshairPlugin(),P.toggleScaleVisibilityPlugin()]}}static crosshairPlugin(){let d=os.colors();return{id:"crosshair",afterInit:m=>{m.crosshair={x:0,y:0}},afterEvent:(m,C)=>{let{inChartArea:H}=C,{type:X,x:W,y:at}=C.event;m.crosshair={x:W,y:at,draw:H},m.draw()},beforeDatasetsDraw:m=>{let{ctx:C}=m,{top:H,bottom:X,left:W,right:at}=m.chartArea,{x:q,y:Rt,draw:Ot}=m.crosshair;Ot&&(C.save(),C.beginPath(),C.lineWidth=1,C.strokeStyle=d.TextColor,C.setLineDash([2,2]),C.moveTo(q,X),C.lineTo(q,H),C.stroke(),C.restore())}}}static toggleScaleVisibilityPlugin(){return{id:"toggleScaleVisibility",afterEvent:(d,m)=>{let C=m.event;if(m.inChartArea===!0||C.type!=="click"||d.data.datasets.length===1)return;let{x:H,y:X}=C,W=Object.entries(d.scales).filter(([Ot,ft])=>Ot!=="y"&&ft.axis==="y"&&ft.top<X&&ft.bottom>X&&ft.left<H&&ft.right>H).map(Ot=>Ot[0]);if(W.length===0)return;let at=d.data.datasets,q=W[0],Rt=at.findIndex(Ot=>Ot.yAxisID==q);d.getVisibleDatasetCount()===1?at.forEach((Ot,ft)=>d.setDatasetVisibility(ft,!0)):at.forEach((Ot,ft)=>d.setDatasetVisibility(ft,ft!==Rt)),d.update("none")}}}static updateChartType(d){if(d.scales.x===void 0||d.data.datasets[0]===void 0)return;let m=d.scales.x.min,C=d.scales.x.max,H=d.data.datasets[0].data,X=d.getZoomLevel()<=1?H.length:H.filter(at=>at.x>=m&&at.x<=C).length,W=d.width/X>30?"bar":"line";d.options.scales.x.offset=W=="bar",d.config.type!=W&&(d.config.type=W,d.update("none"))}static prettyName(d){return(d[0].toUpperCase()+d.slice(1)).replace(/([A-Z])(?=[A-Z][a-z])|([a-z])(?=[A-Z])/g,"$& ").replace("Hub ","")}};var Vn=class extends ke{static styles=Xe`
        :host {
            display: block;
            width: 100%;
            height: 100%;
        }
        canvas {
            width: 100%;
            height: 100%;
        }
        :host(.empty) canvas { visibility: hidden }
        precision-selector {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translate(-50%, 0);
            visibility: hidden;
        }
        :host(:hover) precision-selector {
            visibility: visible;
        }
        aside {
            position: absolute;
            top: 50%;
            left: 0;
            transform: translate(0, -50%);
            display: block;
            color: var(--text-color-darker);
            width: 100%;
            text-align: center;
        }
    `;static properties={config:{type:Object,reflect:!0},mobileView:{type:Boolean,state:!0},chart:{type:Object,state:!0},nodata:{type:Boolean,state:!0}};render(){return re`
            <canvas></canvas>
            <precision-selector @change=${this.changePrecision} .precision=${this.config.precision}></precision-selector>
            ${this.nodata===!0?re`<aside>No data yet</aside>`:ne}
        `}updated(d){d.mobileView!=this.mobileView&&(this.chart.options.plugins.zoom.pan.enabled=!this.mobileView,this.chart.options.plugins.zoom.zoom.pinch.enabled=!this.mobileView)}async connectedCallback(){super.connectedCallback(),this.config.precision===void 0&&(this.config.precision="5m");let d=await ei.fetchSupportedAttributes(),m=await ei.fetchDeviceData(this.config.dev,this.config.attr1,this.config.attr2,this.config.precision),C=os.colors();this.nodata=m.attr1.length==0;let H=[{label:Ei.prettyName(this.config.attr1),data:m.attr1,pointStyle:!1,backgroundColor:C.Green+"44",borderColor:C.Green,borderWidth:1.2,tension:.5,fill:"start",yAxisID:"attr1",unit:d[this.config.attr1].unit}];this.chart.options.scales.attr1={position:"left",display:!0,title:{display:!0,text:`${H[0].label} ${d[this.config.attr1].unit}`,color:C.Green},ticks:{color:C.TextColorDarker},grid:{color:C.TextColorDarker+"33"},suggestedMin:d[this.config.attr1].min,suggestedMax:d[this.config.attr1].max},this.config.attr2!==void 0&&(H.push({label:Ei.prettyName(this.config.attr2),data:m.attr2,pointStyle:!1,backgroundColor:C.Blue+"44",borderColor:C.Blue,borderWidth:1.2,tension:.5,fill:"start",yAxisID:"attr2",unit:d[this.config.attr2].unit}),this.chart.options.scales.attr2={position:"right",display:!0,title:{display:!0,text:`${H[1].label} ${d[this.config.attr2].unit}`,color:C.Blue},ticks:{color:C.TextColorDarker},grid:{drawOnChartArea:!1},min:d[this.config.attr2].min,max:d[this.config.attr2].max}),this.chart.data={datasets:H},Ei.updateChartType(this.chart),this.chart.update("none"),setTimeout(()=>this.classList.remove("empty","spinner"),200)}firstUpdated(){this.chart=new Chart(this.renderRoot.querySelector("canvas"),Ei.defaultConfig(this.mobileView)),this.chart.canvas.style.touchAction="pan-y"}async changePrecision(d){this.config.precision=d.detail,await this.refresh(),this.chart.resetZoom()}async refresh(){this.classList.add("spinner");let d=await ei.fetchDeviceData(this.config.dev,this.config.attr1,this.config.attr2,this.config.precision);console.log("refresh data",d),this.nodata=d.attr1.length==0,this.chart.data.datasets[0].data=d.attr1,this.config.attr2!==void 0&&(this.chart.data.datasets[1].data=d.attr2),this.chart.config.type=d.attr1.length<10?"bar":"line",this.chart.update("none"),Ei.updateChartType(this.chart),this.classList.remove("spinner")}decorateConfig(d){return{...d,...this.config}}},Yn=class extends ke{static properties={devices:{type:Object,state:!0},attributes:{type:Object,state:!0},device:{type:String,state:!0},attr1:{type:String,state:!0},attr2:{type:String,state:!0}};constructor(){super(),this.devices=void 0,this.attributes=void 0,this.dev=void 0,this.attr1=void 0,this.attr2=void 0}render(){return re`
            <label for="device">Select device:</label>
            ${this.devices?this.renderDevicesSelect():re`<aside class="spinner">Loading devices ...</aside>`}
            ${this.attributes?this.renderAttributesSelect():ne}
        `}connectedCallback(){super.connectedCallback(),ei.fetchMonitoredDevices().then(d=>{this.devices=d})}createRenderRoot(){return this}renderDevicesSelect(){return setTimeout(()=>this.renderRoot.querySelector("#device").focus(),0),re`
            <section>
                <select id="device" .value=${this.dev} @change=${this.onDeviceSelect} required="true">
                    <option value=""></option>
                    ${this.devices.map(d=>re`
                        <option value="${d.id}" .selected=${this.dev===d.id}>${d.name}</option>
                    `)}
                </select>
            </section>
        `}renderAttributesSelect(){return setTimeout(()=>this.renderRoot.querySelector("#attr1").focus(),0),re`
            <section>
                <label for="attr1">Select attribute to chart:</label>
                <select id="attr1" .value=${this.attr1} @change=${d=>this.attr1=d.target.value} required="true">
                    <option value=""></option>
                    ${this.attributes.filter(d=>d!=this.attr2).map(d=>re`
                        <option value="${d}" .selected=${this.attr1===d}>${d}</option>
                    `)}
                </select>
            </section>
            ${this.attr1!==void 0&&this.attributes.length>1?this.renderOptionalAttributesSelect():ne}
        `}renderOptionalAttributesSelect(){return setTimeout(()=>this.renderRoot.querySelector("#attr2").focus(),0),re`
            <section>
                <label for="attr2">Select additional attribute:</label>
                <select id="attr2" .value=${this.attr2} @change=${d=>this.attr2=d.target.value}>
                    <option value="">[optional]</option>
                    ${this.attributes.filter(d=>d!=this.attr1).map(d=>re`
                        <option value="${d}" .selected=${this.attr2===d}>${d}</option>
                    `)}
                </select>
            </section>
        `}onDeviceSelect(d){if(this.dev=d.target.value!==""?d.target.value:void 0,this.dev===void 0){this.attributes=void 0;return}let m=this.devices.find(C=>C.id==this.dev);this.attributes=m.attrs.sort(),this.dispatchEvent(new CustomEvent("suggestTitle",{detail:m.name}))}decorateConfig(d){return{...d,dev:this.dev,attr1:this.attr1,attr2:this.attr2,precision:"5m"}}};var qn=class extends ke{static styles=Xe`
       :host {
            display: block;
            width: 100%;
            height: 100%;
        }
        canvas {
            width: 100%;
            height: 100%;
        }
        :host(.empty) canvas { visibility: hidden }
        precision-selector {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translate(-50%, 0);
            visibility: hidden;
        }
        :host(:hover) precision-selector {
            visibility: visible;
        }
        aside {
            position: absolute;
            top: 50%;
            left: 0;
            transform: translate(0, -50%);
            display: block;
            color: var(--text-color-darker);
            width: 100%;
            text-align: center;
        }
    `;static properties={config:{type:Object,reflect:!0},mobileView:{type:Boolean,state:!0},chart:{type:Object,state:!0},nodata:{type:Boolean,state:!0}};render(){return re`
            <canvas></canvas>
            <precision-selector @change=${this.changePrecision} .precision=${this.config.precision}></precision-selector>
            ${this.nodata===!0?re`<aside>No data yet</aside>`:ne}
        `}updated(d){d.mobileView!=this.mobileView&&(this.chart.options.plugins.zoom.pan.enabled=!this.mobileView,this.chart.options.plugins.zoom.zoom.pinch.enabled=!this.mobileView)}async connectedCallback(){super.connectedCallback(),this.config.precision===void 0&&(this.config.precision="5m");let d=await ei.fetchSupportedAttributes(),m=await ei.fetchMonitoredDevices(),C=await ei.fetchAttributeData(this.config.attr,this.config.devs,this.config.precision),H=os.colors(),X=[];for(let at of this.config.devs)X.push({label:m.find(q=>q.id==at).name,data:C[`dev_${at}`],pointStyle:!1,borderWidth:1.2,tension:.5,unit:d[this.config.attr].unit,ref:`dev_${at}`});if(this.config.devs.length<=2)for(let at=0;at<this.config.devs.length;at++){let q=os.chartColors[at];X[at].fill="start",X[at].borderColor=q,X[at].backgroundColor=`${q}44`}let W=Ei.prettyName(this.config.attr);this.chart.options.scales.y={position:"left",display:!0,title:{display:!0,text:`${W} ${d[this.config.attr].unit}`,color:H.Green},ticks:{color:H.TextColorDarker},grid:{color:H.TextColorDarker+"33"},suggestedMin:d[this.config.attr].min,suggestedMax:d[this.config.attr].max},this.chart.data={datasets:X},Ei.updateChartType(this.chart),this.chart.update("none"),setTimeout(()=>this.classList.remove("empty","spinner"),200)}firstUpdated(){this.chart=new Chart(this.renderRoot.querySelector("canvas"),Ei.defaultConfig(this.mobileView)),this.chart.canvas.style.touchAction="pan-y"}async changePrecision(d){this.config.precision=d.detail,await this.refresh(),this.chart.resetZoom()}async refresh(){this.classList.add("spinner");let d=await ei.fetchAttributeData(this.config.attr,this.config.devs,this.config.precision);this.chart.data.datasets.forEach(m=>m.data=d[m.ref]),this.chart.update("none"),Ei.updateChartType(this.chart),this.classList.remove("spinner")}decorateConfig(d){return{...d,...this.config}}},Xn=class extends ke{static properties={devices:{type:Object,state:!0},attributes:{type:Object,state:!0},attr:{type:String,state:!0},devs:{type:Object,state:!0}};constructor(){super(),this.devices=void 0,this.attributes=void 0,this.attr=void 0,this.devs=[]}render(){return re`
            <label for="device">Select attribute to chart:</label>
            ${this.attributes?this.renderAttributesSelect():re`<aside class="spinner">Loading devices ...</aside>`}
            ${this.attr?this.renderDevicesSelect():ne}
        `}connectedCallback(){super.connectedCallback(),ei.fetchMonitoredDevices().then(d=>{this.devices=d;let m=new Set;d.forEach(C=>C.attrs.forEach(H=>m.add(H))),this.attributes=[...m].sort()})}createRenderRoot(){return this}renderAttributesSelect(){return setTimeout(()=>this.renderRoot.querySelector("#attr").focus(),0),re`
            <section>
                <select id="attr" .value=${this.attr} @change=${this.onAttributeSelect} required="true">
                    <option value=""></option>
                    ${this.attributes.map(d=>re`
                        <option value="${d}" .selected=${this.attr===d}>${d}</option>
                    `)}
                </select>
            </section>
        `}renderDevicesSelect(){let d=this.devices.filter(m=>m.attrs.includes(this.attr));return re`
            <section>
                <label>Select devices (at least one):</label>
                ${d.map(m=>re`<label><input value="${m.id}" type="checkbox"
                        required=${this.devs.length==0?"yes":ne}
                        @change=${this.onDeviceSelect}
                    > ${m.name}</label>`)}
            </section>
        `}onAttributeSelect(d){this.attr=d.target.value!==""?d.target.value:void 0,this.devs=[],this.attr&&this.dispatchEvent(new CustomEvent("suggestTitle",{detail:Ei.prettyName(this.attr)}))}onDeviceSelect(){this.devs=[...this.renderRoot.querySelectorAll('input[type="checkbox"]:checked')].map(d=>d.value)}decorateConfig(d){return{...d,attr:this.attr,devs:this.devs}}};var Gn=class extends ke{static styles=Xe`
        article {
            position: absolute;
            top: 50%;
            left: 50%;
            width: calc(100% - 2em);
            transform: translate(-50%, -50%);
        }
    `;static properties={config:{type:Object,reflect:!0}};render(){return re`<article>${$n(this.config.message)}</article>`}firstUpdated(){this.classList.remove("spinner")}decorateConfig(d){return d}refresh(){}},Qn=class extends ke{static properties={message:{type:String,state:!0}};constructor(){super(),this.message=""}render(){return re`
            <label for="message">Message to display:</label>
            <input type="text" id="message" required="true" placeholder="Enter text to display" autocomplete="off" @change=${d=>this.message=d.target.value}/>
        `}createRenderRoot(){return this}firstUpdated(){setTimeout(()=>this.renderRoot.querySelector("#message").focus(),0)}decorateConfig(d){return{...d,message:this.message}}};var Kn=class extends ke{static styles=Xe`
        iframe {
            background-color: transparent;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    `;static properties={config:{type:Object,reflect:!0}};render(){return re`<iframe src=${this.config.url} frameborder="0" allowtransparency="true">Failed to load iframe</iframe>`}firstUpdated(){this.classList.remove("spinner")}decorateConfig(d){return d}refresh(){this.renderRoot.querySelector("iframe").src+=""}},Zn=class extends ke{static properties={url:{type:String,state:!0}};constructor(){super(),this.url=""}render(){return re`
            <label for="url">URL to load:</label>
            <input type="url" id="url" required="true" type="url" pattern="https?://.+" placeholder="Enter URL to load" autocomplete="off" @change=${d=>this.url=d.target.value}/>
        `}createRenderRoot(){return this}firstUpdated(){setTimeout(()=>this.renderRoot.querySelector("#url").focus(),0)}decorateConfig(d){return{...d,url:this.url}}};var Jn=class extends ke{static styles=Xe`
        :host {
            display: block;
            width: 100%;
            height: 100%;
        }
        table {
            width: 100%;
            height: 100%;
            border-collapse: collapse;
            color: var(--text-color-darker);
            table-layout: fixed;
        }

        table tr:first-child td {
            height: 20px;
            padding: 0;
            border: 0;
        }

        table td {
            border-top: 1px var(--bg-color) solid;
            padding: 0 0.5em;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        table tr td:first-child {
            text-align: right;
            font-weight: bold;
        }
    `;static properties={hubInfo:{type:Object,state:!0},mobileView:{type:Boolean,state:!0}};render(){return this.hubInfo===void 0?ne:re`
            <table>
                <tbody>
                    <tr><td colspan="3"></td></tr>
                    <tr><td>Name</td><td colspan="2">${this.hubInfo.name}</td></tr>
                    <tr><td>IP</td><td colspan="2">${this.hubInfo.ip}</td></tr>
                    <tr><td>FW Ver</td><td colspan="2">${this.hubInfo.fw}</td></tr>
                    <tr><td>Model</td><td colspan="2">${this.hubInfo.model}</td></tr>
                    <tr><td>Reboot</td><td colspan="2">${this.hubInfo.reboot}</td></tr>
                </tbody>
            </table>
        `}async connectedCallback(){super.connectedCallback(),this.refresh()}async refresh(){this.hubInfo=await ei.fetchHubInfo();let d=new Chart._adapters._date({timeZone:"UTC"}),m=d.add(new Date,-this.hubInfo.uptime,"second");this.hubInfo.reboot=d.format(m,"Pp").replace(",",""),setTimeout(()=>this.classList.remove("empty","spinner"),200)}decorateConfig(d){return d}},to=class extends ke{render(){return re``}createRenderRoot(){return this}firstUpdated(){console.log("firstUpdated"),setTimeout(()=>this.dispatchEvent(new CustomEvent("suggestTitle",{detail:"Hub Information"})),200)}decorateConfig(d){return d}};customElements.define("watchtower-app",Fn);customElements.define("dashboard-menu",Wn);customElements.define("dashboard-add-dialog",Bn);customElements.define("dashboard-grid",Un);customElements.define("precision-selector",jn);customElements.define("device-panel",Vn);customElements.define("device-panel-config",Yn);customElements.define("attribute-panel",qn);customElements.define("attribute-panel-config",Xn);customElements.define("text-panel",Gn);customElements.define("text-panel-config",Qn);customElements.define("iframe-panel",Kn);customElements.define("iframe-panel-config",Zn);customElements.define("hub-info-panel",Jn);customElements.define("hub-info-panel-config",to);})();
